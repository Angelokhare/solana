{"version":3,"file":"exports-CDGmcewz.js","names":["__extends","d","b","__rest","t","p","s","e","i","__decorate","c","r","__param","__metadata","__awaiter","P","__generator","_","f","y","g","n","v","__createBinding","k","m","__exportStar","exports","__values","o","__read","ar","__spread","__spreadArrays","a","j","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","__classPrivateFieldGet","__classPrivateFieldSet","extendStatics","__assign","tslib_1","tslib_1","tslib_1","n","v","s","o","r","i","e","a","t","stringify","c","keys","base","base","r","stringify","p","m","keys","b","a","set","x","z","t","i","e","s","n","I","u","p","a","b","v","S","E","_","w","g","l","c","k","d","K","N","y","O","m","r","o","f","j","h","o","e","format","f","a","i","k","transmit","level","i","o","a","e","c","n","l","O","e","d","t","L","s","u","m","o","B","x","S","_","p","T","z","f","r","i","g","k","v","b","y","w","E","C","a","I","En","t","fe","e","De","gn","n","it","_t","de","Bn","r","he","Cn","o","s","a","u","i","D","l","c","wt","St","le","mn","_n","vn","In","Tn","Fn","Ln","Hn","zn","Mn","qn","kn","jn","Zn","Gn","x","Vn","Yn","P","Q","Jn","p","w","h","g","S","d","m","F","z","I","O","ot","tt","st","v","L","Ct","At","Kn","vt","be","Wn","It","Ut","Tt","Xn","Ft","K","we","Ee","Et","Nt","Lt","Qn","tr","er","nr","Ot","xe","M","N","Ht","Be","Ce","or","J","sr","ir","ur","cr","ar","fr","Dr","me","_e","Se","gt","zt","ve","Mt","dr","hr","qt","Ie","$t","lr","br","pr","G","yt","wr","Er","gr","yr","y","f","b","E","B","C","A","U","_","T","$","R","V","Y","Z","et","mt","se","ie","ue","ce","ae","Dn","dn","hn","pt","ee","un","cn","an","kt","Ue","xr","Te","Br","Cr","Ar","mr","_r","Sr","vr","Rt","jt","Zt","ut","Gt","xt","Vt","Yt","Jt","dt","Kt","Wt","Fe","Ne","Xt","Le","Oe","Ir","Tr","He","Fr","Nr","Lr","Or","ze","Hr","zr","Bt","ht","Mr","qr","k","$r","kr","Rr","jr","Zr","Gr","Vr","Yr","Jr","Kr","Wr","Xr","Pr","Do","Me","Bo","Co","Ao","$e","So","Io","Pt","Uo","ke","To","No","Lo","Oo","Ho","Mo","$o","je","Ze","Qt","Ro","jo","Ve","Vo","Ko","Ke","We","te","Pe","pn","bt","wn","en","nn","rn","on","sn","Po","i","l","from","ar","to","BrowserInfo","name","version","NodeInfo","SearchBotDeviceInfo","BotInfo","ReactNativeInfo","ii","name","e","i","name","length","base","ALPHABET","j","i","x","encode","length","decode","string","name","ii","o","fromString","toString","b","name","or","from","encode","decode","basex","alphabet","i","string","identity","from","toString","fromString","i","c","p","encode","decode","from","encode","decode","b","l","decode","varint","digest","varint.encodingLength","code","varint.decode","equals","a","b","equalBytes","name","code","encode","Digest.create","digest","name","Digest.create","code","version","Digest.create","digest","Digest.equals","base","Digest.decode","Digest.Digest","i","length","varint.decode","cid","varint.encodingLength","identityBase","base2","base8","base10","base16","base32","base36","base58","base64","base256emoji","sha2","identity","string","i","base","bases","string","base","bases","C","code","e","d","b","t","p","s","e","i","c","r","P","_","f","y","g","n","v","k","m","exports","o","ar","a","j","__assign","isNode","isNode","x","e","o","n","r","o","r","t","c","e","h","a","n","s","i","v","v","w","d","r","h","b","f","e","l","c","t","n","u","s","o","y","a","i","p","k","m","F","g","globalThis","e","name","i","decode","Response","exports","fetch","P","w","c","L","O","l","t","r","e","p","v","d","g","f","m","h","a","s","i","n","y","b","u","P","Big","x","n","e","i","s","y","j","k","l","a","b","bt","ri","ai","r","p","t","xe","ye","c","Big","a","b","ConstantsUtil","ConstantsUtil","n","e","t","c","l","f","i","u","a","s","g","p","y","h","w","o","r","O","x","version","getUntracked","v","e","entries","p","ConstantsUtil","w","e","ConstantsUtil","e","CommonConstants","r","c","a","b","set","version","baseUrl","ConstantsUtil","name","state","sub","subKey","state","ConstantsUtil","s","state","ConstantsUtil","subKey","state","subKey","api","state","sub","ConstantsUtil","baseUrl","state","subKey","w","a","b","d","r","state","subKey","state","sub","state","sub","subKey","ConstantsUtil","name","c","CommonConstantsUtil","s","e","r","o","d","t","P","M","O","J","V","ALPHABET","j","i","x","encode","length","decode","string","basex","e","je","t","me","sn","n","Ce","cn","r","o","s","i","J","an","un","we","it","fn","Se","ln","dn","hn","Ue","pn","gn","c","u","a","l","f","d","g","Lt","ht","F","cs","se","fs","pt","gt","ls","Cn","ps","Ee","Dn","ys","ms","yt","ws","Es","y","h","m","L","b","O","_","M","k","E","B","j","v","I","w","R","A","T","N","S","U","$","p","C","D","P","G","Z","he","pe","ge","ye","Ss","_s","mt","ie","ce","wt","Vs","ee","Hs","Et","qs","Gs","Ke","er","Ws","Js","xt","Ys","tr","Xs","Zs","Qs","ei","It","Ot","At","ti","Nt","Oe","_e","ni","nr","St","Le","Et","ke","Ct","te","cs","Nt","Ue","C","_e","kt","Me","$","Ce","Pe","Se","qt","r","t","s","i","n","o","a","c","h","u","d","l","b","x","I","D","j","T","J","K","H","me","g","_","e","Be","kt","Be","C","K","We","state","subKey","CommonConstantsUtil","state","sub","b","a","state","subKey","state","sub","state","sub","subKey","ConstantsUtil","to","state","sub","subKey","ConstantsUtil","f","CommonConstantsUtil","state","e","ConstantsUtil","name","state","accountState","ConstantsUtil","sub","subKey","string","i","r","g","b","create"],"sources":["../../@walletconnect/time/node_modules/tslib/tslib.es6.js","../../@walletconnect/time/dist/cjs/utils/delay.js","../../@walletconnect/time/dist/cjs/constants/misc.js","../../@walletconnect/time/dist/cjs/constants/time.js","../../@walletconnect/time/dist/cjs/constants/index.js","../../@walletconnect/time/dist/cjs/utils/convert.js","../../@walletconnect/time/dist/cjs/utils/index.js","../../@walletconnect/time/dist/cjs/watch.js","../../@walletconnect/time/dist/cjs/types/watch.js","../../@walletconnect/time/dist/cjs/types/index.js","../../@walletconnect/time/dist/cjs/index.js","../../@walletconnect/events/dist/esm/events.js","../../@walletconnect/heartbeat/dist/index.es.js","../../destr/dist/index.mjs","../../unstorage/dist/shared/unstorage.zVDD2mZo.mjs","../../unstorage/dist/index.mjs","../../idb-keyval/dist/index.js","../../@walletconnect/safe-json/dist/esm/index.js","../../@walletconnect/keyvaluestorage/dist/index.es.js","../../quick-format-unescaped/index.js","../../pino/browser.js","../../@walletconnect/logger/dist/index.es.js","../../@walletconnect/relay-auth/dist/index.es.js","../../detect-browser/es/index.js","../../@walletconnect/window-getters/dist/cjs/index.js","../../@walletconnect/window-metadata/dist/cjs/index.js","../../uint8arrays/esm/src/alloc.js","../../uint8arrays/esm/src/concat.js","../../multiformats/esm/vendor/base-x.js","../../multiformats/esm/src/bytes.js","../../multiformats/esm/src/bases/base.js","../../multiformats/esm/src/bases/identity.js","../../multiformats/esm/src/bases/base2.js","../../multiformats/esm/src/bases/base8.js","../../multiformats/esm/src/bases/base10.js","../../multiformats/esm/src/bases/base16.js","../../multiformats/esm/src/bases/base32.js","../../multiformats/esm/src/bases/base36.js","../../multiformats/esm/src/bases/base58.js","../../multiformats/esm/src/bases/base64.js","../../multiformats/esm/src/bases/base256emoji.js","../../multiformats/esm/vendor/varint.js","../../multiformats/esm/src/varint.js","../../multiformats/esm/src/hashes/digest.js","../../multiformats/esm/src/hashes/hasher.js","../../multiformats/esm/src/hashes/sha2-browser.js","../../multiformats/esm/src/hashes/identity.js","../../multiformats/esm/src/codecs/json.js","../../multiformats/esm/src/cid.js","../../multiformats/esm/src/basics.js","../../uint8arrays/esm/src/util/bases.js","../../uint8arrays/esm/src/from-string.js","../../uint8arrays/esm/src/to-string.js","../../@walletconnect/relay-api/dist/index.es.js","../../@walletconnect/jsonrpc-utils/dist/esm/constants.js","../../@walletconnect/jsonrpc-utils/dist/esm/error.js","../../@walletconnect/environment/node_modules/tslib/tslib.es6.js","../../@walletconnect/environment/dist/cjs/crypto.js","../../@walletconnect/environment/dist/cjs/env.js","../../@walletconnect/environment/dist/cjs/index.js","../../@walletconnect/jsonrpc-utils/dist/esm/env.js","../../@walletconnect/jsonrpc-utils/dist/esm/format.js","../../@walletconnect/jsonrpc-utils/dist/esm/routing.js","../../@walletconnect/jsonrpc-types/dist/index.es.js","../../@walletconnect/jsonrpc-utils/dist/esm/url.js","../../@walletconnect/jsonrpc-utils/dist/esm/validators.js","../../@walletconnect/jsonrpc-utils/dist/esm/index.js","../../@walletconnect/jsonrpc-provider/dist/index.es.js","../../@walletconnect/jsonrpc-ws-connection/node_modules/ws/browser.js","../../@walletconnect/jsonrpc-ws-connection/dist/index.es.js","../../@walletconnect/jsonrpc-http-connection/node_modules/cross-fetch/dist/browser-ponyfill.js","../../@walletconnect/jsonrpc-http-connection/dist/index.es.js","../../@reown/appkit-common/dist/esm/src/utils/NetworkUtil.js","../../big.js/big.mjs","../../@reown/appkit-common/dist/esm/src/utils/NumberUtil.js","../../@reown/appkit-common/dist/esm/src/contracts/erc20.js","../../@reown/appkit-common/dist/esm/src/contracts/swap.js","../../@reown/appkit-common/dist/esm/src/contracts/usdt.js","../../@reown/appkit-common/dist/esm/src/utils/ConstantsUtil.js","../../@reown/appkit-common/dist/esm/src/utils/ContractUtil.js","../../@reown/appkit-common/dist/esm/src/utils/SafeLocalStorage.js","../../@reown/appkit-common/dist/esm/src/utils/ThemeUtil.js","../../proxy-compare/dist/index.modern.js","../../valtio/esm/vanilla.mjs","../../valtio/esm/vanilla/utils.mjs","../../@reown/appkit-controllers/dist/esm/src/utils/ConstantsUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/StorageUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/CoreHelperUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/FetchUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/MobileWallet.js","../../@reown/appkit-controllers/dist/esm/src/controllers/AssetController.js","../../@reown/appkit-controllers/dist/esm/src/utils/AssetUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/OptionsUtil.js","../../@reown/appkit-controllers/dist/esm/src/controllers/OptionsController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/AlertController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/EventsController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ApiController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/RouterController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ThemeController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ConnectorController.js","../../@reown/appkit-controllers/dist/esm/src/utils/ConnectorControllerUtil.js","../../@reown/appkit-controllers/dist/esm/src/utils/ChainControllerUtil.js","../../@walletconnect/types/dist/index.es.js","../../@reown/appkit-controllers/node_modules/base-x/src/esm/index.js","../../@reown/appkit-controllers/node_modules/bs58/src/esm/index.js","../../@reown/appkit-controllers/node_modules/@walletconnect/utils/dist/index.es.js","../../@reown/appkit-controllers/node_modules/@walletconnect/core/dist/index.es.js","../../@reown/appkit-controllers/node_modules/@walletconnect/sign-client/dist/index.es.js","../../@reown/appkit-controllers/node_modules/@walletconnect/universal-provider/dist/index.es.js","../../@reown/appkit-wallet/dist/esm/src/W3mFrameConstants.js","../../@reown/appkit-controllers/dist/esm/src/controllers/SnackController.js","../../@reown/appkit-controllers/dist/esm/src/utils/SIWXUtil.js","../../@reown/appkit-controllers/dist/esm/src/controllers/TransactionsController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ConnectionController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/PublicStateController.js","../../viem/_esm/utils/unit/formatUnits.js","../../@reown/appkit-controllers/dist/esm/src/utils/ERC7811Util.js","../../@reown/appkit-controllers/dist/esm/src/utils/SendApiUtil.js","../../@reown/appkit-controllers/dist/esm/src/controllers/SendController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/BlockchainApiController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/AccountController.js","../../@reown/appkit-controllers/dist/esm/src/controllers/ModalController.js","../../@reown/appkit-scaffold-ui/dist/esm/src/utils/ConstantsUtil.js","../../@reown/appkit-ui/dist/esm/src/utils/ThemeUtil.js","../../@reown/appkit-ui/dist/esm/src/utils/UiHelperUtil.js","../../@reown/appkit-ui/dist/esm/src/utils/WebComponentsUtil.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.delay = void 0;\nfunction delay(timeout) {\n    return new Promise(resolve => {\n        setTimeout(() => {\n            resolve(true);\n        }, timeout);\n    });\n}\nexports.delay = delay;\n//# sourceMappingURL=delay.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ONE_THOUSAND = exports.ONE_HUNDRED = void 0;\nexports.ONE_HUNDRED = 100;\nexports.ONE_THOUSAND = 1000;\n//# sourceMappingURL=misc.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ONE_YEAR = exports.FOUR_WEEKS = exports.THREE_WEEKS = exports.TWO_WEEKS = exports.ONE_WEEK = exports.THIRTY_DAYS = exports.SEVEN_DAYS = exports.FIVE_DAYS = exports.THREE_DAYS = exports.ONE_DAY = exports.TWENTY_FOUR_HOURS = exports.TWELVE_HOURS = exports.SIX_HOURS = exports.THREE_HOURS = exports.ONE_HOUR = exports.SIXTY_MINUTES = exports.THIRTY_MINUTES = exports.TEN_MINUTES = exports.FIVE_MINUTES = exports.ONE_MINUTE = exports.SIXTY_SECONDS = exports.THIRTY_SECONDS = exports.TEN_SECONDS = exports.FIVE_SECONDS = exports.ONE_SECOND = void 0;\nexports.ONE_SECOND = 1;\nexports.FIVE_SECONDS = 5;\nexports.TEN_SECONDS = 10;\nexports.THIRTY_SECONDS = 30;\nexports.SIXTY_SECONDS = 60;\nexports.ONE_MINUTE = exports.SIXTY_SECONDS;\nexports.FIVE_MINUTES = exports.ONE_MINUTE * 5;\nexports.TEN_MINUTES = exports.ONE_MINUTE * 10;\nexports.THIRTY_MINUTES = exports.ONE_MINUTE * 30;\nexports.SIXTY_MINUTES = exports.ONE_MINUTE * 60;\nexports.ONE_HOUR = exports.SIXTY_MINUTES;\nexports.THREE_HOURS = exports.ONE_HOUR * 3;\nexports.SIX_HOURS = exports.ONE_HOUR * 6;\nexports.TWELVE_HOURS = exports.ONE_HOUR * 12;\nexports.TWENTY_FOUR_HOURS = exports.ONE_HOUR * 24;\nexports.ONE_DAY = exports.TWENTY_FOUR_HOURS;\nexports.THREE_DAYS = exports.ONE_DAY * 3;\nexports.FIVE_DAYS = exports.ONE_DAY * 5;\nexports.SEVEN_DAYS = exports.ONE_DAY * 7;\nexports.THIRTY_DAYS = exports.ONE_DAY * 30;\nexports.ONE_WEEK = exports.SEVEN_DAYS;\nexports.TWO_WEEKS = exports.ONE_WEEK * 2;\nexports.THREE_WEEKS = exports.ONE_WEEK * 3;\nexports.FOUR_WEEKS = exports.ONE_WEEK * 4;\nexports.ONE_YEAR = exports.ONE_DAY * 365;\n//# sourceMappingURL=time.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./misc\"), exports);\ntslib_1.__exportStar(require(\"./time\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fromMiliseconds = exports.toMiliseconds = void 0;\nconst constants_1 = require(\"../constants\");\nfunction toMiliseconds(seconds) {\n    return seconds * constants_1.ONE_THOUSAND;\n}\nexports.toMiliseconds = toMiliseconds;\nfunction fromMiliseconds(miliseconds) {\n    return Math.floor(miliseconds / constants_1.ONE_THOUSAND);\n}\nexports.fromMiliseconds = fromMiliseconds;\n//# sourceMappingURL=convert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./delay\"), exports);\ntslib_1.__exportStar(require(\"./convert\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Watch = void 0;\nclass Watch {\n    constructor() {\n        this.timestamps = new Map();\n    }\n    start(label) {\n        if (this.timestamps.has(label)) {\n            throw new Error(`Watch already started for label: ${label}`);\n        }\n        this.timestamps.set(label, { started: Date.now() });\n    }\n    stop(label) {\n        const timestamp = this.get(label);\n        if (typeof timestamp.elapsed !== \"undefined\") {\n            throw new Error(`Watch already stopped for label: ${label}`);\n        }\n        const elapsed = Date.now() - timestamp.started;\n        this.timestamps.set(label, { started: timestamp.started, elapsed });\n    }\n    get(label) {\n        const timestamp = this.timestamps.get(label);\n        if (typeof timestamp === \"undefined\") {\n            throw new Error(`No timestamp found for label: ${label}`);\n        }\n        return timestamp;\n    }\n    elapsed(label) {\n        const timestamp = this.get(label);\n        const elapsed = timestamp.elapsed || Date.now() - timestamp.started;\n        return elapsed;\n    }\n}\nexports.Watch = Watch;\nexports.default = Watch;\n//# sourceMappingURL=watch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IWatch = void 0;\nclass IWatch {\n}\nexports.IWatch = IWatch;\n//# sourceMappingURL=watch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./watch\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./utils\"), exports);\ntslib_1.__exportStar(require(\"./watch\"), exports);\ntslib_1.__exportStar(require(\"./types\"), exports);\ntslib_1.__exportStar(require(\"./constants\"), exports);\n//# sourceMappingURL=index.js.map","export class IEvents {\n}\n//# sourceMappingURL=events.js.map","import{EventEmitter as a}from\"events\";import{FIVE_SECONDS as o,toMiliseconds as l}from\"@walletconnect/time\";import{IEvents as v}from\"@walletconnect/events\";class n extends v{constructor(e){super()}}const s=o,r={pulse:\"heartbeat_pulse\"};class i extends n{constructor(e){super(e),this.events=new a,this.interval=s,this.interval=e?.interval||s}static async init(e){const t=new i(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),l(this.interval))}pulse(){this.events.emit(r.pulse)}}export{r as HEARTBEAT_EVENTS,s as HEARTBEAT_INTERVAL,i as HeartBeat,n as IHeartBeat};\n//# sourceMappingURL=index.es.js.map\n","const suspectProtoRx = /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/;\nconst suspectConstructorRx = /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/;\nconst JsonSigRx = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nfunction jsonParseTransform(key, value) {\n  if (key === \"__proto__\" || key === \"constructor\" && value && typeof value === \"object\" && \"prototype\" in value) {\n    warnKeyDropped(key);\n    return;\n  }\n  return value;\n}\nfunction warnKeyDropped(key) {\n  console.warn(`[destr] Dropping \"${key}\" key to prevent prototype pollution.`);\n}\nfunction destr(value, options = {}) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (value[0] === '\"' && value[value.length - 1] === '\"' && value.indexOf(\"\\\\\") === -1) {\n    return value.slice(1, -1);\n  }\n  const _value = value.trim();\n  if (_value.length <= 9) {\n    switch (_value.toLowerCase()) {\n      case \"true\": {\n        return true;\n      }\n      case \"false\": {\n        return false;\n      }\n      case \"undefined\": {\n        return void 0;\n      }\n      case \"null\": {\n        return null;\n      }\n      case \"nan\": {\n        return Number.NaN;\n      }\n      case \"infinity\": {\n        return Number.POSITIVE_INFINITY;\n      }\n      case \"-infinity\": {\n        return Number.NEGATIVE_INFINITY;\n      }\n    }\n  }\n  if (!JsonSigRx.test(value)) {\n    if (options.strict) {\n      throw new SyntaxError(\"[destr] Invalid JSON\");\n    }\n    return value;\n  }\n  try {\n    if (suspectProtoRx.test(value) || suspectConstructorRx.test(value)) {\n      if (options.strict) {\n        throw new Error(\"[destr] Possible prototype pollution\");\n      }\n      return JSON.parse(value, jsonParseTransform);\n    }\n    return JSON.parse(value);\n  } catch (error) {\n    if (options.strict) {\n      throw error;\n    }\n    return value;\n  }\n}\nfunction safeDestr(value, options = {}) {\n  return destr(value, { ...options, strict: true });\n}\n\nexport { destr as default, destr, safeDestr };\n","function wrapToPromise(value) {\n  if (!value || typeof value.then !== \"function\") {\n    return Promise.resolve(value);\n  }\n  return value;\n}\nfunction asyncCall(function_, ...arguments_) {\n  try {\n    return wrapToPromise(function_(...arguments_));\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\nfunction isPrimitive(value) {\n  const type = typeof value;\n  return value === null || type !== \"object\" && type !== \"function\";\n}\nfunction isPureObject(value) {\n  const proto = Object.getPrototypeOf(value);\n  return !proto || proto.isPrototypeOf(Object);\n}\nfunction stringify(value) {\n  if (isPrimitive(value)) {\n    return String(value);\n  }\n  if (isPureObject(value) || Array.isArray(value)) {\n    return JSON.stringify(value);\n  }\n  if (typeof value.toJSON === \"function\") {\n    return stringify(value.toJSON());\n  }\n  throw new Error(\"[unstorage] Cannot stringify value!\");\n}\nconst BASE64_PREFIX = \"base64:\";\nfunction serializeRaw(value) {\n  if (typeof value === \"string\") {\n    return value;\n  }\n  return BASE64_PREFIX + base64Encode(value);\n}\nfunction deserializeRaw(value) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (!value.startsWith(BASE64_PREFIX)) {\n    return value;\n  }\n  return base64Decode(value.slice(BASE64_PREFIX.length));\n}\nfunction base64Decode(input) {\n  if (globalThis.Buffer) {\n    return Buffer.from(input, \"base64\");\n  }\n  return Uint8Array.from(\n    globalThis.atob(input),\n    (c) => c.codePointAt(0)\n  );\n}\nfunction base64Encode(input) {\n  if (globalThis.Buffer) {\n    return Buffer.from(input).toString(\"base64\");\n  }\n  return globalThis.btoa(String.fromCodePoint(...input));\n}\n\nconst storageKeyProperties = [\n  \"has\",\n  \"hasItem\",\n  \"get\",\n  \"getItem\",\n  \"getItemRaw\",\n  \"set\",\n  \"setItem\",\n  \"setItemRaw\",\n  \"del\",\n  \"remove\",\n  \"removeItem\",\n  \"getMeta\",\n  \"setMeta\",\n  \"removeMeta\",\n  \"getKeys\",\n  \"clear\",\n  \"mount\",\n  \"unmount\"\n];\nfunction prefixStorage(storage, base) {\n  base = normalizeBaseKey(base);\n  if (!base) {\n    return storage;\n  }\n  const nsStorage = { ...storage };\n  for (const property of storageKeyProperties) {\n    nsStorage[property] = (key = \"\", ...args) => (\n      // @ts-ignore\n      storage[property](base + key, ...args)\n    );\n  }\n  nsStorage.getKeys = (key = \"\", ...arguments_) => storage.getKeys(base + key, ...arguments_).then((keys) => keys.map((key2) => key2.slice(base.length)));\n  nsStorage.keys = nsStorage.getKeys;\n  nsStorage.getItems = async (items, commonOptions) => {\n    const prefixedItems = items.map(\n      (item) => typeof item === \"string\" ? base + item : { ...item, key: base + item.key }\n    );\n    const results = await storage.getItems(prefixedItems, commonOptions);\n    return results.map((entry) => ({\n      key: entry.key.slice(base.length),\n      value: entry.value\n    }));\n  };\n  nsStorage.setItems = async (items, commonOptions) => {\n    const prefixedItems = items.map((item) => ({\n      key: base + item.key,\n      value: item.value,\n      options: item.options\n    }));\n    return storage.setItems(prefixedItems, commonOptions);\n  };\n  return nsStorage;\n}\nfunction normalizeKey(key) {\n  if (!key) {\n    return \"\";\n  }\n  return key.split(\"?\")[0]?.replace(/[/\\\\]/g, \":\").replace(/:+/g, \":\").replace(/^:|:$/g, \"\") || \"\";\n}\nfunction joinKeys(...keys) {\n  return normalizeKey(keys.join(\":\"));\n}\nfunction normalizeBaseKey(base) {\n  base = normalizeKey(base);\n  return base ? base + \":\" : \"\";\n}\nfunction filterKeyByDepth(key, depth) {\n  if (depth === void 0) {\n    return true;\n  }\n  let substrCount = 0;\n  let index = key.indexOf(\":\");\n  while (index > -1) {\n    substrCount++;\n    index = key.indexOf(\":\", index + 1);\n  }\n  return substrCount <= depth;\n}\nfunction filterKeyByBase(key, base) {\n  if (base) {\n    return key.startsWith(base) && key[key.length - 1] !== \"$\";\n  }\n  return key[key.length - 1] !== \"$\";\n}\n\nexport { normalizeKey as a, asyncCall as b, filterKeyByBase as c, stringify as d, deserializeRaw as e, filterKeyByDepth as f, joinKeys as j, normalizeBaseKey as n, prefixStorage as p, serializeRaw as s };\n","import destr from 'destr';\nimport { n as normalizeBaseKey, a as normalizeKey, b as asyncCall, f as filterKeyByDepth, c as filterKeyByBase, s as serializeRaw, d as stringify, e as deserializeRaw, j as joinKeys } from './shared/unstorage.zVDD2mZo.mjs';\nexport { p as prefixStorage } from './shared/unstorage.zVDD2mZo.mjs';\n\nfunction defineDriver(factory) {\n  return factory;\n}\n\nconst DRIVER_NAME = \"memory\";\nconst memory = defineDriver(() => {\n  const data = /* @__PURE__ */ new Map();\n  return {\n    name: DRIVER_NAME,\n    getInstance: () => data,\n    hasItem(key) {\n      return data.has(key);\n    },\n    getItem(key) {\n      return data.get(key) ?? null;\n    },\n    getItemRaw(key) {\n      return data.get(key) ?? null;\n    },\n    setItem(key, value) {\n      data.set(key, value);\n    },\n    setItemRaw(key, value) {\n      data.set(key, value);\n    },\n    removeItem(key) {\n      data.delete(key);\n    },\n    getKeys() {\n      return [...data.keys()];\n    },\n    clear() {\n      data.clear();\n    },\n    dispose() {\n      data.clear();\n    }\n  };\n});\n\nfunction createStorage(options = {}) {\n  const context = {\n    mounts: { \"\": options.driver || memory() },\n    mountpoints: [\"\"],\n    watching: false,\n    watchListeners: [],\n    unwatch: {}\n  };\n  const getMount = (key) => {\n    for (const base of context.mountpoints) {\n      if (key.startsWith(base)) {\n        return {\n          base,\n          relativeKey: key.slice(base.length),\n          driver: context.mounts[base]\n        };\n      }\n    }\n    return {\n      base: \"\",\n      relativeKey: key,\n      driver: context.mounts[\"\"]\n    };\n  };\n  const getMounts = (base, includeParent) => {\n    return context.mountpoints.filter(\n      (mountpoint) => mountpoint.startsWith(base) || includeParent && base.startsWith(mountpoint)\n    ).map((mountpoint) => ({\n      relativeBase: base.length > mountpoint.length ? base.slice(mountpoint.length) : void 0,\n      mountpoint,\n      driver: context.mounts[mountpoint]\n    }));\n  };\n  const onChange = (event, key) => {\n    if (!context.watching) {\n      return;\n    }\n    key = normalizeKey(key);\n    for (const listener of context.watchListeners) {\n      listener(event, key);\n    }\n  };\n  const startWatch = async () => {\n    if (context.watching) {\n      return;\n    }\n    context.watching = true;\n    for (const mountpoint in context.mounts) {\n      context.unwatch[mountpoint] = await watch(\n        context.mounts[mountpoint],\n        onChange,\n        mountpoint\n      );\n    }\n  };\n  const stopWatch = async () => {\n    if (!context.watching) {\n      return;\n    }\n    for (const mountpoint in context.unwatch) {\n      await context.unwatch[mountpoint]();\n    }\n    context.unwatch = {};\n    context.watching = false;\n  };\n  const runBatch = (items, commonOptions, cb) => {\n    const batches = /* @__PURE__ */ new Map();\n    const getBatch = (mount) => {\n      let batch = batches.get(mount.base);\n      if (!batch) {\n        batch = {\n          driver: mount.driver,\n          base: mount.base,\n          items: []\n        };\n        batches.set(mount.base, batch);\n      }\n      return batch;\n    };\n    for (const item of items) {\n      const isStringItem = typeof item === \"string\";\n      const key = normalizeKey(isStringItem ? item : item.key);\n      const value = isStringItem ? void 0 : item.value;\n      const options2 = isStringItem || !item.options ? commonOptions : { ...commonOptions, ...item.options };\n      const mount = getMount(key);\n      getBatch(mount).items.push({\n        key,\n        value,\n        relativeKey: mount.relativeKey,\n        options: options2\n      });\n    }\n    return Promise.all([...batches.values()].map((batch) => cb(batch))).then(\n      (r) => r.flat()\n    );\n  };\n  const storage = {\n    // Item\n    hasItem(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      return asyncCall(driver.hasItem, relativeKey, opts);\n    },\n    getItem(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      return asyncCall(driver.getItem, relativeKey, opts).then(\n        (value) => destr(value)\n      );\n    },\n    getItems(items, commonOptions = {}) {\n      return runBatch(items, commonOptions, (batch) => {\n        if (batch.driver.getItems) {\n          return asyncCall(\n            batch.driver.getItems,\n            batch.items.map((item) => ({\n              key: item.relativeKey,\n              options: item.options\n            })),\n            commonOptions\n          ).then(\n            (r) => r.map((item) => ({\n              key: joinKeys(batch.base, item.key),\n              value: destr(item.value)\n            }))\n          );\n        }\n        return Promise.all(\n          batch.items.map((item) => {\n            return asyncCall(\n              batch.driver.getItem,\n              item.relativeKey,\n              item.options\n            ).then((value) => ({\n              key: item.key,\n              value: destr(value)\n            }));\n          })\n        );\n      });\n    },\n    getItemRaw(key, opts = {}) {\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (driver.getItemRaw) {\n        return asyncCall(driver.getItemRaw, relativeKey, opts);\n      }\n      return asyncCall(driver.getItem, relativeKey, opts).then(\n        (value) => deserializeRaw(value)\n      );\n    },\n    async setItem(key, value, opts = {}) {\n      if (value === void 0) {\n        return storage.removeItem(key);\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (!driver.setItem) {\n        return;\n      }\n      await asyncCall(driver.setItem, relativeKey, stringify(value), opts);\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async setItems(items, commonOptions) {\n      await runBatch(items, commonOptions, async (batch) => {\n        if (batch.driver.setItems) {\n          return asyncCall(\n            batch.driver.setItems,\n            batch.items.map((item) => ({\n              key: item.relativeKey,\n              value: stringify(item.value),\n              options: item.options\n            })),\n            commonOptions\n          );\n        }\n        if (!batch.driver.setItem) {\n          return;\n        }\n        await Promise.all(\n          batch.items.map((item) => {\n            return asyncCall(\n              batch.driver.setItem,\n              item.relativeKey,\n              stringify(item.value),\n              item.options\n            );\n          })\n        );\n      });\n    },\n    async setItemRaw(key, value, opts = {}) {\n      if (value === void 0) {\n        return storage.removeItem(key, opts);\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (driver.setItemRaw) {\n        await asyncCall(driver.setItemRaw, relativeKey, value, opts);\n      } else if (driver.setItem) {\n        await asyncCall(driver.setItem, relativeKey, serializeRaw(value), opts);\n      } else {\n        return;\n      }\n      if (!driver.watch) {\n        onChange(\"update\", key);\n      }\n    },\n    async removeItem(key, opts = {}) {\n      if (typeof opts === \"boolean\") {\n        opts = { removeMeta: opts };\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      if (!driver.removeItem) {\n        return;\n      }\n      await asyncCall(driver.removeItem, relativeKey, opts);\n      if (opts.removeMeta || opts.removeMata) {\n        await asyncCall(driver.removeItem, relativeKey + \"$\", opts);\n      }\n      if (!driver.watch) {\n        onChange(\"remove\", key);\n      }\n    },\n    // Meta\n    async getMeta(key, opts = {}) {\n      if (typeof opts === \"boolean\") {\n        opts = { nativeOnly: opts };\n      }\n      key = normalizeKey(key);\n      const { relativeKey, driver } = getMount(key);\n      const meta = /* @__PURE__ */ Object.create(null);\n      if (driver.getMeta) {\n        Object.assign(meta, await asyncCall(driver.getMeta, relativeKey, opts));\n      }\n      if (!opts.nativeOnly) {\n        const value = await asyncCall(\n          driver.getItem,\n          relativeKey + \"$\",\n          opts\n        ).then((value_) => destr(value_));\n        if (value && typeof value === \"object\") {\n          if (typeof value.atime === \"string\") {\n            value.atime = new Date(value.atime);\n          }\n          if (typeof value.mtime === \"string\") {\n            value.mtime = new Date(value.mtime);\n          }\n          Object.assign(meta, value);\n        }\n      }\n      return meta;\n    },\n    setMeta(key, value, opts = {}) {\n      return this.setItem(key + \"$\", value, opts);\n    },\n    removeMeta(key, opts = {}) {\n      return this.removeItem(key + \"$\", opts);\n    },\n    // Keys\n    async getKeys(base, opts = {}) {\n      base = normalizeBaseKey(base);\n      const mounts = getMounts(base, true);\n      let maskedMounts = [];\n      const allKeys = [];\n      let allMountsSupportMaxDepth = true;\n      for (const mount of mounts) {\n        if (!mount.driver.flags?.maxDepth) {\n          allMountsSupportMaxDepth = false;\n        }\n        const rawKeys = await asyncCall(\n          mount.driver.getKeys,\n          mount.relativeBase,\n          opts\n        );\n        for (const key of rawKeys) {\n          const fullKey = mount.mountpoint + normalizeKey(key);\n          if (!maskedMounts.some((p) => fullKey.startsWith(p))) {\n            allKeys.push(fullKey);\n          }\n        }\n        maskedMounts = [\n          mount.mountpoint,\n          ...maskedMounts.filter((p) => !p.startsWith(mount.mountpoint))\n        ];\n      }\n      const shouldFilterByDepth = opts.maxDepth !== void 0 && !allMountsSupportMaxDepth;\n      return allKeys.filter(\n        (key) => (!shouldFilterByDepth || filterKeyByDepth(key, opts.maxDepth)) && filterKeyByBase(key, base)\n      );\n    },\n    // Utils\n    async clear(base, opts = {}) {\n      base = normalizeBaseKey(base);\n      await Promise.all(\n        getMounts(base, false).map(async (m) => {\n          if (m.driver.clear) {\n            return asyncCall(m.driver.clear, m.relativeBase, opts);\n          }\n          if (m.driver.removeItem) {\n            const keys = await m.driver.getKeys(m.relativeBase || \"\", opts);\n            return Promise.all(\n              keys.map((key) => m.driver.removeItem(key, opts))\n            );\n          }\n        })\n      );\n    },\n    async dispose() {\n      await Promise.all(\n        Object.values(context.mounts).map((driver) => dispose(driver))\n      );\n    },\n    async watch(callback) {\n      await startWatch();\n      context.watchListeners.push(callback);\n      return async () => {\n        context.watchListeners = context.watchListeners.filter(\n          (listener) => listener !== callback\n        );\n        if (context.watchListeners.length === 0) {\n          await stopWatch();\n        }\n      };\n    },\n    async unwatch() {\n      context.watchListeners = [];\n      await stopWatch();\n    },\n    // Mount\n    mount(base, driver) {\n      base = normalizeBaseKey(base);\n      if (base && context.mounts[base]) {\n        throw new Error(`already mounted at ${base}`);\n      }\n      if (base) {\n        context.mountpoints.push(base);\n        context.mountpoints.sort((a, b) => b.length - a.length);\n      }\n      context.mounts[base] = driver;\n      if (context.watching) {\n        Promise.resolve(watch(driver, onChange, base)).then((unwatcher) => {\n          context.unwatch[base] = unwatcher;\n        }).catch(console.error);\n      }\n      return storage;\n    },\n    async unmount(base, _dispose = true) {\n      base = normalizeBaseKey(base);\n      if (!base || !context.mounts[base]) {\n        return;\n      }\n      if (context.watching && base in context.unwatch) {\n        context.unwatch[base]?.();\n        delete context.unwatch[base];\n      }\n      if (_dispose) {\n        await dispose(context.mounts[base]);\n      }\n      context.mountpoints = context.mountpoints.filter((key) => key !== base);\n      delete context.mounts[base];\n    },\n    getMount(key = \"\") {\n      key = normalizeKey(key) + \":\";\n      const m = getMount(key);\n      return {\n        driver: m.driver,\n        base: m.base\n      };\n    },\n    getMounts(base = \"\", opts = {}) {\n      base = normalizeKey(base);\n      const mounts = getMounts(base, opts.parents);\n      return mounts.map((m) => ({\n        driver: m.driver,\n        base: m.mountpoint\n      }));\n    },\n    // Aliases\n    keys: (base, opts = {}) => storage.getKeys(base, opts),\n    get: (key, opts = {}) => storage.getItem(key, opts),\n    set: (key, value, opts = {}) => storage.setItem(key, value, opts),\n    has: (key, opts = {}) => storage.hasItem(key, opts),\n    del: (key, opts = {}) => storage.removeItem(key, opts),\n    remove: (key, opts = {}) => storage.removeItem(key, opts)\n  };\n  return storage;\n}\nasync function snapshot(storage, base) {\n  base = normalizeBaseKey(base);\n  const keys = await storage.getKeys(base);\n  const snapshot2 = {};\n  await Promise.all(\n    keys.map(async (key) => {\n      snapshot2[key.slice(base.length)] = await storage.getItem(key);\n    })\n  );\n  return snapshot2;\n}\nasync function restoreSnapshot(driver, snapshot2, base = \"\") {\n  base = normalizeBaseKey(base);\n  await Promise.all(\n    Object.entries(snapshot2).map((e) => driver.setItem(base + e[0], e[1]))\n  );\n}\nfunction watch(driver, onChange, base) {\n  return driver.watch ? driver.watch((event, key) => onChange(event, base + key)) : () => {\n  };\n}\nasync function dispose(driver) {\n  if (typeof driver.dispose === \"function\") {\n    await asyncCall(driver.dispose);\n  }\n}\n\nconst builtinDrivers = {\n  \"azure-app-configuration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azureAppConfiguration\": \"unstorage/drivers/azure-app-configuration\",\n  \"azure-cosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azureCosmos\": \"unstorage/drivers/azure-cosmos\",\n  \"azure-key-vault\": \"unstorage/drivers/azure-key-vault\",\n  \"azureKeyVault\": \"unstorage/drivers/azure-key-vault\",\n  \"azure-storage-blob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azureStorageBlob\": \"unstorage/drivers/azure-storage-blob\",\n  \"azure-storage-table\": \"unstorage/drivers/azure-storage-table\",\n  \"azureStorageTable\": \"unstorage/drivers/azure-storage-table\",\n  \"capacitor-preferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"capacitorPreferences\": \"unstorage/drivers/capacitor-preferences\",\n  \"cloudflare-kv-binding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflareKVBinding\": \"unstorage/drivers/cloudflare-kv-binding\",\n  \"cloudflare-kv-http\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflareKVHttp\": \"unstorage/drivers/cloudflare-kv-http\",\n  \"cloudflare-r2-binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"cloudflareR2Binding\": \"unstorage/drivers/cloudflare-r2-binding\",\n  \"db0\": \"unstorage/drivers/db0\",\n  \"deno-kv-node\": \"unstorage/drivers/deno-kv-node\",\n  \"denoKVNode\": \"unstorage/drivers/deno-kv-node\",\n  \"deno-kv\": \"unstorage/drivers/deno-kv\",\n  \"denoKV\": \"unstorage/drivers/deno-kv\",\n  \"fs-lite\": \"unstorage/drivers/fs-lite\",\n  \"fsLite\": \"unstorage/drivers/fs-lite\",\n  \"fs\": \"unstorage/drivers/fs\",\n  \"github\": \"unstorage/drivers/github\",\n  \"http\": \"unstorage/drivers/http\",\n  \"indexedb\": \"unstorage/drivers/indexedb\",\n  \"localstorage\": \"unstorage/drivers/localstorage\",\n  \"lru-cache\": \"unstorage/drivers/lru-cache\",\n  \"lruCache\": \"unstorage/drivers/lru-cache\",\n  \"memory\": \"unstorage/drivers/memory\",\n  \"mongodb\": \"unstorage/drivers/mongodb\",\n  \"netlify-blobs\": \"unstorage/drivers/netlify-blobs\",\n  \"netlifyBlobs\": \"unstorage/drivers/netlify-blobs\",\n  \"null\": \"unstorage/drivers/null\",\n  \"overlay\": \"unstorage/drivers/overlay\",\n  \"planetscale\": \"unstorage/drivers/planetscale\",\n  \"redis\": \"unstorage/drivers/redis\",\n  \"s3\": \"unstorage/drivers/s3\",\n  \"session-storage\": \"unstorage/drivers/session-storage\",\n  \"sessionStorage\": \"unstorage/drivers/session-storage\",\n  \"uploadthing\": \"unstorage/drivers/uploadthing\",\n  \"upstash\": \"unstorage/drivers/upstash\",\n  \"vercel-blob\": \"unstorage/drivers/vercel-blob\",\n  \"vercelBlob\": \"unstorage/drivers/vercel-blob\",\n  \"vercel-kv\": \"unstorage/drivers/vercel-kv\",\n  \"vercelKV\": \"unstorage/drivers/vercel-kv\",\n  \"vercel-runtime-cache\": \"unstorage/drivers/vercel-runtime-cache\",\n  \"vercelRuntimeCache\": \"unstorage/drivers/vercel-runtime-cache\"\n};\n\nexport { builtinDrivers, createStorage, defineDriver, filterKeyByBase, filterKeyByDepth, joinKeys, normalizeBaseKey, normalizeKey, restoreSnapshot, snapshot };\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    let dbp;\n    const getDB = () => {\n        if (dbp)\n            return dbp;\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        dbp = promisifyRequest(request);\n        dbp.then((db) => {\n            // It seems like Safari sometimes likes to just close the connection.\n            // It's supposed to fire this event when that happens. Let's hope it does!\n            db.onclose = () => (dbp = undefined);\n        }, () => { });\n        return dbp;\n    };\n    return (txMode, callback) => getDB().then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","const JSONStringify = data => JSON.stringify(data, (_, value) => typeof value === \"bigint\" ? value.toString() + \"n\" : value);\nconst JSONParse = json => {\n    const numbersBiggerThanMaxInt = /([\\[:])?(\\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\\}\\]])/g;\n    const serializedData = json.replace(numbersBiggerThanMaxInt, \"$1\\\"$2n\\\"$3\");\n    return JSON.parse(serializedData, (_, value) => {\n        const isCustomFormatBigInt = typeof value === \"string\" && value.match(/^\\d+n$/);\n        if (isCustomFormatBigInt)\n            return BigInt(value.substring(0, value.length - 1));\n        return value;\n    });\n};\nexport function safeJsonParse(value) {\n    if (typeof value !== \"string\") {\n        throw new Error(`Cannot safe json parse value of type ${typeof value}`);\n    }\n    try {\n        return JSONParse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n}\nexport function safeJsonStringify(value) {\n    return typeof value === \"string\" ? value : JSONStringify(value) || \"\";\n}\n//# sourceMappingURL=index.js.map","import{createStorage as w}from\"unstorage\";import{createStore as I,get as u,set as p,del as b,keys as v,clear as S}from\"idb-keyval\";import{safeJsonStringify as g,safeJsonParse as d}from\"@walletconnect/safe-json\";function C(i){return i}const x=\"idb-keyval\";var z=(i={})=>{const t=i.base&&i.base.length>0?`${i.base}:`:\"\",e=s=>t+s;let n;return i.dbName&&i.storeName&&(n=I(i.dbName,i.storeName)),{name:x,options:i,async hasItem(s){return!(typeof await u(e(s),n)>\"u\")},async getItem(s){return await u(e(s),n)??null},setItem(s,a){return p(e(s),a,n)},removeItem(s){return b(e(s),n)},getKeys(){return v(n)},clear(){return S(n)}}};const D=\"WALLET_CONNECT_V2_INDEXED_DB\",E=\"keyvaluestorage\";class _{constructor(){this.indexedDb=w({driver:z({dbName:D,storeName:E})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const e=await this.indexedDb.getItem(t);if(e!==null)return e}async setItem(t,e){await this.indexedDb.setItem(t,g(e))}async removeItem(t){await this.indexedDb.removeItem(t)}}var l=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{},c={exports:{}};(function(){let i;function t(){}i=t,i.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},i.prototype.setItem=function(e,n){this[e]=String(n)},i.prototype.removeItem=function(e){delete this[e]},i.prototype.clear=function(){const e=this;Object.keys(e).forEach(function(n){e[n]=void 0,delete e[n]})},i.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},i.prototype.__defineGetter__(\"length\",function(){return Object.keys(this).length}),typeof l<\"u\"&&l.localStorage?c.exports=l.localStorage:typeof window<\"u\"&&window.localStorage?c.exports=window.localStorage:c.exports=new t})();function k(i){var t;return[i[0],d((t=i[1])!=null?t:\"\")]}class K{constructor(){this.localStorage=c.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(t){const e=this.localStorage.getItem(t);if(e!==null)return d(e)}async setItem(t,e){this.localStorage.setItem(t,g(e))}async removeItem(t){this.localStorage.removeItem(t)}}const N=\"wc_storage_version\",y=1,O=async(i,t,e)=>{const n=N,s=await t.getItem(n);if(s&&s>=y){e(t);return}const a=await i.getKeys();if(!a.length){e(t);return}const m=[];for(;a.length;){const r=a.shift();if(!r)continue;const o=r.toLowerCase();if(o.includes(\"wc@\")||o.includes(\"walletconnect\")||o.includes(\"wc_\")||o.includes(\"wallet_connect\")){const f=await i.getItem(r);await t.setItem(r,f),m.push(r)}}await t.setItem(n,y),e(t),j(i,m)},j=async(i,t)=>{t.length&&t.forEach(async e=>{await i.removeItem(e)})};class h{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const t=new K;this.storage=t;try{const e=new _;O(t,e,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,e){return await this.initialize(),this.storage.setItem(t,e)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const e=setInterval(()=>{this.initialized&&(clearInterval(e),t())},20)})}}export{h as KeyValueStorage,h as default};\n//# sourceMappingURL=index.es.js.map\n","'use strict'\nfunction tryStringify (o) {\n  try { return JSON.stringify(o) } catch(e) { return '\"[Circular]\"' }\n}\n\nmodule.exports = format\n\nfunction format(f, args, opts) {\n  var ss = (opts && opts.stringify) || tryStringify\n  var offset = 1\n  if (typeof f === 'object' && f !== null) {\n    var len = args.length + offset\n    if (len === 1) return f\n    var objects = new Array(len)\n    objects[0] = ss(f)\n    for (var index = 1; index < len; index++) {\n      objects[index] = ss(args[index])\n    }\n    return objects.join(' ')\n  }\n  if (typeof f !== 'string') {\n    return f\n  }\n  var argLen = args.length\n  if (argLen === 0) return f\n  var str = ''\n  var a = 1 - offset\n  var lastPos = -1\n  var flen = (f && f.length) || 0\n  for (var i = 0; i < flen;) {\n    if (f.charCodeAt(i) === 37 && i + 1 < flen) {\n      lastPos = lastPos > -1 ? lastPos : 0\n      switch (f.charCodeAt(i + 1)) {\n        case 100: // 'd'\n        case 102: // 'f'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Number(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 105: // 'i'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Math.floor(Number(args[a]))\n          lastPos = i + 2\n          i++\n          break\n        case 79: // 'O'\n        case 111: // 'o'\n        case 106: // 'j'\n          if (a >= argLen)\n            break\n          if (args[a] === undefined) break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          var type = typeof args[a]\n          if (type === 'string') {\n            str += '\\'' + args[a] + '\\''\n            lastPos = i + 2\n            i++\n            break\n          }\n          if (type === 'function') {\n            str += args[a].name || '<anonymous>'\n            lastPos = i + 2\n            i++\n            break\n          }\n          str += ss(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 115: // 's'\n          if (a >= argLen)\n            break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += String(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 37: // '%'\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += '%'\n          lastPos = i + 2\n          i++\n          a--\n          break\n      }\n      ++a\n    }\n    ++i\n  }\n  if (lastPos === -1)\n    return f\n  else if (lastPos < flen) {\n    str += f.slice(lastPos)\n  }\n\n  return str\n}\n","'use strict'\n\nconst format = require('quick-format-unescaped')\n\nmodule.exports = pino\n\nconst _console = pfGlobalThisOrFallback().console || {}\nconst stdSerializers = {\n  mapHttpRequest: mock,\n  mapHttpResponse: mock,\n  wrapRequestSerializer: passthrough,\n  wrapResponseSerializer: passthrough,\n  wrapErrorSerializer: passthrough,\n  req: mock,\n  res: mock,\n  err: asErrValue\n}\n\nfunction shouldSerialize (serialize, serializers) {\n  if (Array.isArray(serialize)) {\n    const hasToFilter = serialize.filter(function (k) {\n      return k !== '!stdSerializers.err'\n    })\n    return hasToFilter\n  } else if (serialize === true) {\n    return Object.keys(serializers)\n  }\n\n  return false\n}\n\nfunction pino (opts) {\n  opts = opts || {}\n  opts.browser = opts.browser || {}\n\n  const transmit = opts.browser.transmit\n  if (transmit && typeof transmit.send !== 'function') { throw Error('pino: transmit option must have a send function') }\n\n  const proto = opts.browser.write || _console\n  if (opts.browser.write) opts.browser.asObject = true\n  const serializers = opts.serializers || {}\n  const serialize = shouldSerialize(opts.browser.serialize, serializers)\n  let stdErrSerialize = opts.browser.serialize\n\n  if (\n    Array.isArray(opts.browser.serialize) &&\n    opts.browser.serialize.indexOf('!stdSerializers.err') > -1\n  ) stdErrSerialize = false\n\n  const levels = ['error', 'fatal', 'warn', 'info', 'debug', 'trace']\n\n  if (typeof proto === 'function') {\n    proto.error = proto.fatal = proto.warn =\n    proto.info = proto.debug = proto.trace = proto\n  }\n  if (opts.enabled === false) opts.level = 'silent'\n  const level = opts.level || 'info'\n  const logger = Object.create(proto)\n  if (!logger.log) logger.log = noop\n\n  Object.defineProperty(logger, 'levelVal', {\n    get: getLevelVal\n  })\n  Object.defineProperty(logger, 'level', {\n    get: getLevel,\n    set: setLevel\n  })\n\n  const setOpts = {\n    transmit,\n    serialize,\n    asObject: opts.browser.asObject,\n    levels,\n    timestamp: getTimeFunction(opts)\n  }\n  logger.levels = pino.levels\n  logger.level = level\n\n  logger.setMaxListeners = logger.getMaxListeners =\n  logger.emit = logger.addListener = logger.on =\n  logger.prependListener = logger.once =\n  logger.prependOnceListener = logger.removeListener =\n  logger.removeAllListeners = logger.listeners =\n  logger.listenerCount = logger.eventNames =\n  logger.write = logger.flush = noop\n  logger.serializers = serializers\n  logger._serialize = serialize\n  logger._stdErrSerialize = stdErrSerialize\n  logger.child = child\n\n  if (transmit) logger._logEvent = createLogEventShape()\n\n  function getLevelVal () {\n    return this.level === 'silent'\n      ? Infinity\n      : this.levels.values[this.level]\n  }\n\n  function getLevel () {\n    return this._level\n  }\n  function setLevel (level) {\n    if (level !== 'silent' && !this.levels.values[level]) {\n      throw Error('unknown level ' + level)\n    }\n    this._level = level\n\n    set(setOpts, logger, 'error', 'log') // <-- must stay first\n    set(setOpts, logger, 'fatal', 'error')\n    set(setOpts, logger, 'warn', 'error')\n    set(setOpts, logger, 'info', 'log')\n    set(setOpts, logger, 'debug', 'log')\n    set(setOpts, logger, 'trace', 'log')\n  }\n\n  function child (bindings, childOptions) {\n    if (!bindings) {\n      throw new Error('missing bindings for child Pino')\n    }\n    childOptions = childOptions || {}\n    if (serialize && bindings.serializers) {\n      childOptions.serializers = bindings.serializers\n    }\n    const childOptionsSerializers = childOptions.serializers\n    if (serialize && childOptionsSerializers) {\n      var childSerializers = Object.assign({}, serializers, childOptionsSerializers)\n      var childSerialize = opts.browser.serialize === true\n        ? Object.keys(childSerializers)\n        : serialize\n      delete bindings.serializers\n      applySerializers([bindings], childSerialize, childSerializers, this._stdErrSerialize)\n    }\n    function Child (parent) {\n      this._childLevel = (parent._childLevel | 0) + 1\n      this.error = bind(parent, bindings, 'error')\n      this.fatal = bind(parent, bindings, 'fatal')\n      this.warn = bind(parent, bindings, 'warn')\n      this.info = bind(parent, bindings, 'info')\n      this.debug = bind(parent, bindings, 'debug')\n      this.trace = bind(parent, bindings, 'trace')\n      if (childSerializers) {\n        this.serializers = childSerializers\n        this._serialize = childSerialize\n      }\n      if (transmit) {\n        this._logEvent = createLogEventShape(\n          [].concat(parent._logEvent.bindings, bindings)\n        )\n      }\n    }\n    Child.prototype = this\n    return new Child(this)\n  }\n  return logger\n}\n\npino.levels = {\n  values: {\n    fatal: 60,\n    error: 50,\n    warn: 40,\n    info: 30,\n    debug: 20,\n    trace: 10\n  },\n  labels: {\n    10: 'trace',\n    20: 'debug',\n    30: 'info',\n    40: 'warn',\n    50: 'error',\n    60: 'fatal'\n  }\n}\n\npino.stdSerializers = stdSerializers\npino.stdTimeFunctions = Object.assign({}, { nullTime, epochTime, unixTime, isoTime })\n\nfunction set (opts, logger, level, fallback) {\n  const proto = Object.getPrototypeOf(logger)\n  logger[level] = logger.levelVal > logger.levels.values[level]\n    ? noop\n    : (proto[level] ? proto[level] : (_console[level] || _console[fallback] || noop))\n\n  wrap(opts, logger, level)\n}\n\nfunction wrap (opts, logger, level) {\n  if (!opts.transmit && logger[level] === noop) return\n\n  logger[level] = (function (write) {\n    return function LOG () {\n      const ts = opts.timestamp()\n      const args = new Array(arguments.length)\n      const proto = (Object.getPrototypeOf && Object.getPrototypeOf(this) === _console) ? _console : this\n      for (var i = 0; i < args.length; i++) args[i] = arguments[i]\n\n      if (opts.serialize && !opts.asObject) {\n        applySerializers(args, this._serialize, this.serializers, this._stdErrSerialize)\n      }\n      if (opts.asObject) write.call(proto, asObject(this, level, args, ts))\n      else write.apply(proto, args)\n\n      if (opts.transmit) {\n        const transmitLevel = opts.transmit.level || logger.level\n        const transmitValue = pino.levels.values[transmitLevel]\n        const methodValue = pino.levels.values[level]\n        if (methodValue < transmitValue) return\n        transmit(this, {\n          ts,\n          methodLevel: level,\n          methodValue,\n          transmitLevel,\n          transmitValue: pino.levels.values[opts.transmit.level || logger.level],\n          send: opts.transmit.send,\n          val: logger.levelVal\n        }, args)\n      }\n    }\n  })(logger[level])\n}\n\nfunction asObject (logger, level, args, ts) {\n  if (logger._serialize) applySerializers(args, logger._serialize, logger.serializers, logger._stdErrSerialize)\n  const argsCloned = args.slice()\n  let msg = argsCloned[0]\n  const o = {}\n  if (ts) {\n    o.time = ts\n  }\n  o.level = pino.levels.values[level]\n  let lvl = (logger._childLevel | 0) + 1\n  if (lvl < 1) lvl = 1\n  // deliberate, catching objects, arrays\n  if (msg !== null && typeof msg === 'object') {\n    while (lvl-- && typeof argsCloned[0] === 'object') {\n      Object.assign(o, argsCloned.shift())\n    }\n    msg = argsCloned.length ? format(argsCloned.shift(), argsCloned) : undefined\n  } else if (typeof msg === 'string') msg = format(argsCloned.shift(), argsCloned)\n  if (msg !== undefined) o.msg = msg\n  return o\n}\n\nfunction applySerializers (args, serialize, serializers, stdErrSerialize) {\n  for (const i in args) {\n    if (stdErrSerialize && args[i] instanceof Error) {\n      args[i] = pino.stdSerializers.err(args[i])\n    } else if (typeof args[i] === 'object' && !Array.isArray(args[i])) {\n      for (const k in args[i]) {\n        if (serialize && serialize.indexOf(k) > -1 && k in serializers) {\n          args[i][k] = serializers[k](args[i][k])\n        }\n      }\n    }\n  }\n}\n\nfunction bind (parent, bindings, level) {\n  return function () {\n    const args = new Array(1 + arguments.length)\n    args[0] = bindings\n    for (var i = 1; i < args.length; i++) {\n      args[i] = arguments[i - 1]\n    }\n    return parent[level].apply(this, args)\n  }\n}\n\nfunction transmit (logger, opts, args) {\n  const send = opts.send\n  const ts = opts.ts\n  const methodLevel = opts.methodLevel\n  const methodValue = opts.methodValue\n  const val = opts.val\n  const bindings = logger._logEvent.bindings\n\n  applySerializers(\n    args,\n    logger._serialize || Object.keys(logger.serializers),\n    logger.serializers,\n    logger._stdErrSerialize === undefined ? true : logger._stdErrSerialize\n  )\n  logger._logEvent.ts = ts\n  logger._logEvent.messages = args.filter(function (arg) {\n    // bindings can only be objects, so reference equality check via indexOf is fine\n    return bindings.indexOf(arg) === -1\n  })\n\n  logger._logEvent.level.label = methodLevel\n  logger._logEvent.level.value = methodValue\n\n  send(methodLevel, logger._logEvent, val)\n\n  logger._logEvent = createLogEventShape(bindings)\n}\n\nfunction createLogEventShape (bindings) {\n  return {\n    ts: 0,\n    messages: [],\n    bindings: bindings || [],\n    level: { label: '', value: 0 }\n  }\n}\n\nfunction asErrValue (err) {\n  const obj = {\n    type: err.constructor.name,\n    msg: err.message,\n    stack: err.stack\n  }\n  for (const key in err) {\n    if (obj[key] === undefined) {\n      obj[key] = err[key]\n    }\n  }\n  return obj\n}\n\nfunction getTimeFunction (opts) {\n  if (typeof opts.timestamp === 'function') {\n    return opts.timestamp\n  }\n  if (opts.timestamp === false) {\n    return nullTime\n  }\n  return epochTime\n}\n\nfunction mock () { return {} }\nfunction passthrough (a) { return a }\nfunction noop () {}\n\nfunction nullTime () { return false }\nfunction epochTime () { return Date.now() }\nfunction unixTime () { return Math.round(Date.now() / 1000.0) }\nfunction isoTime () { return new Date(Date.now()).toISOString() } // using Date.now() for testability\n\n/* eslint-disable */\n/* istanbul ignore next */\nfunction pfGlobalThisOrFallback () {\n  function defd (o) { return typeof o !== 'undefined' && o }\n  try {\n    if (typeof globalThis !== 'undefined') return globalThis\n    Object.defineProperty(Object.prototype, 'globalThis', {\n      get: function () {\n        delete Object.prototype.globalThis\n        return (this.globalThis = this)\n      },\n      configurable: true\n    })\n    return globalThis\n  } catch (e) {\n    return defd(self) || defd(window) || defd(this) || {}\n  }\n}\n/* eslint-enable */\n","import h,{levels as s}from\"pino\";import{default as U}from\"pino\";import{safeJsonStringify as u}from\"@walletconnect/safe-json\";const c={level:\"info\"},n=\"custom_context\",l=1e3*1024;class O{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class d{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new O(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class L{constructor(e,t=l){this.level=e??\"error\",this.levelValue=s.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new d(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===s.values.error?console.error(e):t===s.values.warn?console.warn(e):t===s.values.debug?console.debug(e):t===s.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(u({timestamp:new Date().toISOString(),log:e}));const t=typeof e==\"string\"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new d(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(u({extraMetadata:e})),new Blob(t,{type:\"application/json\"})}}class m{constructor(e,t=l){this.baseChunkLogger=new L(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),o=document.createElement(\"a\");o.href=t,o.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)}}class B{constructor(e,t=l){this.baseChunkLogger=new L(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var x=Object.defineProperty,S=Object.defineProperties,_=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,f=(r,e,t)=>e in r?x(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,i=(r,e)=>{for(var t in e||(e={}))T.call(e,t)&&f(r,t,e[t]);if(p)for(var t of p(e))z.call(e,t)&&f(r,t,e[t]);return r},g=(r,e)=>S(r,_(e));function k(r){return g(i({},r),{level:r?.level||c.level})}function v(r,e=n){return r[e]||\"\"}function b(r,e,t=n){return r[t]=e,r}function y(r,e=n){let t=\"\";return typeof r.bindings>\"u\"?t=v(r,e):t=r.bindings().context||\"\",t}function w(r,e,t=n){const o=y(r,t);return o.trim()?`${o}/${e}`:e}function E(r,e,t=n){const o=w(r,e,t),a=r.child({context:o});return b(a,o,t)}function C(r){var e,t;const o=new m((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:h(g(i({},r.opts),{level:\"trace\",browser:g(i({},(t=r.opts)==null?void 0:t.browser),{write:a=>o.write(a)})})),chunkLoggerController:o}}function I(r){var e;const t=new B((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:h(g(i({},r.opts),{level:\"trace\"}),t),chunkLoggerController:t}}function A(r){return typeof r.loggerOverride<\"u\"&&typeof r.loggerOverride!=\"string\"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<\"u\"?C(r):I(r)}export{l as MAX_LOG_SIZE_IN_BYTES_DEFAULT,n as PINO_CUSTOM_CONTEXT_KEY,c as PINO_LOGGER_DEFAULTS,w as formatChildLoggerContext,E as generateChildLogger,C as generateClientLogger,A as generatePlatformLogger,I as generateServerLogger,v as getBrowserLoggerContext,k as getDefaultLoggerOptions,y as getLoggerContext,U as pino,b as setBrowserLoggerContext};\n//# sourceMappingURL=index.es.js.map\n","import{fromMiliseconds as bn}from\"@walletconnect/time\";import{safeJsonParse as pn,safeJsonStringify as wn}from\"@walletconnect/safe-json\";function En(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name===\"Uint8Array\"}function fe(t,...e){if(!En(t))throw new Error(\"Uint8Array expected\");if(e.length>0&&!e.includes(t.length))throw new Error(\"Uint8Array expected of length \"+e+\", got length=\"+t.length)}function De(t,e=!0){if(t.destroyed)throw new Error(\"Hash instance has been destroyed\");if(e&&t.finished)throw new Error(\"Hash#digest() has already been called\")}function gn(t,e){fe(t);const n=e.outputLen;if(t.length<n)throw new Error(\"digestInto() expects output buffer of length at least \"+n)}const it=typeof globalThis==\"object\"&&\"crypto\"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _t=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function yn(t){if(typeof t!=\"string\")throw new Error(\"utf8ToBytes expected string, got \"+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function de(t){return typeof t==\"string\"&&(t=yn(t)),fe(t),t}class xn{clone(){return this._cloneInto()}}function Bn(t){const e=r=>t().update(de(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function he(t=32){if(it&&typeof it.getRandomValues==\"function\")return it.getRandomValues(new Uint8Array(t));if(it&&typeof it.randomBytes==\"function\")return it.randomBytes(t);throw new Error(\"crypto.getRandomValues must be defined\")}function Cn(t,e,n,r){if(typeof t.setBigUint64==\"function\")return t.setBigUint64(e,n,r);const o=BigInt(32),s=BigInt(4294967295),a=Number(n>>o&s),u=Number(n&s),i=r?4:0,D=r?0:4;t.setUint32(e+i,a,r),t.setUint32(e+D,u,r)}class An extends xn{constructor(e,n,r,o){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_t(this.buffer)}update(e){De(this);const{view:n,buffer:r,blockLen:o}=this;e=de(e);const s=e.length;for(let a=0;a<s;){const u=Math.min(o-this.pos,s-a);if(u===o){const i=_t(e);for(;o<=s-a;a+=o)this.process(i,a);continue}r.set(e.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){De(this),gn(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let l=a;l<o;l++)n[l]=0;Cn(r,o-8,BigInt(this.length*8),s),this.process(r,0);const u=_t(e),i=this.outputLen;if(i%4)throw new Error(\"_sha2: outputLen should be aligned to 32bit\");const D=i/4,c=this.get();if(D>c.length)throw new Error(\"_sha2: outputLen bigger than state\");for(let l=0;l<D;l++)u.setUint32(4*l,c[l],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:a,pos:u}=this;return e.length=o,e.pos=u,e.finished=s,e.destroyed=a,o%n&&e.buffer.set(r),e}}const wt=BigInt(2**32-1),St=BigInt(32);function le(t,e=!1){return e?{h:Number(t&wt),l:Number(t>>St&wt)}:{h:Number(t>>St&wt)|0,l:Number(t&wt)|0}}function mn(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let o=0;o<t.length;o++){const{h:s,l:a}=le(t[o],e);[n[o],r[o]]=[s,a]}return[n,r]}const _n=(t,e)=>BigInt(t>>>0)<<St|BigInt(e>>>0),Sn=(t,e,n)=>t>>>n,vn=(t,e,n)=>t<<32-n|e>>>n,In=(t,e,n)=>t>>>n|e<<32-n,Un=(t,e,n)=>t<<32-n|e>>>n,Tn=(t,e,n)=>t<<64-n|e>>>n-32,Fn=(t,e,n)=>t>>>n-32|e<<64-n,Nn=(t,e)=>e,Ln=(t,e)=>t,On=(t,e,n)=>t<<n|e>>>32-n,Hn=(t,e,n)=>e<<n|t>>>32-n,zn=(t,e,n)=>e<<n-32|t>>>64-n,Mn=(t,e,n)=>t<<n-32|e>>>64-n;function qn(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:o|0}}const $n=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),kn=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Rn=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),jn=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,Zn=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Gn=(t,e,n,r,o,s)=>e+n+r+o+s+(t/2**32|0)|0,x={fromBig:le,split:mn,toBig:_n,shrSH:Sn,shrSL:vn,rotrSH:In,rotrSL:Un,rotrBH:Tn,rotrBL:Fn,rotr32H:Nn,rotr32L:Ln,rotlSH:On,rotlSL:Hn,rotlBH:zn,rotlBL:Mn,add:qn,add3L:$n,add3H:kn,add4L:Rn,add4H:jn,add5H:Gn,add5L:Zn},[Vn,Yn]=(()=>x.split([\"0x428a2f98d728ae22\",\"0x7137449123ef65cd\",\"0xb5c0fbcfec4d3b2f\",\"0xe9b5dba58189dbbc\",\"0x3956c25bf348b538\",\"0x59f111f1b605d019\",\"0x923f82a4af194f9b\",\"0xab1c5ed5da6d8118\",\"0xd807aa98a3030242\",\"0x12835b0145706fbe\",\"0x243185be4ee4b28c\",\"0x550c7dc3d5ffb4e2\",\"0x72be5d74f27b896f\",\"0x80deb1fe3b1696b1\",\"0x9bdc06a725c71235\",\"0xc19bf174cf692694\",\"0xe49b69c19ef14ad2\",\"0xefbe4786384f25e3\",\"0x0fc19dc68b8cd5b5\",\"0x240ca1cc77ac9c65\",\"0x2de92c6f592b0275\",\"0x4a7484aa6ea6e483\",\"0x5cb0a9dcbd41fbd4\",\"0x76f988da831153b5\",\"0x983e5152ee66dfab\",\"0xa831c66d2db43210\",\"0xb00327c898fb213f\",\"0xbf597fc7beef0ee4\",\"0xc6e00bf33da88fc2\",\"0xd5a79147930aa725\",\"0x06ca6351e003826f\",\"0x142929670a0e6e70\",\"0x27b70a8546d22ffc\",\"0x2e1b21385c26c926\",\"0x4d2c6dfc5ac42aed\",\"0x53380d139d95b3df\",\"0x650a73548baf63de\",\"0x766a0abb3c77b2a8\",\"0x81c2c92e47edaee6\",\"0x92722c851482353b\",\"0xa2bfe8a14cf10364\",\"0xa81a664bbc423001\",\"0xc24b8b70d0f89791\",\"0xc76c51a30654be30\",\"0xd192e819d6ef5218\",\"0xd69906245565a910\",\"0xf40e35855771202a\",\"0x106aa07032bbd1b8\",\"0x19a4c116b8d2d0c8\",\"0x1e376c085141ab53\",\"0x2748774cdf8eeb99\",\"0x34b0bcb5e19b48a8\",\"0x391c0cb3c5c95a63\",\"0x4ed8aa4ae3418acb\",\"0x5b9cca4f7763e373\",\"0x682e6ff3d6b2b8a3\",\"0x748f82ee5defb2fc\",\"0x78a5636f43172f60\",\"0x84c87814a1f0ab72\",\"0x8cc702081a6439ec\",\"0x90befffa23631e28\",\"0xa4506cebde82bde9\",\"0xbef9a3f7b2c67915\",\"0xc67178f2e372532b\",\"0xca273eceea26619c\",\"0xd186b8c721c0c207\",\"0xeada7dd6cde0eb1e\",\"0xf57d4f7fee6ed178\",\"0x06f067aa72176fba\",\"0x0a637dc5a2c898a6\",\"0x113f9804bef90dae\",\"0x1b710b35131c471b\",\"0x28db77f523047d84\",\"0x32caab7b40c72493\",\"0x3c9ebe0a15c9bebc\",\"0x431d67c49c100d4c\",\"0x4cc5d4becb3e42b6\",\"0x597f299cfc657e2a\",\"0x5fcb6fab3ad6faec\",\"0x6c44198c4a475817\"].map(t=>BigInt(t))))(),P=new Uint32Array(80),Q=new Uint32Array(80);class Jn extends An{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:o,Ch:s,Cl:a,Dh:u,Dl:i,Eh:D,El:c,Fh:l,Fl:p,Gh:w,Gl:h,Hh:g,Hl:S}=this;return[e,n,r,o,s,a,u,i,D,c,l,p,w,h,g,S]}set(e,n,r,o,s,a,u,i,D,c,l,p,w,h,g,S){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=s|0,this.Cl=a|0,this.Dh=u|0,this.Dl=i|0,this.Eh=D|0,this.El=c|0,this.Fh=l|0,this.Fl=p|0,this.Gh=w|0,this.Gl=h|0,this.Hh=g|0,this.Hl=S|0}process(e,n){for(let d=0;d<16;d++,n+=4)P[d]=e.getUint32(n),Q[d]=e.getUint32(n+=4);for(let d=16;d<80;d++){const m=P[d-15]|0,F=Q[d-15]|0,q=x.rotrSH(m,F,1)^x.rotrSH(m,F,8)^x.shrSH(m,F,7),z=x.rotrSL(m,F,1)^x.rotrSL(m,F,8)^x.shrSL(m,F,7),I=P[d-2]|0,O=Q[d-2]|0,ot=x.rotrSH(I,O,19)^x.rotrBH(I,O,61)^x.shrSH(I,O,6),tt=x.rotrSL(I,O,19)^x.rotrBL(I,O,61)^x.shrSL(I,O,6),st=x.add4L(z,tt,Q[d-7],Q[d-16]),at=x.add4H(st,q,ot,P[d-7],P[d-16]);P[d]=at|0,Q[d]=st|0}let{Ah:r,Al:o,Bh:s,Bl:a,Ch:u,Cl:i,Dh:D,Dl:c,Eh:l,El:p,Fh:w,Fl:h,Gh:g,Gl:S,Hh:v,Hl:L}=this;for(let d=0;d<80;d++){const m=x.rotrSH(l,p,14)^x.rotrSH(l,p,18)^x.rotrBH(l,p,41),F=x.rotrSL(l,p,14)^x.rotrSL(l,p,18)^x.rotrBL(l,p,41),q=l&w^~l&g,z=p&h^~p&S,I=x.add5L(L,F,z,Yn[d],Q[d]),O=x.add5H(I,v,m,q,Vn[d],P[d]),ot=I|0,tt=x.rotrSH(r,o,28)^x.rotrBH(r,o,34)^x.rotrBH(r,o,39),st=x.rotrSL(r,o,28)^x.rotrBL(r,o,34)^x.rotrBL(r,o,39),at=r&s^r&u^s&u,Ct=o&a^o&i^a&i;v=g|0,L=S|0,g=w|0,S=h|0,w=l|0,h=p|0,{h:l,l:p}=x.add(D|0,c|0,O|0,ot|0),D=u|0,c=i|0,u=s|0,i=a|0,s=r|0,a=o|0;const At=x.add3L(ot,st,Ct);r=x.add3H(At,O,tt,at),o=At|0}({h:r,l:o}=x.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:s,l:a}=x.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:u,l:i}=x.add(this.Ch|0,this.Cl|0,u|0,i|0),{h:D,l:c}=x.add(this.Dh|0,this.Dl|0,D|0,c|0),{h:l,l:p}=x.add(this.Eh|0,this.El|0,l|0,p|0),{h:w,l:h}=x.add(this.Fh|0,this.Fl|0,w|0,h|0),{h:g,l:S}=x.add(this.Gh|0,this.Gl|0,g|0,S|0),{h:v,l:L}=x.add(this.Hh|0,this.Hl|0,v|0,L|0),this.set(r,o,s,a,u,i,D,c,l,p,w,h,g,S,v,L)}roundClean(){P.fill(0),Q.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Kn=Bn(()=>new Jn);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vt=BigInt(0),be=BigInt(1),Wn=BigInt(2);function It(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name===\"Uint8Array\"}function Ut(t){if(!It(t))throw new Error(\"Uint8Array expected\")}function Tt(t,e){if(typeof e!=\"boolean\")throw new Error(t+\" boolean expected, got \"+e)}const Xn=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,\"0\"));function Ft(t){Ut(t);let e=\"\";for(let n=0;n<t.length;n++)e+=Xn[t[n]];return e}function pe(t){if(typeof t!=\"string\")throw new Error(\"hex string expected, got \"+typeof t);return t===\"\"?vt:BigInt(\"0x\"+t)}const K={_0:48,_9:57,A:65,F:70,a:97,f:102};function we(t){if(t>=K._0&&t<=K._9)return t-K._0;if(t>=K.A&&t<=K.F)return t-(K.A-10);if(t>=K.a&&t<=K.f)return t-(K.a-10)}function Ee(t){if(typeof t!=\"string\")throw new Error(\"hex string expected, got \"+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error(\"hex string expected, got unpadded hex of length \"+e);const r=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const a=we(t.charCodeAt(s)),u=we(t.charCodeAt(s+1));if(a===void 0||u===void 0){const i=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character \"'+i+'\" at index '+s)}r[o]=a*16+u}return r}function Pn(t){return pe(Ft(t))}function Et(t){return Ut(t),pe(Ft(Uint8Array.from(t).reverse()))}function ge(t,e){return Ee(t.toString(16).padStart(e*2,\"0\"))}function Nt(t,e){return ge(t,e).reverse()}function W(t,e,n){let r;if(typeof e==\"string\")try{r=Ee(e)}catch(s){throw new Error(t+\" must be hex string or Uint8Array, cause: \"+s)}else if(It(e))r=Uint8Array.from(e);else throw new Error(t+\" must be hex string or Uint8Array\");const o=r.length;if(typeof n==\"number\"&&o!==n)throw new Error(t+\" of length \"+n+\" expected, got \"+o);return r}function ye(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];Ut(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const s=t[r];n.set(s,o),o+=s.length}return n}const Lt=t=>typeof t==\"bigint\"&&vt<=t;function Qn(t,e,n){return Lt(t)&&Lt(e)&&Lt(n)&&e<=t&&t<n}function ft(t,e,n,r){if(!Qn(e,n,r))throw new Error(\"expected valid \"+t+\": \"+n+\" <= n < \"+r+\", got \"+e)}function tr(t){let e;for(e=0;t>vt;t>>=be,e+=1);return e}const er=t=>(Wn<<BigInt(t-1))-be,nr={bigint:t=>typeof t==\"bigint\",function:t=>typeof t==\"function\",boolean:t=>typeof t==\"boolean\",string:t=>typeof t==\"string\",stringOrUint8Array:t=>typeof t==\"string\"||It(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t==\"function\"&&Number.isSafeInteger(t.outputLen)};function Ot(t,e,n={}){const r=(o,s,a)=>{const u=nr[s];if(typeof u!=\"function\")throw new Error(\"invalid validator function\");const i=t[o];if(!(a&&i===void 0)&&!u(i,t))throw new Error(\"param \"+String(o)+\" is invalid. Expected \"+s+\", got \"+i)};for(const[o,s]of Object.entries(e))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return t}function xe(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const s=t(n,...r);return e.set(n,s),s}}const M=BigInt(0),N=BigInt(1),nt=BigInt(2),rr=BigInt(3),Ht=BigInt(4),Be=BigInt(5),Ce=BigInt(8);function H(t,e){const n=t%e;return n>=M?n:e+n}function or(t,e,n){if(e<M)throw new Error(\"invalid exponent, negatives unsupported\");if(n<=M)throw new Error(\"invalid modulus\");if(n===N)return M;let r=N;for(;e>M;)e&N&&(r=r*t%n),t=t*t%n,e>>=N;return r}function J(t,e,n){let r=t;for(;e-- >M;)r*=r,r%=n;return r}function Ae(t,e){if(t===M)throw new Error(\"invert: expected non-zero number\");if(e<=M)throw new Error(\"invert: expected positive modulus, got \"+e);let n=H(t,e),r=e,o=M,s=N;for(;n!==M;){const u=r/n,i=r%n,D=o-s*u;r=n,n=i,o=s,s=D}if(r!==N)throw new Error(\"invert: does not exist\");return H(o,e)}function sr(t){const e=(t-N)/nt;let n,r,o;for(n=t-N,r=0;n%nt===M;n/=nt,r++);for(o=nt;o<t&&or(o,e,t)!==t-N;o++)if(o>1e3)throw new Error(\"Cannot find square root: likely non-prime P\");if(r===1){const a=(t+N)/Ht;return function(i,D){const c=i.pow(D,a);if(!i.eql(i.sqr(c),D))throw new Error(\"Cannot find square root\");return c}}const s=(n+N)/nt;return function(u,i){if(u.pow(i,e)===u.neg(u.ONE))throw new Error(\"Cannot find square root\");let D=r,c=u.pow(u.mul(u.ONE,o),n),l=u.pow(i,s),p=u.pow(i,n);for(;!u.eql(p,u.ONE);){if(u.eql(p,u.ZERO))return u.ZERO;let w=1;for(let g=u.sqr(p);w<D&&!u.eql(g,u.ONE);w++)g=u.sqr(g);const h=u.pow(c,N<<BigInt(D-w-1));c=u.sqr(h),l=u.mul(l,h),p=u.mul(p,c),D=w}return l}}function ir(t){if(t%Ht===rr){const e=(t+N)/Ht;return function(r,o){const s=r.pow(o,e);if(!r.eql(r.sqr(s),o))throw new Error(\"Cannot find square root\");return s}}if(t%Ce===Be){const e=(t-Be)/Ce;return function(r,o){const s=r.mul(o,nt),a=r.pow(s,e),u=r.mul(o,a),i=r.mul(r.mul(u,nt),a),D=r.mul(u,r.sub(i,r.ONE));if(!r.eql(r.sqr(D),o))throw new Error(\"Cannot find square root\");return D}}return sr(t)}const ur=(t,e)=>(H(t,e)&N)===N,cr=[\"create\",\"isValid\",\"is0\",\"neg\",\"inv\",\"sqrt\",\"sqr\",\"eql\",\"add\",\"sub\",\"mul\",\"pow\",\"div\",\"addN\",\"subN\",\"mulN\",\"sqrN\"];function ar(t){const e={ORDER:\"bigint\",MASK:\"bigint\",BYTES:\"isSafeInteger\",BITS:\"isSafeInteger\"},n=cr.reduce((r,o)=>(r[o]=\"function\",r),e);return Ot(t,n)}function fr(t,e,n){if(n<M)throw new Error(\"invalid exponent, negatives unsupported\");if(n===M)return t.ONE;if(n===N)return e;let r=t.ONE,o=e;for(;n>M;)n&N&&(r=t.mul(r,o)),o=t.sqr(o),n>>=N;return r}function Dr(t,e){const n=new Array(e.length),r=e.reduce((s,a,u)=>t.is0(a)?s:(n[u]=s,t.mul(s,a)),t.ONE),o=t.inv(r);return e.reduceRight((s,a,u)=>t.is0(a)?s:(n[u]=t.mul(s,n[u]),t.mul(s,a)),o),n}function me(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _e(t,e,n=!1,r={}){if(t<=M)throw new Error(\"invalid field: expected ORDER > 0, got \"+t);const{nBitLength:o,nByteLength:s}=me(t,e);if(s>2048)throw new Error(\"invalid field: expected ORDER of <= 2048 bytes\");let a;const u=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:s,MASK:er(o),ZERO:M,ONE:N,create:i=>H(i,t),isValid:i=>{if(typeof i!=\"bigint\")throw new Error(\"invalid field element: expected bigint, got \"+typeof i);return M<=i&&i<t},is0:i=>i===M,isOdd:i=>(i&N)===N,neg:i=>H(-i,t),eql:(i,D)=>i===D,sqr:i=>H(i*i,t),add:(i,D)=>H(i+D,t),sub:(i,D)=>H(i-D,t),mul:(i,D)=>H(i*D,t),pow:(i,D)=>fr(u,i,D),div:(i,D)=>H(i*Ae(D,t),t),sqrN:i=>i*i,addN:(i,D)=>i+D,subN:(i,D)=>i-D,mulN:(i,D)=>i*D,inv:i=>Ae(i,t),sqrt:r.sqrt||(i=>(a||(a=ir(t)),a(u,i))),invertBatch:i=>Dr(u,i),cmov:(i,D,c)=>c?D:i,toBytes:i=>n?Nt(i,s):ge(i,s),fromBytes:i=>{if(i.length!==s)throw new Error(\"Field.fromBytes: expected \"+s+\" bytes, got \"+i.length);return n?Et(i):Pn(i)}});return Object.freeze(u)}const Se=BigInt(0),gt=BigInt(1);function zt(t,e){const n=e.negate();return t?n:e}function ve(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error(\"invalid window size, expected [1..\"+e+\"], got W=\"+t)}function Mt(t,e){ve(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function dr(t,e){if(!Array.isArray(t))throw new Error(\"array expected\");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error(\"invalid point at index \"+r)})}function hr(t,e){if(!Array.isArray(t))throw new Error(\"array of scalars expected\");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error(\"invalid scalar at index \"+r)})}const qt=new WeakMap,Ie=new WeakMap;function $t(t){return Ie.get(t)||1}function lr(t,e){return{constTimeNegate:zt,hasPrecomputes(n){return $t(n)!==1},unsafeLadder(n,r,o=t.ZERO){let s=n;for(;r>Se;)r&gt&&(o=o.add(s)),s=s.double(),r>>=gt;return o},precomputeWindow(n,r){const{windows:o,windowSize:s}=Mt(r,e),a=[];let u=n,i=u;for(let D=0;D<o;D++){i=u,a.push(i);for(let c=1;c<s;c++)i=i.add(u),a.push(i);u=i.double()}return a},wNAF(n,r,o){const{windows:s,windowSize:a}=Mt(n,e);let u=t.ZERO,i=t.BASE;const D=BigInt(2**n-1),c=2**n,l=BigInt(n);for(let p=0;p<s;p++){const w=p*a;let h=Number(o&D);o>>=l,h>a&&(h-=c,o+=gt);const g=w,S=w+Math.abs(h)-1,v=p%2!==0,L=h<0;h===0?i=i.add(zt(v,r[g])):u=u.add(zt(L,r[S]))}return{p:u,f:i}},wNAFUnsafe(n,r,o,s=t.ZERO){const{windows:a,windowSize:u}=Mt(n,e),i=BigInt(2**n-1),D=2**n,c=BigInt(n);for(let l=0;l<a;l++){const p=l*u;if(o===Se)break;let w=Number(o&i);if(o>>=c,w>u&&(w-=D,o+=gt),w===0)continue;let h=r[p+Math.abs(w)-1];w<0&&(h=h.negate()),s=s.add(h)}return s},getPrecomputes(n,r,o){let s=qt.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&qt.set(r,o(s))),s},wNAFCached(n,r,o){const s=$t(n);return this.wNAF(s,this.getPrecomputes(s,n,o),r)},wNAFCachedUnsafe(n,r,o,s){const a=$t(n);return a===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(a,this.getPrecomputes(a,n,o),r,s)},setWindowSize(n,r){ve(r,e),Ie.set(n,r),qt.delete(n)}}}function br(t,e,n,r){if(dr(n,t),hr(r,e),n.length!==r.length)throw new Error(\"arrays of points and scalars must have equal length\");const o=t.ZERO,s=tr(BigInt(n.length)),a=s>12?s-3:s>4?s-2:s?2:1,u=(1<<a)-1,i=new Array(u+1).fill(o),D=Math.floor((e.BITS-1)/a)*a;let c=o;for(let l=D;l>=0;l-=a){i.fill(o);for(let w=0;w<r.length;w++){const h=r[w],g=Number(h>>BigInt(l)&BigInt(u));i[g]=i[g].add(n[w])}let p=o;for(let w=i.length-1,h=o;w>0;w--)h=h.add(i[w]),p=p.add(h);if(c=c.add(p),l!==0)for(let w=0;w<a;w++)c=c.double()}return c}function pr(t){return ar(t.Fp),Ot(t,{n:\"bigint\",h:\"bigint\",Gx:\"field\",Gy:\"field\"},{nBitLength:\"isSafeInteger\",nByteLength:\"isSafeInteger\"}),Object.freeze({...me(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const G=BigInt(0),j=BigInt(1),yt=BigInt(2),wr=BigInt(8),Er={zip215:!0};function gr(t){const e=pr(t);return Ot(t,{hash:\"function\",a:\"bigint\",d:\"bigint\",randomBytes:\"function\"},{adjustScalarBytes:\"function\",domain:\"function\",uvRatio:\"function\",mapToCurve:\"function\"}),Object.freeze({...e})}function yr(t){const e=gr(t),{Fp:n,n:r,prehash:o,hash:s,randomBytes:a,nByteLength:u,h:i}=e,D=yt<<BigInt(u*8)-j,c=n.create,l=_e(e.n,e.nBitLength),p=e.uvRatio||((y,f)=>{try{return{isValid:!0,value:n.sqrt(y*n.inv(f))}}catch{return{isValid:!1,value:G}}}),w=e.adjustScalarBytes||(y=>y),h=e.domain||((y,f,b)=>{if(Tt(\"phflag\",b),f.length||b)throw new Error(\"Contexts/pre-hash are not supported\");return y});function g(y,f){ft(\"coordinate \"+y,f,G,D)}function S(y){if(!(y instanceof d))throw new Error(\"ExtendedPoint expected\")}const v=xe((y,f)=>{const{ex:b,ey:E,ez:B}=y,C=y.is0();f==null&&(f=C?wr:n.inv(B));const A=c(b*f),U=c(E*f),_=c(B*f);if(C)return{x:G,y:j};if(_!==j)throw new Error(\"invZ was invalid\");return{x:A,y:U}}),L=xe(y=>{const{a:f,d:b}=e;if(y.is0())throw new Error(\"bad point: ZERO\");const{ex:E,ey:B,ez:C,et:A}=y,U=c(E*E),_=c(B*B),T=c(C*C),$=c(T*T),R=c(U*f),V=c(T*c(R+_)),Y=c($+c(b*c(U*_)));if(V!==Y)throw new Error(\"bad point: equation left != right (1)\");const Z=c(E*B),X=c(C*A);if(Z!==X)throw new Error(\"bad point: equation left != right (2)\");return!0});class d{constructor(f,b,E,B){this.ex=f,this.ey=b,this.ez=E,this.et=B,g(\"x\",f),g(\"y\",b),g(\"z\",E),g(\"t\",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(f){if(f instanceof d)throw new Error(\"extended point not allowed\");const{x:b,y:E}=f||{};return g(\"x\",b),g(\"y\",E),new d(b,E,j,c(b*E))}static normalizeZ(f){const b=n.invertBatch(f.map(E=>E.ez));return f.map((E,B)=>E.toAffine(b[B])).map(d.fromAffine)}static msm(f,b){return br(d,l,f,b)}_setWindowSize(f){q.setWindowSize(this,f)}assertValidity(){L(this)}equals(f){S(f);const{ex:b,ey:E,ez:B}=this,{ex:C,ey:A,ez:U}=f,_=c(b*U),T=c(C*B),$=c(E*U),R=c(A*B);return _===T&&$===R}is0(){return this.equals(d.ZERO)}negate(){return new d(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:f}=e,{ex:b,ey:E,ez:B}=this,C=c(b*b),A=c(E*E),U=c(yt*c(B*B)),_=c(f*C),T=b+E,$=c(c(T*T)-C-A),R=_+A,V=R-U,Y=_-A,Z=c($*V),X=c(R*Y),et=c($*Y),pt=c(V*R);return new d(Z,X,pt,et)}add(f){S(f);const{a:b,d:E}=e,{ex:B,ey:C,ez:A,et:U}=this,{ex:_,ey:T,ez:$,et:R}=f;if(b===BigInt(-1)){const re=c((C-B)*(T+_)),oe=c((C+B)*(T-_)),mt=c(oe-re);if(mt===G)return this.double();const se=c(A*yt*R),ie=c(U*yt*$),ue=ie+se,ce=oe+re,ae=ie-se,Dn=c(ue*mt),dn=c(ce*ae),hn=c(ue*ae),ln=c(mt*ce);return new d(Dn,dn,ln,hn)}const V=c(B*_),Y=c(C*T),Z=c(U*E*R),X=c(A*$),et=c((B+C)*(_+T)-V-Y),pt=X-Z,ee=X+Z,ne=c(Y-b*V),un=c(et*pt),cn=c(ee*ne),an=c(et*ne),fn=c(pt*ee);return new d(un,cn,fn,an)}subtract(f){return this.add(f.negate())}wNAF(f){return q.wNAFCached(this,f,d.normalizeZ)}multiply(f){const b=f;ft(\"scalar\",b,j,r);const{p:E,f:B}=this.wNAF(b);return d.normalizeZ([E,B])[0]}multiplyUnsafe(f,b=d.ZERO){const E=f;return ft(\"scalar\",E,G,r),E===G?F:this.is0()||E===j?this:q.wNAFCachedUnsafe(this,E,d.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return q.unsafeLadder(this,r).is0()}toAffine(f){return v(this,f)}clearCofactor(){const{h:f}=e;return f===j?this:this.multiplyUnsafe(f)}static fromHex(f,b=!1){const{d:E,a:B}=e,C=n.BYTES;f=W(\"pointHex\",f,C),Tt(\"zip215\",b);const A=f.slice(),U=f[C-1];A[C-1]=U&-129;const _=Et(A),T=b?D:n.ORDER;ft(\"pointHex.y\",_,G,T);const $=c(_*_),R=c($-j),V=c(E*$-B);let{isValid:Y,value:Z}=p(R,V);if(!Y)throw new Error(\"Point.fromHex: invalid y coordinate\");const X=(Z&j)===j,et=(U&128)!==0;if(!b&&Z===G&&et)throw new Error(\"Point.fromHex: x=0 and x_0=1\");return et!==X&&(Z=c(-Z)),d.fromAffine({x:Z,y:_})}static fromPrivateKey(f){return O(f).point}toRawBytes(){const{x:f,y:b}=this.toAffine(),E=Nt(b,n.BYTES);return E[E.length-1]|=f&j?128:0,E}toHex(){return Ft(this.toRawBytes())}}d.BASE=new d(e.Gx,e.Gy,j,c(e.Gx*e.Gy)),d.ZERO=new d(G,j,j,G);const{BASE:m,ZERO:F}=d,q=lr(d,u*8);function z(y){return H(y,r)}function I(y){return z(Et(y))}function O(y){const f=n.BYTES;y=W(\"private key\",y,f);const b=W(\"hashed private key\",s(y),2*f),E=w(b.slice(0,f)),B=b.slice(f,2*f),C=I(E),A=m.multiply(C),U=A.toRawBytes();return{head:E,prefix:B,scalar:C,point:A,pointBytes:U}}function ot(y){return O(y).pointBytes}function tt(y=new Uint8Array,...f){const b=ye(...f);return I(s(h(b,W(\"context\",y),!!o)))}function st(y,f,b={}){y=W(\"message\",y),o&&(y=o(y));const{prefix:E,scalar:B,pointBytes:C}=O(f),A=tt(b.context,E,y),U=m.multiply(A).toRawBytes(),_=tt(b.context,U,C,y),T=z(A+_*B);ft(\"signature.s\",T,G,r);const $=ye(U,Nt(T,n.BYTES));return W(\"result\",$,n.BYTES*2)}const at=Er;function Ct(y,f,b,E=at){const{context:B,zip215:C}=E,A=n.BYTES;y=W(\"signature\",y,2*A),f=W(\"message\",f),b=W(\"publicKey\",b,A),C!==void 0&&Tt(\"zip215\",C),o&&(f=o(f));const U=Et(y.slice(A,2*A));let _,T,$;try{_=d.fromHex(b,C),T=d.fromHex(y.slice(0,A),C),$=m.multiplyUnsafe(U)}catch{return!1}if(!C&&_.isSmallOrder())return!1;const R=tt(B,T.toRawBytes(),_.toRawBytes(),f);return T.add(_.multiplyUnsafe(R)).subtract($).clearCofactor().equals(d.ZERO)}return m._setWindowSize(8),{CURVE:e,getPublicKey:ot,sign:st,verify:Ct,ExtendedPoint:d,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>a(n.BYTES),precompute(y=8,f=d.BASE){return f._setWindowSize(y),f.multiply(BigInt(3)),f}}}}BigInt(0),BigInt(1);const kt=BigInt(\"57896044618658097711785492504343953926634992332820282019728792003956564819949\"),Ue=BigInt(\"19681161376707505956807079304988542015446066515923890162744021073123829784752\");BigInt(0);const xr=BigInt(1),Te=BigInt(2);BigInt(3);const Br=BigInt(5),Cr=BigInt(8);function Ar(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),s=kt,u=t*t%s*t%s,i=J(u,Te,s)*u%s,D=J(i,xr,s)*t%s,c=J(D,Br,s)*D%s,l=J(c,e,s)*c%s,p=J(l,n,s)*l%s,w=J(p,r,s)*p%s,h=J(w,o,s)*w%s,g=J(h,o,s)*w%s,S=J(g,e,s)*c%s;return{pow_p_5_8:J(S,Te,s)*t%s,b2:u}}function mr(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function _r(t,e){const n=kt,r=H(e*e*e,n),o=H(r*r*e,n),s=Ar(t*o).pow_p_5_8;let a=H(t*r*s,n);const u=H(e*a*a,n),i=a,D=H(a*Ue,n),c=u===t,l=u===H(-t,n),p=u===H(-t*Ue,n);return c&&(a=i),(l||p)&&(a=D),ur(a,n)&&(a=H(-a,n)),{isValid:c||l,value:a}}const Sr=(()=>_e(kt,void 0,!0))(),vr=(()=>({a:BigInt(-1),d:BigInt(\"37095705934669439343138083508754565189542113879843219016388785533085940283555\"),Fp:Sr,n:BigInt(\"7237005577332262213973186563042994240857116359379907606001950938285454250989\"),h:Cr,Gx:BigInt(\"15112221349535400772501151409588531511454012693041857206046113283949847762202\"),Gy:BigInt(\"46316835694926478169428394003475163141307993866256225615783033603165251855960\"),hash:Kn,randomBytes:he,adjustScalarBytes:mr,uvRatio:_r}))(),Rt=(()=>yr(vr))(),jt=\"EdDSA\",Zt=\"JWT\",ut=\".\",Dt=\"base64url\",Gt=\"utf8\",xt=\"utf8\",Vt=\":\",Yt=\"did\",Jt=\"key\",dt=\"base58btc\",Kt=\"z\",Wt=\"K36\",Fe=32,Ne=32;function Xt(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Le(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Xt(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Oe(t,e){e||(e=t.reduce((o,s)=>o+s.length,0));const n=Le(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return Xt(n)}function Ir(t,e){if(t.length>=255)throw new TypeError(\"Alphabet too long\");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),a=s.charCodeAt(0);if(n[a]!==255)throw new TypeError(s+\" is ambiguous\");n[a]=o}var u=t.length,i=t.charAt(0),D=Math.log(u)/Math.log(256),c=Math.log(256)/Math.log(u);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError(\"Expected Uint8Array\");if(h.length===0)return\"\";for(var g=0,S=0,v=0,L=h.length;v!==L&&h[v]===0;)v++,g++;for(var d=(L-v)*c+1>>>0,m=new Uint8Array(d);v!==L;){for(var F=h[v],q=0,z=d-1;(F!==0||q<S)&&z!==-1;z--,q++)F+=256*m[z]>>>0,m[z]=F%u>>>0,F=F/u>>>0;if(F!==0)throw new Error(\"Non-zero carry\");S=q,v++}for(var I=d-S;I!==d&&m[I]===0;)I++;for(var O=i.repeat(g);I<d;++I)O+=t.charAt(m[I]);return O}function p(h){if(typeof h!=\"string\")throw new TypeError(\"Expected String\");if(h.length===0)return new Uint8Array;var g=0;if(h[g]!==\" \"){for(var S=0,v=0;h[g]===i;)S++,g++;for(var L=(h.length-g)*D+1>>>0,d=new Uint8Array(L);h[g];){var m=n[h.charCodeAt(g)];if(m===255)return;for(var F=0,q=L-1;(m!==0||F<v)&&q!==-1;q--,F++)m+=u*d[q]>>>0,d[q]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error(\"Non-zero carry\");v=F,g++}if(h[g]!==\" \"){for(var z=L-v;z!==L&&d[z]===0;)z++;for(var I=new Uint8Array(S+(L-z)),O=S;z!==L;)I[O++]=d[z++];return I}}}function w(h){var g=p(h);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:w}}var Ur=Ir,Tr=Ur;const He=t=>{if(t instanceof Uint8Array&&t.constructor.name===\"Uint8Array\")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error(\"Unknown type, must be binary type\")},Fr=t=>new TextEncoder().encode(t),Nr=t=>new TextDecoder().decode(t);class Lr{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error(\"Unknown type, must be binary type\")}}class Or{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error(\"Invalid prefix character\");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e==\"string\"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error(\"Can only multibase decode strings\")}or(e){return ze(this,e)}}class Hr{constructor(e){this.decoders=e}or(e){return ze(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ze=(t,e)=>new Hr({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class zr{constructor(e,n,r,o){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new Lr(e,n,r),this.decoder=new Or(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Bt=({name:t,prefix:e,encode:n,decode:r})=>new zr(t,e,n,r),ht=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:o}=Tr(n,e);return Bt({prefix:t,name:e,encode:r,decode:s=>He(o(s))})},Mr=(t,e,n,r)=>{const o={};for(let c=0;c<e.length;++c)o[e[c]]=c;let s=t.length;for(;t[s-1]===\"=\";)--s;const a=new Uint8Array(s*n/8|0);let u=0,i=0,D=0;for(let c=0;c<s;++c){const l=o[t[c]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);i=i<<n|l,u+=n,u>=8&&(u-=8,a[D++]=255&i>>u)}if(u>=n||255&i<<8-u)throw new SyntaxError(\"Unexpected end of data\");return a},qr=(t,e,n)=>{const r=e[e.length-1]===\"=\",o=(1<<n)-1;let s=\"\",a=0,u=0;for(let i=0;i<t.length;++i)for(u=u<<8|t[i],a+=8;a>n;)a-=n,s+=e[o&u>>a];if(a&&(s+=e[o&u<<n-a]),r)for(;s.length*n&7;)s+=\"=\";return s},k=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Bt({prefix:e,name:t,encode(o){return qr(o,r,n)},decode(o){return Mr(o,r,n,t)}}),$r=Bt({prefix:\"\\0\",name:\"identity\",encode:t=>Nr(t),decode:t=>Fr(t)});var kr=Object.freeze({__proto__:null,identity:$r});const Rr=k({prefix:\"0\",name:\"base2\",alphabet:\"01\",bitsPerChar:1});var jr=Object.freeze({__proto__:null,base2:Rr});const Zr=k({prefix:\"7\",name:\"base8\",alphabet:\"01234567\",bitsPerChar:3});var Gr=Object.freeze({__proto__:null,base8:Zr});const Vr=ht({prefix:\"9\",name:\"base10\",alphabet:\"0123456789\"});var Yr=Object.freeze({__proto__:null,base10:Vr});const Jr=k({prefix:\"f\",name:\"base16\",alphabet:\"0123456789abcdef\",bitsPerChar:4}),Kr=k({prefix:\"F\",name:\"base16upper\",alphabet:\"0123456789ABCDEF\",bitsPerChar:4});var Wr=Object.freeze({__proto__:null,base16:Jr,base16upper:Kr});const Xr=k({prefix:\"b\",name:\"base32\",alphabet:\"abcdefghijklmnopqrstuvwxyz234567\",bitsPerChar:5}),Pr=k({prefix:\"B\",name:\"base32upper\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\",bitsPerChar:5}),Qr=k({prefix:\"c\",name:\"base32pad\",alphabet:\"abcdefghijklmnopqrstuvwxyz234567=\",bitsPerChar:5}),to=k({prefix:\"C\",name:\"base32padupper\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=\",bitsPerChar:5}),eo=k({prefix:\"v\",name:\"base32hex\",alphabet:\"0123456789abcdefghijklmnopqrstuv\",bitsPerChar:5}),no=k({prefix:\"V\",name:\"base32hexupper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUV\",bitsPerChar:5}),ro=k({prefix:\"t\",name:\"base32hexpad\",alphabet:\"0123456789abcdefghijklmnopqrstuv=\",bitsPerChar:5}),oo=k({prefix:\"T\",name:\"base32hexpadupper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUV=\",bitsPerChar:5}),so=k({prefix:\"h\",name:\"base32z\",alphabet:\"ybndrfg8ejkmcpqxot1uwisza345h769\",bitsPerChar:5});var io=Object.freeze({__proto__:null,base32:Xr,base32upper:Pr,base32pad:Qr,base32padupper:to,base32hex:eo,base32hexupper:no,base32hexpad:ro,base32hexpadupper:oo,base32z:so});const uo=ht({prefix:\"k\",name:\"base36\",alphabet:\"0123456789abcdefghijklmnopqrstuvwxyz\"}),co=ht({prefix:\"K\",name:\"base36upper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"});var ao=Object.freeze({__proto__:null,base36:uo,base36upper:co});const fo=ht({name:\"base58btc\",prefix:\"z\",alphabet:\"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\"}),Do=ht({name:\"base58flickr\",prefix:\"Z\",alphabet:\"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\"});var ho=Object.freeze({__proto__:null,base58btc:fo,base58flickr:Do});const lo=k({prefix:\"m\",name:\"base64\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",bitsPerChar:6}),bo=k({prefix:\"M\",name:\"base64pad\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",bitsPerChar:6}),po=k({prefix:\"u\",name:\"base64url\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",bitsPerChar:6}),wo=k({prefix:\"U\",name:\"base64urlpad\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\",bitsPerChar:6});var Eo=Object.freeze({__proto__:null,base64:lo,base64pad:bo,base64url:po,base64urlpad:wo});const Me=Array.from(\"\\u{1F680}\\u{1FA90}\\u2604\\u{1F6F0}\\u{1F30C}\\u{1F311}\\u{1F312}\\u{1F313}\\u{1F314}\\u{1F315}\\u{1F316}\\u{1F317}\\u{1F318}\\u{1F30D}\\u{1F30F}\\u{1F30E}\\u{1F409}\\u2600\\u{1F4BB}\\u{1F5A5}\\u{1F4BE}\\u{1F4BF}\\u{1F602}\\u2764\\u{1F60D}\\u{1F923}\\u{1F60A}\\u{1F64F}\\u{1F495}\\u{1F62D}\\u{1F618}\\u{1F44D}\\u{1F605}\\u{1F44F}\\u{1F601}\\u{1F525}\\u{1F970}\\u{1F494}\\u{1F496}\\u{1F499}\\u{1F622}\\u{1F914}\\u{1F606}\\u{1F644}\\u{1F4AA}\\u{1F609}\\u263A\\u{1F44C}\\u{1F917}\\u{1F49C}\\u{1F614}\\u{1F60E}\\u{1F607}\\u{1F339}\\u{1F926}\\u{1F389}\\u{1F49E}\\u270C\\u2728\\u{1F937}\\u{1F631}\\u{1F60C}\\u{1F338}\\u{1F64C}\\u{1F60B}\\u{1F497}\\u{1F49A}\\u{1F60F}\\u{1F49B}\\u{1F642}\\u{1F493}\\u{1F929}\\u{1F604}\\u{1F600}\\u{1F5A4}\\u{1F603}\\u{1F4AF}\\u{1F648}\\u{1F447}\\u{1F3B6}\\u{1F612}\\u{1F92D}\\u2763\\u{1F61C}\\u{1F48B}\\u{1F440}\\u{1F62A}\\u{1F611}\\u{1F4A5}\\u{1F64B}\\u{1F61E}\\u{1F629}\\u{1F621}\\u{1F92A}\\u{1F44A}\\u{1F973}\\u{1F625}\\u{1F924}\\u{1F449}\\u{1F483}\\u{1F633}\\u270B\\u{1F61A}\\u{1F61D}\\u{1F634}\\u{1F31F}\\u{1F62C}\\u{1F643}\\u{1F340}\\u{1F337}\\u{1F63B}\\u{1F613}\\u2B50\\u2705\\u{1F97A}\\u{1F308}\\u{1F608}\\u{1F918}\\u{1F4A6}\\u2714\\u{1F623}\\u{1F3C3}\\u{1F490}\\u2639\\u{1F38A}\\u{1F498}\\u{1F620}\\u261D\\u{1F615}\\u{1F33A}\\u{1F382}\\u{1F33B}\\u{1F610}\\u{1F595}\\u{1F49D}\\u{1F64A}\\u{1F639}\\u{1F5E3}\\u{1F4AB}\\u{1F480}\\u{1F451}\\u{1F3B5}\\u{1F91E}\\u{1F61B}\\u{1F534}\\u{1F624}\\u{1F33C}\\u{1F62B}\\u26BD\\u{1F919}\\u2615\\u{1F3C6}\\u{1F92B}\\u{1F448}\\u{1F62E}\\u{1F646}\\u{1F37B}\\u{1F343}\\u{1F436}\\u{1F481}\\u{1F632}\\u{1F33F}\\u{1F9E1}\\u{1F381}\\u26A1\\u{1F31E}\\u{1F388}\\u274C\\u270A\\u{1F44B}\\u{1F630}\\u{1F928}\\u{1F636}\\u{1F91D}\\u{1F6B6}\\u{1F4B0}\\u{1F353}\\u{1F4A2}\\u{1F91F}\\u{1F641}\\u{1F6A8}\\u{1F4A8}\\u{1F92C}\\u2708\\u{1F380}\\u{1F37A}\\u{1F913}\\u{1F619}\\u{1F49F}\\u{1F331}\\u{1F616}\\u{1F476}\\u{1F974}\\u25B6\\u27A1\\u2753\\u{1F48E}\\u{1F4B8}\\u2B07\\u{1F628}\\u{1F31A}\\u{1F98B}\\u{1F637}\\u{1F57A}\\u26A0\\u{1F645}\\u{1F61F}\\u{1F635}\\u{1F44E}\\u{1F932}\\u{1F920}\\u{1F927}\\u{1F4CC}\\u{1F535}\\u{1F485}\\u{1F9D0}\\u{1F43E}\\u{1F352}\\u{1F617}\\u{1F911}\\u{1F30A}\\u{1F92F}\\u{1F437}\\u260E\\u{1F4A7}\\u{1F62F}\\u{1F486}\\u{1F446}\\u{1F3A4}\\u{1F647}\\u{1F351}\\u2744\\u{1F334}\\u{1F4A3}\\u{1F438}\\u{1F48C}\\u{1F4CD}\\u{1F940}\\u{1F922}\\u{1F445}\\u{1F4A1}\\u{1F4A9}\\u{1F450}\\u{1F4F8}\\u{1F47B}\\u{1F910}\\u{1F92E}\\u{1F3BC}\\u{1F975}\\u{1F6A9}\\u{1F34E}\\u{1F34A}\\u{1F47C}\\u{1F48D}\\u{1F4E3}\\u{1F942}\"),go=Me.reduce((t,e,n)=>(t[n]=e,t),[]),yo=Me.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function xo(t){return t.reduce((e,n)=>(e+=go[n],e),\"\")}function Bo(t){const e=[];for(const n of t){const r=yo[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Co=Bt({prefix:\"\\u{1F680}\",name:\"base256emoji\",encode:xo,decode:Bo});var Ao=Object.freeze({__proto__:null,base256emoji:Co}),mo=$e,qe=128,_o=127,So=~_o,vo=Math.pow(2,31);function $e(t,e,n){e=e||[],n=n||0;for(var r=n;t>=vo;)e[n++]=t&255|qe,t/=128;for(;t&So;)e[n++]=t&255|qe,t>>>=7;return e[n]=t|0,$e.bytes=n-r+1,e}var Io=Pt,Uo=128,ke=127;function Pt(t,r){var n=0,r=r||0,o=0,s=r,a,u=t.length;do{if(s>=u)throw Pt.bytes=0,new RangeError(\"Could not decode varint\");a=t[s++],n+=o<28?(a&ke)<<o:(a&ke)*Math.pow(2,o),o+=7}while(a>=Uo);return Pt.bytes=s-r,n}var To=Math.pow(2,7),Fo=Math.pow(2,14),No=Math.pow(2,21),Lo=Math.pow(2,28),Oo=Math.pow(2,35),Ho=Math.pow(2,42),zo=Math.pow(2,49),Mo=Math.pow(2,56),qo=Math.pow(2,63),$o=function(t){return t<To?1:t<Fo?2:t<No?3:t<Lo?4:t<Oo?5:t<Ho?6:t<zo?7:t<Mo?8:t<qo?9:10},ko={encode:mo,decode:Io,encodingLength:$o},Re=ko;const je=(t,e,n=0)=>(Re.encode(t,e,n),e),Ze=t=>Re.encodingLength(t),Qt=(t,e)=>{const n=e.byteLength,r=Ze(t),o=r+Ze(n),s=new Uint8Array(o+n);return je(t,s,0),je(n,s,r),s.set(e,o),new Ro(t,n,e,s)};class Ro{constructor(e,n,r,o){this.code=e,this.size=n,this.digest=r,this.bytes=o}}const Ge=({name:t,code:e,encode:n})=>new jo(t,e,n);class jo{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Qt(this.code,n):n.then(r=>Qt(this.code,r))}else throw Error(\"Unknown type, must be binary type\")}}const Ve=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Zo=Ge({name:\"sha2-256\",code:18,encode:Ve(\"SHA-256\")}),Go=Ge({name:\"sha2-512\",code:19,encode:Ve(\"SHA-512\")});var Vo=Object.freeze({__proto__:null,sha256:Zo,sha512:Go});const Ye=0,Yo=\"identity\",Je=He,Jo=t=>Qt(Ye,Je(t)),Ko={code:Ye,name:Yo,encode:Je,digest:Jo};var Wo=Object.freeze({__proto__:null,identity:Ko});new TextEncoder,new TextDecoder;const Ke={...kr,...jr,...Gr,...Yr,...Wr,...io,...ao,...ho,...Eo,...Ao};({...Vo,...Wo});function We(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Xe=We(\"utf8\",\"u\",t=>\"u\"+new TextDecoder(\"utf8\").decode(t),t=>new TextEncoder().encode(t.substring(1))),te=We(\"ascii\",\"a\",t=>{let e=\"a\";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Le(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Pe={utf8:Xe,\"utf-8\":Xe,hex:Ke.base16,latin1:te,ascii:te,binary:te,...Ke};function ct(t,e=\"utf8\"){const n=Pe[e];if(!n)throw new Error(`Unsupported encoding \"${e}\"`);return(e===\"utf8\"||e===\"utf-8\")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString(\"utf8\"):n.encoder.encode(t).substring(1)}function rt(t,e=\"utf8\"){const n=Pe[e];if(!n)throw new Error(`Unsupported encoding \"${e}\"`);return(e===\"utf8\"||e===\"utf-8\")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Xt(globalThis.Buffer.from(t,\"utf-8\")):n.decoder.decode(`${n.prefix}${t}`)}function lt(t){return pn(ct(rt(t,Dt),Gt))}function bt(t){return ct(rt(wn(t),Gt),Dt)}function Qe(t){const e=rt(Wt,dt),n=Kt+ct(Oe([e,t]),dt);return[Yt,Jt,n].join(Vt)}function tn(t){const[e,n,r]=t.split(Vt);if(e!==Yt||n!==Jt)throw new Error('Issuer must be a DID with method \"key\"');if(r.slice(0,1)!==Kt)throw new Error(\"Issuer must be a key in mulicodec format\");const o=rt(r.slice(1),dt);if(ct(o.slice(0,2),dt)!==Wt)throw new Error('Issuer must be a public key with type \"Ed25519\"');const s=o.slice(2);if(s.length!==Fe)throw new Error(\"Issuer must be a public key with length 32 bytes\");return s}function en(t){return ct(t,Dt)}function nn(t){return rt(t,Dt)}function rn(t){return rt([bt(t.header),bt(t.payload)].join(ut),xt)}function Xo(t){const e=ct(t,xt).split(ut),n=lt(e[0]),r=lt(e[1]);return{header:n,payload:r}}function on(t){return[bt(t.header),bt(t.payload),en(t.signature)].join(ut)}function sn(t){const e=t.split(ut),n=lt(e[0]),r=lt(e[1]),o=nn(e[2]),s=rt(e.slice(0,2).join(ut),xt);return{header:n,payload:r,signature:o,data:s}}function Po(t=he(Ne)){const e=Rt.getPublicKey(t);return{secretKey:Oe([t,e]),publicKey:e}}async function Qo(t,e,n,r,o=bn(Date.now())){const s={alg:jt,typ:Zt},a=Qe(r.publicKey),u=o+n,i={iss:a,sub:t,aud:e,iat:o,exp:u},D=rn({header:s,payload:i}),c=Rt.sign(D,r.secretKey.slice(0,32));return on({header:s,payload:i,signature:c})}async function ts(t){const{header:e,payload:n,data:r,signature:o}=sn(t);if(e.alg!==jt||e.typ!==Zt)throw new Error(\"JWT must use EdDSA algorithm\");const s=tn(n.iss);return Rt.verify(o,r,s)}export{xt as DATA_ENCODING,Vt as DID_DELIMITER,Jt as DID_METHOD,Yt as DID_PREFIX,Gt as JSON_ENCODING,ut as JWT_DELIMITER,Dt as JWT_ENCODING,jt as JWT_IRIDIUM_ALG,Zt as JWT_IRIDIUM_TYP,Ne as KEY_PAIR_SEED_LENGTH,Kt as MULTICODEC_ED25519_BASE,dt as MULTICODEC_ED25519_ENCODING,Wt as MULTICODEC_ED25519_HEADER,Fe as MULTICODEC_ED25519_LENGTH,Xo as decodeData,tn as decodeIss,lt as decodeJSON,sn as decodeJWT,nn as decodeSig,rn as encodeData,Qe as encodeIss,bt as encodeJSON,on as encodeJWT,en as encodeSig,Po as generateKeyPair,Qo as signJWT,ts as verifyJWT};\n//# sourceMappingURL=index.es.js.map\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['pie', /^Microsoft Pocket Internet Explorer\\/(\\d+\\.\\d+)$/],\n    ['pie', /^Mozilla\\/\\d\\.\\d+\\s\\(compatible;\\s(?:MSP?IE|MSInternet Explorer) (\\d+\\.\\d+);.*Windows CE.*\\)$/],\n    ['netfront', /^Mozilla\\/\\d\\.\\d+.*NetFront\\/(\\d.\\d)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FB[AS]V\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['curl', /^curl\\/([0-9\\.]+)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Windows CE', /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)\n    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getLocalStorage = exports.getLocalStorageOrThrow = exports.getCrypto = exports.getCryptoOrThrow = exports.getLocation = exports.getLocationOrThrow = exports.getNavigator = exports.getNavigatorOrThrow = exports.getDocument = exports.getDocumentOrThrow = exports.getFromWindowOrThrow = exports.getFromWindow = void 0;\nfunction getFromWindow(name) {\n    let res = undefined;\n    if (typeof window !== \"undefined\" && typeof window[name] !== \"undefined\") {\n        res = window[name];\n    }\n    return res;\n}\nexports.getFromWindow = getFromWindow;\nfunction getFromWindowOrThrow(name) {\n    const res = getFromWindow(name);\n    if (!res) {\n        throw new Error(`${name} is not defined in Window`);\n    }\n    return res;\n}\nexports.getFromWindowOrThrow = getFromWindowOrThrow;\nfunction getDocumentOrThrow() {\n    return getFromWindowOrThrow(\"document\");\n}\nexports.getDocumentOrThrow = getDocumentOrThrow;\nfunction getDocument() {\n    return getFromWindow(\"document\");\n}\nexports.getDocument = getDocument;\nfunction getNavigatorOrThrow() {\n    return getFromWindowOrThrow(\"navigator\");\n}\nexports.getNavigatorOrThrow = getNavigatorOrThrow;\nfunction getNavigator() {\n    return getFromWindow(\"navigator\");\n}\nexports.getNavigator = getNavigator;\nfunction getLocationOrThrow() {\n    return getFromWindowOrThrow(\"location\");\n}\nexports.getLocationOrThrow = getLocationOrThrow;\nfunction getLocation() {\n    return getFromWindow(\"location\");\n}\nexports.getLocation = getLocation;\nfunction getCryptoOrThrow() {\n    return getFromWindowOrThrow(\"crypto\");\n}\nexports.getCryptoOrThrow = getCryptoOrThrow;\nfunction getCrypto() {\n    return getFromWindow(\"crypto\");\n}\nexports.getCrypto = getCrypto;\nfunction getLocalStorageOrThrow() {\n    return getFromWindowOrThrow(\"localStorage\");\n}\nexports.getLocalStorageOrThrow = getLocalStorageOrThrow;\nfunction getLocalStorage() {\n    return getFromWindow(\"localStorage\");\n}\nexports.getLocalStorage = getLocalStorage;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWindowMetadata = void 0;\nconst window_getters_1 = require(\"@walletconnect/window-getters\");\nfunction getWindowMetadata() {\n    let doc;\n    let loc;\n    try {\n        doc = window_getters_1.getDocumentOrThrow();\n        loc = window_getters_1.getLocationOrThrow();\n    }\n    catch (e) {\n        return null;\n    }\n    function getIcons() {\n        const links = doc.getElementsByTagName(\"link\");\n        const icons = [];\n        for (let i = 0; i < links.length; i++) {\n            const link = links[i];\n            const rel = link.getAttribute(\"rel\");\n            if (rel) {\n                if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n                    const href = link.getAttribute(\"href\");\n                    if (href) {\n                        if (href.toLowerCase().indexOf(\"https:\") === -1 &&\n                            href.toLowerCase().indexOf(\"http:\") === -1 &&\n                            href.indexOf(\"//\") !== 0) {\n                            let absoluteHref = loc.protocol + \"//\" + loc.host;\n                            if (href.indexOf(\"/\") === 0) {\n                                absoluteHref += href;\n                            }\n                            else {\n                                const path = loc.pathname.split(\"/\");\n                                path.pop();\n                                const finalPath = path.join(\"/\");\n                                absoluteHref += finalPath + \"/\" + href;\n                            }\n                            icons.push(absoluteHref);\n                        }\n                        else if (href.indexOf(\"//\") === 0) {\n                            const absoluteUrl = loc.protocol + href;\n                            icons.push(absoluteUrl);\n                        }\n                        else {\n                            icons.push(href);\n                        }\n                    }\n                }\n            }\n        }\n        return icons;\n    }\n    function getWindowMetadataOfAny(...args) {\n        const metaTags = doc.getElementsByTagName(\"meta\");\n        for (let i = 0; i < metaTags.length; i++) {\n            const tag = metaTags[i];\n            const attributes = [\"itemprop\", \"property\", \"name\"]\n                .map((target) => tag.getAttribute(target))\n                .filter((attr) => {\n                if (attr) {\n                    return args.includes(attr);\n                }\n                return false;\n            });\n            if (attributes.length && attributes) {\n                const content = tag.getAttribute(\"content\");\n                if (content) {\n                    return content;\n                }\n            }\n        }\n        return \"\";\n    }\n    function getName() {\n        let name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n        if (!name) {\n            name = doc.title;\n        }\n        return name;\n    }\n    function getDescription() {\n        const description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n        return description;\n    }\n    const name = getName();\n    const description = getDescription();\n    const url = loc.origin;\n    const icons = getIcons();\n    const meta = {\n        description,\n        url,\n        icons,\n        name,\n    };\n    return meta;\n}\nexports.getWindowMetadata = getWindowMetadata;\n//# sourceMappingURL=index.js.map","export function alloc(size = 0) {\n  if (globalThis.Buffer != null && globalThis.Buffer.alloc != null) {\n    return globalThis.Buffer.alloc(size);\n  }\n  return new Uint8Array(size);\n}\nexport function allocUnsafe(size = 0) {\n  if (globalThis.Buffer != null && globalThis.Buffer.allocUnsafe != null) {\n    return globalThis.Buffer.allocUnsafe(size);\n  }\n  return new Uint8Array(size);\n}","import { allocUnsafe } from './alloc.js';\nexport function concat(arrays, length) {\n  if (!length) {\n    length = arrays.reduce((acc, curr) => acc + curr.length, 0);\n  }\n  const output = allocUnsafe(length);\n  let offset = 0;\n  for (const arr of arrays) {\n    output.set(arr, offset);\n    offset += arr.length;\n  }\n  return output;\n}","function base(ALPHABET, name) {\n  if (ALPHABET.length >= 255) {\n    throw new TypeError('Alphabet too long');\n  }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) {\n      throw new TypeError(x + ' is ambiguous');\n    }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256);\n  var iFACTOR = Math.log(256) / Math.log(BASE);\n  function encode(source) {\n    if (source instanceof Uint8Array);\n    else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) {\n      throw new TypeError('Expected Uint8Array');\n    }\n    if (source.length === 0) {\n      return '';\n    }\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n    var size = (pend - pbegin) * iFACTOR + 1 >>> 0;\n    var b58 = new Uint8Array(size);\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && it1 !== -1; it1--, i++) {\n        carry += 256 * b58[it1] >>> 0;\n        b58[it1] = carry % BASE >>> 0;\n        carry = carry / BASE >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error('Non-zero carry');\n      }\n      length = i;\n      pbegin++;\n    }\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) {\n      str += ALPHABET.charAt(b58[it2]);\n    }\n    return str;\n  }\n  function decodeUnsafe(source) {\n    if (typeof source !== 'string') {\n      throw new TypeError('Expected String');\n    }\n    if (source.length === 0) {\n      return new Uint8Array();\n    }\n    var psz = 0;\n    if (source[psz] === ' ') {\n      return;\n    }\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n    var size = (source.length - psz) * FACTOR + 1 >>> 0;\n    var b256 = new Uint8Array(size);\n    while (source[psz]) {\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n      if (carry === 255) {\n        return;\n      }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && it3 !== -1; it3--, i++) {\n        carry += BASE * b256[it3] >>> 0;\n        b256[it3] = carry % 256 >>> 0;\n        carry = carry / 256 >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error('Non-zero carry');\n      }\n      length = i;\n      psz++;\n    }\n    if (source[psz] === ' ') {\n      return;\n    }\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch;\n  }\n  function decode(string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) {\n      return buffer;\n    }\n    throw new Error(`Non-${ name } character`);\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  };\n}\nvar src = base;\nvar _brrp__multiformats_scope_baseX = src;\nexport default _brrp__multiformats_scope_baseX;","const empty = new Uint8Array(0);\nconst toHex = d => d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '');\nconst fromHex = hex => {\n  const hexes = hex.match(/../g);\n  return hexes ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty;\n};\nconst equals = (aa, bb) => {\n  if (aa === bb)\n    return true;\n  if (aa.byteLength !== bb.byteLength) {\n    return false;\n  }\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false;\n    }\n  }\n  return true;\n};\nconst coerce = o => {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array')\n    return o;\n  if (o instanceof ArrayBuffer)\n    return new Uint8Array(o);\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength);\n  }\n  throw new Error('Unknown type, must be binary type');\n};\nconst isBinary = o => o instanceof ArrayBuffer || ArrayBuffer.isView(o);\nconst fromString = str => new TextEncoder().encode(str);\nconst toString = b => new TextDecoder().decode(b);\nexport {\n  equals,\n  coerce,\n  isBinary,\n  fromHex,\n  toHex,\n  fromString,\n  toString,\n  empty\n};","import basex from '../../vendor/base-x.js';\nimport { coerce } from '../bytes.js';\nclass Encoder {\n  constructor(name, prefix, baseEncode) {\n    this.name = name;\n    this.prefix = prefix;\n    this.baseEncode = baseEncode;\n  }\n  encode(bytes) {\n    if (bytes instanceof Uint8Array) {\n      return `${ this.prefix }${ this.baseEncode(bytes) }`;\n    } else {\n      throw Error('Unknown type, must be binary type');\n    }\n  }\n}\nclass Decoder {\n  constructor(name, prefix, baseDecode) {\n    this.name = name;\n    this.prefix = prefix;\n    if (prefix.codePointAt(0) === undefined) {\n      throw new Error('Invalid prefix character');\n    }\n    this.prefixCodePoint = prefix.codePointAt(0);\n    this.baseDecode = baseDecode;\n  }\n  decode(text) {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${ JSON.stringify(text) }, ${ this.name } decoder only supports inputs prefixed with ${ this.prefix }`);\n      }\n      return this.baseDecode(text.slice(this.prefix.length));\n    } else {\n      throw Error('Can only multibase decode strings');\n    }\n  }\n  or(decoder) {\n    return or(this, decoder);\n  }\n}\nclass ComposedDecoder {\n  constructor(decoders) {\n    this.decoders = decoders;\n  }\n  or(decoder) {\n    return or(this, decoder);\n  }\n  decode(input) {\n    const prefix = input[0];\n    const decoder = this.decoders[prefix];\n    if (decoder) {\n      return decoder.decode(input);\n    } else {\n      throw RangeError(`Unable to decode multibase string ${ JSON.stringify(input) }, only inputs prefixed with ${ Object.keys(this.decoders) } are supported`);\n    }\n  }\n}\nexport const or = (left, right) => new ComposedDecoder({\n  ...left.decoders || { [left.prefix]: left },\n  ...right.decoders || { [right.prefix]: right }\n});\nexport class Codec {\n  constructor(name, prefix, baseEncode, baseDecode) {\n    this.name = name;\n    this.prefix = prefix;\n    this.baseEncode = baseEncode;\n    this.baseDecode = baseDecode;\n    this.encoder = new Encoder(name, prefix, baseEncode);\n    this.decoder = new Decoder(name, prefix, baseDecode);\n  }\n  encode(input) {\n    return this.encoder.encode(input);\n  }\n  decode(input) {\n    return this.decoder.decode(input);\n  }\n}\nexport const from = ({name, prefix, encode, decode}) => new Codec(name, prefix, encode, decode);\nexport const baseX = ({prefix, name, alphabet}) => {\n  const {encode, decode} = basex(alphabet, name);\n  return from({\n    prefix,\n    name,\n    encode,\n    decode: text => coerce(decode(text))\n  });\n};\nconst decode = (string, alphabet, bitsPerChar, name) => {\n  const codes = {};\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i;\n  }\n  let end = string.length;\n  while (string[end - 1] === '=') {\n    --end;\n  }\n  const out = new Uint8Array(end * bitsPerChar / 8 | 0);\n  let bits = 0;\n  let buffer = 0;\n  let written = 0;\n  for (let i = 0; i < end; ++i) {\n    const value = codes[string[i]];\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${ name } character`);\n    }\n    buffer = buffer << bitsPerChar | value;\n    bits += bitsPerChar;\n    if (bits >= 8) {\n      bits -= 8;\n      out[written++] = 255 & buffer >> bits;\n    }\n  }\n  if (bits >= bitsPerChar || 255 & buffer << 8 - bits) {\n    throw new SyntaxError('Unexpected end of data');\n  }\n  return out;\n};\nconst encode = (data, alphabet, bitsPerChar) => {\n  const pad = alphabet[alphabet.length - 1] === '=';\n  const mask = (1 << bitsPerChar) - 1;\n  let out = '';\n  let bits = 0;\n  let buffer = 0;\n  for (let i = 0; i < data.length; ++i) {\n    buffer = buffer << 8 | data[i];\n    bits += 8;\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar;\n      out += alphabet[mask & buffer >> bits];\n    }\n  }\n  if (bits) {\n    out += alphabet[mask & buffer << bitsPerChar - bits];\n  }\n  if (pad) {\n    while (out.length * bitsPerChar & 7) {\n      out += '=';\n    }\n  }\n  return out;\n};\nexport const rfc4648 = ({name, prefix, bitsPerChar, alphabet}) => {\n  return from({\n    prefix,\n    name,\n    encode(input) {\n      return encode(input, alphabet, bitsPerChar);\n    },\n    decode(input) {\n      return decode(input, alphabet, bitsPerChar, name);\n    }\n  });\n};","import { from } from './base.js';\nimport {\n  fromString,\n  toString\n} from '../bytes.js';\nexport const identity = from({\n  prefix: '\\0',\n  name: 'identity',\n  encode: buf => toString(buf),\n  decode: str => fromString(str)\n});","import { rfc4648 } from './base.js';\nexport const base2 = rfc4648({\n  prefix: '0',\n  name: 'base2',\n  alphabet: '01',\n  bitsPerChar: 1\n});","import { rfc4648 } from './base.js';\nexport const base8 = rfc4648({\n  prefix: '7',\n  name: 'base8',\n  alphabet: '01234567',\n  bitsPerChar: 3\n});","import { baseX } from './base.js';\nexport const base10 = baseX({\n  prefix: '9',\n  name: 'base10',\n  alphabet: '0123456789'\n});","import { rfc4648 } from './base.js';\nexport const base16 = rfc4648({\n  prefix: 'f',\n  name: 'base16',\n  alphabet: '0123456789abcdef',\n  bitsPerChar: 4\n});\nexport const base16upper = rfc4648({\n  prefix: 'F',\n  name: 'base16upper',\n  alphabet: '0123456789ABCDEF',\n  bitsPerChar: 4\n});","import { rfc4648 } from './base.js';\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n});\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n});\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n});\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n});\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n});\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n});\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n});\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n});\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n});","import { baseX } from './base.js';\nexport const base36 = baseX({\n  prefix: 'k',\n  name: 'base36',\n  alphabet: '0123456789abcdefghijklmnopqrstuvwxyz'\n});\nexport const base36upper = baseX({\n  prefix: 'K',\n  name: 'base36upper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n});","import { baseX } from './base.js';\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n});\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n});","import { rfc4648 } from './base.js';\nexport const base64 = rfc4648({\n  prefix: 'm',\n  name: 'base64',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n  bitsPerChar: 6\n});\nexport const base64pad = rfc4648({\n  prefix: 'M',\n  name: 'base64pad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n  bitsPerChar: 6\n});\nexport const base64url = rfc4648({\n  prefix: 'u',\n  name: 'base64url',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n  bitsPerChar: 6\n});\nexport const base64urlpad = rfc4648({\n  prefix: 'U',\n  name: 'base64urlpad',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=',\n  bitsPerChar: 6\n});","import { from } from './base.js';\nconst alphabet = Array.from('\\uD83D\\uDE80\\uD83E\\uDE90\\u2604\\uD83D\\uDEF0\\uD83C\\uDF0C\\uD83C\\uDF11\\uD83C\\uDF12\\uD83C\\uDF13\\uD83C\\uDF14\\uD83C\\uDF15\\uD83C\\uDF16\\uD83C\\uDF17\\uD83C\\uDF18\\uD83C\\uDF0D\\uD83C\\uDF0F\\uD83C\\uDF0E\\uD83D\\uDC09\\u2600\\uD83D\\uDCBB\\uD83D\\uDDA5\\uD83D\\uDCBE\\uD83D\\uDCBF\\uD83D\\uDE02\\u2764\\uD83D\\uDE0D\\uD83E\\uDD23\\uD83D\\uDE0A\\uD83D\\uDE4F\\uD83D\\uDC95\\uD83D\\uDE2D\\uD83D\\uDE18\\uD83D\\uDC4D\\uD83D\\uDE05\\uD83D\\uDC4F\\uD83D\\uDE01\\uD83D\\uDD25\\uD83E\\uDD70\\uD83D\\uDC94\\uD83D\\uDC96\\uD83D\\uDC99\\uD83D\\uDE22\\uD83E\\uDD14\\uD83D\\uDE06\\uD83D\\uDE44\\uD83D\\uDCAA\\uD83D\\uDE09\\u263A\\uD83D\\uDC4C\\uD83E\\uDD17\\uD83D\\uDC9C\\uD83D\\uDE14\\uD83D\\uDE0E\\uD83D\\uDE07\\uD83C\\uDF39\\uD83E\\uDD26\\uD83C\\uDF89\\uD83D\\uDC9E\\u270C\\u2728\\uD83E\\uDD37\\uD83D\\uDE31\\uD83D\\uDE0C\\uD83C\\uDF38\\uD83D\\uDE4C\\uD83D\\uDE0B\\uD83D\\uDC97\\uD83D\\uDC9A\\uD83D\\uDE0F\\uD83D\\uDC9B\\uD83D\\uDE42\\uD83D\\uDC93\\uD83E\\uDD29\\uD83D\\uDE04\\uD83D\\uDE00\\uD83D\\uDDA4\\uD83D\\uDE03\\uD83D\\uDCAF\\uD83D\\uDE48\\uD83D\\uDC47\\uD83C\\uDFB6\\uD83D\\uDE12\\uD83E\\uDD2D\\u2763\\uD83D\\uDE1C\\uD83D\\uDC8B\\uD83D\\uDC40\\uD83D\\uDE2A\\uD83D\\uDE11\\uD83D\\uDCA5\\uD83D\\uDE4B\\uD83D\\uDE1E\\uD83D\\uDE29\\uD83D\\uDE21\\uD83E\\uDD2A\\uD83D\\uDC4A\\uD83E\\uDD73\\uD83D\\uDE25\\uD83E\\uDD24\\uD83D\\uDC49\\uD83D\\uDC83\\uD83D\\uDE33\\u270B\\uD83D\\uDE1A\\uD83D\\uDE1D\\uD83D\\uDE34\\uD83C\\uDF1F\\uD83D\\uDE2C\\uD83D\\uDE43\\uD83C\\uDF40\\uD83C\\uDF37\\uD83D\\uDE3B\\uD83D\\uDE13\\u2B50\\u2705\\uD83E\\uDD7A\\uD83C\\uDF08\\uD83D\\uDE08\\uD83E\\uDD18\\uD83D\\uDCA6\\u2714\\uD83D\\uDE23\\uD83C\\uDFC3\\uD83D\\uDC90\\u2639\\uD83C\\uDF8A\\uD83D\\uDC98\\uD83D\\uDE20\\u261D\\uD83D\\uDE15\\uD83C\\uDF3A\\uD83C\\uDF82\\uD83C\\uDF3B\\uD83D\\uDE10\\uD83D\\uDD95\\uD83D\\uDC9D\\uD83D\\uDE4A\\uD83D\\uDE39\\uD83D\\uDDE3\\uD83D\\uDCAB\\uD83D\\uDC80\\uD83D\\uDC51\\uD83C\\uDFB5\\uD83E\\uDD1E\\uD83D\\uDE1B\\uD83D\\uDD34\\uD83D\\uDE24\\uD83C\\uDF3C\\uD83D\\uDE2B\\u26BD\\uD83E\\uDD19\\u2615\\uD83C\\uDFC6\\uD83E\\uDD2B\\uD83D\\uDC48\\uD83D\\uDE2E\\uD83D\\uDE46\\uD83C\\uDF7B\\uD83C\\uDF43\\uD83D\\uDC36\\uD83D\\uDC81\\uD83D\\uDE32\\uD83C\\uDF3F\\uD83E\\uDDE1\\uD83C\\uDF81\\u26A1\\uD83C\\uDF1E\\uD83C\\uDF88\\u274C\\u270A\\uD83D\\uDC4B\\uD83D\\uDE30\\uD83E\\uDD28\\uD83D\\uDE36\\uD83E\\uDD1D\\uD83D\\uDEB6\\uD83D\\uDCB0\\uD83C\\uDF53\\uD83D\\uDCA2\\uD83E\\uDD1F\\uD83D\\uDE41\\uD83D\\uDEA8\\uD83D\\uDCA8\\uD83E\\uDD2C\\u2708\\uD83C\\uDF80\\uD83C\\uDF7A\\uD83E\\uDD13\\uD83D\\uDE19\\uD83D\\uDC9F\\uD83C\\uDF31\\uD83D\\uDE16\\uD83D\\uDC76\\uD83E\\uDD74\\u25B6\\u27A1\\u2753\\uD83D\\uDC8E\\uD83D\\uDCB8\\u2B07\\uD83D\\uDE28\\uD83C\\uDF1A\\uD83E\\uDD8B\\uD83D\\uDE37\\uD83D\\uDD7A\\u26A0\\uD83D\\uDE45\\uD83D\\uDE1F\\uD83D\\uDE35\\uD83D\\uDC4E\\uD83E\\uDD32\\uD83E\\uDD20\\uD83E\\uDD27\\uD83D\\uDCCC\\uD83D\\uDD35\\uD83D\\uDC85\\uD83E\\uDDD0\\uD83D\\uDC3E\\uD83C\\uDF52\\uD83D\\uDE17\\uD83E\\uDD11\\uD83C\\uDF0A\\uD83E\\uDD2F\\uD83D\\uDC37\\u260E\\uD83D\\uDCA7\\uD83D\\uDE2F\\uD83D\\uDC86\\uD83D\\uDC46\\uD83C\\uDFA4\\uD83D\\uDE47\\uD83C\\uDF51\\u2744\\uD83C\\uDF34\\uD83D\\uDCA3\\uD83D\\uDC38\\uD83D\\uDC8C\\uD83D\\uDCCD\\uD83E\\uDD40\\uD83E\\uDD22\\uD83D\\uDC45\\uD83D\\uDCA1\\uD83D\\uDCA9\\uD83D\\uDC50\\uD83D\\uDCF8\\uD83D\\uDC7B\\uD83E\\uDD10\\uD83E\\uDD2E\\uD83C\\uDFBC\\uD83E\\uDD75\\uD83D\\uDEA9\\uD83C\\uDF4E\\uD83C\\uDF4A\\uD83D\\uDC7C\\uD83D\\uDC8D\\uD83D\\uDCE3\\uD83E\\uDD42');\nconst alphabetBytesToChars = alphabet.reduce((p, c, i) => {\n  p[i] = c;\n  return p;\n}, []);\nconst alphabetCharsToBytes = alphabet.reduce((p, c, i) => {\n  p[c.codePointAt(0)] = i;\n  return p;\n}, []);\nfunction encode(data) {\n  return data.reduce((p, c) => {\n    p += alphabetBytesToChars[c];\n    return p;\n  }, '');\n}\nfunction decode(str) {\n  const byts = [];\n  for (const char of str) {\n    const byt = alphabetCharsToBytes[char.codePointAt(0)];\n    if (byt === undefined) {\n      throw new Error(`Non-base256emoji character: ${ char }`);\n    }\n    byts.push(byt);\n  }\n  return new Uint8Array(byts);\n}\nexport const base256emoji = from({\n  prefix: '\\uD83D\\uDE80',\n  name: 'base256emoji',\n  encode,\n  decode\n});","var encode_1 = encode;\nvar MSB = 128, REST = 127, MSBALL = ~REST, INT = Math.pow(2, 31);\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n  while (num >= INT) {\n    out[offset++] = num & 255 | MSB;\n    num /= 128;\n  }\n  while (num & MSBALL) {\n    out[offset++] = num & 255 | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  encode.bytes = offset - oldOffset + 1;\n  return out;\n}\nvar decode = read;\nvar MSB$1 = 128, REST$1 = 127;\nfunction read(buf, offset) {\n  var res = 0, offset = offset || 0, shift = 0, counter = offset, b, l = buf.length;\n  do {\n    if (counter >= l) {\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint');\n    }\n    b = buf[counter++];\n    res += shift < 28 ? (b & REST$1) << shift : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1);\n  read.bytes = counter - offset;\n  return res;\n}\nvar N1 = Math.pow(2, 7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\nvar length = function (value) {\n  return value < N1 ? 1 : value < N2 ? 2 : value < N3 ? 3 : value < N4 ? 4 : value < N5 ? 5 : value < N6 ? 6 : value < N7 ? 7 : value < N8 ? 8 : value < N9 ? 9 : 10;\n};\nvar varint = {\n  encode: encode_1,\n  decode: decode,\n  encodingLength: length\n};\nvar _brrp_varint = varint;\nexport default _brrp_varint;","import varint from '../vendor/varint.js';\nexport const decode = (data, offset = 0) => {\n  const code = varint.decode(data, offset);\n  return [\n    code,\n    varint.decode.bytes\n  ];\n};\nexport const encodeTo = (int, target, offset = 0) => {\n  varint.encode(int, target, offset);\n  return target;\n};\nexport const encodingLength = int => {\n  return varint.encodingLength(int);\n};","import {\n  coerce,\n  equals as equalBytes\n} from '../bytes.js';\nimport * as varint from '../varint.js';\nexport const create = (code, digest) => {\n  const size = digest.byteLength;\n  const sizeOffset = varint.encodingLength(code);\n  const digestOffset = sizeOffset + varint.encodingLength(size);\n  const bytes = new Uint8Array(digestOffset + size);\n  varint.encodeTo(code, bytes, 0);\n  varint.encodeTo(size, bytes, sizeOffset);\n  bytes.set(digest, digestOffset);\n  return new Digest(code, size, digest, bytes);\n};\nexport const decode = multihash => {\n  const bytes = coerce(multihash);\n  const [code, sizeOffset] = varint.decode(bytes);\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset));\n  const digest = bytes.subarray(sizeOffset + digestOffset);\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length');\n  }\n  return new Digest(code, size, digest, bytes);\n};\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true;\n  } else {\n    return a.code === b.code && a.size === b.size && equalBytes(a.bytes, b.bytes);\n  }\n};\nexport class Digest {\n  constructor(code, size, digest, bytes) {\n    this.code = code;\n    this.size = size;\n    this.digest = digest;\n    this.bytes = bytes;\n  }\n}","import * as Digest from './digest.js';\nexport const from = ({name, code, encode}) => new Hasher(name, code, encode);\nexport class Hasher {\n  constructor(name, code, encode) {\n    this.name = name;\n    this.code = code;\n    this.encode = encode;\n  }\n  digest(input) {\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input);\n      return result instanceof Uint8Array ? Digest.create(this.code, result) : result.then(digest => Digest.create(this.code, digest));\n    } else {\n      throw Error('Unknown type, must be binary type');\n    }\n  }\n}","import { from } from './hasher.js';\nconst sha = name => async data => new Uint8Array(await crypto.subtle.digest(name, data));\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 18,\n  encode: sha('SHA-256')\n});\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 19,\n  encode: sha('SHA-512')\n});","import { coerce } from '../bytes.js';\nimport * as Digest from './digest.js';\nconst code = 0;\nconst name = 'identity';\nconst encode = coerce;\nconst digest = input => Digest.create(code, encode(input));\nexport const identity = {\n  code,\n  name,\n  encode,\n  digest\n};","const textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\nexport const name = 'json';\nexport const code = 512;\nexport const encode = node => textEncoder.encode(JSON.stringify(node));\nexport const decode = data => JSON.parse(textDecoder.decode(data));","import * as varint from './varint.js';\nimport * as Digest from './hashes/digest.js';\nimport { base58btc } from './bases/base58.js';\nimport { base32 } from './bases/base32.js';\nimport { coerce } from './bytes.js';\nexport class CID {\n  constructor(version, code, multihash, bytes) {\n    this.code = code;\n    this.version = version;\n    this.multihash = multihash;\n    this.bytes = bytes;\n    this.byteOffset = bytes.byteOffset;\n    this.byteLength = bytes.byteLength;\n    this.asCID = this;\n    this._baseCache = new Map();\n    Object.defineProperties(this, {\n      byteOffset: hidden,\n      byteLength: hidden,\n      code: readonly,\n      version: readonly,\n      multihash: readonly,\n      bytes: readonly,\n      _baseCache: hidden,\n      asCID: hidden\n    });\n  }\n  toV0() {\n    switch (this.version) {\n    case 0: {\n        return this;\n      }\n    default: {\n        const {code, multihash} = this;\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0');\n        }\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0');\n        }\n        return CID.createV0(multihash);\n      }\n    }\n  }\n  toV1() {\n    switch (this.version) {\n    case 0: {\n        const {code, digest} = this.multihash;\n        const multihash = Digest.create(code, digest);\n        return CID.createV1(this.code, multihash);\n      }\n    case 1: {\n        return this;\n      }\n    default: {\n        throw Error(`Can not convert CID version ${ this.version } to version 0. This is a bug please report`);\n      }\n    }\n  }\n  equals(other) {\n    return other && this.code === other.code && this.version === other.version && Digest.equals(this.multihash, other.multihash);\n  }\n  toString(base) {\n    const {bytes, version, _baseCache} = this;\n    switch (version) {\n    case 0:\n      return toStringV0(bytes, _baseCache, base || base58btc.encoder);\n    default:\n      return toStringV1(bytes, _baseCache, base || base32.encoder);\n    }\n  }\n  toJSON() {\n    return {\n      code: this.code,\n      version: this.version,\n      hash: this.multihash.bytes\n    };\n  }\n  get [Symbol.toStringTag]() {\n    return 'CID';\n  }\n  [Symbol.for('nodejs.util.inspect.custom')]() {\n    return 'CID(' + this.toString() + ')';\n  }\n  static isCID(value) {\n    deprecate(/^0\\.0/, IS_CID_DEPRECATION);\n    return !!(value && (value[cidSymbol] || value.asCID === value));\n  }\n  get toBaseEncodedString() {\n    throw new Error('Deprecated, use .toString()');\n  }\n  get codec() {\n    throw new Error('\"codec\" property is deprecated, use integer \"code\" property instead');\n  }\n  get buffer() {\n    throw new Error('Deprecated .buffer property, use .bytes to get Uint8Array instead');\n  }\n  get multibaseName() {\n    throw new Error('\"multibaseName\" property is deprecated');\n  }\n  get prefix() {\n    throw new Error('\"prefix\" property is deprecated');\n  }\n  static asCID(value) {\n    if (value instanceof CID) {\n      return value;\n    } else if (value != null && value.asCID === value) {\n      const {version, code, multihash, bytes} = value;\n      return new CID(version, code, multihash, bytes || encodeCID(version, code, multihash.bytes));\n    } else if (value != null && value[cidSymbol] === true) {\n      const {version, multihash, code} = value;\n      const digest = Digest.decode(multihash);\n      return CID.create(version, code, digest);\n    } else {\n      return null;\n    }\n  }\n  static create(version, code, digest) {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported');\n    }\n    switch (version) {\n    case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(`Version 0 CID must use dag-pb (code: ${ DAG_PB_CODE }) block encoding`);\n        } else {\n          return new CID(version, code, digest, digest.bytes);\n        }\n      }\n    case 1: {\n        const bytes = encodeCID(version, code, digest.bytes);\n        return new CID(version, code, digest, bytes);\n      }\n    default: {\n        throw new Error('Invalid version');\n      }\n    }\n  }\n  static createV0(digest) {\n    return CID.create(0, DAG_PB_CODE, digest);\n  }\n  static createV1(code, digest) {\n    return CID.create(1, code, digest);\n  }\n  static decode(bytes) {\n    const [cid, remainder] = CID.decodeFirst(bytes);\n    if (remainder.length) {\n      throw new Error('Incorrect length');\n    }\n    return cid;\n  }\n  static decodeFirst(bytes) {\n    const specs = CID.inspectBytes(bytes);\n    const prefixSize = specs.size - specs.multihashSize;\n    const multihashBytes = coerce(bytes.subarray(prefixSize, prefixSize + specs.multihashSize));\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length');\n    }\n    const digestBytes = multihashBytes.subarray(specs.multihashSize - specs.digestSize);\n    const digest = new Digest.Digest(specs.multihashCode, specs.digestSize, digestBytes, multihashBytes);\n    const cid = specs.version === 0 ? CID.createV0(digest) : CID.createV1(specs.codec, digest);\n    return [\n      cid,\n      bytes.subarray(specs.size)\n    ];\n  }\n  static inspectBytes(initialBytes) {\n    let offset = 0;\n    const next = () => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset));\n      offset += length;\n      return i;\n    };\n    let version = next();\n    let codec = DAG_PB_CODE;\n    if (version === 18) {\n      version = 0;\n      offset = 0;\n    } else if (version === 1) {\n      codec = next();\n    }\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${ version }`);\n    }\n    const prefixSize = offset;\n    const multihashCode = next();\n    const digestSize = next();\n    const size = offset + digestSize;\n    const multihashSize = size - prefixSize;\n    return {\n      version,\n      codec,\n      multihashCode,\n      digestSize,\n      multihashSize,\n      size\n    };\n  }\n  static parse(source, base) {\n    const [prefix, bytes] = parseCIDtoBytes(source, base);\n    const cid = CID.decode(bytes);\n    cid._baseCache.set(prefix, source);\n    return cid;\n  }\n}\nconst parseCIDtoBytes = (source, base) => {\n  switch (source[0]) {\n  case 'Q': {\n      const decoder = base || base58btc;\n      return [\n        base58btc.prefix,\n        decoder.decode(`${ base58btc.prefix }${ source }`)\n      ];\n    }\n  case base58btc.prefix: {\n      const decoder = base || base58btc;\n      return [\n        base58btc.prefix,\n        decoder.decode(source)\n      ];\n    }\n  case base32.prefix: {\n      const decoder = base || base32;\n      return [\n        base32.prefix,\n        decoder.decode(source)\n      ];\n    }\n  default: {\n      if (base == null) {\n        throw Error('To parse non base32 or base58btc encoded CID multibase decoder must be provided');\n      }\n      return [\n        source[0],\n        base.decode(source)\n      ];\n    }\n  }\n};\nconst toStringV0 = (bytes, cache, base) => {\n  const {prefix} = base;\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${ base.name } encoding`);\n  }\n  const cid = cache.get(prefix);\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1);\n    cache.set(prefix, cid);\n    return cid;\n  } else {\n    return cid;\n  }\n};\nconst toStringV1 = (bytes, cache, base) => {\n  const {prefix} = base;\n  const cid = cache.get(prefix);\n  if (cid == null) {\n    const cid = base.encode(bytes);\n    cache.set(prefix, cid);\n    return cid;\n  } else {\n    return cid;\n  }\n};\nconst DAG_PB_CODE = 112;\nconst SHA_256_CODE = 18;\nconst encodeCID = (version, code, multihash) => {\n  const codeOffset = varint.encodingLength(version);\n  const hashOffset = codeOffset + varint.encodingLength(code);\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength);\n  varint.encodeTo(version, bytes, 0);\n  varint.encodeTo(code, bytes, codeOffset);\n  bytes.set(multihash, hashOffset);\n  return bytes;\n};\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID');\nconst readonly = {\n  writable: false,\n  configurable: false,\n  enumerable: true\n};\nconst hidden = {\n  writable: false,\n  enumerable: false,\n  configurable: false\n};\nconst version = '0.0.0-dev';\nconst deprecate = (range, message) => {\n  if (range.test(version)) {\n    console.warn(message);\n  } else {\n    throw new Error(message);\n  }\n};\nconst IS_CID_DEPRECATION = `CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;","import * as identityBase from './bases/identity.js';\nimport * as base2 from './bases/base2.js';\nimport * as base8 from './bases/base8.js';\nimport * as base10 from './bases/base10.js';\nimport * as base16 from './bases/base16.js';\nimport * as base32 from './bases/base32.js';\nimport * as base36 from './bases/base36.js';\nimport * as base58 from './bases/base58.js';\nimport * as base64 from './bases/base64.js';\nimport * as base256emoji from './bases/base256emoji.js';\nimport * as sha2 from './hashes/sha2.js';\nimport * as identity from './hashes/identity.js';\nimport * as raw from './codecs/raw.js';\nimport * as json from './codecs/json.js';\nimport {\n  CID,\n  hasher,\n  digest,\n  varint,\n  bytes\n} from './index.js';\nconst bases = {\n  ...identityBase,\n  ...base2,\n  ...base8,\n  ...base10,\n  ...base16,\n  ...base32,\n  ...base36,\n  ...base58,\n  ...base64,\n  ...base256emoji\n};\nconst hashes = {\n  ...sha2,\n  ...identity\n};\nconst codecs = {\n  raw,\n  json\n};\nexport {\n  CID,\n  hasher,\n  digest,\n  varint,\n  bytes,\n  hashes,\n  bases,\n  codecs\n};","import { bases } from 'multiformats/basics';\nimport { allocUnsafe } from '../alloc.js';\nfunction createCodec(name, prefix, encode, decode) {\n  return {\n    name,\n    prefix,\n    encoder: {\n      name,\n      prefix,\n      encode\n    },\n    decoder: { decode }\n  };\n}\nconst string = createCodec('utf8', 'u', buf => {\n  const decoder = new TextDecoder('utf8');\n  return 'u' + decoder.decode(buf);\n}, str => {\n  const encoder = new TextEncoder();\n  return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', buf => {\n  let string = 'a';\n  for (let i = 0; i < buf.length; i++) {\n    string += String.fromCharCode(buf[i]);\n  }\n  return string;\n}, str => {\n  str = str.substring(1);\n  const buf = allocUnsafe(str.length);\n  for (let i = 0; i < str.length; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n});\nconst BASES = {\n  utf8: string,\n  'utf-8': string,\n  hex: bases.base16,\n  latin1: ascii,\n  ascii: ascii,\n  binary: ascii,\n  ...bases\n};\nexport default BASES;","import bases from './util/bases.js';\nexport function fromString(string, encoding = 'utf8') {\n  const base = bases[encoding];\n  if (!base) {\n    throw new Error(`Unsupported encoding \"${ encoding }\"`);\n  }\n  if ((encoding === 'utf8' || encoding === 'utf-8') && globalThis.Buffer != null && globalThis.Buffer.from != null) {\n    return globalThis.Buffer.from(string, 'utf8');\n  }\n  return base.decoder.decode(`${ base.prefix }${ string }`);\n}","import bases from './util/bases.js';\nexport function toString(array, encoding = 'utf8') {\n  const base = bases[encoding];\n  if (!base) {\n    throw new Error(`Unsupported encoding \"${ encoding }\"`);\n  }\n  if ((encoding === 'utf8' || encoding === 'utf-8') && globalThis.Buffer != null && globalThis.Buffer.from != null) {\n    return globalThis.Buffer.from(array.buffer, array.byteOffset, array.byteLength).toString('utf8');\n  }\n  return base.encoder.encode(array).substring(1);\n}","function e(s,r,i=\"string\"){if(!s[r]||typeof s[r]!==i)throw new Error(`Missing or invalid \"${r}\" param`)}function l(s,r){let i=!0;return r.forEach(t=>{t in s||(i=!1)}),i}function f(s,r){return Array.isArray(s)?s.length===r:Object.keys(s).length===r}function w(s,r){return Array.isArray(s)?s.length>=r:Object.keys(s).length>=r}function u(s,r,i){return(i.length?w(s,r.length):f(s,r.length))?l(s,r):!1}function n(s,r,i=\"_\"){const t=s.split(i);return t[t.length-1].trim().toLowerCase()===r.trim().toLowerCase()}function R(s){return b(s.method)&&a(s.params)}function b(s){return n(s,\"subscribe\")}function a(s){return u(s,[\"topic\"],[])}function P(s){return c(s.method)&&h(s.params)}function c(s){return n(s,\"publish\")}function h(s){return u(s,[\"message\",\"topic\",\"ttl\"],[\"prompt\",\"tag\"])}function _(s){return o(s.method)&&p(s.params)}function o(s){return n(s,\"unsubscribe\")}function p(s){return u(s,[\"id\",\"topic\"],[])}function S(s){return m(s.method)&&d(s.params)}function m(s){return n(s,\"subscription\")}function d(s){return u(s,[\"id\",\"data\"],[])}function g(s){if(!b(s.method))throw new Error(\"JSON-RPC Request has invalid subscribe method\");if(!a(s.params))throw new Error(\"JSON-RPC Request has invalid subscribe params\");const r=s.params;return e(r,\"topic\"),r}function q(s){if(!c(s.method))throw new Error(\"JSON-RPC Request has invalid publish method\");if(!h(s.params))throw new Error(\"JSON-RPC Request has invalid publish params\");const r=s.params;return e(r,\"topic\"),e(r,\"message\"),e(r,\"ttl\",\"number\"),r}function E(s){if(!o(s.method))throw new Error(\"JSON-RPC Request has invalid unsubscribe method\");if(!p(s.params))throw new Error(\"JSON-RPC Request has invalid unsubscribe params\");const r=s.params;return e(r,\"id\"),r}function k(s){if(!m(s.method))throw new Error(\"JSON-RPC Request has invalid subscription method\");if(!d(s.params))throw new Error(\"JSON-RPC Request has invalid subscription params\");const r=s.params;return e(r,\"id\"),e(r,\"data\"),r}const C={waku:{publish:\"waku_publish\",batchPublish:\"waku_batchPublish\",subscribe:\"waku_subscribe\",batchSubscribe:\"waku_batchSubscribe\",subscription:\"waku_subscription\",unsubscribe:\"waku_unsubscribe\",batchUnsubscribe:\"waku_batchUnsubscribe\",batchFetchMessages:\"waku_batchFetchMessages\"},irn:{publish:\"irn_publish\",batchPublish:\"irn_batchPublish\",subscribe:\"irn_subscribe\",batchSubscribe:\"irn_batchSubscribe\",subscription:\"irn_subscription\",unsubscribe:\"irn_unsubscribe\",batchUnsubscribe:\"irn_batchUnsubscribe\",batchFetchMessages:\"irn_batchFetchMessages\"},iridium:{publish:\"iridium_publish\",batchPublish:\"iridium_batchPublish\",subscribe:\"iridium_subscribe\",batchSubscribe:\"iridium_batchSubscribe\",subscription:\"iridium_subscription\",unsubscribe:\"iridium_unsubscribe\",batchUnsubscribe:\"iridium_batchUnsubscribe\",batchFetchMessages:\"iridium_batchFetchMessages\"}};export{C as RELAY_JSONRPC,c as isPublishMethod,h as isPublishParams,P as isPublishRequest,b as isSubscribeMethod,a as isSubscribeParams,R as isSubscribeRequest,m as isSubscriptionMethod,d as isSubscriptionParams,S as isSubscriptionRequest,o as isUnsubscribeMethod,p as isUnsubscribeParams,_ as isUnsubscribeRequest,q as parsePublishRequest,g as parseSubscribeRequest,k as parseSubscriptionRequest,E as parseUnsubscribeRequest};\n//# sourceMappingURL=index.es.js.map\n","export const PARSE_ERROR = \"PARSE_ERROR\";\nexport const INVALID_REQUEST = \"INVALID_REQUEST\";\nexport const METHOD_NOT_FOUND = \"METHOD_NOT_FOUND\";\nexport const INVALID_PARAMS = \"INVALID_PARAMS\";\nexport const INTERNAL_ERROR = \"INTERNAL_ERROR\";\nexport const SERVER_ERROR = \"SERVER_ERROR\";\nexport const RESERVED_ERROR_CODES = [-32700, -32600, -32601, -32602, -32603];\nexport const SERVER_ERROR_CODE_RANGE = [-32000, -32099];\nexport const STANDARD_ERROR_MAP = {\n    [PARSE_ERROR]: { code: -32700, message: \"Parse error\" },\n    [INVALID_REQUEST]: { code: -32600, message: \"Invalid Request\" },\n    [METHOD_NOT_FOUND]: { code: -32601, message: \"Method not found\" },\n    [INVALID_PARAMS]: { code: -32602, message: \"Invalid params\" },\n    [INTERNAL_ERROR]: { code: -32603, message: \"Internal error\" },\n    [SERVER_ERROR]: { code: -32000, message: \"Server error\" },\n};\nexport const DEFAULT_ERROR = SERVER_ERROR;\n//# sourceMappingURL=constants.js.map","import { SERVER_ERROR_CODE_RANGE, RESERVED_ERROR_CODES, STANDARD_ERROR_MAP, DEFAULT_ERROR, } from \"./constants\";\nexport function isServerErrorCode(code) {\n    return code <= SERVER_ERROR_CODE_RANGE[0] && code >= SERVER_ERROR_CODE_RANGE[1];\n}\nexport function isReservedErrorCode(code) {\n    return RESERVED_ERROR_CODES.includes(code);\n}\nexport function isValidErrorCode(code) {\n    return typeof code === \"number\";\n}\nexport function getError(type) {\n    if (!Object.keys(STANDARD_ERROR_MAP).includes(type)) {\n        return STANDARD_ERROR_MAP[DEFAULT_ERROR];\n    }\n    return STANDARD_ERROR_MAP[type];\n}\nexport function getErrorByCode(code) {\n    const match = Object.values(STANDARD_ERROR_MAP).find(e => e.code === code);\n    if (!match) {\n        return STANDARD_ERROR_MAP[DEFAULT_ERROR];\n    }\n    return match;\n}\nexport function validateJsonRpcError(response) {\n    if (typeof response.error.code === \"undefined\") {\n        return { valid: false, error: \"Missing code for JSON-RPC error\" };\n    }\n    if (typeof response.error.message === \"undefined\") {\n        return { valid: false, error: \"Missing message for JSON-RPC error\" };\n    }\n    if (!isValidErrorCode(response.error.code)) {\n        return {\n            valid: false,\n            error: `Invalid error code type for JSON-RPC: ${response.error.code}`,\n        };\n    }\n    if (isReservedErrorCode(response.error.code)) {\n        const error = getErrorByCode(response.error.code);\n        if (error.message !== STANDARD_ERROR_MAP[DEFAULT_ERROR].message &&\n            response.error.message === error.message) {\n            return {\n                valid: false,\n                error: `Invalid error code message for JSON-RPC: ${response.error.code}`,\n            };\n        }\n    }\n    return { valid: true };\n}\nexport function parseConnectionError(e, url, type) {\n    return e.message.includes(\"getaddrinfo ENOTFOUND\") || e.message.includes(\"connect ECONNREFUSED\")\n        ? new Error(`Unavailable ${type} RPC url at ${url}`)\n        : e;\n}\n//# sourceMappingURL=error.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowserCryptoAvailable = exports.getSubtleCrypto = exports.getBrowerCrypto = void 0;\nfunction getBrowerCrypto() {\n    return (global === null || global === void 0 ? void 0 : global.crypto) || (global === null || global === void 0 ? void 0 : global.msCrypto) || {};\n}\nexports.getBrowerCrypto = getBrowerCrypto;\nfunction getSubtleCrypto() {\n    const browserCrypto = getBrowerCrypto();\n    return browserCrypto.subtle || browserCrypto.webkitSubtle;\n}\nexports.getSubtleCrypto = getSubtleCrypto;\nfunction isBrowserCryptoAvailable() {\n    return !!getBrowerCrypto() && !!getSubtleCrypto();\n}\nexports.isBrowserCryptoAvailable = isBrowserCryptoAvailable;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowser = exports.isNode = exports.isReactNative = void 0;\nfunction isReactNative() {\n    return (typeof document === \"undefined\" &&\n        typeof navigator !== \"undefined\" &&\n        navigator.product === \"ReactNative\");\n}\nexports.isReactNative = isReactNative;\nfunction isNode() {\n    return (typeof process !== \"undefined\" &&\n        typeof process.versions !== \"undefined\" &&\n        typeof process.versions.node !== \"undefined\");\n}\nexports.isNode = isNode;\nfunction isBrowser() {\n    return !isReactNative() && !isNode();\n}\nexports.isBrowser = isBrowser;\n//# sourceMappingURL=env.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./crypto\"), exports);\ntslib_1.__exportStar(require(\"./env\"), exports);\n//# sourceMappingURL=index.js.map","import { isNode } from \"@walletconnect/environment\";\nexport const isNodeJs = isNode;\nexport * from \"@walletconnect/environment\";\n//# sourceMappingURL=env.js.map","import { getError, getErrorByCode, isReservedErrorCode } from \"./error\";\nimport { INTERNAL_ERROR, SERVER_ERROR } from \"./constants\";\nexport function payloadId(entropy = 3) {\n    const date = Date.now() * Math.pow(10, entropy);\n    const extra = Math.floor(Math.random() * Math.pow(10, entropy));\n    return date + extra;\n}\nexport function getBigIntRpcId(entropy = 6) {\n    return BigInt(payloadId(entropy));\n}\nexport function formatJsonRpcRequest(method, params, id) {\n    return {\n        id: id || payloadId(),\n        jsonrpc: \"2.0\",\n        method,\n        params,\n    };\n}\nexport function formatJsonRpcResult(id, result) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        result,\n    };\n}\nexport function formatJsonRpcError(id, error, data) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        error: formatErrorMessage(error, data),\n    };\n}\nexport function formatErrorMessage(error, data) {\n    if (typeof error === \"undefined\") {\n        return getError(INTERNAL_ERROR);\n    }\n    if (typeof error === \"string\") {\n        error = Object.assign(Object.assign({}, getError(SERVER_ERROR)), { message: error });\n    }\n    if (typeof data !== \"undefined\") {\n        error.data = data;\n    }\n    if (isReservedErrorCode(error.code)) {\n        error = getErrorByCode(error.code);\n    }\n    return error;\n}\n//# sourceMappingURL=format.js.map","export function isValidRoute(route) {\n    if (route.includes(\"*\")) {\n        return isValidWildcardRoute(route);\n    }\n    if (/\\W/g.test(route)) {\n        return false;\n    }\n    return true;\n}\nexport function isValidDefaultRoute(route) {\n    return route === \"*\";\n}\nexport function isValidWildcardRoute(route) {\n    if (isValidDefaultRoute(route)) {\n        return true;\n    }\n    if (!route.includes(\"*\")) {\n        return false;\n    }\n    if (route.split(\"*\").length !== 2) {\n        return false;\n    }\n    if (route.split(\"*\").filter(x => x.trim() === \"\").length !== 1) {\n        return false;\n    }\n    return true;\n}\nexport function isValidLeadingWildcardRoute(route) {\n    return !isValidDefaultRoute(route) && isValidWildcardRoute(route) && !route.split(\"*\")[0].trim();\n}\nexport function isValidTrailingWildcardRoute(route) {\n    return !isValidDefaultRoute(route) && isValidWildcardRoute(route) && !route.split(\"*\")[1].trim();\n}\n//# sourceMappingURL=routing.js.map","class e{}class o extends e{constructor(c){super()}}class n extends e{constructor(){super()}}class r extends n{constructor(c){super()}}export{n as IBaseJsonRpcProvider,e as IEvents,o as IJsonRpcConnection,r as IJsonRpcProvider};\n//# sourceMappingURL=index.es.js.map\n","const HTTP_REGEX = \"^https?:\";\nconst WS_REGEX = \"^wss?:\";\nfunction getUrlProtocol(url) {\n    const matches = url.match(new RegExp(/^\\w+:/, \"gi\"));\n    if (!matches || !matches.length)\n        return;\n    return matches[0];\n}\nfunction matchRegexProtocol(url, regex) {\n    const protocol = getUrlProtocol(url);\n    if (typeof protocol === \"undefined\")\n        return false;\n    return new RegExp(regex).test(protocol);\n}\nexport function isHttpUrl(url) {\n    return matchRegexProtocol(url, HTTP_REGEX);\n}\nexport function isWsUrl(url) {\n    return matchRegexProtocol(url, WS_REGEX);\n}\nexport function isLocalhostUrl(url) {\n    return new RegExp(\"wss?://localhost(:d{2,5})?\").test(url);\n}\n//# sourceMappingURL=url.js.map","export function isJsonRpcPayload(payload) {\n    return (typeof payload === \"object\" &&\n        \"id\" in payload &&\n        \"jsonrpc\" in payload &&\n        payload.jsonrpc === \"2.0\");\n}\nexport function isJsonRpcRequest(payload) {\n    return isJsonRpcPayload(payload) && \"method\" in payload;\n}\nexport function isJsonRpcResponse(payload) {\n    return isJsonRpcPayload(payload) && (isJsonRpcResult(payload) || isJsonRpcError(payload));\n}\nexport function isJsonRpcResult(payload) {\n    return \"result\" in payload;\n}\nexport function isJsonRpcError(payload) {\n    return \"error\" in payload;\n}\nexport function isJsonRpcValidationInvalid(validation) {\n    return \"error\" in validation && validation.valid === false;\n}\n//# sourceMappingURL=validators.js.map","export * from \"./constants\";\nexport * from \"./error\";\nexport * from \"./env\";\nexport * from \"./format\";\nexport * from \"./routing\";\nexport * from \"./types\";\nexport * from \"./url\";\nexport * from \"./validators\";\n//# sourceMappingURL=index.js.map","import{EventEmitter as c}from\"events\";import{IJsonRpcProvider as r,formatJsonRpcRequest as h,getBigIntRpcId as a,isJsonRpcError as d,isJsonRpcResponse as v}from\"@walletconnect/jsonrpc-utils\";class o extends r{constructor(t){super(t),this.events=new c,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async request(t,e){return this.requestStrict(h(t.method,t.params||[],t.id||a().toString()),e)}async requestStrict(t,e){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(n){s(n)}this.events.on(`${t.id}`,n=>{d(n)?s(n.error):i(n.result)});try{await this.connection.send(t,e)}catch(n){s(n)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit(\"payload\",t),v(t)?this.events.emit(`${t.id}`,t):this.events.emit(\"message\",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit(\"error\",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:\"\"}`)),this.events.emit(\"disconnect\")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t==\"string\"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit(\"connect\"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on(\"payload\",t=>this.onPayload(t)),this.connection.on(\"close\",t=>this.onClose(t)),this.connection.on(\"error\",t=>this.events.emit(\"error\",t)),this.connection.on(\"register_error\",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}export{o as JsonRpcProvider,o as default};\n//# sourceMappingURL=index.es.js.map\n","'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","import{EventEmitter as l}from\"events\";import{safeJsonStringify as u,safeJsonParse as p}from\"@walletconnect/safe-json\";import{isWsUrl as c,isReactNative as g,isLocalhostUrl as y,formatJsonRpcError as k,parseConnectionError as m}from\"@walletconnect/jsonrpc-utils\";const v=()=>typeof WebSocket<\"u\"?WebSocket:typeof global<\"u\"&&typeof global.WebSocket<\"u\"?global.WebSocket:typeof window<\"u\"&&typeof window.WebSocket<\"u\"?window.WebSocket:typeof self<\"u\"&&typeof self.WebSocket<\"u\"?self.WebSocket:require(\"ws\"),w=()=>typeof WebSocket<\"u\"||typeof global<\"u\"&&typeof global.WebSocket<\"u\"||typeof window<\"u\"&&typeof window.WebSocket<\"u\"||typeof self<\"u\"&&typeof self.WebSocket<\"u\",d=r=>r.split(\"?\")[0],h=10,b=v();class f{constructor(e){if(this.url=e,this.events=new l,this.registering=!1,!c(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<\"u\"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>\"u\"){t(new Error(\"Connection already closed\"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>\"u\"&&(this.socket=await this.register());try{this.socket.send(u(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!c(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount(\"register_error\")>=t||this.events.listenerCount(\"open\")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once(\"register_error\",o=>{this.resetMaxListeners(),s(o)}),this.events.once(\"open\",()=>{if(this.resetMaxListeners(),typeof this.socket>\"u\")return s(new Error(\"WebSocket connection is missing or invalid\"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const s=g()?void 0:{rejectUnauthorized:!y(e)},o=new b(e,[],s);w()?o.onerror=i=>{const a=i;n(this.emitError(a.error))}:o.on(\"error\",i=>{n(this.emitError(i))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit(\"open\")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit(\"close\",e)}onPayload(e){if(typeof e.data>\"u\")return;const t=typeof e.data==\"string\"?p(e.data):e.data;this.events.emit(\"payload\",t)}onError(e,t){const n=this.parseError(t),s=n.message||n.toString(),o=k(e,s);this.events.emit(\"payload\",o)}parseError(e,t=this.url){return m(e,d(t),\"WS\")}resetMaxListeners(){this.events.getMaxListeners()>h&&this.events.setMaxListeners(h)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${d(this.url)}`));return this.events.emit(\"register_error\",t),t}}export{f as WsConnection,f as default};\n//# sourceMappingURL=index.es.js.map\n","// Save global object in a variable\nvar __global__ =\n(typeof globalThis !== 'undefined' && globalThis) ||\n(typeof self !== 'undefined' && self) ||\n(typeof global !== 'undefined' && global);\n// Create an object that extends from __global__ without the fetch function\nvar __globalThis__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = __global__.DOMException\n}\nF.prototype = __global__; // Needed for feature detection on whatwg-fetch's code\nreturn new F();\n})();\n// Wraps whatwg-fetch with a function scope to hijack the global object\n// \"globalThis\" that's going to be patched\n(function(globalThis) {\n\nvar irrelevant = (function (exports) {\n\n  /* eslint-disable no-prototype-builtins */\n  var g =\n    (typeof globalThis !== 'undefined' && globalThis) ||\n    (typeof self !== 'undefined' && self) ||\n    // eslint-disable-next-line no-undef\n    (typeof global !== 'undefined' && global) ||\n    {};\n\n  var support = {\n    searchParams: 'URLSearchParams' in g,\n    iterable: 'Symbol' in g && 'iterator' in Symbol,\n    blob:\n      'FileReader' in g &&\n      'Blob' in g &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in g,\n    arrayBuffer: 'ArrayBuffer' in g\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n      throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        if (header.length != 2) {\n          throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)\n        }\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body._noBody) return\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type);\n    var encoding = match ? match[1] : 'utf-8';\n    reader.readAsText(blob, encoding);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      /*\n        fetch-mock wraps the Response object in an ES6 Proxy to\n        provide useful test harness features such as flush. However, on\n        ES5 browsers without fetch or Proxy support pollyfills must be used;\n        the proxy-pollyfill is unable to proxy an attribute unless it exists\n        on the object before the Proxy is created. This change ensures\n        Response.bodyUsed exists on the instance, while maintaining the\n        semantic of setting Request.bodyUsed in the constructor before\n        _initBody is called.\n      */\n      // eslint-disable-next-line no-self-assign\n      this.bodyUsed = this.bodyUsed;\n      this._bodyInit = body;\n      if (!body) {\n        this._noBody = true;\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this);\n        if (isConsumed) {\n          return isConsumed\n        } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else if (support.blob) {\n        return this.blob().then(readBlobAsArrayBuffer)\n      } else {\n        throw new Error('could not read as ArrayBuffer')\n      }\n    };\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    if (!(this instanceof Request)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal || (function () {\n      if ('AbortController' in g) {\n        var ctrl = new AbortController();\n        return ctrl.signal;\n      }\n    }());\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n\n    if (this.method === 'GET' || this.method === 'HEAD') {\n      if (options.cache === 'no-store' || options.cache === 'no-cache') {\n        // Search for a '_' parameter in the query string\n        var reParamSearch = /([?&])_=[^&]*/;\n        if (reParamSearch.test(this.url)) {\n          // If it already exists then set the value with the current time\n          this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n        } else {\n          // Otherwise add a new '_' parameter to the end with the current time\n          var reQueryString = /\\?/;\n          this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n        }\n      }\n    }\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n    // https://github.com/github/fetch/issues/748\n    // https://github.com/zloirock/core-js/issues/751\n    preProcessedHeaders\n      .split('\\r')\n      .map(function(header) {\n        return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n      })\n      .forEach(function(line) {\n        var parts = line.split(':');\n        var key = parts.shift().trim();\n        if (key) {\n          var value = parts.join(':').trim();\n          try {\n            headers.append(key, value);\n          } catch (error) {\n            console.warn('Response ' + error.message);\n          }\n        }\n      });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!(this instanceof Response)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    if (this.status < 200 || this.status > 599) {\n      throw new RangeError(\"Failed to construct 'Response': The status provided (0) is outside the range [200, 599].\")\n    }\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 200, statusText: ''});\n    response.ok = false;\n    response.status = 0;\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = g.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        // This check if specifically for when a user fetches a file locally from the file system\n        // Only if the status is out of a normal range\n        if (request.url.indexOf('file://') === 0 && (xhr.status < 200 || xhr.status > 599)) {\n          options.status = 200;\n        } else {\n          options.status = xhr.status;\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        setTimeout(function() {\n          resolve(new Response(body, options));\n        }, 0);\n      };\n\n      xhr.onerror = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request failed'));\n        }, 0);\n      };\n\n      xhr.ontimeout = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request timed out'));\n        }, 0);\n      };\n\n      xhr.onabort = function() {\n        setTimeout(function() {\n          reject(new exports.DOMException('Aborted', 'AbortError'));\n        }, 0);\n      };\n\n      function fixUrl(url) {\n        try {\n          return url === '' && g.location.href ? g.location.href : url\n        } catch (e) {\n          return url\n        }\n      }\n\n      xhr.open(request.method, fixUrl(request.url), true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr) {\n        if (support.blob) {\n          xhr.responseType = 'blob';\n        } else if (\n          support.arrayBuffer\n        ) {\n          xhr.responseType = 'arraybuffer';\n        }\n      }\n\n      if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {\n        var names = [];\n        Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n          names.push(normalizeName(name));\n          xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n        });\n        request.headers.forEach(function(value, name) {\n          if (names.indexOf(name) === -1) {\n            xhr.setRequestHeader(name, value);\n          }\n        });\n      } else {\n        request.headers.forEach(function(value, name) {\n          xhr.setRequestHeader(name, value);\n        });\n      }\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!g.fetch) {\n    g.fetch = fetch;\n    g.Headers = Headers;\n    g.Request = Request;\n    g.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__globalThis__);\n// This is a ponyfill, so...\n__globalThis__.fetch.ponyfill = true;\ndelete __globalThis__.fetch.polyfill;\n// Choose between native implementation (__global__) or custom implementation (__globalThis__)\nvar ctx = __global__.fetch ? __global__ : __globalThis__;\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","import{EventEmitter as m}from\"events\";import o from\"cross-fetch\";import{safeJsonStringify as a,safeJsonParse as y}from\"@walletconnect/safe-json\";import{isHttpUrl as h,formatJsonRpcError as b,parseConnectionError as u}from\"@walletconnect/jsonrpc-utils\";var P=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,l=(r,t,e)=>t in r?P(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,p=(r,t)=>{for(var e in t||(t={}))L.call(t,e)&&l(r,e,t[e]);if(c)for(var e of c(t))O.call(t,e)&&l(r,e,t[e]);return r},v=(r,t)=>w(r,E(t));const j={Accept:\"application/json\",\"Content-Type\":\"application/json\"},T=\"POST\",d={headers:j,method:T},g=10;class f{constructor(t,e=!1){if(this.url=t,this.disableProviderPing=e,this.events=new m,this.isAvailable=!1,this.registering=!1,!h(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error(\"Connection already closed\");this.onClose()}async send(t){this.isAvailable||await this.register();try{const e=a(t),s=await(await o(this.url,v(p({},d),{body:e}))).json();this.onPayload({data:s})}catch(e){this.onError(t.id,e)}}async register(t=this.url){if(!h(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount(\"register_error\")>=e||this.events.listenerCount(\"open\")>=e)&&this.events.setMaxListeners(e+1),new Promise((s,i)=>{this.events.once(\"register_error\",n=>{this.resetMaxListeners(),i(n)}),this.events.once(\"open\",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>\"u\")return i(new Error(\"HTTP connection is missing or invalid\"));s()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const e=a({id:1,jsonrpc:\"2.0\",method:\"test\",params:[]});await o(t,v(p({},d),{body:e}))}this.onOpen()}catch(e){const s=this.parseError(e);throw this.events.emit(\"register_error\",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit(\"open\")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit(\"close\")}onPayload(t){if(typeof t.data>\"u\")return;const e=typeof t.data==\"string\"?y(t.data):t.data;this.events.emit(\"payload\",e)}onError(t,e){const s=this.parseError(e),i=s.message||s.toString(),n=b(t,i);this.events.emit(\"payload\",n)}parseError(t,e=this.url){return u(t,e,\"HTTP\")}resetMaxListeners(){this.events.getMaxListeners()>g&&this.events.setMaxListeners(g)}}export{f as HttpConnection,f as default};\n//# sourceMappingURL=index.es.js.map\n","export const NetworkUtil = {\n    caipNetworkIdToNumber(caipnetworkId) {\n        return caipnetworkId ? Number(caipnetworkId.split(':')[1]) : undefined;\n    },\n    parseEvmChainId(chainId) {\n        return typeof chainId === 'string'\n            ? this.caipNetworkIdToNumber(chainId)\n            : chainId;\n    },\n    getNetworksByNamespace(networks, namespace) {\n        return networks?.filter(network => network.chainNamespace === namespace) || [];\n    },\n    getFirstNetworkByNamespace(networks, namespace) {\n        return this.getNetworksByNamespace(networks, namespace)[0];\n    }\n};\n//# sourceMappingURL=NetworkUtil.js.map","/*\r\n *  big.js v6.2.2\r\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\r\n *  Copyright (c) 2024 Michael Mclaughlin\r\n *  https://github.com/MikeMcl/big.js/LICENCE.md\r\n */\r\n\r\n\r\n/************************************** EDITABLE DEFAULTS *****************************************/\r\n\r\n\r\n  // The default values below must be integers within the stated ranges.\r\n\r\n  /*\r\n   * The maximum number of decimal places (DP) of the results of operations involving division:\r\n   * div and sqrt, and pow with negative exponents.\r\n   */\r\nvar DP = 20,          // 0 to MAX_DP\r\n\r\n  /*\r\n   * The rounding mode (RM) used when rounding to the above decimal places.\r\n   *\r\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\r\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\r\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\r\n   *  3  Away from zero.                                  (ROUND_UP)\r\n   */\r\n  RM = 1,             // 0, 1, 2 or 3\r\n\r\n  // The maximum value of DP and Big.DP.\r\n  MAX_DP = 1E6,       // 0 to 1000000\r\n\r\n  // The maximum magnitude of the exponent argument to the pow method.\r\n  MAX_POWER = 1E6,    // 1 to 1000000\r\n\r\n  /*\r\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\r\n   * (JavaScript numbers: -7)\r\n   * -1000000 is the minimum recommended exponent value of a Big.\r\n   */\r\n  NE = -7,            // 0 to -1000000\r\n\r\n  /*\r\n   * The positive exponent (PE) at and above which toString returns exponential notation.\r\n   * (JavaScript numbers: 21)\r\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\r\n   */\r\n  PE = 21,            // 0 to 1000000\r\n\r\n  /*\r\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\r\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\r\n   * primitive number without a loss of precision.\r\n   */\r\n  STRICT = false,     // true or false\r\n\r\n\r\n/**************************************************************************************************/\r\n\r\n\r\n  // Error messages.\r\n  NAME = '[big.js] ',\r\n  INVALID = NAME + 'Invalid ',\r\n  INVALID_DP = INVALID + 'decimal places',\r\n  INVALID_RM = INVALID + 'rounding mode',\r\n  DIV_BY_ZERO = NAME + 'Division by zero',\r\n\r\n  // The shared prototype object.\r\n  P = {},\r\n  UNDEFINED = void 0,\r\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\r\n\r\n\r\n/*\r\n * Create and return a Big constructor.\r\n */\r\nfunction _Big_() {\r\n\r\n  /*\r\n   * The Big constructor and exported function.\r\n   * Create and return a new instance of a Big number object.\r\n   *\r\n   * n {number|string|Big} A numeric value.\r\n   */\r\n  function Big(n) {\r\n    var x = this;\r\n\r\n    // Enable constructor usage without new.\r\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\r\n\r\n    // Duplicate.\r\n    if (n instanceof Big) {\r\n      x.s = n.s;\r\n      x.e = n.e;\r\n      x.c = n.c.slice();\r\n    } else {\r\n      if (typeof n !== 'string') {\r\n        if (Big.strict === true && typeof n !== 'bigint') {\r\n          throw TypeError(INVALID + 'value');\r\n        }\r\n\r\n        // Minus zero?\r\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\r\n      }\r\n\r\n      parse(x, n);\r\n    }\r\n\r\n    // Retain a reference to this Big constructor.\r\n    // Shadow Big.prototype.constructor which points to Object.\r\n    x.constructor = Big;\r\n  }\r\n\r\n  Big.prototype = P;\r\n  Big.DP = DP;\r\n  Big.RM = RM;\r\n  Big.NE = NE;\r\n  Big.PE = PE;\r\n  Big.strict = STRICT;\r\n  Big.roundDown = 0;\r\n  Big.roundHalfUp = 1;\r\n  Big.roundHalfEven = 2;\r\n  Big.roundUp = 3;\r\n\r\n  return Big;\r\n}\r\n\r\n\r\n/*\r\n * Parse the number or string value passed to a Big constructor.\r\n *\r\n * x {Big} A Big number instance.\r\n * n {number|string} A numeric value.\r\n */\r\nfunction parse(x, n) {\r\n  var e, i, nl;\r\n\r\n  if (!NUMERIC.test(n)) {\r\n    throw Error(INVALID + 'number');\r\n  }\r\n\r\n  // Determine sign.\r\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\r\n\r\n  // Decimal point?\r\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\r\n\r\n  // Exponential form?\r\n  if ((i = n.search(/e/i)) > 0) {\r\n\r\n    // Determine exponent.\r\n    if (e < 0) e = i;\r\n    e += +n.slice(i + 1);\r\n    n = n.substring(0, i);\r\n  } else if (e < 0) {\r\n\r\n    // Integer.\r\n    e = n.length;\r\n  }\r\n\r\n  nl = n.length;\r\n\r\n  // Determine leading zeros.\r\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\r\n\r\n  if (i == nl) {\r\n\r\n    // Zero.\r\n    x.c = [x.e = 0];\r\n  } else {\r\n\r\n    // Determine trailing zeros.\r\n    for (; nl > 0 && n.charAt(--nl) == '0';);\r\n    x.e = e - i - 1;\r\n    x.c = [];\r\n\r\n    // Convert string to array of digits without leading/trailing zeros.\r\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\r\n *\r\n * x {Big} The Big to round.\r\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\r\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n * [more] {boolean} Whether the result of division was truncated.\r\n */\r\nfunction round(x, sd, rm, more) {\r\n  var xc = x.c;\r\n\r\n  if (rm === UNDEFINED) rm = x.constructor.RM;\r\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\r\n    throw Error(INVALID_RM);\r\n  }\r\n\r\n  if (sd < 1) {\r\n    more =\r\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\r\n      rm === 1 && xc[0] >= 5 ||\r\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\r\n    );\r\n\r\n    xc.length = 1;\r\n\r\n    if (more) {\r\n\r\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n      x.e = x.e - sd + 1;\r\n      xc[0] = 1;\r\n    } else {\r\n\r\n      // Zero.\r\n      xc[0] = x.e = 0;\r\n    }\r\n  } else if (sd < xc.length) {\r\n\r\n    // xc[sd] is the digit after the digit that may be rounded up.\r\n    more =\r\n      rm === 1 && xc[sd] >= 5 ||\r\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\r\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\r\n      rm === 3 && (more || !!xc[0]);\r\n\r\n    // Remove any digits after the required precision.\r\n    xc.length = sd;\r\n\r\n    // Round up?\r\n    if (more) {\r\n\r\n      // Rounding up may mean the previous digit has to be rounded up.\r\n      for (; ++xc[--sd] > 9;) {\r\n        xc[sd] = 0;\r\n        if (sd === 0) {\r\n          ++x.e;\r\n          xc.unshift(1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (sd = xc.length; !xc[--sd];) xc.pop();\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n/*\r\n * Return a string representing the value of Big x in normal or exponential notation.\r\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\r\n */\r\nfunction stringify(x, doExponential, isNonzero) {\r\n  var e = x.e,\r\n    s = x.c.join(''),\r\n    n = s.length;\r\n\r\n  // Exponential notation?\r\n  if (doExponential) {\r\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\r\n\r\n  // Normal notation.\r\n  } else if (e < 0) {\r\n    for (; ++e;) s = '0' + s;\r\n    s = '0.' + s;\r\n  } else if (e > 0) {\r\n    if (++e > n) {\r\n      for (e -= n; e--;) s += '0';\r\n    } else if (e < n) {\r\n      s = s.slice(0, e) + '.' + s.slice(e);\r\n    }\r\n  } else if (n > 1) {\r\n    s = s.charAt(0) + '.' + s.slice(1);\r\n  }\r\n\r\n  return x.s < 0 && isNonzero ? '-' + s : s;\r\n}\r\n\r\n\r\n// Prototype/instance methods\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the absolute value of this Big.\r\n */\r\nP.abs = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = 1;\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return 1 if the value of this Big is greater than the value of Big y,\r\n *       -1 if the value of this Big is less than the value of Big y, or\r\n *        0 if they have the same value.\r\n */\r\nP.cmp = function (y) {\r\n  var isneg,\r\n    x = this,\r\n    xc = x.c,\r\n    yc = (y = new x.constructor(y)).c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  isneg = i < 0;\r\n\r\n  // Compare exponents.\r\n  if (k != l) return k > l ^ isneg ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = -1; ++i < j;) {\r\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\r\n  }\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\r\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n */\r\nP.div = function (y) {\r\n  var x = this,\r\n    Big = x.constructor,\r\n    a = x.c,                  // dividend\r\n    b = (y = new Big(y)).c,   // divisor\r\n    k = x.s == y.s ? 1 : -1,\r\n    dp = Big.DP;\r\n\r\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n    throw Error(INVALID_DP);\r\n  }\r\n\r\n  // Divisor is zero?\r\n  if (!b[0]) {\r\n    throw Error(DIV_BY_ZERO);\r\n  }\r\n\r\n  // Dividend is 0? Return +-0.\r\n  if (!a[0]) {\r\n    y.s = k;\r\n    y.c = [y.e = 0];\r\n    return y;\r\n  }\r\n\r\n  var bl, bt, n, cmp, ri,\r\n    bz = b.slice(),\r\n    ai = bl = b.length,\r\n    al = a.length,\r\n    r = a.slice(0, bl),   // remainder\r\n    rl = r.length,\r\n    q = y,                // quotient\r\n    qc = q.c = [],\r\n    qi = 0,\r\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\r\n\r\n  q.s = k;\r\n  k = p < 0 ? 0 : p;\r\n\r\n  // Create version of divisor with leading zero.\r\n  bz.unshift(0);\r\n\r\n  // Add zeros to make remainder as long as divisor.\r\n  for (; rl++ < bl;) r.push(0);\r\n\r\n  do {\r\n\r\n    // n is how many times the divisor goes into current remainder.\r\n    for (n = 0; n < 10; n++) {\r\n\r\n      // Compare divisor and remainder.\r\n      if (bl != (rl = r.length)) {\r\n        cmp = bl > rl ? 1 : -1;\r\n      } else {\r\n        for (ri = -1, cmp = 0; ++ri < bl;) {\r\n          if (b[ri] != r[ri]) {\r\n            cmp = b[ri] > r[ri] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // If divisor < remainder, subtract divisor from remainder.\r\n      if (cmp < 0) {\r\n\r\n        // Remainder can't be more than 1 digit longer than divisor.\r\n        // Equalise lengths using divisor with extra leading zero?\r\n        for (bt = rl == bl ? b : bz; rl;) {\r\n          if (r[--rl] < bt[rl]) {\r\n            ri = rl;\r\n            for (; ri && !r[--ri];) r[ri] = 9;\r\n            --r[ri];\r\n            r[rl] += 10;\r\n          }\r\n          r[rl] -= bt[rl];\r\n        }\r\n\r\n        for (; !r[0];) r.shift();\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Add the digit n to the result array.\r\n    qc[qi++] = cmp ? n : ++n;\r\n\r\n    // Update the remainder.\r\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\r\n    else r = [a[ai]];\r\n\r\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\r\n\r\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\r\n  if (!qc[0] && qi != 1) {\r\n\r\n    // There can't be more than one zero.\r\n    qc.shift();\r\n    q.e--;\r\n    p--;\r\n  }\r\n\r\n  // Round?\r\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\r\n\r\n  return q;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\r\n */\r\nP.eq = function (y) {\r\n  return this.cmp(y) === 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\r\n * false.\r\n */\r\nP.gt = function (y) {\r\n  return this.cmp(y) > 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\r\n * return false.\r\n */\r\nP.gte = function (y) {\r\n  return this.cmp(y) > -1;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\r\n */\r\nP.lt = function (y) {\r\n  return this.cmp(y) < 0;\r\n};\r\n\r\n\r\n/*\r\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\r\n * return false.\r\n */\r\nP.lte = function (y) {\r\n  return this.cmp(y) < 1;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big minus the value of Big y.\r\n */\r\nP.minus = P.sub = function (y) {\r\n  var i, j, t, xlty,\r\n    x = this,\r\n    Big = x.constructor,\r\n    a = x.s,\r\n    b = (y = new Big(y)).s;\r\n\r\n  // Signs differ?\r\n  if (a != b) {\r\n    y.s = -b;\r\n    return x.plus(y);\r\n  }\r\n\r\n  var xc = x.c.slice(),\r\n    xe = x.e,\r\n    yc = y.c,\r\n    ye = y.e;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) {\r\n    if (yc[0]) {\r\n      y.s = -b;\r\n    } else if (xc[0]) {\r\n      y = new Big(x);\r\n    } else {\r\n      y.s = 1;\r\n    }\r\n    return y;\r\n  }\r\n\r\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\r\n  if (a = xe - ye) {\r\n\r\n    if (xlty = a < 0) {\r\n      a = -a;\r\n      t = xc;\r\n    } else {\r\n      ye = xe;\r\n      t = yc;\r\n    }\r\n\r\n    t.reverse();\r\n    for (b = a; b--;) t.push(0);\r\n    t.reverse();\r\n  } else {\r\n\r\n    // Exponents equal. Check digit by digit.\r\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\r\n\r\n    for (a = b = 0; b < j; b++) {\r\n      if (xc[b] != yc[b]) {\r\n        xlty = xc[b] < yc[b];\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // x < y? Point xc to the array of the bigger number.\r\n  if (xlty) {\r\n    t = xc;\r\n    xc = yc;\r\n    yc = t;\r\n    y.s = -y.s;\r\n  }\r\n\r\n  /*\r\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\r\n   * needs to start at yc.length.\r\n   */\r\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\r\n\r\n  // Subtract yc from xc.\r\n  for (b = i; j > a;) {\r\n    if (xc[--j] < yc[j]) {\r\n      for (i = j; i && !xc[--i];) xc[i] = 9;\r\n      --xc[i];\r\n      xc[j] += 10;\r\n    }\r\n\r\n    xc[j] -= yc[j];\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (; xc[--b] === 0;) xc.pop();\r\n\r\n  // Remove leading zeros and adjust exponent accordingly.\r\n  for (; xc[0] === 0;) {\r\n    xc.shift();\r\n    --ye;\r\n  }\r\n\r\n  if (!xc[0]) {\r\n\r\n    // n - n = +0\r\n    y.s = 1;\r\n\r\n    // Result must be zero.\r\n    xc = [ye = 0];\r\n  }\r\n\r\n  y.c = xc;\r\n  y.e = ye;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\r\n */\r\nP.mod = function (y) {\r\n  var ygtx,\r\n    x = this,\r\n    Big = x.constructor,\r\n    a = x.s,\r\n    b = (y = new Big(y)).s;\r\n\r\n  if (!y.c[0]) {\r\n    throw Error(DIV_BY_ZERO);\r\n  }\r\n\r\n  x.s = y.s = 1;\r\n  ygtx = y.cmp(x) == 1;\r\n  x.s = a;\r\n  y.s = b;\r\n\r\n  if (ygtx) return new Big(x);\r\n\r\n  a = Big.DP;\r\n  b = Big.RM;\r\n  Big.DP = Big.RM = 0;\r\n  x = x.div(y);\r\n  Big.DP = a;\r\n  Big.RM = b;\r\n\r\n  return this.minus(x.times(y));\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big negated.\r\n */\r\nP.neg = function () {\r\n  var x = new this.constructor(this);\r\n  x.s = -x.s;\r\n  return x;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big plus the value of Big y.\r\n */\r\nP.plus = P.add = function (y) {\r\n  var e, k, t,\r\n    x = this,\r\n    Big = x.constructor;\r\n\r\n  y = new Big(y);\r\n\r\n  // Signs differ?\r\n  if (x.s != y.s) {\r\n    y.s = -y.s;\r\n    return x.minus(y);\r\n  }\r\n\r\n  var xe = x.e,\r\n    xc = x.c,\r\n    ye = y.e,\r\n    yc = y.c;\r\n\r\n  // Either zero?\r\n  if (!xc[0] || !yc[0]) {\r\n    if (!yc[0]) {\r\n      if (xc[0]) {\r\n        y = new Big(x);\r\n      } else {\r\n        y.s = x.s;\r\n      }\r\n    }\r\n    return y;\r\n  }\r\n\r\n  xc = xc.slice();\r\n\r\n  // Prepend zeros to equalise exponents.\r\n  // Note: reverse faster than unshifts.\r\n  if (e = xe - ye) {\r\n    if (e > 0) {\r\n      ye = xe;\r\n      t = yc;\r\n    } else {\r\n      e = -e;\r\n      t = xc;\r\n    }\r\n\r\n    t.reverse();\r\n    for (; e--;) t.push(0);\r\n    t.reverse();\r\n  }\r\n\r\n  // Point xc to the longer array.\r\n  if (xc.length - yc.length < 0) {\r\n    t = yc;\r\n    yc = xc;\r\n    xc = t;\r\n  }\r\n\r\n  e = yc.length;\r\n\r\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\r\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\r\n\r\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n\r\n  if (k) {\r\n    xc.unshift(k);\r\n    ++ye;\r\n  }\r\n\r\n  // Remove trailing zeros.\r\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\r\n\r\n  y.c = xc;\r\n  y.e = ye;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a Big whose value is the value of this Big raised to the power n.\r\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\r\n * mode Big.RM.\r\n *\r\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\r\n */\r\nP.pow = function (n) {\r\n  var x = this,\r\n    one = new x.constructor('1'),\r\n    y = one,\r\n    isneg = n < 0;\r\n\r\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\r\n    throw Error(INVALID + 'exponent');\r\n  }\r\n\r\n  if (isneg) n = -n;\r\n\r\n  for (;;) {\r\n    if (n & 1) y = y.times(x);\r\n    n >>= 1;\r\n    if (!n) break;\r\n    x = x.times(x);\r\n  }\r\n\r\n  return isneg ? one.div(y) : y;\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\r\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.prec = function (sd, rm) {\r\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n    throw Error(INVALID + 'precision');\r\n  }\r\n  return round(new this.constructor(this), sd, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\r\n * using rounding mode rm, or Big.RM if rm is not specified.\r\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\r\n * If dp is not specified, round to 0 decimal places.\r\n *\r\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.round = function (dp, rm) {\r\n  if (dp === UNDEFINED) dp = 0;\r\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\r\n    throw Error(INVALID_DP);\r\n  }\r\n  return round(new this.constructor(this), dp + this.e + 1, rm);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\r\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n */\r\nP.sqrt = function () {\r\n  var r, c, t,\r\n    x = this,\r\n    Big = x.constructor,\r\n    s = x.s,\r\n    e = x.e,\r\n    half = new Big('0.5');\r\n\r\n  // Zero?\r\n  if (!x.c[0]) return new Big(x);\r\n\r\n  // Negative?\r\n  if (s < 0) {\r\n    throw Error(NAME + 'No square root');\r\n  }\r\n\r\n  // Estimate.\r\n  s = Math.sqrt(+stringify(x, true, true));\r\n\r\n  // Math.sqrt underflow/overflow?\r\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\r\n  if (s === 0 || s === 1 / 0) {\r\n    c = x.c.join('');\r\n    if (!(c.length + e & 1)) c += '0';\r\n    s = Math.sqrt(c);\r\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\r\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\r\n  } else {\r\n    r = new Big(s + '');\r\n  }\r\n\r\n  e = r.e + (Big.DP += 4);\r\n\r\n  // Newton-Raphson iteration.\r\n  do {\r\n    t = r;\r\n    r = half.times(t.plus(x.div(t)));\r\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\r\n\r\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\r\n};\r\n\r\n\r\n/*\r\n * Return a new Big whose value is the value of this Big times the value of Big y.\r\n */\r\nP.times = P.mul = function (y) {\r\n  var c,\r\n    x = this,\r\n    Big = x.constructor,\r\n    xc = x.c,\r\n    yc = (y = new Big(y)).c,\r\n    a = xc.length,\r\n    b = yc.length,\r\n    i = x.e,\r\n    j = y.e;\r\n\r\n  // Determine sign of result.\r\n  y.s = x.s == y.s ? 1 : -1;\r\n\r\n  // Return signed 0 if either 0.\r\n  if (!xc[0] || !yc[0]) {\r\n    y.c = [y.e = 0];\r\n    return y;\r\n  }\r\n\r\n  // Initialise exponent of result as x.e + y.e.\r\n  y.e = i + j;\r\n\r\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\r\n  if (a < b) {\r\n    c = xc;\r\n    xc = yc;\r\n    yc = c;\r\n    j = a;\r\n    a = b;\r\n    b = j;\r\n  }\r\n\r\n  // Initialise coefficient array of result with zeros.\r\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\r\n\r\n  // Multiply.\r\n\r\n  // i is initially xc.length.\r\n  for (i = b; i--;) {\r\n    b = 0;\r\n\r\n    // a is yc.length.\r\n    for (j = a + i; j > i;) {\r\n\r\n      // Current sum of products at this digit position, plus carry.\r\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\r\n      c[j--] = b % 10;\r\n\r\n      // carry\r\n      b = b / 10 | 0;\r\n    }\r\n\r\n    c[j] = b;\r\n  }\r\n\r\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\r\n  if (b) ++y.e;\r\n  else c.shift();\r\n\r\n  // Remove trailing zeros.\r\n  for (i = c.length; !c[--i];) c.pop();\r\n  y.c = c;\r\n\r\n  return y;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\r\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.toExponential = function (dp, rm) {\r\n  var x = this,\r\n    n = x.c[0];\r\n\r\n  if (dp !== UNDEFINED) {\r\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n    x = round(new x.constructor(x), ++dp, rm);\r\n    for (; x.c.length < dp;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, true, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\r\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n *\r\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n *\r\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n */\r\nP.toFixed = function (dp, rm) {\r\n  var x = this,\r\n    n = x.c[0];\r\n\r\n  if (dp !== UNDEFINED) {\r\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\r\n\r\n    // x.e may have changed if the value is rounded up.\r\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, false, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big.\r\n * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n * Omit the sign for negative zero.\r\n */\r\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\r\n  var x = this,\r\n    Big = x.constructor;\r\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\r\n};\r\n\r\n\r\n/*\r\n * Return the value of this Big as a primitve number.\r\n */\r\nP.toNumber = function () {\r\n  var n = +stringify(this, true, true);\r\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\r\n    throw Error(NAME + 'Imprecise conversion');\r\n  }\r\n  return n;\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big rounded to sd significant digits using\r\n * rounding mode rm, or Big.RM if rm is not specified.\r\n * Use exponential notation if sd is less than the number of digits necessary to represent\r\n * the integer part of the value in normal notation.\r\n *\r\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n */\r\nP.toPrecision = function (sd, rm) {\r\n  var x = this,\r\n    Big = x.constructor,\r\n    n = x.c[0];\r\n\r\n  if (sd !== UNDEFINED) {\r\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n      throw Error(INVALID + 'precision');\r\n    }\r\n    x = round(new Big(x), sd, rm);\r\n    for (; x.c.length < sd;) x.c.push(0);\r\n  }\r\n\r\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\r\n};\r\n\r\n\r\n/*\r\n * Return a string representing the value of this Big.\r\n * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n * Include the sign for negative zero.\r\n */\r\nP.valueOf = function () {\r\n  var x = this,\r\n    Big = x.constructor;\r\n  if (Big.strict === true) {\r\n    throw Error(NAME + 'valueOf disallowed');\r\n  }\r\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\r\n};\r\n\r\n\r\n// Export\r\n\r\n\r\nexport var Big = _Big_();\r\n\r\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\r\nexport default Big;\r\n","import Big from 'big.js';\nexport const NumberUtil = {\n    bigNumber(value) {\n        if (!value) {\n            return new Big(0);\n        }\n        return new Big(value);\n    },\n    multiply(a, b) {\n        if (a === undefined || b === undefined) {\n            return new Big(0);\n        }\n        const aBigNumber = new Big(a);\n        const bBigNumber = new Big(b);\n        return aBigNumber.times(bBigNumber);\n    },\n    formatNumberToLocalString(value, decimals = 2) {\n        if (value === undefined) {\n            return '0.00';\n        }\n        if (typeof value === 'number') {\n            return value.toLocaleString('en-US', {\n                maximumFractionDigits: decimals,\n                minimumFractionDigits: decimals\n            });\n        }\n        return parseFloat(value).toLocaleString('en-US', {\n            maximumFractionDigits: decimals,\n            minimumFractionDigits: decimals\n        });\n    },\n    parseLocalStringToNumber(value) {\n        if (value === undefined) {\n            return 0;\n        }\n        return parseFloat(value.replace(/,/gu, ''));\n    }\n};\n//# sourceMappingURL=NumberUtil.js.map","export const erc20ABI = [\n    {\n        type: 'function',\n        name: 'transfer',\n        stateMutability: 'nonpayable',\n        inputs: [\n            {\n                name: '_to',\n                type: 'address'\n            },\n            {\n                name: '_value',\n                type: 'uint256'\n            }\n        ],\n        outputs: [\n            {\n                name: '',\n                type: 'bool'\n            }\n        ]\n    },\n    {\n        type: 'function',\n        name: 'transferFrom',\n        stateMutability: 'nonpayable',\n        inputs: [\n            {\n                name: '_from',\n                type: 'address'\n            },\n            {\n                name: '_to',\n                type: 'address'\n            },\n            {\n                name: '_value',\n                type: 'uint256'\n            }\n        ],\n        outputs: [\n            {\n                name: '',\n                type: 'bool'\n            }\n        ]\n    }\n];\n//# sourceMappingURL=erc20.js.map","export const swapABI = [\n    {\n        type: 'function',\n        name: 'approve',\n        stateMutability: 'nonpayable',\n        inputs: [\n            { name: 'spender', type: 'address' },\n            { name: 'amount', type: 'uint256' }\n        ],\n        outputs: [{ type: 'bool' }]\n    }\n];\n//# sourceMappingURL=swap.js.map","export const usdtABI = [\n    {\n        type: 'function',\n        name: 'transfer',\n        stateMutability: 'nonpayable',\n        inputs: [\n            {\n                name: 'recipient',\n                type: 'address'\n            },\n            {\n                name: 'amount',\n                type: 'uint256'\n            }\n        ],\n        outputs: []\n    },\n    {\n        type: 'function',\n        name: 'transferFrom',\n        stateMutability: 'nonpayable',\n        inputs: [\n            {\n                name: 'sender',\n                type: 'address'\n            },\n            {\n                name: 'recipient',\n                type: 'address'\n            },\n            {\n                name: 'amount',\n                type: 'uint256'\n            }\n        ],\n        outputs: [\n            {\n                name: '',\n                type: 'bool'\n            }\n        ]\n    }\n];\n//# sourceMappingURL=usdt.js.map","export const ConstantsUtil = {\n    WC_NAME_SUFFIX: '.reown.id',\n    WC_NAME_SUFFIX_LEGACY: '.wcn.id',\n    BLOCKCHAIN_API_RPC_URL: 'https://rpc.walletconnect.org',\n    PULSE_API_URL: 'https://pulse.walletconnect.org',\n    W3M_API_URL: 'https://api.web3modal.org',\n    CONNECTOR_ID: {\n        WALLET_CONNECT: 'walletConnect',\n        INJECTED: 'injected',\n        WALLET_STANDARD: 'announced',\n        COINBASE: 'coinbaseWallet',\n        COINBASE_SDK: 'coinbaseWalletSDK',\n        SAFE: 'safe',\n        LEDGER: 'ledger',\n        OKX: 'okx',\n        EIP6963: 'eip6963',\n        AUTH: 'ID_AUTH'\n    },\n    CONNECTOR_NAMES: {\n        AUTH: 'Auth'\n    },\n    AUTH_CONNECTOR_SUPPORTED_CHAINS: ['eip155', 'solana'],\n    LIMITS: {\n        PENDING_TRANSACTIONS: 99\n    },\n    CHAIN: {\n        EVM: 'eip155',\n        SOLANA: 'solana',\n        POLKADOT: 'polkadot',\n        BITCOIN: 'bip122'\n    },\n    CHAIN_NAME_MAP: {\n        eip155: 'EVM Networks',\n        solana: 'Solana',\n        polkadot: 'Polkadot',\n        bip122: 'Bitcoin'\n    },\n    ADAPTER_TYPES: {\n        BITCOIN: 'bitcoin',\n        SOLANA: 'solana',\n        WAGMI: 'wagmi',\n        ETHERS: 'ethers',\n        ETHERS5: 'ethers5'\n    },\n    USDT_CONTRACT_ADDRESSES: [\n        '0xdac17f958d2ee523a2206206994597c13d831ec7',\n        '0xc2132d05d31c914a87c6611c10748aeb04b58e8f',\n        '0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7',\n        '0x919C1c267BC06a7039e03fcc2eF738525769109c',\n        '0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e',\n        '0x55d398326f99059fF775485246999027B3197955',\n        '0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9'\n    ],\n    HTTP_STATUS_CODES: {\n        SERVICE_UNAVAILABLE: 503,\n        FORBIDDEN: 403\n    },\n    UNSUPPORTED_NETWORK_NAME: 'Unknown Network'\n};\n//# sourceMappingURL=ConstantsUtil.js.map","import { erc20ABI } from '../contracts/erc20.js';\nimport { swapABI } from '../contracts/swap.js';\nimport { usdtABI } from '../contracts/usdt.js';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nexport const ContractUtil = {\n    getERC20Abi: (tokenAddress) => {\n        if (ConstantsUtil.USDT_CONTRACT_ADDRESSES.includes(tokenAddress)) {\n            return usdtABI;\n        }\n        return erc20ABI;\n    },\n    getSwapAbi: () => swapABI\n};\n//# sourceMappingURL=ContractUtil.js.map","export const SafeLocalStorageKeys = {\n    WALLET_ID: '@appkit/wallet_id',\n    WALLET_NAME: '@appkit/wallet_name',\n    SOLANA_WALLET: '@appkit/solana_wallet',\n    SOLANA_CAIP_CHAIN: '@appkit/solana_caip_chain',\n    ACTIVE_CAIP_NETWORK_ID: '@appkit/active_caip_network_id',\n    CONNECTED_SOCIAL: '@appkit/connected_social',\n    CONNECTED_SOCIAL_USERNAME: '@appkit-wallet/SOCIAL_USERNAME',\n    RECENT_WALLETS: '@appkit/recent_wallets',\n    DEEPLINK_CHOICE: 'WALLETCONNECT_DEEPLINK_CHOICE',\n    ACTIVE_NAMESPACE: '@appkit/active_namespace',\n    CONNECTED_NAMESPACES: '@appkit/connected_namespaces',\n    CONNECTION_STATUS: '@appkit/connection_status',\n    SIWX_AUTH_TOKEN: '@appkit/siwx-auth-token',\n    SIWX_NONCE_TOKEN: '@appkit/siwx-nonce-token',\n    TELEGRAM_SOCIAL_PROVIDER: '@appkit/social_provider',\n    NATIVE_BALANCE_CACHE: '@appkit/native_balance_cache',\n    PORTFOLIO_CACHE: '@appkit/portfolio_cache',\n    ENS_CACHE: '@appkit/ens_cache',\n    IDENTITY_CACHE: '@appkit/identity_cache'\n};\nexport function getSafeConnectorIdKey(namespace) {\n    if (!namespace) {\n        throw new Error('Namespace is required for CONNECTED_CONNECTOR_ID');\n    }\n    return `@appkit/${namespace}:connected_connector_id`;\n}\nexport const SafeLocalStorage = {\n    setItem(key, value) {\n        if (isSafe() && value !== undefined) {\n            localStorage.setItem(key, value);\n        }\n    },\n    getItem(key) {\n        if (isSafe()) {\n            return localStorage.getItem(key) || undefined;\n        }\n        return undefined;\n    },\n    removeItem(key) {\n        if (isSafe()) {\n            localStorage.removeItem(key);\n        }\n    },\n    clear() {\n        if (isSafe()) {\n            localStorage.clear();\n        }\n    }\n};\nexport function isSafe() {\n    return typeof window !== 'undefined' && typeof localStorage !== 'undefined';\n}\n//# sourceMappingURL=SafeLocalStorage.js.map","export function getW3mThemeVariables(themeVariables, themeType) {\n    if (themeType === 'light') {\n        return {\n            '--w3m-accent': themeVariables?.['--w3m-accent'] || 'hsla(231, 100%, 70%, 1)',\n            '--w3m-background': '#fff'\n        };\n    }\n    return {\n        '--w3m-accent': themeVariables?.['--w3m-accent'] || 'hsla(230, 100%, 67%, 1)',\n        '--w3m-background': '#121313'\n    };\n}\n//# sourceMappingURL=ThemeUtil.js.map","const e=Symbol(),t=Symbol(),r=\"a\",n=\"w\";let o=(e,t)=>new Proxy(e,t);const s=Object.getPrototypeOf,c=new WeakMap,l=e=>e&&(c.has(e)?c.get(e):s(e)===Object.prototype||s(e)===Array.prototype),f=e=>\"object\"==typeof e&&null!==e,i=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(s(e),t)},u=e=>e[t]||e,a=(s,c,f,p)=>{if(!l(s))return s;let g=p&&p.get(s);if(!g){const e=u(s);g=(e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(e=>!e.configurable&&!e.writable))(e)?[e,i(e)]:[e],null==p||p.set(s,g)}const[y,h]=g;let w=f&&f.get(y);return w&&w[1].f===!!h||(w=((o,s)=>{const c={f:s};let l=!1;const f=(e,t)=>{if(!l){let s=c[r].get(o);if(s||(s={},c[r].set(o,s)),e===n)s[n]=!0;else{let r=s[e];r||(r=new Set,s[e]=r),r.add(t)}}},i={get:(e,n)=>n===t?o:(f(\"k\",n),a(Reflect.get(e,n),c[r],c.c,c.t)),has:(t,n)=>n===e?(l=!0,c[r].delete(o),!0):(f(\"h\",n),Reflect.has(t,n)),getOwnPropertyDescriptor:(e,t)=>(f(\"o\",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(f(n),Reflect.ownKeys(e))};return s&&(i.set=i.deleteProperty=()=>!1),[i,c]})(y,!!h),w[1].p=o(h||y,w[0]),f&&f.set(y,w)),w[1][r]=c,w[1].c=f,w[1].t=p,w[1].p},p=(e,t,r,o,s=Object.is)=>{if(s(e,t))return!1;if(!f(e)||!f(t))return!0;const c=r.get(u(e));if(!c)return!0;if(o){const r=o.get(e);if(r&&r.n===t)return r.g;o.set(e,{n:t,g:!1})}let l=null;try{for(const r of c.h||[])if(l=Reflect.has(e,r)!==Reflect.has(t,r),l)return l;if(!0===c[n]){if(l=((e,t)=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some((e,t)=>e!==n[t])})(e,t),l)return l}else for(const r of c.o||[])if(l=!!Reflect.getOwnPropertyDescriptor(e,r)!=!!Reflect.getOwnPropertyDescriptor(t,r),l)return l;for(const n of c.k||[])if(l=p(e[n],t[n],r,o,s),l)return l;return null===l&&(l=!0),l}finally{o&&o.set(e,{n:t,g:l})}},g=t=>!!l(t)&&e in t,y=e=>l(e)&&e[t]||null,h=(e,t=!0)=>{c.set(e,t)},w=(e,t,r)=>{const o=[],s=new WeakSet,c=(e,l)=>{if(s.has(e))return;f(e)&&s.add(e);const i=f(e)&&t.get(u(e));if(i){var a,p;if(null==(a=i.h)||a.forEach(e=>{const t=`:has(${String(e)})`;o.push(l?[...l,t]:[t])}),!0===i[n]){const e=\":ownKeys\";o.push(l?[...l,e]:[e])}else{var g;null==(g=i.o)||g.forEach(e=>{const t=`:hasOwn(${String(e)})`;o.push(l?[...l,t]:[t])})}null==(p=i.k)||p.forEach(t=>{r&&!(\"value\"in(Object.getOwnPropertyDescriptor(e,t)||{}))||c(e[t],l?[...l,t]:[t])})}else l&&o.push(l)};return c(e),o},O=e=>{o=e};export{w as affectedToPathList,a as createProxy,y as getUntracked,p as isChanged,h as markToTrack,O as replaceNewProxy,g as trackMemo};\n//# sourceMappingURL=index.modern.mjs.map\n","import { markToTrack, getUntracked } from 'proxy-compare';\n\nconst isObject = (x) => typeof x === \"object\" && x !== null;\nconst proxyStateMap = /* @__PURE__ */ new WeakMap();\nconst refSet = /* @__PURE__ */ new WeakSet();\nconst buildProxyFunction = (objectIs = Object.is, newProxy = (target, handler) => new Proxy(target, handler), canProxy = (x) => isObject(x) && !refSet.has(x) && (Array.isArray(x) || !(Symbol.iterator in x)) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer), defaultHandlePromise = (promise) => {\n  switch (promise.status) {\n    case \"fulfilled\":\n      return promise.value;\n    case \"rejected\":\n      throw promise.reason;\n    default:\n      throw promise;\n  }\n}, snapCache = /* @__PURE__ */ new WeakMap(), createSnapshot = (target, version, handlePromise = defaultHandlePromise) => {\n  const cache = snapCache.get(target);\n  if ((cache == null ? void 0 : cache[0]) === version) {\n    return cache[1];\n  }\n  const snap = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n  markToTrack(snap, true);\n  snapCache.set(target, [version, snap]);\n  Reflect.ownKeys(target).forEach((key) => {\n    if (Object.getOwnPropertyDescriptor(snap, key)) {\n      return;\n    }\n    const value = Reflect.get(target, key);\n    const { enumerable } = Reflect.getOwnPropertyDescriptor(\n      target,\n      key\n    );\n    const desc = {\n      value,\n      enumerable,\n      // This is intentional to avoid copying with proxy-compare.\n      // It's still non-writable, so it avoids assigning a value.\n      configurable: true\n    };\n    if (refSet.has(value)) {\n      markToTrack(value, false);\n    } else if (value instanceof Promise) {\n      delete desc.value;\n      desc.get = () => handlePromise(value);\n    } else if (proxyStateMap.has(value)) {\n      const [target2, ensureVersion] = proxyStateMap.get(\n        value\n      );\n      desc.value = createSnapshot(\n        target2,\n        ensureVersion(),\n        handlePromise\n      );\n    }\n    Object.defineProperty(snap, key, desc);\n  });\n  return Object.preventExtensions(snap);\n}, proxyCache = /* @__PURE__ */ new WeakMap(), versionHolder = [1, 1], proxyFunction = (initialObject) => {\n  if (!isObject(initialObject)) {\n    throw new Error(\"object required\");\n  }\n  const found = proxyCache.get(initialObject);\n  if (found) {\n    return found;\n  }\n  let version = versionHolder[0];\n  const listeners = /* @__PURE__ */ new Set();\n  const notifyUpdate = (op, nextVersion = ++versionHolder[0]) => {\n    if (version !== nextVersion) {\n      version = nextVersion;\n      listeners.forEach((listener) => listener(op, nextVersion));\n    }\n  };\n  let checkVersion = versionHolder[1];\n  const ensureVersion = (nextCheckVersion = ++versionHolder[1]) => {\n    if (checkVersion !== nextCheckVersion && !listeners.size) {\n      checkVersion = nextCheckVersion;\n      propProxyStates.forEach(([propProxyState]) => {\n        const propVersion = propProxyState[1](nextCheckVersion);\n        if (propVersion > version) {\n          version = propVersion;\n        }\n      });\n    }\n    return version;\n  };\n  const createPropListener = (prop) => (op, nextVersion) => {\n    const newOp = [...op];\n    newOp[1] = [prop, ...newOp[1]];\n    notifyUpdate(newOp, nextVersion);\n  };\n  const propProxyStates = /* @__PURE__ */ new Map();\n  const addPropListener = (prop, propProxyState) => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && propProxyStates.has(prop)) {\n      throw new Error(\"prop listener already exists\");\n    }\n    if (listeners.size) {\n      const remove = propProxyState[3](createPropListener(prop));\n      propProxyStates.set(prop, [propProxyState, remove]);\n    } else {\n      propProxyStates.set(prop, [propProxyState]);\n    }\n  };\n  const removePropListener = (prop) => {\n    var _a;\n    const entry = propProxyStates.get(prop);\n    if (entry) {\n      propProxyStates.delete(prop);\n      (_a = entry[1]) == null ? void 0 : _a.call(entry);\n    }\n  };\n  const addListener = (listener) => {\n    listeners.add(listener);\n    if (listeners.size === 1) {\n      propProxyStates.forEach(([propProxyState, prevRemove], prop) => {\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && prevRemove) {\n          throw new Error(\"remove already exists\");\n        }\n        const remove = propProxyState[3](createPropListener(prop));\n        propProxyStates.set(prop, [propProxyState, remove]);\n      });\n    }\n    const removeListener = () => {\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        propProxyStates.forEach(([propProxyState, remove], prop) => {\n          if (remove) {\n            remove();\n            propProxyStates.set(prop, [propProxyState]);\n          }\n        });\n      }\n    };\n    return removeListener;\n  };\n  const baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n  const handler = {\n    deleteProperty(target, prop) {\n      const prevValue = Reflect.get(target, prop);\n      removePropListener(prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n      if (deleted) {\n        notifyUpdate([\"delete\", [prop], prevValue]);\n      }\n      return deleted;\n    },\n    set(target, prop, value, receiver) {\n      const hasPrevValue = Reflect.has(target, prop);\n      const prevValue = Reflect.get(target, prop, receiver);\n      if (hasPrevValue && (objectIs(prevValue, value) || proxyCache.has(value) && objectIs(prevValue, proxyCache.get(value)))) {\n        return true;\n      }\n      removePropListener(prop);\n      if (isObject(value)) {\n        value = getUntracked(value) || value;\n      }\n      let nextValue = value;\n      if (value instanceof Promise) {\n        value.then((v) => {\n          value.status = \"fulfilled\";\n          value.value = v;\n          notifyUpdate([\"resolve\", [prop], v]);\n        }).catch((e) => {\n          value.status = \"rejected\";\n          value.reason = e;\n          notifyUpdate([\"reject\", [prop], e]);\n        });\n      } else {\n        if (!proxyStateMap.has(value) && canProxy(value)) {\n          nextValue = proxyFunction(value);\n        }\n        const childProxyState = !refSet.has(nextValue) && proxyStateMap.get(nextValue);\n        if (childProxyState) {\n          addPropListener(prop, childProxyState);\n        }\n      }\n      Reflect.set(target, prop, nextValue, receiver);\n      notifyUpdate([\"set\", [prop], value, prevValue]);\n      return true;\n    }\n  };\n  const proxyObject = newProxy(baseObject, handler);\n  proxyCache.set(initialObject, proxyObject);\n  const proxyState = [\n    baseObject,\n    ensureVersion,\n    createSnapshot,\n    addListener\n  ];\n  proxyStateMap.set(proxyObject, proxyState);\n  Reflect.ownKeys(initialObject).forEach((key) => {\n    const desc = Object.getOwnPropertyDescriptor(\n      initialObject,\n      key\n    );\n    if (\"value\" in desc) {\n      proxyObject[key] = initialObject[key];\n      delete desc.value;\n      delete desc.writable;\n    }\n    Object.defineProperty(baseObject, key, desc);\n  });\n  return proxyObject;\n}) => [\n  // public functions\n  proxyFunction,\n  // shared state\n  proxyStateMap,\n  refSet,\n  // internal things\n  objectIs,\n  newProxy,\n  canProxy,\n  defaultHandlePromise,\n  snapCache,\n  createSnapshot,\n  proxyCache,\n  versionHolder\n];\nconst [defaultProxyFunction] = buildProxyFunction();\nfunction proxy(initialObject = {}) {\n  return defaultProxyFunction(initialObject);\n}\nfunction getVersion(proxyObject) {\n  const proxyState = proxyStateMap.get(proxyObject);\n  return proxyState == null ? void 0 : proxyState[1]();\n}\nfunction subscribe(proxyObject, callback, notifyInSync) {\n  const proxyState = proxyStateMap.get(proxyObject);\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !proxyState) {\n    console.warn(\"Please use proxy object\");\n  }\n  let promise;\n  const ops = [];\n  const addListener = proxyState[3];\n  let isListenerActive = false;\n  const listener = (op) => {\n    ops.push(op);\n    if (notifyInSync) {\n      callback(ops.splice(0));\n      return;\n    }\n    if (!promise) {\n      promise = Promise.resolve().then(() => {\n        promise = void 0;\n        if (isListenerActive) {\n          callback(ops.splice(0));\n        }\n      });\n    }\n  };\n  const removeListener = addListener(listener);\n  isListenerActive = true;\n  return () => {\n    isListenerActive = false;\n    removeListener();\n  };\n}\nfunction snapshot(proxyObject, handlePromise) {\n  const proxyState = proxyStateMap.get(proxyObject);\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !proxyState) {\n    console.warn(\"Please use proxy object\");\n  }\n  const [target, ensureVersion, createSnapshot] = proxyState;\n  return createSnapshot(target, ensureVersion(), handlePromise);\n}\nfunction ref(obj) {\n  refSet.add(obj);\n  return obj;\n}\nconst unstable_buildProxyFunction = buildProxyFunction;\n\nexport { getVersion, proxy, ref, snapshot, subscribe, unstable_buildProxyFunction };\n","import { subscribe, snapshot, proxy, ref, unstable_buildProxyFunction } from 'valtio/vanilla';\nimport { derive } from 'derive-valtio';\nexport { derive, underive, unstable_deriveSubscriptions } from 'derive-valtio';\n\nfunction subscribeKey(proxyObject, key, callback, notifyInSync) {\n  let prevValue = proxyObject[key];\n  return subscribe(\n    proxyObject,\n    () => {\n      const nextValue = proxyObject[key];\n      if (!Object.is(prevValue, nextValue)) {\n        callback(prevValue = nextValue);\n      }\n    },\n    notifyInSync\n  );\n}\n\nlet currentCleanups;\nfunction watch(callback, options) {\n  let alive = true;\n  const cleanups = /* @__PURE__ */ new Set();\n  const subscriptions = /* @__PURE__ */ new Map();\n  const cleanup = () => {\n    if (alive) {\n      alive = false;\n      cleanups.forEach((clean) => clean());\n      cleanups.clear();\n      subscriptions.forEach((unsubscribe) => unsubscribe());\n      subscriptions.clear();\n    }\n  };\n  const revalidate = async () => {\n    if (!alive) {\n      return;\n    }\n    cleanups.forEach((clean) => clean());\n    cleanups.clear();\n    const proxiesToSubscribe = /* @__PURE__ */ new Set();\n    const parent = currentCleanups;\n    currentCleanups = cleanups;\n    try {\n      const promiseOrPossibleCleanup = callback((proxyObject) => {\n        proxiesToSubscribe.add(proxyObject);\n        if (alive && !subscriptions.has(proxyObject)) {\n          const unsubscribe = subscribe(proxyObject, revalidate, options == null ? void 0 : options.sync);\n          subscriptions.set(proxyObject, unsubscribe);\n        }\n        return proxyObject;\n      });\n      const couldBeCleanup = promiseOrPossibleCleanup && promiseOrPossibleCleanup instanceof Promise ? await promiseOrPossibleCleanup : promiseOrPossibleCleanup;\n      if (couldBeCleanup) {\n        if (alive) {\n          cleanups.add(couldBeCleanup);\n        } else {\n          cleanup();\n        }\n      }\n    } finally {\n      currentCleanups = parent;\n    }\n    subscriptions.forEach((unsubscribe, proxyObject) => {\n      if (!proxiesToSubscribe.has(proxyObject)) {\n        subscriptions.delete(proxyObject);\n        unsubscribe();\n      }\n    });\n  };\n  if (currentCleanups) {\n    currentCleanups.add(cleanup);\n  }\n  revalidate();\n  return cleanup;\n}\n\nconst DEVTOOLS = Symbol();\nfunction devtools(proxyObject, options) {\n  if (typeof options === \"string\") {\n    console.warn(\n      \"string name option is deprecated, use { name }. https://github.com/pmndrs/valtio/pull/400\"\n    );\n    options = { name: options };\n  }\n  const { enabled, name = \"\", ...rest } = options || {};\n  let extension;\n  try {\n    extension = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extension) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\"[Warning] Please install/enable Redux devtools extension\");\n    }\n    return;\n  }\n  let isTimeTraveling = false;\n  const devtools2 = extension.connect({ name, ...rest });\n  const unsub1 = subscribe(proxyObject, (ops) => {\n    const action = ops.filter(([_, path]) => path[0] !== DEVTOOLS).map(([op, path]) => `${op}:${path.map(String).join(\".\")}`).join(\", \");\n    if (!action) {\n      return;\n    }\n    if (isTimeTraveling) {\n      isTimeTraveling = false;\n    } else {\n      const snapWithoutDevtools = Object.assign({}, snapshot(proxyObject));\n      delete snapWithoutDevtools[DEVTOOLS];\n      devtools2.send(\n        {\n          type: action,\n          updatedAt: (/* @__PURE__ */ new Date()).toLocaleString()\n        },\n        snapWithoutDevtools\n      );\n    }\n  });\n  const unsub2 = devtools2.subscribe((message) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (message.type === \"ACTION\" && message.payload) {\n      try {\n        Object.assign(proxyObject, JSON.parse(message.payload));\n      } catch (e) {\n        console.error(\n          \"please dispatch a serializable value that JSON.parse() and proxy() support\\n\",\n          e\n        );\n      }\n    }\n    if (message.type === \"DISPATCH\" && message.state) {\n      if (((_a = message.payload) == null ? void 0 : _a.type) === \"JUMP_TO_ACTION\" || ((_b = message.payload) == null ? void 0 : _b.type) === \"JUMP_TO_STATE\") {\n        isTimeTraveling = true;\n        const state = JSON.parse(message.state);\n        Object.assign(proxyObject, state);\n      }\n      proxyObject[DEVTOOLS] = message;\n    } else if (message.type === \"DISPATCH\" && ((_c = message.payload) == null ? void 0 : _c.type) === \"COMMIT\") {\n      devtools2.init(snapshot(proxyObject));\n    } else if (message.type === \"DISPATCH\" && ((_d = message.payload) == null ? void 0 : _d.type) === \"IMPORT_STATE\") {\n      const actions = (_e = message.payload.nextLiftedState) == null ? void 0 : _e.actionsById;\n      const computedStates = ((_f = message.payload.nextLiftedState) == null ? void 0 : _f.computedStates) || [];\n      isTimeTraveling = true;\n      computedStates.forEach(({ state }, index) => {\n        const action = actions[index] || \"No action found\";\n        Object.assign(proxyObject, state);\n        if (index === 0) {\n          devtools2.init(snapshot(proxyObject));\n        } else {\n          devtools2.send(action, snapshot(proxyObject));\n        }\n      });\n    }\n  });\n  devtools2.init(snapshot(proxyObject));\n  return () => {\n    unsub1();\n    unsub2 == null ? void 0 : unsub2();\n  };\n}\n\nfunction addComputed_DEPRECATED(proxyObject, computedFns_FAKE, targetObject = proxyObject) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"addComputed is deprecated. Please consider using `derive`. Falling back to emulation with derive. https://github.com/pmndrs/valtio/pull/201\"\n    );\n  }\n  const derivedFns = {};\n  Object.keys(computedFns_FAKE).forEach((key) => {\n    derivedFns[key] = (get) => computedFns_FAKE[key](get(proxyObject));\n  });\n  return derive(derivedFns, { proxy: targetObject });\n}\n\nfunction proxyWithComputed_DEPRECATED(initialObject, computedFns) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      'proxyWithComputed is deprecated. Please follow \"Computed Properties\" guide in docs.'\n    );\n  }\n  Object.keys(computedFns).forEach((key) => {\n    if (Object.getOwnPropertyDescriptor(initialObject, key)) {\n      throw new Error(\"object property already defined\");\n    }\n    const computedFn = computedFns[key];\n    const { get, set } = typeof computedFn === \"function\" ? { get: computedFn } : computedFn;\n    const desc = {};\n    desc.get = () => get(snapshot(proxyObject));\n    if (set) {\n      desc.set = (newValue) => set(proxyObject, newValue);\n    }\n    Object.defineProperty(initialObject, key, desc);\n  });\n  const proxyObject = proxy(initialObject);\n  return proxyObject;\n}\n\nconst isObject = (x) => typeof x === \"object\" && x !== null;\nlet refSet;\nconst deepClone = (obj) => {\n  if (!refSet) {\n    refSet = unstable_buildProxyFunction()[2];\n  }\n  if (!isObject(obj) || refSet.has(obj)) {\n    return obj;\n  }\n  const baseObject = Array.isArray(obj) ? [] : Object.create(Object.getPrototypeOf(obj));\n  Reflect.ownKeys(obj).forEach((key) => {\n    baseObject[key] = deepClone(obj[key]);\n  });\n  return baseObject;\n};\nfunction proxyWithHistory_DEPRECATED(initialValue, skipSubscribe = false) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      'proxyWithHistory is deprecated. Please use the \"valtio-history\" package; refer to the docs'\n    );\n  }\n  const proxyObject = proxy({\n    value: initialValue,\n    history: ref({\n      wip: void 0,\n      // to avoid infinite loop\n      snapshots: [],\n      index: -1\n    }),\n    clone: deepClone,\n    canUndo: () => proxyObject.history.index > 0,\n    undo: () => {\n      if (proxyObject.canUndo()) {\n        proxyObject.value = proxyObject.history.wip = proxyObject.clone(\n          proxyObject.history.snapshots[--proxyObject.history.index]\n        );\n      }\n    },\n    canRedo: () => proxyObject.history.index < proxyObject.history.snapshots.length - 1,\n    redo: () => {\n      if (proxyObject.canRedo()) {\n        proxyObject.value = proxyObject.history.wip = proxyObject.clone(\n          proxyObject.history.snapshots[++proxyObject.history.index]\n        );\n      }\n    },\n    saveHistory: () => {\n      proxyObject.history.snapshots.splice(proxyObject.history.index + 1);\n      proxyObject.history.snapshots.push(snapshot(proxyObject).value);\n      ++proxyObject.history.index;\n    },\n    subscribe: () => subscribe(proxyObject, (ops) => {\n      if (ops.every(\n        (op) => op[1][0] === \"value\" && (op[0] !== \"set\" || op[2] !== proxyObject.history.wip)\n      )) {\n        proxyObject.saveHistory();\n      }\n    })\n  });\n  proxyObject.saveHistory();\n  if (!skipSubscribe) {\n    proxyObject.subscribe();\n  }\n  return proxyObject;\n}\n\nfunction proxySet(initialValues) {\n  const set = proxy({\n    data: Array.from(new Set(initialValues)),\n    has(value) {\n      return this.data.indexOf(value) !== -1;\n    },\n    add(value) {\n      let hasProxy = false;\n      if (typeof value === \"object\" && value !== null) {\n        hasProxy = this.data.indexOf(proxy(value)) !== -1;\n      }\n      if (this.data.indexOf(value) === -1 && !hasProxy) {\n        this.data.push(value);\n      }\n      return this;\n    },\n    delete(value) {\n      const index = this.data.indexOf(value);\n      if (index === -1) {\n        return false;\n      }\n      this.data.splice(index, 1);\n      return true;\n    },\n    clear() {\n      this.data.splice(0);\n    },\n    get size() {\n      return this.data.length;\n    },\n    forEach(cb) {\n      this.data.forEach((value) => {\n        cb(value, value, this);\n      });\n    },\n    get [Symbol.toStringTag]() {\n      return \"Set\";\n    },\n    toJSON() {\n      return new Set(this.data);\n    },\n    [Symbol.iterator]() {\n      return this.data[Symbol.iterator]();\n    },\n    values() {\n      return this.data.values();\n    },\n    keys() {\n      return this.data.values();\n    },\n    entries() {\n      return new Set(this.data).entries();\n    }\n  });\n  Object.defineProperties(set, {\n    data: {\n      enumerable: false\n    },\n    size: {\n      enumerable: false\n    },\n    toJSON: {\n      enumerable: false\n    }\n  });\n  Object.seal(set);\n  return set;\n}\n\nfunction proxyMap(entries) {\n  const map = proxy({\n    data: Array.from(entries || []),\n    has(key) {\n      return this.data.some((p) => p[0] === key);\n    },\n    set(key, value) {\n      const record = this.data.find((p) => p[0] === key);\n      if (record) {\n        record[1] = value;\n      } else {\n        this.data.push([key, value]);\n      }\n      return this;\n    },\n    get(key) {\n      var _a;\n      return (_a = this.data.find((p) => p[0] === key)) == null ? void 0 : _a[1];\n    },\n    delete(key) {\n      const index = this.data.findIndex((p) => p[0] === key);\n      if (index === -1) {\n        return false;\n      }\n      this.data.splice(index, 1);\n      return true;\n    },\n    clear() {\n      this.data.splice(0);\n    },\n    get size() {\n      return this.data.length;\n    },\n    toJSON() {\n      return new Map(this.data);\n    },\n    forEach(cb) {\n      this.data.forEach((p) => {\n        cb(p[1], p[0], this);\n      });\n    },\n    keys() {\n      return this.data.map((p) => p[0]).values();\n    },\n    values() {\n      return this.data.map((p) => p[1]).values();\n    },\n    entries() {\n      return new Map(this.data).entries();\n    },\n    get [Symbol.toStringTag]() {\n      return \"Map\";\n    },\n    [Symbol.iterator]() {\n      return this.entries();\n    }\n  });\n  Object.defineProperties(map, {\n    data: {\n      enumerable: false\n    },\n    size: {\n      enumerable: false\n    },\n    toJSON: {\n      enumerable: false\n    }\n  });\n  Object.seal(map);\n  return map;\n}\n\nexport { addComputed_DEPRECATED as addComputed, devtools, proxyMap, proxySet, proxyWithComputed_DEPRECATED as proxyWithComputed, proxyWithHistory_DEPRECATED as proxyWithHistory, subscribeKey, watch };\n","import {} from '@reown/appkit-common';\nconst SECURE_SITE = \n// eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n(typeof process !== 'undefined' && typeof process.env !== 'undefined'\n    ? process.env['NEXT_PUBLIC_SECURE_SITE_ORIGIN']\n    : undefined) || 'https://secure.walletconnect.org';\nexport const ONRAMP_PROVIDERS = [\n    {\n        label: 'Coinbase',\n        name: 'coinbase',\n        feeRange: '1-2%',\n        url: '',\n        supportedChains: ['eip155']\n    },\n    {\n        label: 'Meld.io',\n        name: 'meld',\n        feeRange: '1-2%',\n        url: 'https://meldcrypto.com',\n        supportedChains: ['eip155', 'solana']\n    }\n];\nexport const MELD_PUBLIC_KEY = 'WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU';\nexport const ConstantsUtil = {\n    FOUR_MINUTES_MS: 240_000,\n    TEN_SEC_MS: 10_000,\n    FIVE_SEC_MS: 5_000,\n    THREE_SEC_MS: 3_000,\n    ONE_SEC_MS: 1_000,\n    SECURE_SITE,\n    SECURE_SITE_DASHBOARD: `${SECURE_SITE}/dashboard`,\n    SECURE_SITE_FAVICON: `${SECURE_SITE}/images/favicon.png`,\n    RESTRICTED_TIMEZONES: [\n        'ASIA/SHANGHAI',\n        'ASIA/URUMQI',\n        'ASIA/CHONGQING',\n        'ASIA/HARBIN',\n        'ASIA/KASHGAR',\n        'ASIA/MACAU',\n        'ASIA/HONG_KONG',\n        'ASIA/MACAO',\n        'ASIA/BEIJING',\n        'ASIA/HARBIN'\n    ],\n    /**\n     * Network name to Coinbase Pay SDK chain name map object\n     * @see supported chain names on Coinbase for Pay SDK: https://github.com/coinbase/cbpay-js/blob/d4bda2c05c4d5917c8db6a05476b603546046394/src/types/onramp.ts\n     */\n    WC_COINBASE_PAY_SDK_CHAINS: [\n        'ethereum',\n        'arbitrum',\n        'polygon',\n        'berachain',\n        'avalanche-c-chain',\n        'optimism',\n        'celo',\n        'base'\n    ],\n    WC_COINBASE_PAY_SDK_FALLBACK_CHAIN: 'ethereum',\n    WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP: {\n        Ethereum: 'ethereum',\n        'Arbitrum One': 'arbitrum',\n        Polygon: 'polygon',\n        Berachain: 'berachain',\n        Avalanche: 'avalanche-c-chain',\n        'OP Mainnet': 'optimism',\n        Celo: 'celo',\n        Base: 'base'\n    },\n    WC_COINBASE_ONRAMP_APP_ID: 'bf18c88d-495a-463b-b249-0b9d3656cf5e',\n    SWAP_SUGGESTED_TOKENS: [\n        'ETH',\n        'UNI',\n        '1INCH',\n        'AAVE',\n        'SOL',\n        'ADA',\n        'AVAX',\n        'DOT',\n        'LINK',\n        'NITRO',\n        'GAIA',\n        'MILK',\n        'TRX',\n        'NEAR',\n        'GNO',\n        'WBTC',\n        'DAI',\n        'WETH',\n        'USDC',\n        'USDT',\n        'ARB',\n        'BAL',\n        'BICO',\n        'CRV',\n        'ENS',\n        'MATIC',\n        'OP'\n    ],\n    SWAP_POPULAR_TOKENS: [\n        'ETH',\n        'UNI',\n        '1INCH',\n        'AAVE',\n        'SOL',\n        'ADA',\n        'AVAX',\n        'DOT',\n        'LINK',\n        'NITRO',\n        'GAIA',\n        'MILK',\n        'TRX',\n        'NEAR',\n        'GNO',\n        'WBTC',\n        'DAI',\n        'WETH',\n        'USDC',\n        'USDT',\n        'ARB',\n        'BAL',\n        'BICO',\n        'CRV',\n        'ENS',\n        'MATIC',\n        'OP',\n        'METAL',\n        'DAI',\n        'CHAMP',\n        'WOLF',\n        'SALE',\n        'BAL',\n        'BUSD',\n        'MUST',\n        'BTCpx',\n        'ROUTE',\n        'HEX',\n        'WELT',\n        'amDAI',\n        'VSQ',\n        'VISION',\n        'AURUM',\n        'pSP',\n        'SNX',\n        'VC',\n        'LINK',\n        'CHP',\n        'amUSDT',\n        'SPHERE',\n        'FOX',\n        'GIDDY',\n        'GFC',\n        'OMEN',\n        'OX_OLD',\n        'DE',\n        'WNT'\n    ],\n    BALANCE_SUPPORTED_CHAINS: ['eip155', 'solana'],\n    SWAP_SUPPORTED_NETWORKS: [\n        // Ethereum'\n        'eip155:1',\n        // Arbitrum One'\n        'eip155:42161',\n        // Optimism'\n        'eip155:10',\n        // ZKSync Era'\n        'eip155:324',\n        // Base'\n        'eip155:8453',\n        // BNB Smart Chain'\n        'eip155:56',\n        // Polygon'\n        'eip155:137',\n        // Gnosis'\n        'eip155:100',\n        // Avalanche'\n        'eip155:43114',\n        // Fantom'\n        'eip155:250',\n        // Klaytn'\n        'eip155:8217',\n        // Aurora\n        'eip155:1313161554'\n    ],\n    NAMES_SUPPORTED_CHAIN_NAMESPACES: ['eip155'],\n    ONRAMP_SUPPORTED_CHAIN_NAMESPACES: ['eip155', 'solana'],\n    ACTIVITY_ENABLED_CHAIN_NAMESPACES: ['eip155', 'solana'],\n    NATIVE_TOKEN_ADDRESS: {\n        eip155: '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',\n        solana: 'So11111111111111111111111111111111111111111',\n        polkadot: '0x',\n        bip122: '0x'\n    },\n    CONVERT_SLIPPAGE_TOLERANCE: 1,\n    CONNECT_LABELS: {\n        MOBILE: 'Open and continue in a new browser tab'\n    },\n    DEFAULT_FEATURES: {\n        swaps: true,\n        onramp: true,\n        receive: true,\n        send: true,\n        email: true,\n        emailShowWallets: true,\n        socials: [\n            'google',\n            'x',\n            'discord',\n            'farcaster',\n            'github',\n            'apple',\n            'facebook'\n        ],\n        connectorTypeOrder: [\n            'walletConnect',\n            'recent',\n            'injected',\n            'featured',\n            'custom',\n            'external',\n            'recommended'\n        ],\n        history: true,\n        analytics: true,\n        allWallets: true,\n        legalCheckbox: false,\n        smartSessions: false,\n        collapseWallets: false,\n        walletFeaturesOrder: ['onramp', 'swaps', 'receive', 'send'],\n        connectMethodsOrder: undefined\n    },\n    DEFAULT_ACCOUNT_TYPES: {\n        bip122: 'payment',\n        eip155: 'smartAccount',\n        polkadot: 'eoa',\n        solana: 'eoa'\n    },\n    ADAPTER_TYPES: {\n        UNIVERSAL: 'universal',\n        SOLANA: 'solana',\n        WAGMI: 'wagmi',\n        ETHERS: 'ethers',\n        ETHERS5: 'ethers5',\n        BITCOIN: 'bitcoin'\n    }\n};\n//# sourceMappingURL=ConstantsUtil.js.map","/* eslint-disable no-console */\nimport { SafeLocalStorage, SafeLocalStorageKeys, getSafeConnectorIdKey } from '@reown/appkit-common';\n// -- Utility -----------------------------------------------------------------\nexport const StorageUtil = {\n    // Cache expiry in milliseconds\n    cacheExpiry: {\n        portfolio: 30000,\n        nativeBalance: 30000,\n        ens: 300000,\n        identity: 300000\n    },\n    isCacheExpired(timestamp, cacheExpiry) {\n        return Date.now() - timestamp > cacheExpiry;\n    },\n    getActiveNetworkProps() {\n        const namespace = StorageUtil.getActiveNamespace();\n        const caipNetworkId = StorageUtil.getActiveCaipNetworkId();\n        const stringChainId = caipNetworkId ? caipNetworkId.split(':')[1] : undefined;\n        // eslint-disable-next-line no-nested-ternary\n        const chainId = stringChainId\n            ? isNaN(Number(stringChainId))\n                ? stringChainId\n                : Number(stringChainId)\n            : undefined;\n        return {\n            namespace,\n            caipNetworkId,\n            chainId\n        };\n    },\n    setWalletConnectDeepLink({ name, href }) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.DEEPLINK_CHOICE, JSON.stringify({ href, name }));\n        }\n        catch {\n            console.info('Unable to set WalletConnect deep link');\n        }\n    },\n    getWalletConnectDeepLink() {\n        try {\n            const deepLink = SafeLocalStorage.getItem(SafeLocalStorageKeys.DEEPLINK_CHOICE);\n            if (deepLink) {\n                return JSON.parse(deepLink);\n            }\n        }\n        catch {\n            console.info('Unable to get WalletConnect deep link');\n        }\n        return undefined;\n    },\n    deleteWalletConnectDeepLink() {\n        try {\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.DEEPLINK_CHOICE);\n        }\n        catch {\n            console.info('Unable to delete WalletConnect deep link');\n        }\n    },\n    setActiveNamespace(namespace) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.ACTIVE_NAMESPACE, namespace);\n        }\n        catch {\n            console.info('Unable to set active namespace');\n        }\n    },\n    setActiveCaipNetworkId(caipNetworkId) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID, caipNetworkId);\n            StorageUtil.setActiveNamespace(caipNetworkId.split(':')[0]);\n        }\n        catch {\n            console.info('Unable to set active caip network id');\n        }\n    },\n    getActiveCaipNetworkId() {\n        try {\n            return SafeLocalStorage.getItem(SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID);\n        }\n        catch {\n            console.info('Unable to get active caip network id');\n            return undefined;\n        }\n    },\n    deleteActiveCaipNetworkId() {\n        try {\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID);\n        }\n        catch {\n            console.info('Unable to delete active caip network id');\n        }\n    },\n    deleteConnectedConnectorId(namespace) {\n        try {\n            const key = getSafeConnectorIdKey(namespace);\n            SafeLocalStorage.removeItem(key);\n        }\n        catch {\n            console.info('Unable to delete connected connector id');\n        }\n    },\n    setAppKitRecent(wallet) {\n        try {\n            const recentWallets = StorageUtil.getRecentWallets();\n            const exists = recentWallets.find(w => w.id === wallet.id);\n            if (!exists) {\n                recentWallets.unshift(wallet);\n                if (recentWallets.length > 2) {\n                    recentWallets.pop();\n                }\n                SafeLocalStorage.setItem(SafeLocalStorageKeys.RECENT_WALLETS, JSON.stringify(recentWallets));\n            }\n        }\n        catch {\n            console.info('Unable to set AppKit recent');\n        }\n    },\n    getRecentWallets() {\n        try {\n            const recent = SafeLocalStorage.getItem(SafeLocalStorageKeys.RECENT_WALLETS);\n            return recent ? JSON.parse(recent) : [];\n        }\n        catch {\n            console.info('Unable to get AppKit recent');\n        }\n        return [];\n    },\n    setConnectedConnectorId(namespace, connectorId) {\n        try {\n            const key = getSafeConnectorIdKey(namespace);\n            SafeLocalStorage.setItem(key, connectorId);\n        }\n        catch {\n            console.info('Unable to set Connected Connector Id');\n        }\n    },\n    getActiveNamespace() {\n        try {\n            const activeNamespace = SafeLocalStorage.getItem(SafeLocalStorageKeys.ACTIVE_NAMESPACE);\n            return activeNamespace;\n        }\n        catch {\n            console.info('Unable to get active namespace');\n        }\n        return undefined;\n    },\n    getConnectedConnectorId(namespace) {\n        if (!namespace) {\n            return undefined;\n        }\n        try {\n            const key = getSafeConnectorIdKey(namespace);\n            return SafeLocalStorage.getItem(key);\n        }\n        catch (e) {\n            console.info('Unable to get connected connector id in namespace ', namespace);\n        }\n        return undefined;\n    },\n    setConnectedSocialProvider(socialProvider) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.CONNECTED_SOCIAL, socialProvider);\n        }\n        catch {\n            console.info('Unable to set connected social provider');\n        }\n    },\n    getConnectedSocialProvider() {\n        try {\n            return SafeLocalStorage.getItem(SafeLocalStorageKeys.CONNECTED_SOCIAL);\n        }\n        catch {\n            console.info('Unable to get connected social provider');\n        }\n        return undefined;\n    },\n    deleteConnectedSocialProvider() {\n        try {\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.CONNECTED_SOCIAL);\n        }\n        catch {\n            console.info('Unable to delete connected social provider');\n        }\n    },\n    getConnectedSocialUsername() {\n        try {\n            return SafeLocalStorage.getItem(SafeLocalStorageKeys.CONNECTED_SOCIAL_USERNAME);\n        }\n        catch {\n            console.info('Unable to get connected social username');\n        }\n        return undefined;\n    },\n    getStoredActiveCaipNetworkId() {\n        const storedCaipNetworkId = SafeLocalStorage.getItem(SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID);\n        const networkId = storedCaipNetworkId?.split(':')?.[1];\n        return networkId;\n    },\n    setConnectionStatus(status) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.CONNECTION_STATUS, status);\n        }\n        catch {\n            console.info('Unable to set connection status');\n        }\n    },\n    getConnectionStatus() {\n        try {\n            return SafeLocalStorage.getItem(SafeLocalStorageKeys.CONNECTION_STATUS);\n        }\n        catch {\n            return undefined;\n        }\n    },\n    getConnectedNamespaces() {\n        try {\n            const namespaces = SafeLocalStorage.getItem(SafeLocalStorageKeys.CONNECTED_NAMESPACES);\n            if (!namespaces?.length) {\n                return [];\n            }\n            return namespaces.split(',');\n        }\n        catch {\n            return [];\n        }\n    },\n    setConnectedNamespaces(namespaces) {\n        try {\n            const uniqueNamespaces = Array.from(new Set(namespaces));\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.CONNECTED_NAMESPACES, uniqueNamespaces.join(','));\n        }\n        catch {\n            console.info('Unable to set namespaces in storage');\n        }\n    },\n    addConnectedNamespace(namespace) {\n        try {\n            const namespaces = StorageUtil.getConnectedNamespaces();\n            if (!namespaces.includes(namespace)) {\n                namespaces.push(namespace);\n                StorageUtil.setConnectedNamespaces(namespaces);\n            }\n        }\n        catch {\n            console.info('Unable to add connected namespace');\n        }\n    },\n    removeConnectedNamespace(namespace) {\n        try {\n            const namespaces = StorageUtil.getConnectedNamespaces();\n            const index = namespaces.indexOf(namespace);\n            if (index > -1) {\n                namespaces.splice(index, 1);\n                StorageUtil.setConnectedNamespaces(namespaces);\n            }\n        }\n        catch {\n            console.info('Unable to remove connected namespace');\n        }\n    },\n    getTelegramSocialProvider() {\n        try {\n            return SafeLocalStorage.getItem(SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER);\n        }\n        catch {\n            console.info('Unable to get telegram social provider');\n            return null;\n        }\n    },\n    setTelegramSocialProvider(socialProvider) {\n        try {\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER, socialProvider);\n        }\n        catch {\n            console.info('Unable to set telegram social provider');\n        }\n    },\n    removeTelegramSocialProvider() {\n        try {\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER);\n        }\n        catch {\n            console.info('Unable to remove telegram social provider');\n        }\n    },\n    getBalanceCache() {\n        let cache = {};\n        try {\n            const result = SafeLocalStorage.getItem(SafeLocalStorageKeys.PORTFOLIO_CACHE);\n            cache = result ? JSON.parse(result) : {};\n        }\n        catch {\n            console.info('Unable to get balance cache');\n        }\n        return cache;\n    },\n    removeAddressFromBalanceCache(caipAddress) {\n        try {\n            const cache = StorageUtil.getBalanceCache();\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.PORTFOLIO_CACHE, JSON.stringify({ ...cache, [caipAddress]: undefined }));\n        }\n        catch {\n            console.info('Unable to remove address from balance cache', caipAddress);\n        }\n    },\n    getBalanceCacheForCaipAddress(caipAddress) {\n        try {\n            const cache = StorageUtil.getBalanceCache();\n            const balanceCache = cache[caipAddress];\n            // We want to discard cache if it's older than the cache expiry\n            if (balanceCache &&\n                !this.isCacheExpired(balanceCache.timestamp, this.cacheExpiry.portfolio)) {\n                return balanceCache.balance;\n            }\n            StorageUtil.removeAddressFromBalanceCache(caipAddress);\n        }\n        catch {\n            console.info('Unable to get balance cache for address', caipAddress);\n        }\n        return undefined;\n    },\n    updateBalanceCache(params) {\n        try {\n            const cache = StorageUtil.getBalanceCache();\n            cache[params.caipAddress] = params;\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.PORTFOLIO_CACHE, JSON.stringify(cache));\n        }\n        catch {\n            console.info('Unable to update balance cache', params);\n        }\n    },\n    getNativeBalanceCache() {\n        let cache = {};\n        try {\n            const result = SafeLocalStorage.getItem(SafeLocalStorageKeys.NATIVE_BALANCE_CACHE);\n            cache = result ? JSON.parse(result) : {};\n        }\n        catch {\n            console.info('Unable to get balance cache');\n        }\n        return cache;\n    },\n    removeAddressFromNativeBalanceCache(caipAddress) {\n        try {\n            const cache = StorageUtil.getBalanceCache();\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.NATIVE_BALANCE_CACHE, JSON.stringify({ ...cache, [caipAddress]: undefined }));\n        }\n        catch {\n            console.info('Unable to remove address from balance cache', caipAddress);\n        }\n    },\n    getNativeBalanceCacheForCaipAddress(caipAddress) {\n        try {\n            const cache = StorageUtil.getNativeBalanceCache();\n            const nativeBalanceCache = cache[caipAddress];\n            // We want to discard cache if it's older than the cache expiry\n            if (nativeBalanceCache &&\n                !this.isCacheExpired(nativeBalanceCache.timestamp, this.cacheExpiry.nativeBalance)) {\n                return nativeBalanceCache;\n            }\n            console.info('Discarding cache for address', caipAddress);\n            StorageUtil.removeAddressFromBalanceCache(caipAddress);\n        }\n        catch {\n            console.info('Unable to get balance cache for address', caipAddress);\n        }\n        return undefined;\n    },\n    updateNativeBalanceCache(params) {\n        try {\n            const cache = StorageUtil.getNativeBalanceCache();\n            cache[params.caipAddress] = params;\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.NATIVE_BALANCE_CACHE, JSON.stringify(cache));\n        }\n        catch {\n            console.info('Unable to update balance cache', params);\n        }\n    },\n    getEnsCache() {\n        let cache = {};\n        try {\n            const result = SafeLocalStorage.getItem(SafeLocalStorageKeys.ENS_CACHE);\n            cache = result ? JSON.parse(result) : {};\n        }\n        catch {\n            console.info('Unable to get ens name cache');\n        }\n        return cache;\n    },\n    getEnsFromCacheForAddress(address) {\n        try {\n            const cache = StorageUtil.getEnsCache();\n            const ensCache = cache[address];\n            // We want to discard cache if it's older than the cache expiry\n            if (ensCache && !this.isCacheExpired(ensCache.timestamp, this.cacheExpiry.ens)) {\n                return ensCache.ens;\n            }\n            StorageUtil.removeEnsFromCache(address);\n        }\n        catch {\n            console.info('Unable to get ens name from cache', address);\n        }\n        return undefined;\n    },\n    updateEnsCache(params) {\n        try {\n            const cache = StorageUtil.getEnsCache();\n            cache[params.address] = params;\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.ENS_CACHE, JSON.stringify(cache));\n        }\n        catch {\n            console.info('Unable to update ens name cache', params);\n        }\n    },\n    removeEnsFromCache(address) {\n        try {\n            const cache = StorageUtil.getEnsCache();\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.ENS_CACHE, JSON.stringify({ ...cache, [address]: undefined }));\n        }\n        catch {\n            console.info('Unable to remove ens name from cache', address);\n        }\n    },\n    getIdentityCache() {\n        let cache = {};\n        try {\n            const result = SafeLocalStorage.getItem(SafeLocalStorageKeys.IDENTITY_CACHE);\n            cache = result ? JSON.parse(result) : {};\n        }\n        catch {\n            console.info('Unable to get identity cache');\n        }\n        return cache;\n    },\n    getIdentityFromCacheForAddress(address) {\n        try {\n            const cache = StorageUtil.getIdentityCache();\n            const identityCache = cache[address];\n            // We want to discard cache if it's older than the cache expiry\n            if (identityCache &&\n                !this.isCacheExpired(identityCache.timestamp, this.cacheExpiry.identity)) {\n                return identityCache.identity;\n            }\n            StorageUtil.removeIdentityFromCache(address);\n        }\n        catch {\n            console.info('Unable to get identity from cache', address);\n        }\n        return undefined;\n    },\n    updateIdentityCache(params) {\n        try {\n            const cache = StorageUtil.getIdentityCache();\n            cache[params.address] = {\n                identity: params.identity,\n                timestamp: params.timestamp\n            };\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.IDENTITY_CACHE, JSON.stringify(cache));\n        }\n        catch {\n            console.info('Unable to update identity cache', params);\n        }\n    },\n    removeIdentityFromCache(address) {\n        try {\n            const cache = StorageUtil.getIdentityCache();\n            SafeLocalStorage.setItem(SafeLocalStorageKeys.IDENTITY_CACHE, JSON.stringify({ ...cache, [address]: undefined }));\n        }\n        catch {\n            console.info('Unable to remove identity from cache', address);\n        }\n    },\n    clearAddressCache() {\n        try {\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.PORTFOLIO_CACHE);\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.NATIVE_BALANCE_CACHE);\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.ENS_CACHE);\n            SafeLocalStorage.removeItem(SafeLocalStorageKeys.IDENTITY_CACHE);\n        }\n        catch {\n            console.info('Unable to clear address cache');\n        }\n    }\n};\n//# sourceMappingURL=StorageUtil.js.map","import { ConstantsUtil as CommonConstants } from '@reown/appkit-common';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nimport { StorageUtil } from './StorageUtil.js';\nexport const CoreHelperUtil = {\n    isMobile() {\n        if (this.isClient()) {\n            return Boolean(window?.matchMedia('(pointer:coarse)')?.matches ||\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent));\n        }\n        return false;\n    },\n    checkCaipNetwork(network, networkName = '') {\n        return network?.caipNetworkId.toLocaleLowerCase().includes(networkName.toLowerCase());\n    },\n    isAndroid() {\n        if (!this.isMobile()) {\n            return false;\n        }\n        const ua = window?.navigator.userAgent.toLowerCase();\n        return CoreHelperUtil.isMobile() && ua.includes('android');\n    },\n    isIos() {\n        if (!this.isMobile()) {\n            return false;\n        }\n        const ua = window?.navigator.userAgent.toLowerCase();\n        return ua.includes('iphone') || ua.includes('ipad');\n    },\n    isSafari() {\n        if (!this.isClient()) {\n            return false;\n        }\n        const ua = window?.navigator.userAgent.toLowerCase();\n        return ua.includes('safari');\n    },\n    isClient() {\n        return typeof window !== 'undefined';\n    },\n    isPairingExpired(expiry) {\n        return expiry ? expiry - Date.now() <= ConstantsUtil.TEN_SEC_MS : true;\n    },\n    isAllowedRetry(lastRetry, differenceMs = ConstantsUtil.ONE_SEC_MS) {\n        return Date.now() - lastRetry >= differenceMs;\n    },\n    copyToClopboard(text) {\n        navigator.clipboard.writeText(text);\n    },\n    isIframe() {\n        try {\n            return window?.self !== window?.top;\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    getPairingExpiry() {\n        return Date.now() + ConstantsUtil.FOUR_MINUTES_MS;\n    },\n    getNetworkId(caipAddress) {\n        return caipAddress?.split(':')[1];\n    },\n    getPlainAddress(caipAddress) {\n        return caipAddress?.split(':')[2];\n    },\n    async wait(milliseconds) {\n        return new Promise(resolve => {\n            setTimeout(resolve, milliseconds);\n        });\n    },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    debounce(func, timeout = 500) {\n        let timer = undefined;\n        return (...args) => {\n            function next() {\n                func(...args);\n            }\n            if (timer) {\n                clearTimeout(timer);\n            }\n            timer = setTimeout(next, timeout);\n        };\n    },\n    isHttpUrl(url) {\n        return url.startsWith('http://') || url.startsWith('https://');\n    },\n    formatNativeUrl(appUrl, wcUri) {\n        if (CoreHelperUtil.isHttpUrl(appUrl)) {\n            return this.formatUniversalUrl(appUrl, wcUri);\n        }\n        let safeAppUrl = appUrl;\n        if (!safeAppUrl.includes('://')) {\n            safeAppUrl = appUrl.replaceAll('/', '').replaceAll(':', '');\n            safeAppUrl = `${safeAppUrl}://`;\n        }\n        if (!safeAppUrl.endsWith('/')) {\n            safeAppUrl = `${safeAppUrl}/`;\n        }\n        // Android deeplinks in tg context require the uri to be encoded twice\n        if (this.isTelegram() && this.isAndroid()) {\n            // eslint-disable-next-line no-param-reassign\n            wcUri = encodeURIComponent(wcUri);\n        }\n        const encodedWcUrl = encodeURIComponent(wcUri);\n        return {\n            redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n            href: safeAppUrl\n        };\n    },\n    formatUniversalUrl(appUrl, wcUri) {\n        if (!CoreHelperUtil.isHttpUrl(appUrl)) {\n            return this.formatNativeUrl(appUrl, wcUri);\n        }\n        let safeAppUrl = appUrl;\n        if (!safeAppUrl.endsWith('/')) {\n            safeAppUrl = `${safeAppUrl}/`;\n        }\n        const encodedWcUrl = encodeURIComponent(wcUri);\n        return {\n            redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n            href: safeAppUrl\n        };\n    },\n    getOpenTargetForPlatform(target) {\n        if (target === 'popupWindow') {\n            return target;\n        }\n        // Only '_blank' deeplinks work in Telegram context\n        if (this.isTelegram()) {\n            // But for social login, we need to load the page in the same context\n            if (StorageUtil.getTelegramSocialProvider()) {\n                return '_top';\n            }\n            return '_blank';\n        }\n        return target;\n    },\n    openHref(href, target, features) {\n        window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n    },\n    returnOpenHref(href, target, features) {\n        return window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n    },\n    isTelegram() {\n        return (typeof window !== 'undefined' &&\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (Boolean(window.TelegramWebviewProxy) ||\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                Boolean(window.Telegram) ||\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                Boolean(window.TelegramWebviewProxyProto)));\n    },\n    async preloadImage(src) {\n        const imagePromise = new Promise((resolve, reject) => {\n            const image = new Image();\n            image.onload = resolve;\n            image.onerror = reject;\n            image.crossOrigin = 'anonymous';\n            image.src = src;\n        });\n        return Promise.race([imagePromise, CoreHelperUtil.wait(2000)]);\n    },\n    formatBalance(balance, symbol) {\n        let formattedBalance = '0.000';\n        if (typeof balance === 'string') {\n            const number = Number(balance);\n            if (number) {\n                const formattedValue = Math.floor(number * 1000) / 1000;\n                if (formattedValue) {\n                    formattedBalance = formattedValue.toString();\n                }\n            }\n        }\n        return `${formattedBalance}${symbol ? ` ${symbol}` : ''}`;\n    },\n    formatBalance2(balance, symbol) {\n        let formattedBalance = undefined;\n        if (balance === '0') {\n            formattedBalance = '0';\n        }\n        else if (typeof balance === 'string') {\n            const number = Number(balance);\n            if (number) {\n                formattedBalance = number.toString().match(/^-?\\d+(?:\\.\\d{0,3})?/u)?.[0];\n            }\n        }\n        return {\n            value: formattedBalance ?? '0',\n            rest: formattedBalance === '0' ? '000' : '',\n            symbol\n        };\n    },\n    getApiUrl() {\n        return CommonConstants.W3M_API_URL;\n    },\n    getBlockchainApiUrl() {\n        return CommonConstants.BLOCKCHAIN_API_RPC_URL;\n    },\n    getAnalyticsUrl() {\n        return CommonConstants.PULSE_API_URL;\n    },\n    getUUID() {\n        if (crypto?.randomUUID) {\n            return crypto.randomUUID();\n        }\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/gu, c => {\n            const r = (Math.random() * 16) | 0;\n            const v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parseError(error) {\n        if (typeof error === 'string') {\n            return error;\n        }\n        else if (typeof error?.issues?.[0]?.message === 'string') {\n            return error.issues[0].message;\n        }\n        else if (error instanceof Error) {\n            return error.message;\n        }\n        return 'Unknown error';\n    },\n    sortRequestedNetworks(approvedIds, requestedNetworks = []) {\n        const approvedIndexMap = {};\n        if (requestedNetworks && approvedIds) {\n            approvedIds.forEach((id, index) => {\n                approvedIndexMap[id] = index;\n            });\n            requestedNetworks.sort((a, b) => {\n                const indexA = approvedIndexMap[a.id];\n                const indexB = approvedIndexMap[b.id];\n                if (indexA !== undefined && indexB !== undefined) {\n                    return indexA - indexB;\n                }\n                else if (indexA !== undefined) {\n                    return -1;\n                }\n                else if (indexB !== undefined) {\n                    return 1;\n                }\n                return 0;\n            });\n        }\n        return requestedNetworks;\n    },\n    calculateBalance(array) {\n        let sum = 0;\n        for (const item of array) {\n            sum += item.value ?? 0;\n        }\n        return sum;\n    },\n    formatTokenBalance(number) {\n        const roundedNumber = number.toFixed(2);\n        const [dollars, pennies] = roundedNumber.split('.');\n        return { dollars, pennies };\n    },\n    isAddress(address, chain = 'eip155') {\n        switch (chain) {\n            case 'eip155':\n                if (!/^(?:0x)?[0-9a-f]{40}$/iu.test(address)) {\n                    return false;\n                }\n                else if (/^(?:0x)?[0-9a-f]{40}$/iu.test(address) ||\n                    /^(?:0x)?[0-9A-F]{40}$/iu.test(address)) {\n                    return true;\n                }\n                return false;\n            case 'solana':\n                return /[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(address);\n            default:\n                return false;\n        }\n    },\n    uniqueBy(arr, key) {\n        const set = new Set();\n        return arr.filter(item => {\n            const keyValue = item[key];\n            if (set.has(keyValue)) {\n                return false;\n            }\n            set.add(keyValue);\n            return true;\n        });\n    },\n    generateSdkVersion(adapters, platform, version) {\n        const hasNoAdapters = adapters.length === 0;\n        const adapterNames = (hasNoAdapters\n            ? ConstantsUtil.ADAPTER_TYPES.UNIVERSAL\n            : adapters.map(adapter => adapter.adapterType).join(','));\n        return `${platform}-${adapterNames}-${version}`;\n    },\n    // eslint-disable-next-line max-params\n    createAccount(namespace, address, type, publicKey, path) {\n        return {\n            namespace,\n            address,\n            type,\n            publicKey,\n            path\n        };\n    },\n    isCaipAddress(address) {\n        if (typeof address !== 'string') {\n            return false;\n        }\n        const sections = address.split(':');\n        const namespace = sections[0];\n        return (sections.filter(Boolean).length === 3 &&\n            namespace in CommonConstants.CHAIN_NAME_MAP);\n    },\n    isMac() {\n        const ua = window?.navigator.userAgent.toLowerCase();\n        return ua.includes('macintosh') && !ua.includes('safari');\n    },\n    formatTelegramSocialLoginUrl(url) {\n        const valueToInject = `--${encodeURIComponent(window?.location.href)}`;\n        const paramToInject = 'state=';\n        const parsedUrl = new URL(url);\n        if (parsedUrl.host === 'auth.magic.link') {\n            const providerParam = 'provider_authorization_url=';\n            const providerUrl = url.substring(url.indexOf(providerParam) + providerParam.length);\n            const resultUrl = this.injectIntoUrl(decodeURIComponent(providerUrl), paramToInject, valueToInject);\n            return url.replace(providerUrl, encodeURIComponent(resultUrl));\n        }\n        return this.injectIntoUrl(url, paramToInject, valueToInject);\n    },\n    injectIntoUrl(url, key, appendString) {\n        // Find the position of \"key\" e.g. \"state=\" in the URL\n        const keyIndex = url.indexOf(key);\n        if (keyIndex === -1) {\n            throw new Error(`${key} parameter not found in the URL: ${url}`);\n        }\n        // Find the position of the next \"&\" after \"key\"\n        const keyEndIndex = url.indexOf('&', keyIndex);\n        const keyLength = key.length;\n        // If there is no \"&\" after key, it means \"key\" is the last parameter\n        // eslint-disable-next-line no-negated-condition\n        const keyParamEnd = keyEndIndex !== -1 ? keyEndIndex : url.length;\n        // Extract the part of the URL before the key value\n        const beforeKeyValue = url.substring(0, keyIndex + keyLength);\n        // Extract the current key value\n        const currentKeyValue = url.substring(keyIndex + keyLength, keyParamEnd);\n        // Extract the part of the URL after the key value\n        const afterKeyValue = url.substring(keyEndIndex);\n        // Append the new string to the key value\n        const newKeyValue = currentKeyValue + appendString;\n        // Reconstruct the URL with the appended key value\n        const newUrl = beforeKeyValue + newKeyValue + afterKeyValue;\n        return newUrl;\n    }\n};\n//# sourceMappingURL=CoreHelperUtil.js.map","async function fetchData(...args) {\n    const response = await fetch(...args);\n    if (!response.ok) {\n        // Create error object and reject if not a 2xx response code\n        const err = new Error(`HTTP status code: ${response.status}`, {\n            cause: response\n        });\n        throw err;\n    }\n    return response;\n}\n// -- Utility --------------------------------------------------------------------\nexport class FetchUtil {\n    constructor({ baseUrl, clientId }) {\n        this.baseUrl = baseUrl;\n        this.clientId = clientId;\n    }\n    async get({ headers, signal, cache, ...args }) {\n        const url = this.createUrl(args);\n        const response = await fetchData(url, { method: 'GET', headers, signal, cache });\n        return response.json();\n    }\n    async getBlob({ headers, signal, ...args }) {\n        const url = this.createUrl(args);\n        const response = await fetchData(url, { method: 'GET', headers, signal });\n        return response.blob();\n    }\n    async post({ body, headers, signal, ...args }) {\n        const url = this.createUrl(args);\n        const response = await fetchData(url, {\n            method: 'POST',\n            headers,\n            body: body ? JSON.stringify(body) : undefined,\n            signal\n        });\n        return response.json();\n    }\n    async put({ body, headers, signal, ...args }) {\n        const url = this.createUrl(args);\n        const response = await fetchData(url, {\n            method: 'PUT',\n            headers,\n            body: body ? JSON.stringify(body) : undefined,\n            signal\n        });\n        return response.json();\n    }\n    async delete({ body, headers, signal, ...args }) {\n        const url = this.createUrl(args);\n        const response = await fetchData(url, {\n            method: 'DELETE',\n            headers,\n            body: body ? JSON.stringify(body) : undefined,\n            signal\n        });\n        return response.json();\n    }\n    createUrl({ path, params }) {\n        const url = new URL(path, this.baseUrl);\n        if (params) {\n            Object.entries(params).forEach(([key, value]) => {\n                if (value) {\n                    url.searchParams.append(key, value);\n                }\n            });\n        }\n        if (this.clientId) {\n            url.searchParams.append('clientId', this.clientId);\n        }\n        return url;\n    }\n}\n//# sourceMappingURL=FetchUtil.js.map","import { ConstantsUtil } from '@reown/appkit-common';\nimport { ChainController } from '../controllers/ChainController.js';\nexport const MobileWalletUtil = {\n    /**\n     * Handles mobile wallet redirection for wallets that have Universal Links.\n     *\n     * @param {Object} properties - The properties object.\n     * @param {string} properties.name - The name of the wallet.\n     */\n    handleSolanaDeeplinkRedirect(name) {\n        if (ChainController.state.activeChain === ConstantsUtil.CHAIN.SOLANA) {\n            /**\n             * Universal Links requires explicit user interaction to open the wallet app.\n             * Previously we've been calling this with the life-cycle methods in the Solana clients by listening the SELECT_WALLET event of EventController.\n             * But this breaks the UL functionality for some wallets like Phantom.\n             */\n            const href = window.location.href;\n            const encodedHref = encodeURIComponent(href);\n            if (name === 'Phantom' && !('phantom' in window)) {\n                const protocol = href.startsWith('https') ? 'https' : 'http';\n                const host = href.split('/')[2];\n                const encodedRef = encodeURIComponent(`${protocol}://${host}`);\n                window.location.href = `https://phantom.app/ul/browse/${encodedHref}?ref=${encodedRef}`;\n            }\n            if (name === 'Coinbase Wallet' && !('coinbaseSolana' in window)) {\n                window.location.href = `https://go.cb-w.com/dapp?cb_url=${encodedHref}`;\n            }\n        }\n    }\n};\n//# sourceMappingURL=MobileWallet.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    walletImages: {},\n    networkImages: {},\n    chainImages: {},\n    connectorImages: {},\n    tokenImages: {},\n    currencyImages: {}\n});\n// -- Controller ---------------------------------------- //\nexport const AssetController = {\n    state,\n    subscribeNetworkImages(callback) {\n        return sub(state.networkImages, () => callback(state.networkImages));\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    setWalletImage(key, value) {\n        state.walletImages[key] = value;\n    },\n    setNetworkImage(key, value) {\n        state.networkImages[key] = value;\n    },\n    setChainImage(key, value) {\n        state.chainImages[key] = value;\n    },\n    setConnectorImage(key, value) {\n        state.connectorImages = { ...state.connectorImages, [key]: value };\n    },\n    setTokenImage(key, value) {\n        state.tokenImages[key] = value;\n    },\n    setCurrencyImage(key, value) {\n        state.currencyImages[key] = value;\n    }\n};\n//# sourceMappingURL=AssetController.js.map","import { proxy } from 'valtio/vanilla';\nimport { ApiController } from '../controllers/ApiController.js';\nimport { AssetController } from '../controllers/AssetController.js';\nconst namespaceImageIds = {\n    // Ethereum\n    eip155: 'ba0ba0cd-17c6-4806-ad93-f9d174f17900',\n    // Solana\n    solana: 'a1b58899-f671-4276-6a5e-56ca5bd59700',\n    // Polkadot\n    polkadot: '',\n    // Bitcoin\n    bip122: '0b4838db-0161-4ffe-022d-532bf03dba00'\n};\n// -- State --------------------------------------------- //\nconst state = proxy({\n    networkImagePromises: {}\n});\n// -- Util ---------------------------------------- //\nexport const AssetUtil = {\n    async fetchWalletImage(imageId) {\n        if (!imageId) {\n            return undefined;\n        }\n        await ApiController._fetchWalletImage(imageId);\n        return this.getWalletImageById(imageId);\n    },\n    async fetchNetworkImage(imageId) {\n        if (!imageId) {\n            return undefined;\n        }\n        const existingImage = this.getNetworkImageById(imageId);\n        // Check if the image already exists\n        if (existingImage) {\n            return existingImage;\n        }\n        // Check if the promise is already created\n        if (!state.networkImagePromises[imageId]) {\n            state.networkImagePromises[imageId] = ApiController._fetchNetworkImage(imageId);\n        }\n        await state.networkImagePromises[imageId];\n        return this.getNetworkImageById(imageId);\n    },\n    getWalletImageById(imageId) {\n        if (!imageId) {\n            return undefined;\n        }\n        return AssetController.state.walletImages[imageId];\n    },\n    getWalletImage(wallet) {\n        if (wallet?.image_url) {\n            return wallet?.image_url;\n        }\n        if (wallet?.image_id) {\n            return AssetController.state.walletImages[wallet.image_id];\n        }\n        return undefined;\n    },\n    getNetworkImage(network) {\n        if (network?.assets?.imageUrl) {\n            return network?.assets?.imageUrl;\n        }\n        if (network?.assets?.imageId) {\n            return AssetController.state.networkImages[network.assets.imageId];\n        }\n        return undefined;\n    },\n    getNetworkImageById(imageId) {\n        if (!imageId) {\n            return undefined;\n        }\n        return AssetController.state.networkImages[imageId];\n    },\n    getConnectorImage(connector) {\n        if (connector?.imageUrl) {\n            return connector.imageUrl;\n        }\n        if (connector?.imageId) {\n            return AssetController.state.connectorImages[connector.imageId];\n        }\n        return undefined;\n    },\n    getChainImage(chain) {\n        return AssetController.state.networkImages[namespaceImageIds[chain]];\n    }\n};\n//# sourceMappingURL=AssetUtil.js.map","import { ConstantsUtil } from './ConstantsUtil.js';\nimport { CoreHelperUtil } from './CoreHelperUtil.js';\nexport const OptionsUtil = {\n    getFeatureValue(key, features) {\n        const optionValue = features?.[key];\n        if (optionValue === undefined) {\n            return ConstantsUtil.DEFAULT_FEATURES[key];\n        }\n        return optionValue;\n    },\n    filterSocialsByPlatform(socials) {\n        if (!socials || !socials.length) {\n            return socials;\n        }\n        if (CoreHelperUtil.isTelegram()) {\n            if (CoreHelperUtil.isIos()) {\n                return socials.filter(s => s !== 'google');\n            }\n            if (CoreHelperUtil.isMac()) {\n                return socials.filter(s => s !== 'x');\n            }\n            if (CoreHelperUtil.isAndroid()) {\n                return socials.filter(s => !['facebook', 'x'].includes(s));\n            }\n        }\n        return socials;\n    }\n};\n//# sourceMappingURL=OptionsUtil.js.map","import { proxy, snapshot } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { OptionsUtil } from '../utils/OptionsUtil.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    features: ConstantsUtil.DEFAULT_FEATURES,\n    projectId: '',\n    sdkType: 'appkit',\n    sdkVersion: 'html-wagmi-undefined',\n    defaultAccountTypes: ConstantsUtil.DEFAULT_ACCOUNT_TYPES,\n    enableNetworkSwitch: true\n});\n// -- Controller ---------------------------------------- //\nexport const OptionsController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    setOptions(options) {\n        Object.assign(state, options);\n    },\n    setFeatures(features) {\n        if (!features) {\n            return;\n        }\n        if (!state.features) {\n            state.features = ConstantsUtil.DEFAULT_FEATURES;\n        }\n        const newFeatures = { ...state.features, ...features };\n        state.features = newFeatures;\n        if (state.features.socials) {\n            state.features.socials = OptionsUtil.filterSocialsByPlatform(state.features.socials);\n        }\n    },\n    setProjectId(projectId) {\n        state.projectId = projectId;\n    },\n    setCustomRpcUrls(customRpcUrls) {\n        state.customRpcUrls = customRpcUrls;\n    },\n    setAllWallets(allWallets) {\n        state.allWallets = allWallets;\n    },\n    setIncludeWalletIds(includeWalletIds) {\n        state.includeWalletIds = includeWalletIds;\n    },\n    setExcludeWalletIds(excludeWalletIds) {\n        state.excludeWalletIds = excludeWalletIds;\n    },\n    setFeaturedWalletIds(featuredWalletIds) {\n        state.featuredWalletIds = featuredWalletIds;\n    },\n    setTokens(tokens) {\n        state.tokens = tokens;\n    },\n    setTermsConditionsUrl(termsConditionsUrl) {\n        state.termsConditionsUrl = termsConditionsUrl;\n    },\n    setPrivacyPolicyUrl(privacyPolicyUrl) {\n        state.privacyPolicyUrl = privacyPolicyUrl;\n    },\n    setCustomWallets(customWallets) {\n        state.customWallets = customWallets;\n    },\n    setIsSiweEnabled(isSiweEnabled) {\n        state.isSiweEnabled = isSiweEnabled;\n    },\n    setIsUniversalProvider(isUniversalProvider) {\n        state.isUniversalProvider = isUniversalProvider;\n    },\n    setSdkVersion(sdkVersion) {\n        state.sdkVersion = sdkVersion;\n    },\n    setMetadata(metadata) {\n        state.metadata = metadata;\n    },\n    setDisableAppend(disableAppend) {\n        state.disableAppend = disableAppend;\n    },\n    setEIP6963Enabled(enableEIP6963) {\n        state.enableEIP6963 = enableEIP6963;\n    },\n    setDebug(debug) {\n        state.debug = debug;\n    },\n    setEnableWalletConnect(enableWalletConnect) {\n        state.enableWalletConnect = enableWalletConnect;\n    },\n    setEnableWalletGuide(enableWalletGuide) {\n        state.enableWalletGuide = enableWalletGuide;\n    },\n    setEnableAuthLogger(enableAuthLogger) {\n        state.enableAuthLogger = enableAuthLogger;\n    },\n    setEnableWallets(enableWallets) {\n        state.enableWallets = enableWallets;\n    },\n    setHasMultipleAddresses(hasMultipleAddresses) {\n        state.hasMultipleAddresses = hasMultipleAddresses;\n    },\n    setSIWX(siwx) {\n        state.siwx = siwx;\n    },\n    setConnectMethodsOrder(connectMethodsOrder) {\n        state.features = {\n            ...state.features,\n            connectMethodsOrder\n        };\n    },\n    setWalletFeaturesOrder(walletFeaturesOrder) {\n        state.features = {\n            ...state.features,\n            walletFeaturesOrder\n        };\n    },\n    setSocialsOrder(socialsOrder) {\n        state.features = {\n            ...state.features,\n            socials: socialsOrder\n        };\n    },\n    setCollapseWallets(collapseWallets) {\n        state.features = {\n            ...state.features,\n            collapseWallets\n        };\n    },\n    setEnableEmbedded(enableEmbedded) {\n        state.enableEmbedded = enableEmbedded;\n    },\n    setAllowUnsupportedChain(allowUnsupportedChain) {\n        state.allowUnsupportedChain = allowUnsupportedChain;\n    },\n    setManualWCControl(manualWCControl) {\n        state.manualWCControl = manualWCControl;\n    },\n    setEnableNetworkSwitch(enableNetworkSwitch) {\n        state.enableNetworkSwitch = enableNetworkSwitch;\n    },\n    setDefaultAccountTypes(defaultAccountType = {}) {\n        Object.entries(defaultAccountType).forEach(([namespace, accountType]) => {\n            if (accountType) {\n                // @ts-expect-error - Keys are validated by the param type\n                state.defaultAccountTypes[namespace] = accountType;\n            }\n        });\n    },\n    setUniversalProviderConfigOverride(universalProviderConfigOverride) {\n        state.universalProviderConfigOverride = universalProviderConfigOverride;\n    },\n    getUniversalProviderConfigOverride() {\n        return state.universalProviderConfigOverride;\n    },\n    getSnapshot() {\n        return snapshot(state);\n    }\n};\n//# sourceMappingURL=OptionsController.js.map","import { proxy } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { OptionsController } from './OptionsController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    message: '',\n    variant: 'info',\n    open: false\n});\n// -- Controller ---------------------------------------- //\nexport const AlertController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    open(message, variant) {\n        const { debug } = OptionsController.state;\n        const { shortMessage, longMessage } = message;\n        if (debug) {\n            state.message = shortMessage;\n            state.variant = variant;\n            state.open = true;\n        }\n        if (longMessage) {\n            // eslint-disable-next-line no-console\n            console.error(typeof longMessage === 'function' ? longMessage() : longMessage);\n        }\n    },\n    close() {\n        state.open = false;\n        state.message = '';\n        state.variant = 'info';\n    }\n};\n//# sourceMappingURL=AlertController.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { ConstantsUtil, isSafe } from '@reown/appkit-common';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { AlertController } from './AlertController.js';\nimport { OptionsController } from './OptionsController.js';\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getAnalyticsUrl();\nconst api = new FetchUtil({ baseUrl, clientId: null });\nconst excluded = ['MODAL_CREATED'];\n// -- State --------------------------------------------- //\nconst state = proxy({\n    timestamp: Date.now(),\n    reportedErrors: {},\n    data: {\n        type: 'track',\n        event: 'MODAL_CREATED'\n    }\n});\n// -- Controller ---------------------------------------- //\nexport const EventsController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    getSdkProperties() {\n        const { projectId, sdkType, sdkVersion } = OptionsController.state;\n        return {\n            projectId,\n            st: sdkType,\n            sv: sdkVersion || 'html-wagmi-4.2.2'\n        };\n    },\n    async _sendAnalyticsEvent(payload) {\n        try {\n            const address = AccountController.state.address;\n            if (excluded.includes(payload.data.event) || typeof window === 'undefined') {\n                return;\n            }\n            await api.post({\n                path: '/e',\n                params: EventsController.getSdkProperties(),\n                body: {\n                    eventId: CoreHelperUtil.getUUID(),\n                    url: window.location.href,\n                    domain: window.location.hostname,\n                    timestamp: payload.timestamp,\n                    props: { ...payload.data, address }\n                }\n            });\n            state.reportedErrors['FORBIDDEN'] = false;\n        }\n        catch (err) {\n            const isForbiddenError = err instanceof Error &&\n                err.cause instanceof Response &&\n                err.cause.status === ConstantsUtil.HTTP_STATUS_CODES.FORBIDDEN &&\n                !state.reportedErrors['FORBIDDEN'];\n            if (isForbiddenError) {\n                AlertController.open({\n                    shortMessage: 'Invalid App Configuration',\n                    longMessage: `Origin ${isSafe() ? window.origin : 'uknown'} not found on Allowlist - update configuration on cloud.reown.com`\n                }, 'error');\n                state.reportedErrors['FORBIDDEN'] = true;\n            }\n        }\n    },\n    sendEvent(data) {\n        state.timestamp = Date.now();\n        state.data = data;\n        if (OptionsController.state.features?.analytics) {\n            EventsController._sendAnalyticsEvent(state);\n        }\n    }\n};\n//# sourceMappingURL=EventsController.js.map","import { proxy } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { AssetUtil } from '../utils/AssetUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AssetController } from './AssetController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { OptionsController } from './OptionsController.js';\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getApiUrl();\nexport const api = new FetchUtil({ baseUrl, clientId: null });\nconst entries = '40';\nconst recommendedEntries = '4';\nconst imageCountToFetch = 20;\n// -- State --------------------------------------------- //\nconst state = proxy({\n    promises: {},\n    page: 1,\n    count: 0,\n    featured: [],\n    allFeatured: [],\n    recommended: [],\n    allRecommended: [],\n    wallets: [],\n    search: [],\n    isAnalyticsEnabled: false,\n    excludedWallets: [],\n    isFetchingRecommendedWallets: false\n});\n// -- Controller ---------------------------------------- //\nexport const ApiController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    _getSdkProperties() {\n        const { projectId, sdkType, sdkVersion } = OptionsController.state;\n        return {\n            projectId,\n            st: sdkType || 'appkit',\n            sv: sdkVersion || 'html-wagmi-4.2.2'\n        };\n    },\n    _filterOutExtensions(wallets) {\n        if (OptionsController.state.isUniversalProvider) {\n            return wallets.filter(w => Boolean(w.mobile_link || w.desktop_link || w.webapp_link));\n        }\n        return wallets;\n    },\n    async _fetchWalletImage(imageId) {\n        const imageUrl = `${api.baseUrl}/getWalletImage/${imageId}`;\n        const blob = await api.getBlob({ path: imageUrl, params: ApiController._getSdkProperties() });\n        AssetController.setWalletImage(imageId, URL.createObjectURL(blob));\n    },\n    async _fetchNetworkImage(imageId) {\n        const imageUrl = `${api.baseUrl}/public/getAssetImage/${imageId}`;\n        const blob = await api.getBlob({ path: imageUrl, params: ApiController._getSdkProperties() });\n        AssetController.setNetworkImage(imageId, URL.createObjectURL(blob));\n    },\n    async _fetchConnectorImage(imageId) {\n        const imageUrl = `${api.baseUrl}/public/getAssetImage/${imageId}`;\n        const blob = await api.getBlob({ path: imageUrl, params: ApiController._getSdkProperties() });\n        AssetController.setConnectorImage(imageId, URL.createObjectURL(blob));\n    },\n    async _fetchCurrencyImage(countryCode) {\n        const imageUrl = `${api.baseUrl}/public/getCurrencyImage/${countryCode}`;\n        const blob = await api.getBlob({ path: imageUrl, params: ApiController._getSdkProperties() });\n        AssetController.setCurrencyImage(countryCode, URL.createObjectURL(blob));\n    },\n    async _fetchTokenImage(symbol) {\n        const imageUrl = `${api.baseUrl}/public/getTokenImage/${symbol}`;\n        const blob = await api.getBlob({ path: imageUrl, params: ApiController._getSdkProperties() });\n        AssetController.setTokenImage(symbol, URL.createObjectURL(blob));\n    },\n    async fetchNetworkImages() {\n        const requestedCaipNetworks = ChainController.getAllRequestedCaipNetworks();\n        const ids = requestedCaipNetworks\n            ?.map(({ assets }) => assets?.imageId)\n            .filter(Boolean)\n            .filter(imageId => !AssetUtil.getNetworkImageById(imageId));\n        if (ids) {\n            await Promise.allSettled(ids.map(id => ApiController._fetchNetworkImage(id)));\n        }\n    },\n    async fetchConnectorImages() {\n        const { connectors } = ConnectorController.state;\n        const ids = connectors.map(({ imageId }) => imageId).filter(Boolean);\n        await Promise.allSettled(ids.map(id => ApiController._fetchConnectorImage(id)));\n    },\n    async fetchCurrencyImages(currencies = []) {\n        await Promise.allSettled(currencies.map(currency => ApiController._fetchCurrencyImage(currency)));\n    },\n    async fetchTokenImages(tokens = []) {\n        await Promise.allSettled(tokens.map(token => ApiController._fetchTokenImage(token)));\n    },\n    async fetchFeaturedWallets() {\n        const { featuredWalletIds } = OptionsController.state;\n        if (featuredWalletIds?.length) {\n            const { data } = await api.get({\n                path: '/getWallets',\n                params: {\n                    ...ApiController._getSdkProperties(),\n                    page: '1',\n                    entries: featuredWalletIds?.length\n                        ? String(featuredWalletIds.length)\n                        : recommendedEntries,\n                    include: featuredWalletIds?.join(',')\n                }\n            });\n            data.sort((a, b) => featuredWalletIds.indexOf(a.id) - featuredWalletIds.indexOf(b.id));\n            const images = data.map(d => d.image_id).filter(Boolean);\n            await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n            state.featured = data;\n            state.allFeatured = data;\n        }\n    },\n    async fetchRecommendedWallets() {\n        try {\n            state.isFetchingRecommendedWallets = true;\n            const { includeWalletIds, excludeWalletIds, featuredWalletIds } = OptionsController.state;\n            const exclude = [...(excludeWalletIds ?? []), ...(featuredWalletIds ?? [])].filter(Boolean);\n            const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n            const { data, count } = await api.get({\n                path: '/getWallets',\n                params: {\n                    ...ApiController._getSdkProperties(),\n                    page: '1',\n                    chains: caipNetworkIds,\n                    entries: recommendedEntries,\n                    include: includeWalletIds?.join(','),\n                    exclude: exclude?.join(',')\n                }\n            });\n            const recent = StorageUtil.getRecentWallets();\n            const recommendedImages = data.map(d => d.image_id).filter(Boolean);\n            const recentImages = recent.map(r => r.image_id).filter(Boolean);\n            await Promise.allSettled([...recommendedImages, ...recentImages].map(id => ApiController._fetchWalletImage(id)));\n            state.recommended = data;\n            state.allRecommended = data;\n            state.count = count ?? 0;\n        }\n        catch {\n            // Catch silently\n        }\n        finally {\n            state.isFetchingRecommendedWallets = false;\n        }\n    },\n    async fetchWallets({ page }) {\n        const { includeWalletIds, excludeWalletIds, featuredWalletIds } = OptionsController.state;\n        const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n        const exclude = [\n            ...state.recommended.map(({ id }) => id),\n            ...(excludeWalletIds ?? []),\n            ...(featuredWalletIds ?? [])\n        ].filter(Boolean);\n        const { data, count } = await api.get({\n            path: '/getWallets',\n            params: {\n                ...ApiController._getSdkProperties(),\n                page: String(page),\n                entries,\n                chains: caipNetworkIds,\n                include: includeWalletIds?.join(','),\n                exclude: exclude.join(',')\n            }\n        });\n        const images = data\n            .slice(0, imageCountToFetch)\n            .map(w => w.image_id)\n            .filter(Boolean);\n        await Promise.allSettled(images.map(id => ApiController._fetchWalletImage(id)));\n        state.wallets = CoreHelperUtil.uniqueBy([...state.wallets, ...ApiController._filterOutExtensions(data)], 'id');\n        state.count = count > state.count ? count : state.count;\n        state.page = page;\n    },\n    async initializeExcludedWallets({ ids }) {\n        const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n        const { data } = await api.get({\n            path: '/getWallets',\n            params: {\n                ...ApiController._getSdkProperties(),\n                page: '1',\n                entries: String(ids.length),\n                chains: caipNetworkIds,\n                include: ids?.join(',')\n            }\n        });\n        if (data) {\n            data.forEach(wallet => {\n                if (wallet?.rdns) {\n                    state.excludedWallets.push({ rdns: wallet.rdns, name: wallet.name });\n                }\n            });\n        }\n    },\n    async searchWallet({ search, badge }) {\n        const { includeWalletIds, excludeWalletIds } = OptionsController.state;\n        state.search = [];\n        const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n        const { data } = await api.get({\n            path: '/getWallets',\n            params: {\n                ...ApiController._getSdkProperties(),\n                page: '1',\n                entries: '100',\n                search: search?.trim(),\n                badge_type: badge,\n                chains: caipNetworkIds,\n                include: includeWalletIds?.join(','),\n                exclude: excludeWalletIds?.join(',')\n            }\n        });\n        EventsController.sendEvent({\n            type: 'track',\n            event: 'SEARCH_WALLET',\n            properties: { badge: badge ?? '', search: search ?? '' }\n        });\n        const images = data.map(w => w.image_id).filter(Boolean);\n        await Promise.allSettled([\n            ...images.map(id => ApiController._fetchWalletImage(id)),\n            CoreHelperUtil.wait(300)\n        ]);\n        state.search = ApiController._filterOutExtensions(data);\n    },\n    initPromise(key, fetchFn) {\n        const existingPromise = state.promises[key];\n        if (existingPromise) {\n            return existingPromise;\n        }\n        return (state.promises[key] = fetchFn());\n    },\n    prefetch({ fetchConnectorImages = true, fetchFeaturedWallets = true, fetchRecommendedWallets = true, fetchNetworkImages = true } = {}) {\n        const promises = [\n            fetchConnectorImages &&\n                ApiController.initPromise('connectorImages', ApiController.fetchConnectorImages),\n            fetchFeaturedWallets &&\n                ApiController.initPromise('featuredWallets', ApiController.fetchFeaturedWallets),\n            fetchRecommendedWallets &&\n                ApiController.initPromise('recommendedWallets', ApiController.fetchRecommendedWallets),\n            fetchNetworkImages &&\n                ApiController.initPromise('networkImages', ApiController.fetchNetworkImages)\n        ].filter(Boolean);\n        return Promise.allSettled(promises);\n    },\n    prefetchAnalyticsConfig() {\n        if (OptionsController.state.features?.analytics) {\n            ApiController.fetchAnalyticsConfig();\n        }\n    },\n    async fetchAnalyticsConfig() {\n        try {\n            const { isAnalyticsEnabled } = await api.get({\n                path: '/getAnalyticsConfig',\n                params: ApiController._getSdkProperties()\n            });\n            OptionsController.setFeatures({ analytics: isAnalyticsEnabled });\n        }\n        catch (error) {\n            OptionsController.setFeatures({ analytics: false });\n        }\n    },\n    setFilterByNamespace(namespace) {\n        if (!namespace) {\n            state.featured = state.allFeatured;\n            state.recommended = state.allRecommended;\n            return;\n        }\n        const caipNetworkIds = ChainController.getRequestedCaipNetworkIds().join(',');\n        state.featured = state.allFeatured.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n        state.recommended = state.allRecommended.filter(wallet => wallet.chains?.some(chain => caipNetworkIds.includes(chain)));\n    }\n};\n//# sourceMappingURL=ApiController.js.map","import { proxy, snapshot } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { AccountController } from './AccountController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { ModalController } from './ModalController.js';\nimport { OptionsController } from './OptionsController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    view: 'Connect',\n    history: ['Connect'],\n    transactionStack: []\n});\n// -- Controller ---------------------------------------- //\nexport const RouterController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    pushTransactionStack(action) {\n        state.transactionStack.push(action);\n    },\n    popTransactionStack(cancel) {\n        const action = state.transactionStack.pop();\n        if (!action) {\n            return;\n        }\n        if (cancel) {\n            // When the transaction is cancelled, we go back to the previous view\n            this.goBack();\n            action?.onCancel?.();\n        }\n        else {\n            // When the transaction is successful, we do conditional navigation depending on the action properties\n            if (action.goBack) {\n                this.goBack();\n            }\n            else if (action.replace) {\n                /*\n                 *  If the history like [\"ConnectingSiwe\", \"ApproveTransaction\"], this means SIWE popup is opened after page rendered (not after user interaction)\n                 *  we need to conditionally call replace.\n                 *  There is a chance that there is only these two views in the history; when user approved, the modal should closed and history should be empty (both connectingsiwe and approveTX should be removed)\n                 *  If there is another views before the ConnectingSiwe (if the CS is not the first view), we should back to the first view before CS.\n                 */\n                const history = state.history;\n                const connectingSiweIndex = history.indexOf('ConnectingSiwe');\n                if (connectingSiweIndex > 0) {\n                    // There are views before ConnectingSiwe\n                    this.goBackToIndex(connectingSiweIndex - 1);\n                }\n                else {\n                    // ConnectingSiwe is the first view\n                    ModalController.close();\n                    state.history = [];\n                }\n            }\n            else if (action.view) {\n                this.reset(action.view);\n            }\n            action?.onSuccess?.();\n        }\n    },\n    push(view, data) {\n        if (view !== state.view) {\n            state.view = view;\n            state.history.push(view);\n            state.data = data;\n        }\n    },\n    reset(view, data) {\n        state.view = view;\n        state.history = [view];\n        state.data = data;\n    },\n    replace(view, data) {\n        const lastView = state.history.at(-1);\n        const isSameView = lastView === view;\n        if (!isSameView) {\n            state.view = view;\n            state.history[state.history.length - 1] = view;\n            state.data = data;\n        }\n    },\n    goBack() {\n        const shouldReload = !ChainController.state.activeCaipAddress && this.state.view === 'ConnectingFarcaster';\n        if (state.history.length > 1 && !state.history.includes('UnsupportedChain')) {\n            state.history.pop();\n            const [last] = state.history.slice(-1);\n            if (last) {\n                state.view = last;\n            }\n        }\n        else {\n            ModalController.close();\n        }\n        if (state.data?.wallet) {\n            state.data.wallet = undefined;\n        }\n        // Reloading the iframe contentwindow and doing the view animation in the modal causes a small freeze in the transition. Doing these separately fixes that.\n        setTimeout(() => {\n            if (shouldReload) {\n                AccountController.setFarcasterUrl(undefined, ChainController.state.activeChain);\n                const authConnector = ConnectorController.getAuthConnector();\n                authConnector?.provider?.reload();\n                const optionsState = snapshot(OptionsController.state);\n                authConnector?.provider?.syncDappData?.({\n                    metadata: optionsState.metadata,\n                    sdkVersion: optionsState.sdkVersion,\n                    projectId: optionsState.projectId,\n                    sdkType: optionsState.sdkType\n                });\n            }\n        }, 100);\n    },\n    goBackToIndex(historyIndex) {\n        if (state.history.length > 1) {\n            state.history = state.history.slice(0, historyIndex + 1);\n            const [last] = state.history.slice(-1);\n            if (last) {\n                state.view = last;\n            }\n        }\n    }\n};\n//# sourceMappingURL=RouterController.js.map","import { proxy, snapshot, subscribe as sub } from 'valtio/vanilla';\nimport { getW3mThemeVariables } from '@reown/appkit-common';\nimport { ConnectorController } from './ConnectorController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    themeMode: 'dark',\n    themeVariables: {},\n    w3mThemeVariables: undefined\n});\n// -- Controller ---------------------------------------- //\nexport const ThemeController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    setThemeMode(themeMode) {\n        state.themeMode = themeMode;\n        try {\n            const authConnector = ConnectorController.getAuthConnector();\n            if (authConnector) {\n                const themeVariables = ThemeController.getSnapshot().themeVariables;\n                authConnector.provider.syncTheme({\n                    themeMode,\n                    themeVariables,\n                    w3mThemeVariables: getW3mThemeVariables(themeVariables, themeMode)\n                });\n            }\n        }\n        catch {\n            // eslint-disable-next-line no-console\n            console.info('Unable to sync theme to auth connector');\n        }\n    },\n    setThemeVariables(themeVariables) {\n        state.themeVariables = { ...state.themeVariables, ...themeVariables };\n        try {\n            const authConnector = ConnectorController.getAuthConnector();\n            if (authConnector) {\n                const themeVariablesSnapshot = ThemeController.getSnapshot().themeVariables;\n                authConnector.provider.syncTheme({\n                    themeVariables: themeVariablesSnapshot,\n                    w3mThemeVariables: getW3mThemeVariables(state.themeVariables, state.themeMode)\n                });\n            }\n        }\n        catch {\n            // eslint-disable-next-line no-console\n            console.info('Unable to sync theme to auth connector');\n        }\n    },\n    getSnapshot() {\n        return snapshot(state);\n    }\n};\n//# sourceMappingURL=ThemeController.js.map","import { proxy, ref, snapshot, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil, getW3mThemeVariables } from '@reown/appkit-common';\nimport { MobileWalletUtil } from '../utils/MobileWallet.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { ApiController } from './ApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { RouterController } from './RouterController.js';\nimport { ThemeController } from './ThemeController.js';\nconst defaultActiveConnectors = {\n    eip155: undefined,\n    solana: undefined,\n    polkadot: undefined,\n    bip122: undefined\n};\n// -- State --------------------------------------------- //\nconst state = proxy({\n    allConnectors: [],\n    connectors: [],\n    activeConnector: undefined,\n    filterByNamespace: undefined,\n    activeConnectorIds: { ...defaultActiveConnectors }\n});\n// -- Controller ---------------------------------------- //\nexport const ConnectorController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => {\n            callback(state);\n        });\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    initialize(namespaces) {\n        namespaces.forEach(namespace => {\n            const connectorId = StorageUtil.getConnectedConnectorId(namespace);\n            if (connectorId) {\n                this.setConnectorId(connectorId, namespace);\n            }\n        });\n    },\n    setActiveConnector(connector) {\n        if (connector) {\n            state.activeConnector = ref(connector);\n        }\n    },\n    setConnectors(connectors) {\n        const newConnectors = connectors.filter(newConnector => !state.allConnectors.some(existingConnector => existingConnector.id === newConnector.id &&\n            this.getConnectorName(existingConnector.name) ===\n                this.getConnectorName(newConnector.name) &&\n            existingConnector.chain === newConnector.chain));\n        /**\n         * We are reassigning the state of the proxy to a new array of new objects, this can cause issues. So it is better to use ref in this case.\n         * Check more about proxy on https://valtio.dev/docs/api/basic/proxy#Gotchas\n         * Check more about ref on https://valtio.dev/docs/api/basic/ref\n         */\n        newConnectors.forEach(connector => {\n            if (connector.type !== 'MULTI_CHAIN') {\n                state.allConnectors.push(ref(connector));\n            }\n        });\n        state.connectors = this.mergeMultiChainConnectors(state.allConnectors);\n    },\n    removeAdapter(namespace) {\n        state.allConnectors = state.allConnectors.filter(connector => connector.chain !== namespace);\n        state.connectors = this.mergeMultiChainConnectors(state.allConnectors);\n    },\n    mergeMultiChainConnectors(connectors) {\n        const connectorsByNameMap = this.generateConnectorMapByName(connectors);\n        const mergedConnectors = [];\n        connectorsByNameMap.forEach(keyConnectors => {\n            const firstItem = keyConnectors[0];\n            const isAuthConnector = firstItem?.id === ConstantsUtil.CONNECTOR_ID.AUTH;\n            if (keyConnectors.length > 1 && firstItem) {\n                mergedConnectors.push({\n                    name: firstItem.name,\n                    imageUrl: firstItem.imageUrl,\n                    imageId: firstItem.imageId,\n                    connectors: [...keyConnectors],\n                    type: isAuthConnector ? 'AUTH' : 'MULTI_CHAIN',\n                    // These values are just placeholders, we don't use them in multi-chain connector select screen\n                    chain: 'eip155',\n                    id: firstItem?.id || ''\n                });\n            }\n            else if (firstItem) {\n                mergedConnectors.push(firstItem);\n            }\n        });\n        return mergedConnectors;\n    },\n    generateConnectorMapByName(connectors) {\n        const connectorsByNameMap = new Map();\n        connectors.forEach(connector => {\n            const { name } = connector;\n            const connectorName = this.getConnectorName(name);\n            if (!connectorName) {\n                return;\n            }\n            const connectorsByName = connectorsByNameMap.get(connectorName) || [];\n            const haveSameConnector = connectorsByName.find(c => c.chain === connector.chain);\n            if (!haveSameConnector) {\n                connectorsByName.push(connector);\n            }\n            connectorsByNameMap.set(connectorName, connectorsByName);\n        });\n        return connectorsByNameMap;\n    },\n    getConnectorName(name) {\n        if (!name) {\n            return name;\n        }\n        const nameOverrideMap = {\n            'Trust Wallet': 'Trust'\n        };\n        return nameOverrideMap[name] || name;\n    },\n    getUniqueConnectorsByName(connectors) {\n        const uniqueConnectors = [];\n        connectors.forEach(c => {\n            if (!uniqueConnectors.find(uc => uc.chain === c.chain)) {\n                uniqueConnectors.push(c);\n            }\n        });\n        return uniqueConnectors;\n    },\n    addConnector(connector) {\n        if (connector.id === ConstantsUtil.CONNECTOR_ID.AUTH) {\n            const authConnector = connector;\n            const optionsState = snapshot(OptionsController.state);\n            const themeMode = ThemeController.getSnapshot().themeMode;\n            const themeVariables = ThemeController.getSnapshot().themeVariables;\n            authConnector?.provider?.syncDappData?.({\n                metadata: optionsState.metadata,\n                sdkVersion: optionsState.sdkVersion,\n                projectId: optionsState.projectId,\n                sdkType: optionsState.sdkType\n            });\n            authConnector?.provider?.syncTheme({\n                themeMode,\n                themeVariables,\n                w3mThemeVariables: getW3mThemeVariables(themeVariables, themeMode)\n            });\n            this.setConnectors([connector]);\n        }\n        else {\n            this.setConnectors([connector]);\n        }\n    },\n    getAuthConnector(chainNamespace) {\n        const activeNamespace = chainNamespace || ChainController.state.activeChain;\n        const authConnector = state.connectors.find(c => c.id === ConstantsUtil.CONNECTOR_ID.AUTH);\n        if (!authConnector) {\n            return undefined;\n        }\n        if (authConnector?.connectors?.length) {\n            const connector = authConnector.connectors.find(c => c.chain === activeNamespace);\n            return connector;\n        }\n        return authConnector;\n    },\n    getAnnouncedConnectorRdns() {\n        return state.connectors.filter(c => c.type === 'ANNOUNCED').map(c => c.info?.rdns);\n    },\n    getConnectorById(id) {\n        return state.allConnectors.find(c => c.id === id);\n    },\n    getConnector(id, rdns) {\n        const connectorsByNamespace = state.allConnectors.filter(c => c.chain === ChainController.state.activeChain);\n        return connectorsByNamespace.find(c => c.explorerId === id || c.info?.rdns === rdns);\n    },\n    syncIfAuthConnector(connector) {\n        if (connector.id !== 'ID_AUTH') {\n            return;\n        }\n        const authConnector = connector;\n        const optionsState = snapshot(OptionsController.state);\n        const themeMode = ThemeController.getSnapshot().themeMode;\n        const themeVariables = ThemeController.getSnapshot().themeVariables;\n        authConnector?.provider?.syncDappData?.({\n            metadata: optionsState.metadata,\n            sdkVersion: optionsState.sdkVersion,\n            sdkType: optionsState.sdkType,\n            projectId: optionsState.projectId\n        });\n        authConnector.provider.syncTheme({\n            themeMode,\n            themeVariables,\n            w3mThemeVariables: getW3mThemeVariables(themeVariables, themeMode)\n        });\n    },\n    /**\n     * Returns the connectors filtered by namespace.\n     * @param namespace - The namespace to filter the connectors by.\n     * @returns ConnectorWithProviders[].\n     */\n    getConnectorsByNamespace(namespace) {\n        const namespaceConnectors = state.allConnectors.filter(connector => connector.chain === namespace);\n        return this.mergeMultiChainConnectors(namespaceConnectors);\n    },\n    selectWalletConnector(wallet) {\n        const connector = ConnectorController.getConnector(wallet.id, wallet.rdns);\n        if (ChainController.state.activeChain === ConstantsUtil.CHAIN.SOLANA) {\n            MobileWalletUtil.handleSolanaDeeplinkRedirect(connector?.name || wallet.name || '');\n        }\n        if (connector) {\n            RouterController.push('ConnectingExternal', { connector });\n        }\n        else {\n            RouterController.push('ConnectingWalletConnect', { wallet });\n        }\n    },\n    /**\n     * Returns the connectors. If a namespace is provided, the connectors are filtered by namespace.\n     * @param namespace - The namespace to filter the connectors by. If not provided, all connectors are returned.\n     * @returns ConnectorWithProviders[].\n     */\n    getConnectors(namespace) {\n        if (namespace) {\n            return this.getConnectorsByNamespace(namespace);\n        }\n        return this.mergeMultiChainConnectors(state.allConnectors);\n    },\n    /**\n     * Sets the filter by namespace and updates the connectors.\n     * @param namespace - The namespace to filter the connectors by.\n     */\n    setFilterByNamespace(namespace) {\n        state.filterByNamespace = namespace;\n        state.connectors = this.getConnectors(namespace);\n        ApiController.setFilterByNamespace(namespace);\n    },\n    setConnectorId(connectorId, namespace) {\n        if (connectorId) {\n            state.activeConnectorIds = {\n                ...state.activeConnectorIds,\n                [namespace]: connectorId\n            };\n            StorageUtil.setConnectedConnectorId(namespace, connectorId);\n        }\n    },\n    removeConnectorId(namespace) {\n        state.activeConnectorIds = {\n            ...state.activeConnectorIds,\n            [namespace]: undefined\n        };\n        StorageUtil.deleteConnectedConnectorId(namespace);\n    },\n    getConnectorId(namespace) {\n        if (!namespace) {\n            return undefined;\n        }\n        return state.activeConnectorIds[namespace];\n    },\n    isConnected(namespace) {\n        if (!namespace) {\n            return Object.values(state.activeConnectorIds).some(id => Boolean(id));\n        }\n        return Boolean(state.activeConnectorIds[namespace]);\n    },\n    resetConnectorIds() {\n        state.activeConnectorIds = { ...defaultActiveConnectors };\n    }\n};\n//# sourceMappingURL=ConnectorController.js.map","import { ConnectorController } from '../controllers/ConnectorController.js';\n/**\n * Checks if the given namespace is associated with the specified connector id.\n * @param namespace - The namespace to check.\n * @param connectorId - The connector id to compare against.\n * @returns True if the namespace is associated with the connector id, false otherwise.\n */\nexport function checkNamespaceConnectorId(namespace, connectorId) {\n    return ConnectorController.getConnectorId(namespace) === connectorId;\n}\n//# sourceMappingURL=ConnectorControllerUtil.js.map","import { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { checkNamespaceConnectorId } from './ConnectorControllerUtil.js';\n/**\n * Returns the array of chains to disconnect from the connector with the given namespace.\n * If no namespace is provided, it returns all chains.\n * @param namespace - The namespace of the connector to disconnect from.\n * @returns An array of chains to disconnect.\n */\nexport function getChainsToDisconnect(namespace) {\n    const namespaces = Array.from(ChainController.state.chains.keys());\n    let chains = [];\n    if (namespace) {\n        chains.push([namespace, ChainController.state.chains.get(namespace)]);\n        if (checkNamespaceConnectorId(namespace, CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT)) {\n            namespaces.forEach(ns => {\n                if (ns !== namespace &&\n                    checkNamespaceConnectorId(ns, CommonConstantsUtil.CONNECTOR_ID.WALLET_CONNECT)) {\n                    chains.push([ns, ChainController.state.chains.get(ns)]);\n                }\n            });\n        }\n        else if (checkNamespaceConnectorId(namespace, CommonConstantsUtil.CONNECTOR_ID.AUTH)) {\n            namespaces.forEach(ns => {\n                if (ns !== namespace &&\n                    checkNamespaceConnectorId(ns, CommonConstantsUtil.CONNECTOR_ID.AUTH)) {\n                    chains.push([ns, ChainController.state.chains.get(ns)]);\n                }\n            });\n        }\n    }\n    else {\n        chains = Array.from(ChainController.state.chains.entries());\n    }\n    return chains;\n}\n//# sourceMappingURL=ChainControllerUtil.js.map","import{IEvents as o}from\"@walletconnect/events\";import n,{EventEmitter as l}from\"events\";var a=Object.defineProperty,u=(e,s,r)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,c=(e,s,r)=>u(e,typeof s!=\"symbol\"?s+\"\":s,r);class h extends o{constructor(s){super(),this.opts=s,c(this,\"protocol\",\"wc\"),c(this,\"version\",2)}}class g{constructor(s,r,t){this.core=s,this.logger=r}}var p=Object.defineProperty,b=(e,s,r)=>s in e?p(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,v=(e,s,r)=>b(e,typeof s!=\"symbol\"?s+\"\":s,r);class I extends o{constructor(s,r){super(),this.core=s,this.logger=r,v(this,\"records\",new Map)}}class y{constructor(s,r){this.logger=s,this.core=r}}class m extends o{constructor(s,r){super(),this.relayer=s,this.logger=r}}class d extends o{constructor(s){super()}}class f{constructor(s,r,t,q){this.core=s,this.logger=r,this.name=t}}var E=Object.defineProperty,x=(e,s,r)=>s in e?E(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,w=(e,s,r)=>x(e,typeof s!=\"symbol\"?s+\"\":s,r);class C{constructor(){w(this,\"map\",new Map)}}class P extends o{constructor(s,r){super(),this.relayer=s,this.logger=r}}class j{constructor(s,r){this.core=s,this.logger=r}}class S extends o{constructor(s,r){super(),this.core=s,this.logger=r}}class ${constructor(s,r){this.logger=s,this.core=r}}class M{constructor(s,r,t){this.core=s,this.logger=r,this.store=t}}class O{constructor(s,r){this.projectId=s,this.logger=r}}class R{constructor(s,r,t){this.core=s,this.logger=r,this.telemetryEnabled=t}}var T=Object.defineProperty,k=(e,s,r)=>s in e?T(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,i=(e,s,r)=>k(e,typeof s!=\"symbol\"?s+\"\":s,r);class H extends n{constructor(){super()}}class J{constructor(s){this.opts=s,i(this,\"protocol\",\"wc\"),i(this,\"version\",2)}}class K extends l{constructor(){super()}}class V{constructor(s){this.client=s}}export{h as ICore,g as ICrypto,O as IEchoClient,V as IEngine,K as IEngineEvents,R as IEventClient,S as IExpirer,I as IJsonRpcHistory,j as IKeyChain,y as IMessageTracker,$ as IPairing,m as IPublisher,d as IRelayer,J as ISignClient,H as ISignClientEvents,f as IStore,P as ISubscriber,C as ISubscriberTopicMap,M as IVerify};\n//# sourceMappingURL=index.es.js.map\n","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  const BASE_MAP = new Uint8Array(256)\n  for (let j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (let i = 0; i < ALPHABET.length; i++) {\n    const x = ALPHABET.charAt(i)\n    const xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  const BASE = ALPHABET.length\n  const LEADER = ALPHABET.charAt(0)\n  const FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  const iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    // eslint-disable-next-line no-empty\n    if (source instanceof Uint8Array) { } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n    // Skip & count leading zeroes.\n    let zeroes = 0\n    let length = 0\n    let pbegin = 0\n    const pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n    // Allocate enough space in big-endian base58 representation.\n    const size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    const b58 = new Uint8Array(size)\n    // Process the bytes.\n    while (pbegin !== pend) {\n      let carry = source[pbegin]\n      // Apply \"b58 = b58 * 256 + ch\".\n      let i = 0\n      for (let it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n    // Skip leading zeroes in base58 result.\n    let it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n    // Translate the result into a string.\n    let str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    let psz = 0\n    // Skip and count leading '1's.\n    let zeroes = 0\n    let length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n    // Allocate enough space in big-endian base256 representation.\n    const size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    const b256 = new Uint8Array(size)\n    // Process the characters.\n    while (psz < source.length) {\n      // Find code of next character\n      const charCode = source.charCodeAt(psz)\n      // Base map can not be indexed using char code\n      if (charCode > 255) { return }\n      // Decode character\n      let carry = BASE_MAP[charCode]\n      // Invalid character\n      if (carry === 255) { return }\n      let i = 0\n      for (let it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n    // Skip leading zeroes in b256.\n    let it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    const vch = new Uint8Array(zeroes + (size - it4))\n    let j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    const buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode,\n    decodeUnsafe,\n    decode\n  }\n}\nexport default base\n","import basex from 'base-x';\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\nexport default basex(ALPHABET);\n","import{detect as Pr}from\"detect-browser\";import{toMiliseconds as We,FIVE_MINUTES as jt,fromMiliseconds as Br}from\"@walletconnect/time\";import{getDocument as ze,getNavigator as Ct,getLocation as kt}from\"@walletconnect/window-getters\";import{getWindowMetadata as Lr}from\"@walletconnect/window-metadata\";import{recoverAddress as jr}from\"viem\";import Cr from\"bs58\";import{decodeJWT as kr}from\"@walletconnect/relay-auth\";import{toString as K,fromString as W,concat as Je}from\"uint8arrays\";import{ec as Dr}from\"elliptic\";import{RELAY_JSONRPC as Mr}from\"@walletconnect/relay-api\";const Pe=\":\";function Ye(e){const[t,n]=e.split(Pe);return{namespace:t,reference:n}}function Dt(e){const{namespace:t,reference:n}=e;return[t,n].join(Pe)}function Xe(e){const[t,n,r]=e.split(Pe);return{namespace:t,reference:n,address:r}}function Mt(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(Pe)}function Ze(e,t){const n=[];return e.forEach(r=>{const o=t(r);n.includes(o)||n.push(o)}),n}function Vt(e){const{address:t}=Xe(e);return t}function Ht(e){const{namespace:t,reference:n}=Xe(e);return Dt({namespace:t,reference:n})}function Vr(e,t){const{namespace:n,reference:r}=Ye(t);return Mt({namespace:n,reference:r,address:e})}function Hr(e){return Ze(e,Vt)}function Kt(e){return Ze(e,Ht)}function Kr(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...o.accounts)}),n}function Fr(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...Kt(o.accounts))}),n}function qr(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...Be(r,o))}),n}function Be(e,t){return e.includes(\":\")?[e]:t.chains||[]}const Ft=\"ReactNative\",H={reactNative:\"react-native\",node:\"node\",browser:\"browser\",unknown:\"unknown\"},Le=\" \",Gr=\":\",qt=\"/\",Qe=2,Wr=1e3,Gt=\"js\";function et(){return typeof process<\"u\"&&typeof process.versions<\"u\"&&typeof process.versions.node<\"u\"}function ne(){return!ze()&&!!Ct()&&navigator.product===Ft}function zr(){return ne()&&typeof global<\"u\"&&typeof(global==null?void 0:global.Platform)<\"u\"&&(global==null?void 0:global.Platform.OS)===\"android\"}function Jr(){return ne()&&typeof global<\"u\"&&typeof(global==null?void 0:global.Platform)<\"u\"&&(global==null?void 0:global.Platform.OS)===\"ios\"}function Ae(){return!et()&&!!Ct()&&!!ze()}function ue(){return ne()?H.reactNative:et()?H.node:Ae()?H.browser:H.unknown}function Yr(){var e;try{return ne()&&typeof global<\"u\"&&typeof(global==null?void 0:global.Application)<\"u\"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Wt(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const o=t[r];o!==void 0&&n.set(r,o)}return n.toString()}function Xr(){return Lr()||{name:\"\",description:\"\",url:\"\",icons:[\"\"]}}function Zr(e,t){var n;const r=ue(),o={protocol:e,version:t,env:r};return r===\"browser\"&&(o.host=((n=kt())==null?void 0:n.host)||\"unknown\"),o}function zt(){if(ue()===H.reactNative&&typeof global<\"u\"&&typeof(global==null?void 0:global.Platform)<\"u\"){const{OS:n,Version:r}=global.Platform;return[n,r].join(\"-\")}const e=Pr();if(e===null)return\"unknown\";const t=e.os?e.os.replace(\" \",\"\").toLowerCase():\"unknown\";return e.type===\"browser\"?[t,e.name,e.version].join(\"-\"):[t,e.version].join(\"-\")}function Jt(){var e;const t=ue();return t===H.browser?[t,((e=kt())==null?void 0:e.host)||\"unknown\"].join(\":\"):t}function Yt(e,t,n){const r=zt(),o=Jt();return[[e,t].join(\"-\"),[Gt,n].join(\"-\"),r,o].join(\"/\")}function Qr({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:i,bundleId:c,packageName:u}){const a=n.split(\"?\"),l=Yt(e,t,r),f={auth:o,ua:l,projectId:s,useOnCloseEvent:i||void 0,packageName:u||void 0,bundleId:c||void 0},d=Wt(a[1]||\"\",f);return a[0]+\"?\"+d}function eo(e){let t=(e.match(/^[^:]+(?=:\\/\\/)/gi)||[])[0];const n=typeof t<\"u\"?e.split(\"://\")[1]:e;return t=t===\"wss\"?\"https\":\"http\",[t,n].join(\"://\")}function to(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid \"${t}\" param`)}function Xt(e,t=Qe){return Zt(e.split(qt),t)}function no(e){return Xt(e).join(Le)}function re(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Zt(e,t=Qe){return e.slice(Math.max(e.length-t,0))}function ro(e){return Object.fromEntries(e.entries())}function oo(e){return new Map(Object.entries(e))}function so(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const io=e=>e;function Qt(e){return e.trim().replace(/^\\w/,t=>t.toUpperCase())}function co(e){return e.split(Le).map(t=>Qt(t)).join(Le)}function ao(e=jt,t){const n=We(e||jt);let r,o,s,i;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c),i=Promise.resolve(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,u)=>{if(i)return c(i);s=setTimeout(()=>{const a=new Error(t);i=Promise.reject(a),u(a)},n),r=c,o=u})}}function uo(e,t,n){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(n)),t);try{const i=await e;r(i)}catch(i){o(i)}clearTimeout(s)})}function tt(e,t){if(typeof t==\"string\"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()===\"topic\"){if(typeof t!=\"string\")throw new Error('Value must be \"string\" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()===\"id\"){if(typeof t!=\"number\")throw new Error('Value must be \"number\" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function fo(e){return tt(\"topic\",e)}function lo(e){return tt(\"id\",e)}function ho(e){const[t,n]=e.split(\":\"),r={id:void 0,topic:void 0};if(t===\"topic\"&&typeof n==\"string\")r.topic=n;else if(t===\"id\"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function po(e,t){return Br((t||Date.now())+We(e))}function go(e){return Date.now()>=We(e)}function yo(e,t){return`${e}${t?`:${t}`:\"\"}`}function Q(e=[],t=[]){return[...new Set([...e,...t])]}async function mo({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const o=typeof n==\"string\"?JSON.parse(n):n,s=o?.href;if(typeof s!=\"string\")return;const i=en(s,e,t),c=ue();if(c===H.browser){if(!((r=ze())!=null&&r.hasFocus())){console.warn(\"Document does not have focus, skipping deeplink.\");return}tn(i)}else c===H.reactNative&&typeof(global==null?void 0:global.Linking)<\"u\"&&await global.Linking.openURL(i)}catch(o){console.error(o)}}function en(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith(\"/\")&&(e=e.slice(0,-1));let o=`${e}`;if(e.startsWith(\"https://t.me\")){const s=e.includes(\"?\")?\"&startapp=\":\"?startapp=\";o=`${o}${s}${on(r,!0)}`}else o=`${o}/wc?${r}`;return o}function tn(e){let t=\"_self\";rn()?t=\"_top\":(nn()||e.startsWith(\"https://\")||e.startsWith(\"http://\"))&&(t=\"_blank\"),window.open(e,t,\"noreferrer noopener\")}async function bo(e,t){let n=\"\";try{if(Ae()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function nt(e,t){return e.filter(n=>t.includes(n))}function wo(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Eo(){return typeof crypto<\"u\"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e===\"x\"?t:t&3|8).toString(16)})}function vo(){return typeof process<\"u\"&&process.env.IS_VITEST===\"true\"}function nn(){return typeof window<\"u\"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function rn(){try{return window.self!==window.top}catch{return!1}}function on(e,t=!1){const n=Buffer.from(e).toString(\"base64\");return t?n.replace(/[=]/g,\"\"):n}function rt(e){return Buffer.from(e,\"base64\").toString(\"utf-8\")}function xo(e){return new Promise(t=>setTimeout(t,e))}function Ne(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(\"positive integer expected, got \"+e)}function Io(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name===\"Uint8Array\"}function je(e,...t){if(!Io(e))throw new Error(\"Uint8Array expected\");if(t.length>0&&!t.includes(e.length))throw new Error(\"Uint8Array expected of length \"+t+\", got length=\"+e.length)}function ot(e){if(typeof e!=\"function\"||typeof e.create!=\"function\")throw new Error(\"Hash should be wrapped by utils.wrapConstructor\");Ne(e.outputLen),Ne(e.blockLen)}function me(e,t=!0){if(e.destroyed)throw new Error(\"Hash instance has been destroyed\");if(t&&e.finished)throw new Error(\"Hash#digest() has already been called\")}function sn(e,t){je(e);const n=t.outputLen;if(e.length<n)throw new Error(\"digestInto() expects output buffer of length at least \"+n)}const Ce=BigInt(2**32-1),cn=BigInt(32);function Oo(e,t=!1){return t?{h:Number(e&Ce),l:Number(e>>cn&Ce)}:{h:Number(e>>cn&Ce)|0,l:Number(e&Ce)|0}}function Ao(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:i}=Oo(e[o],t);[n[o],r[o]]=[s,i]}return[n,r]}const No=(e,t,n)=>e<<n|t>>>32-n,So=(e,t,n)=>t<<n|e>>>32-n,Uo=(e,t,n)=>t<<n-32|e>>>64-n,_o=(e,t,n)=>e<<n-32|t>>>64-n,be=typeof globalThis==\"object\"&&\"crypto\"in globalThis?globalThis.crypto:void 0;function To(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function st(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function J(e,t){return e<<32-t|e>>>t}const an=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $o(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function un(e){for(let t=0;t<e.length;t++)e[t]=$o(e[t])}function Ro(e){if(typeof e!=\"string\")throw new Error(\"utf8ToBytes expected string, got \"+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function we(e){return typeof e==\"string\"&&(e=Ro(e)),je(e),e}class it{clone(){return this._cloneInto()}}function fn(e){const t=r=>e().update(we(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Se(e=32){if(be&&typeof be.getRandomValues==\"function\")return be.getRandomValues(new Uint8Array(e));if(be&&typeof be.randomBytes==\"function\")return be.randomBytes(e);throw new Error(\"crypto.getRandomValues must be defined\")}const ln=[],dn=[],hn=[],Po=BigInt(0),Ue=BigInt(1),Bo=BigInt(2),Lo=BigInt(7),jo=BigInt(256),Co=BigInt(113);for(let e=0,t=Ue,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],ln.push(2*(5*r+n)),dn.push((e+1)*(e+2)/2%64);let o=Po;for(let s=0;s<7;s++)t=(t<<Ue^(t>>Lo)*Co)%jo,t&Bo&&(o^=Ue<<(Ue<<BigInt(s))-Ue);hn.push(o)}const[ko,Do]=Ao(hn,!0),pn=(e,t,n)=>n>32?Uo(e,t,n):No(e,t,n),gn=(e,t,n)=>n>32?_o(e,t,n):So(e,t,n);function Mo(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const c=(i+8)%10,u=(i+2)%10,a=n[u],l=n[u+1],f=pn(a,l,1)^n[c],d=gn(a,l,1)^n[c+1];for(let g=0;g<50;g+=10)e[i+g]^=f,e[i+g+1]^=d}let o=e[2],s=e[3];for(let i=0;i<24;i++){const c=dn[i],u=pn(o,s,c),a=gn(o,s,c),l=ln[i];o=e[l],s=e[l+1],e[l]=u,e[l+1]=a}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)n[c]=e[i+c];for(let c=0;c<10;c++)e[i+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=ko[r],e[1]^=Do[r]}n.fill(0)}class Lt extends it{constructor(t,n,r,o=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ne(r),0>=this.blockLen||this.blockLen>=200)throw new Error(\"Sha3 supports only keccak-f1600 function\");this.state=new Uint8Array(200),this.state32=To(this.state)}keccak(){an||un(this.state32),Mo(this.state32,this.rounds),an||un(this.state32),this.posOut=0,this.pos=0}update(t){me(this);const{blockLen:n,state:r}=this;t=we(t);const o=t.length;for(let s=0;s<o;){const i=Math.min(n-this.pos,o-s);for(let c=0;c<i;c++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:o}=this;t[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){me(this,!1),je(t),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,s=t.length;o<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-o);t.set(n.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error(\"XOF is not possible for this instance\");return this.writeInto(t)}xof(t){return Ne(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(sn(t,this),this.finished)throw new Error(\"digest() was already called\");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new Lt(n,r,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Vo=(e,t,n)=>fn(()=>new Lt(t,e,n)),Ho=Vo(1,136,256/8),Ko=\"https://rpc.walletconnect.org/v1\";function ct(e){const t=`\u0019Ethereum Signed Message:\n${e.length}`,n=new TextEncoder().encode(t+e);return\"0x\"+Buffer.from(Ho(n)).toString(\"hex\")}async function yn(e,t,n,r,o,s){switch(n.t){case\"eip191\":return await mn(e,t,n.s);case\"eip1271\":return await bn(e,t,n.s,r,o,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mn(e,t,n){return(await jr({hash:ct(t),signature:n})).toLowerCase()===e.toLowerCase()}async function bn(e,t,n,r,o,s){const i=Ye(r);if(!i.namespace||!i.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c=\"0x1626ba7e\",u=\"0000000000000000000000000000000000000000000000000000000000000040\",a=\"0000000000000000000000000000000000000000000000000000000000000041\",l=n.substring(2),f=ct(t).substring(2),d=c+f+u+a+l,g=await fetch(`${s||Ko}/?chainId=${r}&projectId=${o}`,{method:\"POST\",body:JSON.stringify({id:Fo(),jsonrpc:\"2.0\",method:\"eth_call\",params:[{to:e,data:d},\"latest\"]})}),{result:y}=await g.json();return y?y.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error(\"isValidEip1271Signature: \",c),!1}}function Fo(){return Date.now()+Math.floor(Math.random()*1e3)}function qo(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);const r=n[0];if(r===0)throw new Error(\"No signatures found\");const o=1+r*64;if(n.length<o)throw new Error(\"Transaction data too short for claimed signature count\");if(n.length<100)throw new Error(\"Transaction too short\");const s=Buffer.from(e,\"base64\").slice(1,65);return Cr.encode(s)}var Go=Object.defineProperty,Wo=Object.defineProperties,zo=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,En=(e,t,n)=>t in e?Go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,at=(e,t)=>{for(var n in t||(t={}))Jo.call(t,n)&&En(e,n,t[n]);if(wn)for(var n of wn(t))Yo.call(t,n)&&En(e,n,t[n]);return e},vn=(e,t)=>Wo(e,zo(t));const Xo=\"did:pkh:\",ke=e=>e?.split(\":\"),xn=e=>{const t=e&&ke(e);if(t)return e.includes(Xo)?t[3]:t[1]},In=e=>{const t=e&&ke(e);if(t)return t[2]+\":\"+t[3]},ut=e=>{const t=e&&ke(e);if(t)return t.pop()};async function Zo(e){const{cacao:t,projectId:n}=e,{s:r,p:o}=t,s=On(o,o.iss),i=ut(o.iss);return await yn(i,s,r,In(o.iss),n)}const On=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=ut(t);if(!e.aud&&!e.uri)throw new Error(\"Either `aud` or `uri` is required to construct the message\");let o=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,i=`Version: ${e.version}`,c=`Chain ID: ${xn(t)}`,u=`Nonce: ${e.nonce}`,a=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,f=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,g=e.resources?`Resources:${e.resources.map(h=>`\n- ${h}`).join(\"\")}`:void 0,y=Me(e.resources);if(y){const h=oe(y);o=dt(o,h)}return[n,r,\"\",o,\"\",s,i,c,u,a,l,f,d,g].filter(h=>h!=null).join(`\n`)};function Qo(e,t,n){return n.includes(\"did:pkh:\")||(n=`did:pkh:${n}`),{h:{t:\"caip122\"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function es(e){var t;const{authPayload:n,chains:r,methods:o}=e,s=n.statement||\"\";if(!(r!=null&&r.length))return n;const i=n.chains,c=nt(i,r);if(!(c!=null&&c.length))throw new Error(\"No supported chains\");const u=An(n.resources);if(!u)return n;Y(u);const a=Nn(u,\"eip155\");let l=n?.resources||[];if(a!=null&&a.length){const f=Sn(a),d=nt(f,o);if(!(d!=null&&d.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(f)}, supported: ${JSON.stringify(o)}`);const g=ft(\"request\",d,{chains:c}),y=$n(u,\"eip155\",g);l=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],l.push(De(y))}return vn(at({},n),{statement:Pn(s,Me(l)),chains:c,resources:n!=null&&n.resources||l.length>0?l:void 0})}function An(e){const t=Me(e);if(t&&lt(t))return oe(t)}function ts(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function Nn(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function ns(e){return e?.map(t=>Object.keys(t))||[]}function Sn(e){return e?.map(t=>{var n;return(n=t.split(\"/\"))==null?void 0:n[1]})||[]}function Un(e){return Buffer.from(JSON.stringify(e)).toString(\"base64\")}function _n(e){return JSON.parse(Buffer.from(e,\"base64\").toString(\"utf-8\"))}function Y(e){if(!e)throw new Error(\"No recap provided, value is undefined\");if(!e.att)throw new Error(\"No `att` property found\");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error(\"No resources found in `att` property\");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!=\"object\")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(o=>{const s=r[o];if(!Array.isArray(s))throw new Error(`Ability limits ${o} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${o} is empty array, must be an array with objects`);s.forEach(i=>{if(typeof i!=\"object\")throw new Error(`Ability limits (${o}) must be an array of objects, found: ${i}`)})})})}function Tn(e,t,n,r={}){return n?.sort((o,s)=>o.localeCompare(s)),{att:{[e]:ft(t,n,r)}}}function $n(e,t,n){var r;e.att[t]=at({},n);const o=(r=Object.keys(e.att))==null?void 0:r.sort((i,c)=>i.localeCompare(c)),s={att:{}};return o.reduce((i,c)=>(i.att[c]=e.att[c],i),s)}function ft(e,t,n={}){t=t?.sort((o,s)=>o.localeCompare(s));const r=t.map(o=>({[`${e}/${o}`]:[n]}));return Object.assign({},...r)}function De(e){return Y(e),`urn:recap:${Un(e).replace(/=/g,\"\")}`}function oe(e){const t=_n(e.replace(\"urn:recap:\",\"\"));return Y(t),t}function rs(e,t,n){const r=Tn(e,t,n);return De(r)}function lt(e){return e&&e.includes(\"urn:recap:\")}function os(e,t){const n=oe(e),r=oe(t),o=Rn(n,r);return De(o)}function Rn(e,t){Y(e),Y(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((o,s)=>o.localeCompare(s)),r={att:{}};return n.forEach(o=>{var s,i;Object.keys(((s=e.att)==null?void 0:s[o])||{}).concat(Object.keys(((i=t.att)==null?void 0:i[o])||{})).sort((c,u)=>c.localeCompare(u)).forEach(c=>{var u,a;r.att[o]=vn(at({},r.att[o]),{[c]:((u=e.att[o])==null?void 0:u[c])||((a=t.att[o])==null?void 0:a[c])})})}),r}function dt(e=\"\",t){Y(t);const n=\"I further authorize the stated URI to perform the following actions on my behalf: \";if(e.includes(n))return e;const r=[];let o=0;Object.keys(t.att).forEach(c=>{const u=Object.keys(t.att[c]).map(f=>({ability:f.split(\"/\")[0],action:f.split(\"/\")[1]}));u.sort((f,d)=>f.action.localeCompare(d.action));const a={};u.forEach(f=>{a[f.ability]||(a[f.ability]=[]),a[f.ability].push(f.action)});const l=Object.keys(a).map(f=>(o++,`(${o}) '${f}': '${a[f].join(\"', '\")}' for '${c}'.`));r.push(l.join(\", \").replace(\".,\",\".\"))});const s=r.join(\" \"),i=`${n}${s}`;return`${e?e+\" \":\"\"}${i}`}function ss(e){var t;const n=oe(e);Y(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(o=>o.split(\"/\")[1]):[]}function is(e){const t=oe(e);Y(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(o=>{var s;(s=o?.[0])!=null&&s.chains&&n.push(o[0].chains)})}),[...new Set(n.flat())]}function Pn(e,t){if(!t)return e;const n=oe(t);return Y(n),dt(e,n)}function Me(e){if(!e)return;const t=e?.[e.length-1];return lt(t)?t:void 0}function ht(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(\"positive integer expected, got \"+e)}function Bn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name===\"Uint8Array\"}function F(e,...t){if(!Bn(e))throw new Error(\"Uint8Array expected\");if(t.length>0&&!t.includes(e.length))throw new Error(\"Uint8Array expected of length \"+t+\", got length=\"+e.length)}function Ln(e,t=!0){if(e.destroyed)throw new Error(\"Hash instance has been destroyed\");if(t&&e.finished)throw new Error(\"Hash#digest() has already been called\")}function cs(e,t){F(e);const n=t.outputLen;if(e.length<n)throw new Error(\"digestInto() expects output buffer of length at least \"+n)}function jn(e){if(typeof e!=\"boolean\")throw new Error(`boolean expected, not ${e}`)}const se=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),as=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),us=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!us)throw new Error(\"Non little-endian hardware is not supported\");function fs(e){if(typeof e!=\"string\")throw new Error(\"string expected\");return new Uint8Array(new TextEncoder().encode(e))}function pt(e){if(typeof e==\"string\")e=fs(e);else if(Bn(e))e=gt(e);else throw new Error(\"Uint8Array expected, got \"+typeof e);return e}function ls(e,t){if(t==null||typeof t!=\"object\")throw new Error(\"options must be defined\");return Object.assign(e,t)}function ds(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const hs=(e,t)=>{function n(r,...o){if(F(r),e.nonceLength!==void 0){const l=o[0];if(!l)throw new Error(\"nonce / iv required\");e.varSizeNonce?F(l):F(l,e.nonceLength)}const s=e.tagLength;s&&o[1]!==void 0&&F(o[1]);const i=t(r,...o),c=(l,f)=>{if(f!==void 0){if(l!==2)throw new Error(\"cipher output not supported\");F(f)}};let u=!1;return{encrypt(l,f){if(u)throw new Error(\"cannot encrypt() twice with same key + nonce\");return u=!0,F(l),c(i.encrypt.length,f),i.encrypt(l,f)},decrypt(l,f){if(F(l),s&&l.length<s)throw new Error(\"invalid ciphertext length: smaller than tagLength=\"+s);return c(i.decrypt.length,f),i.decrypt(l,f)}}}return Object.assign(n,e),n};function Cn(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error(\"invalid output length, expected \"+e+\", got: \"+t.length);if(n&&!ps(t))throw new Error(\"invalid output, must be aligned\");return t}function kn(e,t,n,r){if(typeof e.setBigUint64==\"function\")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),u=r?4:0,a=r?0:4;e.setUint32(t+u,i,r),e.setUint32(t+a,c,r)}function ps(e){return e.byteOffset%4===0}function gt(e){return Uint8Array.from(e)}function Ee(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Dn=e=>Uint8Array.from(e.split(\"\").map(t=>t.charCodeAt(0))),gs=Dn(\"expand 16-byte k\"),ys=Dn(\"expand 32-byte k\"),ms=se(gs),bs=se(ys);function x(e,t){return e<<t|e>>>32-t}function yt(e){return e.byteOffset%4===0}const Ve=64,ws=16,Mn=2**32-1,Vn=new Uint32Array;function Es(e,t,n,r,o,s,i,c){const u=o.length,a=new Uint8Array(Ve),l=se(a),f=yt(o)&&yt(s),d=f?se(o):Vn,g=f?se(s):Vn;for(let y=0;y<u;i++){if(e(t,n,r,l,i,c),i>=Mn)throw new Error(\"arx: counter overflow\");const h=Math.min(Ve,u-y);if(f&&h===Ve){const m=y/4;if(y%4!==0)throw new Error(\"arx: invalid block position\");for(let L=0,b;L<ws;L++)b=m+L,g[b]=d[b]^l[L];y+=Ve;continue}for(let m=0,L;m<h;m++)L=y+m,s[L]=o[L]^a[m];y+=h}}function vs(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:i}=ls({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!=\"function\")throw new Error(\"core must be a function\");return ht(o),ht(i),jn(s),jn(n),(c,u,a,l,f=0)=>{F(c),F(u),F(a);const d=a.length;if(l===void 0&&(l=new Uint8Array(d)),F(l),ht(f),f<0||f>=Mn)throw new Error(\"arx: counter overflow\");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const g=[];let y=c.length,h,m;if(y===32)g.push(h=gt(c)),m=bs;else if(y===16&&n)h=new Uint8Array(32),h.set(c),h.set(c,16),m=ms,g.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);yt(u)||g.push(u=gt(u));const L=se(h);if(r){if(u.length!==24)throw new Error(\"arx: extended nonce must be 24 bytes\");r(m,L,se(u.subarray(0,16)),L),u=u.subarray(16)}const b=16-o;if(b!==u.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const O=new Uint8Array(12);O.set(u,s?0:12-u.length),u=O,g.push(u)}const _=se(u);return Es(e,m,L,_,a,l,f,i),Ee(...g),l}}const M=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class xs{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=pt(t),F(t,32);const n=M(t,0),r=M(t,2),o=M(t,4),s=M(t,6),i=M(t,8),c=M(t,10),u=M(t,12),a=M(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|s<<9)&8191,this.r[4]=(s>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|a<<8)&8191,this.r[9]=a>>>5&127;for(let l=0;l<8;l++)this.pad[l]=M(t,16+2*l)}process(t,n,r=!1){const o=r?0:2048,{h:s,r:i}=this,c=i[0],u=i[1],a=i[2],l=i[3],f=i[4],d=i[5],g=i[6],y=i[7],h=i[8],m=i[9],L=M(t,n+0),b=M(t,n+2),_=M(t,n+4),O=M(t,n+6),k=M(t,n+8),E=M(t,n+10),B=M(t,n+12),j=M(t,n+14);let v=s[0]+(L&8191),I=s[1]+((L>>>13|b<<3)&8191),w=s[2]+((b>>>10|_<<6)&8191),R=s[3]+((_>>>7|O<<9)&8191),A=s[4]+((O>>>4|k<<12)&8191),T=s[5]+(k>>>1&8191),N=s[6]+((k>>>14|E<<2)&8191),S=s[7]+((E>>>11|B<<5)&8191),U=s[8]+((B>>>8|j<<8)&8191),$=s[9]+(j>>>5|o),p=0,C=p+v*c+I*(5*m)+w*(5*h)+R*(5*y)+A*(5*g);p=C>>>13,C&=8191,C+=T*(5*d)+N*(5*f)+S*(5*l)+U*(5*a)+$*(5*u),p+=C>>>13,C&=8191;let D=p+v*u+I*c+w*(5*m)+R*(5*h)+A*(5*y);p=D>>>13,D&=8191,D+=T*(5*g)+N*(5*d)+S*(5*f)+U*(5*l)+$*(5*a),p+=D>>>13,D&=8191;let P=p+v*a+I*u+w*c+R*(5*m)+A*(5*h);p=P>>>13,P&=8191,P+=T*(5*y)+N*(5*g)+S*(5*d)+U*(5*f)+$*(5*l),p+=P>>>13,P&=8191;let G=p+v*l+I*a+w*u+R*c+A*(5*m);p=G>>>13,G&=8191,G+=T*(5*h)+N*(5*y)+S*(5*g)+U*(5*d)+$*(5*f),p+=G>>>13,G&=8191;let X=p+v*f+I*l+w*a+R*u+A*c;p=X>>>13,X&=8191,X+=T*(5*m)+N*(5*h)+S*(5*y)+U*(5*g)+$*(5*d),p+=X>>>13,X&=8191;let Z=p+v*d+I*f+w*l+R*a+A*u;p=Z>>>13,Z&=8191,Z+=T*c+N*(5*m)+S*(5*h)+U*(5*y)+$*(5*g),p+=Z>>>13,Z&=8191;let he=p+v*g+I*d+w*f+R*l+A*a;p=he>>>13,he&=8191,he+=T*u+N*c+S*(5*m)+U*(5*h)+$*(5*y),p+=he>>>13,he&=8191;let pe=p+v*y+I*g+w*d+R*f+A*l;p=pe>>>13,pe&=8191,pe+=T*a+N*u+S*c+U*(5*m)+$*(5*h),p+=pe>>>13,pe&=8191;let ge=p+v*h+I*y+w*g+R*d+A*f;p=ge>>>13,ge&=8191,ge+=T*l+N*a+S*u+U*c+$*(5*m),p+=ge>>>13,ge&=8191;let ye=p+v*m+I*h+w*y+R*g+A*d;p=ye>>>13,ye&=8191,ye+=T*f+N*l+S*a+U*u+$*c,p+=ye>>>13,ye&=8191,p=(p<<2)+p|0,p=p+C|0,C=p&8191,p=p>>>13,D+=p,s[0]=C,s[1]=D,s[2]=P,s[3]=G,s[4]=X,s[5]=Z,s[6]=he,s[7]=pe,s[8]=ge,s[9]=ye}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=o,o=t[c]>>>13,t[c]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+o,o=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(o^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)t[c]=t[c]&s|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let i=t[0]+n[0];t[0]=i&65535;for(let c=1;c<8;c++)i=(t[c]+n[c]|0)+(i>>>16)|0,t[c]=i&65535;Ee(r)}update(t){Ln(this);const{buffer:n,blockLen:r}=this;t=pt(t);const o=t.length;for(let s=0;s<o;){const i=Math.min(r-this.pos,o-s);if(i===r){for(;r<=o-s;s+=r)this.process(t,s);continue}n.set(t.subarray(s,s+i),this.pos),this.pos+=i,s+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ee(this.h,this.r,this.buffer,this.pad)}digestInto(t){Ln(this),cs(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let i=0;i<8;i++)t[s++]=r[i]>>>0,t[s++]=r[i]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Is(e){const t=(r,o)=>e(o).update(pt(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Os=Is(e=>new xs(e));function As(e,t,n,r,o,s=20){let i=e[0],c=e[1],u=e[2],a=e[3],l=t[0],f=t[1],d=t[2],g=t[3],y=t[4],h=t[5],m=t[6],L=t[7],b=o,_=n[0],O=n[1],k=n[2],E=i,B=c,j=u,v=a,I=l,w=f,R=d,A=g,T=y,N=h,S=m,U=L,$=b,p=_,C=O,D=k;for(let G=0;G<s;G+=2)E=E+I|0,$=x($^E,16),T=T+$|0,I=x(I^T,12),E=E+I|0,$=x($^E,8),T=T+$|0,I=x(I^T,7),B=B+w|0,p=x(p^B,16),N=N+p|0,w=x(w^N,12),B=B+w|0,p=x(p^B,8),N=N+p|0,w=x(w^N,7),j=j+R|0,C=x(C^j,16),S=S+C|0,R=x(R^S,12),j=j+R|0,C=x(C^j,8),S=S+C|0,R=x(R^S,7),v=v+A|0,D=x(D^v,16),U=U+D|0,A=x(A^U,12),v=v+A|0,D=x(D^v,8),U=U+D|0,A=x(A^U,7),E=E+w|0,D=x(D^E,16),S=S+D|0,w=x(w^S,12),E=E+w|0,D=x(D^E,8),S=S+D|0,w=x(w^S,7),B=B+R|0,$=x($^B,16),U=U+$|0,R=x(R^U,12),B=B+R|0,$=x($^B,8),U=U+$|0,R=x(R^U,7),j=j+A|0,p=x(p^j,16),T=T+p|0,A=x(A^T,12),j=j+A|0,p=x(p^j,8),T=T+p|0,A=x(A^T,7),v=v+I|0,C=x(C^v,16),N=N+C|0,I=x(I^N,12),v=v+I|0,C=x(C^v,8),N=N+C|0,I=x(I^N,7);let P=0;r[P++]=i+E|0,r[P++]=c+B|0,r[P++]=u+j|0,r[P++]=a+v|0,r[P++]=l+I|0,r[P++]=f+w|0,r[P++]=d+R|0,r[P++]=g+A|0,r[P++]=y+T|0,r[P++]=h+N|0,r[P++]=m+S|0,r[P++]=L+U|0,r[P++]=b+$|0,r[P++]=_+p|0,r[P++]=O+C|0,r[P++]=k+D|0}const Ns=vs(As,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Ss=new Uint8Array(16),Hn=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Ss.subarray(n))},Us=new Uint8Array(32);function Kn(e,t,n,r,o){const s=e(t,n,Us),i=Os.create(s);o&&Hn(i,o),Hn(i,r);const c=new Uint8Array(16),u=as(c);kn(u,0,BigInt(o?o.length:0),!0),kn(u,8,BigInt(r.length),!0),i.update(c);const a=i.digest();return Ee(s,c),a}const _s=e=>(t,n,r)=>({encrypt(s,i){const c=s.length;i=Cn(c+16,i,!1),i.set(s);const u=i.subarray(0,-16);e(t,n,u,u,1);const a=Kn(e,t,n,u,r);return i.set(a,c),Ee(a),i},decrypt(s,i){i=Cn(s.length-16,i,!1);const c=s.subarray(0,-16),u=s.subarray(-16),a=Kn(e,t,n,c,r);if(!ds(u,a))throw new Error(\"invalid tag\");return i.set(s.subarray(0,-16)),e(t,n,i,i,1),Ee(a),i}}),Fn=hs({blockSize:64,nonceLength:12,tagLength:16},_s(Ns));class qn extends it{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ot(t);const r=we(n);if(this.iHash=t.create(),typeof this.iHash.update!=\"function\")throw new Error(\"Expected instance of class which extends utils.Hash\");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(t){return me(this),this.iHash.update(t),this}digestInto(t){me(this),je(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mt=(e,t,n)=>new qn(e,t).update(n).digest();mt.create=(e,t)=>new qn(e,t);function Ts(e,t,n){return ot(e),n===void 0&&(n=new Uint8Array(e.outputLen)),mt(e,we(n),we(t))}const bt=new Uint8Array([0]),Gn=new Uint8Array;function $s(e,t,n,r=32){if(ot(e),Ne(r),r>255*e.outputLen)throw new Error(\"Length should be <= 255*HashLen\");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=Gn);const s=new Uint8Array(o*e.outputLen),i=mt.create(e,t),c=i._cloneInto(),u=new Uint8Array(i.outputLen);for(let a=0;a<o;a++)bt[0]=a+1,c.update(a===0?Gn:u).update(n).update(bt).digestInto(u),s.set(u,e.outputLen*a),i._cloneInto(c);return i.destroy(),c.destroy(),u.fill(0),bt.fill(0),s.slice(0,r)}const Rs=(e,t,n,r,o)=>$s(e,Ts(e,t,n),r,o);function Ps(e,t,n,r){if(typeof e.setBigUint64==\"function\")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),u=r?4:0,a=r?0:4;e.setUint32(t+u,i,r),e.setUint32(t+a,c,r)}function Bs(e,t,n){return e&t^~e&n}function Ls(e,t,n){return e&t^e&n^t&n}class js extends it{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=st(this.buffer)}update(t){me(this);const{view:n,buffer:r,blockLen:o}=this;t=we(t);const s=t.length;for(let i=0;i<s;){const c=Math.min(o-this.pos,s-i);if(c===o){const u=st(t);for(;o<=s-i;i+=o)this.process(u,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){me(this),sn(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let f=i;f<o;f++)n[f]=0;Ps(r,o-8,BigInt(this.length*8),s),this.process(r,0);const c=st(t),u=this.outputLen;if(u%4)throw new Error(\"_sha2: outputLen should be aligned to 32bit\");const a=u/4,l=this.get();if(a>l.length)throw new Error(\"_sha2: outputLen bigger than state\");for(let f=0;f<a;f++)c.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:c}=this;return t.length=o,t.pos=c,t.finished=s,t.destroyed=i,o%n&&t.buffer.set(r),t}}const Cs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ie=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ce=new Uint32Array(64);class ks extends js{constructor(){super(64,32,8,!1),this.A=ie[0]|0,this.B=ie[1]|0,this.C=ie[2]|0,this.D=ie[3]|0,this.E=ie[4]|0,this.F=ie[5]|0,this.G=ie[6]|0,this.H=ie[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:c,H:u}=this;return[t,n,r,o,s,i,c,u]}set(t,n,r,o,s,i,c,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=c|0,this.H=u|0}process(t,n){for(let f=0;f<16;f++,n+=4)ce[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=ce[f-15],g=ce[f-2],y=J(d,7)^J(d,18)^d>>>3,h=J(g,17)^J(g,19)^g>>>10;ce[f]=h+ce[f-7]+y+ce[f-16]|0}let{A:r,B:o,C:s,D:i,E:c,F:u,G:a,H:l}=this;for(let f=0;f<64;f++){const d=J(c,6)^J(c,11)^J(c,25),g=l+d+Bs(c,u,a)+Cs[f]+ce[f]|0,h=(J(r,2)^J(r,13)^J(r,22))+Ls(r,o,s)|0;l=a,a=u,u=c,c=i+g|0,i=s,s=o,o=r,r=g+h|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,c=c+this.E|0,u=u+this.F|0,a=a+this.G|0,l=l+this.H|0,this.set(r,o,s,i,c,u,a,l)}roundClean(){ce.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const He=fn(()=>new ks);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wn=BigInt(0);function wt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name===\"Uint8Array\"}function zn(e){if(!wt(e))throw new Error(\"Uint8Array expected\")}const Ds=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,\"0\"));function Ms(e){zn(e);let t=\"\";for(let n=0;n<e.length;n++)t+=Ds[e[n]];return t}function Vs(e){if(typeof e!=\"string\")throw new Error(\"hex string expected, got \"+typeof e);return e===\"\"?Wn:BigInt(\"0x\"+e)}const ee={_0:48,_9:57,A:65,F:70,a:97,f:102};function Jn(e){if(e>=ee._0&&e<=ee._9)return e-ee._0;if(e>=ee.A&&e<=ee.F)return e-(ee.A-10);if(e>=ee.a&&e<=ee.f)return e-(ee.a-10)}function Yn(e){if(typeof e!=\"string\")throw new Error(\"hex string expected, got \"+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error(\"hex string expected, got unpadded hex of length \"+t);const r=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const i=Jn(e.charCodeAt(s)),c=Jn(e.charCodeAt(s+1));if(i===void 0||c===void 0){const u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character \"'+u+'\" at index '+s)}r[o]=i*16+c}return r}function Xn(e){return zn(e),Vs(Ms(Uint8Array.from(e).reverse()))}function Hs(e,t){return Yn(e.toString(16).padStart(t*2,\"0\"))}function Ks(e,t){return Hs(e,t).reverse()}function Zn(e,t,n){let r;if(typeof t==\"string\")try{r=Yn(t)}catch(s){throw new Error(e+\" must be hex string or Uint8Array, cause: \"+s)}else if(wt(t))r=Uint8Array.from(t);else throw new Error(e+\" must be hex string or Uint8Array\");const o=r.length;if(typeof n==\"number\"&&o!==n)throw new Error(e+\" of length \"+n+\" expected, got \"+o);return r}const Et=e=>typeof e==\"bigint\"&&Wn<=e;function Fs(e,t,n){return Et(e)&&Et(t)&&Et(n)&&t<=e&&e<n}function Qn(e,t,n,r){if(!Fs(t,n,r))throw new Error(\"expected valid \"+e+\": \"+n+\" <= n < \"+r+\", got \"+t)}const qs={bigint:e=>typeof e==\"bigint\",function:e=>typeof e==\"function\",boolean:e=>typeof e==\"boolean\",string:e=>typeof e==\"string\",stringOrUint8Array:e=>typeof e==\"string\"||wt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e==\"function\"&&Number.isSafeInteger(e.outputLen)};function Gs(e,t,n={}){const r=(o,s,i)=>{const c=qs[s];if(typeof c!=\"function\")throw new Error(\"invalid validator function\");const u=e[o];if(!(i&&u===void 0)&&!c(u,e))throw new Error(\"param \"+String(o)+\" is invalid. Expected \"+s+\", got \"+u)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const ve=BigInt(0),Ke=BigInt(1);function er(e,t){const n=e%t;return n>=ve?n:t+n}function Ws(e,t,n){if(t<ve)throw new Error(\"invalid exponent, negatives unsupported\");if(n<=ve)throw new Error(\"invalid modulus\");if(n===Ke)return ve;let r=Ke;for(;t>ve;)t&Ke&&(r=r*e%n),e=e*e%n,t>>=Ke;return r}function z(e,t,n){let r=e;for(;t-- >ve;)r*=r,r%=n;return r}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const xe=BigInt(0),vt=BigInt(1);function zs(e){return Gs(e,{a:\"bigint\"},{montgomeryBits:\"isSafeInteger\",nByteLength:\"isSafeInteger\",adjustScalarBytes:\"function\",domain:\"function\",powPminus2:\"function\",Gu:\"bigint\"}),Object.freeze({...e})}function Js(e){const t=zs(e),{P:n}=t,r=b=>er(b,n),o=t.montgomeryBits,s=Math.ceil(o/8),i=t.nByteLength,c=t.adjustScalarBytes||(b=>b),u=t.powPminus2||(b=>Ws(b,n-BigInt(2),n));function a(b,_,O){const k=r(b*(_-O));return _=r(_-k),O=r(O+k),[_,O]}const l=(t.a-BigInt(2))/BigInt(4);function f(b,_){Qn(\"u\",b,xe,n),Qn(\"scalar\",_,xe,n);const O=_,k=b;let E=vt,B=xe,j=b,v=vt,I=xe,w;for(let A=BigInt(o-1);A>=xe;A--){const T=O>>A&vt;I^=T,w=a(I,E,j),E=w[0],j=w[1],w=a(I,B,v),B=w[0],v=w[1],I=T;const N=E+B,S=r(N*N),U=E-B,$=r(U*U),p=S-$,C=j+v,D=j-v,P=r(D*N),G=r(C*U),X=P+G,Z=P-G;j=r(X*X),v=r(k*r(Z*Z)),E=r(S*$),B=r(p*(S+r(l*p)))}w=a(I,E,j),E=w[0],j=w[1],w=a(I,B,v),B=w[0],v=w[1];const R=u(B);return r(E*R)}function d(b){return Ks(r(b),s)}function g(b){const _=Zn(\"u coordinate\",b,s);return i===32&&(_[31]&=127),Xn(_)}function y(b){const _=Zn(\"scalar\",b),O=_.length;if(O!==s&&O!==i){let k=\"\"+s+\" or \"+i;throw new Error(\"invalid scalar, expected \"+k+\" bytes, got \"+O)}return Xn(c(_))}function h(b,_){const O=g(_),k=y(b),E=f(O,k);if(E===xe)throw new Error(\"invalid private or public key received\");return d(E)}const m=d(t.Gu);function L(b){return h(b,m)}return{scalarMult:h,scalarMultBase:L,getSharedSecret:(b,_)=>h(b,_),getPublicKey:b=>L(b),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:m}}const xt=BigInt(\"57896044618658097711785492504343953926634992332820282019728792003956564819949\");BigInt(0);const Ys=BigInt(1),tr=BigInt(2),Xs=BigInt(3),Zs=BigInt(5);BigInt(8);function Qs(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),s=xt,c=e*e%s*e%s,u=z(c,tr,s)*c%s,a=z(u,Ys,s)*e%s,l=z(a,Zs,s)*a%s,f=z(l,t,s)*l%s,d=z(f,n,s)*f%s,g=z(d,r,s)*d%s,y=z(g,o,s)*g%s,h=z(y,o,s)*g%s,m=z(h,t,s)*l%s;return{pow_p_5_8:z(m,tr,s)*e%s,b2:c}}function ei(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const It=Js({P:xt,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=xt,{pow_p_5_8:n,b2:r}=Qs(e);return er(z(n,Xs,t)*r,t)},adjustScalarBytes:ei,randomBytes:Se}),Ot=\"base10\",V=\"base16\",At=\"base64pad\",ti=\"base64url\",Ie=\"utf8\",Nt=0,Oe=1,_e=2,ni=0,nr=1,Te=12,St=32;function ri(){const e=It.utils.randomPrivateKey(),t=It.getPublicKey(e);return{privateKey:K(e,V),publicKey:K(t,V)}}function oi(){const e=Se(St);return K(e,V)}function si(e,t){const n=It.getSharedSecret(W(e,V),W(t,V)),r=Rs(He,n,void 0,void 0,St);return K(r,V)}function ii(e){const t=He(W(e,V));return K(t,V)}function ci(e){const t=He(W(e,Ie));return K(t,V)}function Ut(e){return W(`${e}`,Ot)}function fe(e){return Number(K(e,Ot))}function ai(e){const t=Ut(typeof e.type<\"u\"?e.type:Nt);if(fe(t)===Oe&&typeof e.senderPublicKey>\"u\")throw new Error(\"Missing sender public key for type 1 envelope\");const n=typeof e.senderPublicKey<\"u\"?W(e.senderPublicKey,V):void 0,r=typeof e.iv<\"u\"?W(e.iv,V):Se(Te),o=W(e.symKey,V),s=Fn(o,r).encrypt(W(e.message,Ie));return _t({type:t,sealed:s,iv:r,senderPublicKey:n,encoding:e.encoding})}function ui(e){const t=W(e.symKey,V),{sealed:n,iv:r}=Fe(e),o=Fn(t,r).decrypt(n);if(o===null)throw new Error(\"Failed to decrypt\");return K(o,Ie)}function fi(e,t){const n=Ut(_e),r=Se(Te),o=W(e,Ie);return _t({type:n,sealed:o,iv:r,encoding:t})}function li(e,t){const{sealed:n}=Fe({encoded:e,encoding:t});return K(n,Ie)}function _t(e){const{encoding:t=At}=e;if(fe(e.type)===_e)return K(Je([e.type,e.sealed]),t);if(fe(e.type)===Oe){if(typeof e.senderPublicKey>\"u\")throw new Error(\"Missing sender public key for type 1 envelope\");return K(Je([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return K(Je([e.type,e.iv,e.sealed]),t)}function Fe(e){const{encoded:t,encoding:n=At}=e,r=W(t,n),o=r.slice(ni,nr),s=nr;if(fe(o)===Oe){const a=s+St,l=a+Te,f=r.slice(s,a),d=r.slice(a,l),g=r.slice(l);return{type:o,sealed:g,iv:d,senderPublicKey:f}}if(fe(o)===_e){const a=r.slice(s),l=Se(Te);return{type:o,sealed:a,iv:l}}const i=s+Te,c=r.slice(s,i),u=r.slice(i);return{type:o,sealed:u,iv:c}}function di(e,t){const n=Fe({encoded:e,encoding:t?.encoding});return rr({type:fe(n.type),senderPublicKey:typeof n.senderPublicKey<\"u\"?K(n.senderPublicKey,V):void 0,receiverPublicKey:t?.receiverPublicKey})}function rr(e){const t=e?.type||Nt;if(t===Oe){if(typeof e?.senderPublicKey>\"u\")throw new Error(\"missing sender public key\");if(typeof e?.receiverPublicKey>\"u\")throw new Error(\"missing receiver public key\")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function hi(e){return e.type===Oe&&typeof e.senderPublicKey==\"string\"&&typeof e.receiverPublicKey==\"string\"}function pi(e){return e.type===_e}function or(e){return new Dr(\"p256\").keyFromPublic({x:Buffer.from(e.x,\"base64\").toString(\"hex\"),y:Buffer.from(e.y,\"base64\").toString(\"hex\")},\"hex\")}function gi(e){let t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");const n=t.length%4;return n>0&&(t+=\"=\".repeat(4-n)),t}function yi(e){return Buffer.from(gi(e),\"base64\")}function mi(e,t){const[n,r,o]=e.split(\".\"),s=yi(o);if(s.length!==64)throw new Error(\"Invalid signature length\");const i=s.slice(0,32).toString(\"hex\"),c=s.slice(32,64).toString(\"hex\"),u=`${n}.${r}`,a=He(u),l=or(t),f=K(a,V);if(!l.verify(f,{r:i,s:c}))throw new Error(\"Invalid signature\");return kr(e).payload}const sr=\"irn\";function bi(e){return e?.relay||{protocol:sr}}function wi(e){const t=Mr[e];if(typeof t>\"u\")throw new Error(`Relay Protocol not supported: ${e}`);return t}function ir(e,t=\"-\"){const n={},r=\"relay\"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,\"\"),i=e[o];n[s]=i}}),n}function Ei(e){if(!e.includes(\"wc:\")){const a=rt(e);a!=null&&a.includes(\"wc:\")&&(e=a)}e=e.includes(\"wc://\")?e.replace(\"wc://\",\"\"):e,e=e.includes(\"wc:\")?e.replace(\"wc:\",\"\"):e;const t=e.indexOf(\":\"),n=e.indexOf(\"?\")!==-1?e.indexOf(\"?\"):void 0,r=e.substring(0,t),o=e.substring(t+1,n).split(\"@\"),s=typeof n<\"u\"?e.substring(n):\"\",i=new URLSearchParams(s),c={};i.forEach((a,l)=>{c[l]=a});const u=typeof c.methods==\"string\"?c.methods.split(\",\"):void 0;return{protocol:r,topic:cr(o[0]),version:parseInt(o[1],10),symKey:c.symKey,relay:ir(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function cr(e){return e.startsWith(\"//\")?e.substring(2):e}function ar(e,t=\"-\"){const n=\"relay\",r={};return Object.keys(e).forEach(o=>{const s=o,i=n+t+s;e[s]&&(r[i]=e[s])}),r}function vi(e){const t=new URLSearchParams,n=ar(e.relay);Object.keys(n).sort().forEach(o=>{t.set(o,n[o])}),t.set(\"symKey\",e.symKey),e.expiryTimestamp&&t.set(\"expiryTimestamp\",e.expiryTimestamp.toString()),e.methods&&t.set(\"methods\",e.methods.join(\",\"));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function xi(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Ii=Object.defineProperty,Oi=Object.defineProperties,Ai=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,fr=(e,t,n)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))Ni.call(t,n)&&fr(e,n,t[n]);if(ur)for(var n of ur(t))Si.call(t,n)&&fr(e,n,t[n]);return e},_i=(e,t)=>Oi(e,Ai(t));function le(e){const t=[];return e.forEach(n=>{const[r,o]=n.split(\":\");t.push(`${r}:${o}`)}),t}function lr(e){const t=[];return Object.values(e).forEach(n=>{t.push(...le(n.accounts))}),t}function dr(e,t){const n=[];return Object.values(e).forEach(r=>{le(r.accounts).includes(t)&&n.push(...r.methods)}),n}function hr(e,t){const n=[];return Object.values(e).forEach(r=>{le(r.accounts).includes(t)&&n.push(...r.events)}),n}function Ti(e,t){const n=Or(e,t);if(n)throw new Error(n.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(i=>`${i.split(\":\")[0]}:${i.split(\":\")[1]}`)};return r}function $i(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:r}=e,o=$t(t),s=$t(n),i={};Object.keys(r).forEach(a=>{const l=r[a].chains,f=r[a].methods,d=r[a].events,g=r[a].accounts;l.forEach(y=>{if(!g.some(h=>h.includes(y)))throw new Error(`No accounts provided for chain ${y} in namespace ${a}`)}),i[a]={chains:l,methods:f,events:d,accounts:g}});const c=Nr(t,i,\"approve()\");if(c)throw new Error(c.message);const u={};return!Object.keys(t).length&&!Object.keys(n).length?i:(Object.keys(o).forEach(a=>{const l=r[a].chains.filter(y=>{var h,m;return(m=(h=o[a])==null?void 0:h.chains)==null?void 0:m.includes(y)}),f=r[a].methods.filter(y=>{var h,m;return(m=(h=o[a])==null?void 0:h.methods)==null?void 0:m.includes(y)}),d=r[a].events.filter(y=>{var h,m;return(m=(h=o[a])==null?void 0:h.events)==null?void 0:m.includes(y)}),g=l.map(y=>r[a].accounts.filter(h=>h.includes(`${y}:`))).flat();u[a]={chains:l,methods:f,events:d,accounts:g}}),Object.keys(s).forEach(a=>{var l,f,d,g,y,h;if(!r[a])return;const m=(f=(l=s[a])==null?void 0:l.chains)==null?void 0:f.filter(O=>r[a].chains.includes(O)),L=r[a].methods.filter(O=>{var k,E;return(E=(k=s[a])==null?void 0:k.methods)==null?void 0:E.includes(O)}),b=r[a].events.filter(O=>{var k,E;return(E=(k=s[a])==null?void 0:k.events)==null?void 0:E.includes(O)}),_=m?.map(O=>r[a].accounts.filter(k=>k.includes(`${O}:`))).flat();u[a]={chains:Q((d=u[a])==null?void 0:d.chains,m),methods:Q((g=u[a])==null?void 0:g.methods,L),events:Q((y=u[a])==null?void 0:y.events,b),accounts:Q((h=u[a])==null?void 0:h.accounts,_)}}),u)}function Tt(e){return e.includes(\":\")}function pr(e){return Tt(e)?e.split(\":\")[0]:e}function $t(e){var t,n,r;const o={};if(!qe(e))return o;for(const[s,i]of Object.entries(e)){const c=Tt(s)?[s]:i.chains,u=i.methods||[],a=i.events||[],l=pr(s);o[l]=_i(Ui({},o[l]),{chains:Q(c,(t=o[l])==null?void 0:t.chains),methods:Q(u,(n=o[l])==null?void 0:n.methods),events:Q(a,(r=o[l])==null?void 0:r.events)})}return o}function gr(e){const t={};return e?.forEach(n=>{var r;const[o,s]=n.split(\":\");t[o]||(t[o]={accounts:[],chains:[],events:[],methods:[]}),t[o].accounts.push(n),(r=t[o].chains)==null||r.push(`${o}:${s}`)}),t}function Ri(e,t){t=t.map(r=>r.replace(\"did:pkh:\",\"\"));const n=gr(t);for(const[r,o]of Object.entries(n))o.methods?o.methods=Q(o.methods,e):o.methods=e,o.events=[\"chainChanged\",\"accountsChanged\"];return n}const yr={INVALID_METHOD:{message:\"Invalid method.\",code:1001},INVALID_EVENT:{message:\"Invalid event.\",code:1002},INVALID_UPDATE_REQUEST:{message:\"Invalid update request.\",code:1003},INVALID_EXTEND_REQUEST:{message:\"Invalid extend request.\",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:\"Invalid session settle request.\",code:1005},UNAUTHORIZED_METHOD:{message:\"Unauthorized method.\",code:3001},UNAUTHORIZED_EVENT:{message:\"Unauthorized event.\",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:\"Unauthorized update request.\",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:\"Unauthorized extend request.\",code:3004},USER_REJECTED:{message:\"User rejected.\",code:5e3},USER_REJECTED_CHAINS:{message:\"User rejected chains.\",code:5001},USER_REJECTED_METHODS:{message:\"User rejected methods.\",code:5002},USER_REJECTED_EVENTS:{message:\"User rejected events.\",code:5003},UNSUPPORTED_CHAINS:{message:\"Unsupported chains.\",code:5100},UNSUPPORTED_METHODS:{message:\"Unsupported methods.\",code:5101},UNSUPPORTED_EVENTS:{message:\"Unsupported events.\",code:5102},UNSUPPORTED_ACCOUNTS:{message:\"Unsupported accounts.\",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:\"Unsupported namespace key.\",code:5104},USER_DISCONNECTED:{message:\"User disconnected.\",code:6e3},SESSION_SETTLEMENT_FAILED:{message:\"Session settlement failed.\",code:7e3},WC_METHOD_UNSUPPORTED:{message:\"Unsupported wc_ method.\",code:10001}},mr={NOT_INITIALIZED:{message:\"Not initialized.\",code:1},NO_MATCHING_KEY:{message:\"No matching key.\",code:2},RESTORE_WILL_OVERRIDE:{message:\"Restore will override.\",code:3},RESUBSCRIBED:{message:\"Resubscribed.\",code:4},MISSING_OR_INVALID:{message:\"Missing or invalid.\",code:5},EXPIRED:{message:\"Expired.\",code:6},UNKNOWN_TYPE:{message:\"Unknown type.\",code:7},MISMATCHED_TOPIC:{message:\"Mismatched topic.\",code:8},NON_CONFORMING_NAMESPACES:{message:\"Non conforming namespaces.\",code:9}};function te(e,t){const{message:n,code:r}=mr[e];return{message:t?`${n} ${t}`:n,code:r}}function de(e,t){const{message:n,code:r}=yr[e];return{message:t?`${n} ${t}`:n,code:r}}function $e(e,t){return Array.isArray(e)?typeof t<\"u\"&&e.length?e.every(t):!0:!1}function qe(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ae(e){return typeof e>\"u\"}function q(e,t){return t&&ae(e)?!0:typeof e==\"string\"&&!!e.trim().length}function Ge(e,t){return t&&ae(e)?!0:typeof e==\"number\"&&!isNaN(e)}function Pi(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),o=Object.keys(n);let s=!0;return re(o,r)?(r.forEach(i=>{const{accounts:c,methods:u,events:a}=e.namespaces[i],l=le(c),f=n[i];(!re(Be(i,f),l)||!re(f.methods,u)||!re(f.events,a))&&(s=!1)}),s):!1}function Re(e){return q(e,!1)&&e.includes(\":\")?e.split(\":\").length===2:!1}function br(e){if(q(e,!1)&&e.includes(\":\")){const t=e.split(\":\");if(t.length===3){const n=t[0]+\":\"+t[1];return!!t[2]&&Re(n)}}return!1}function Bi(e){function t(n){try{return typeof new URL(n)<\"u\"}catch{return!1}}try{if(q(e,!1)){if(t(e))return!0;const n=rt(e);return t(n)}}catch{}return!1}function Li(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function ji(e){return e?.topic}function Ci(e,t){let n=null;return q(e?.publicKey,!1)||(n=te(\"MISSING_OR_INVALID\",`${t} controller public key should be a string`)),n}function Rt(e){let t=!0;return $e(e)?e.length&&(t=e.every(n=>q(n,!1))):t=!1,t}function wr(e,t,n){let r=null;return $e(t)&&t.length?t.forEach(o=>{r||Re(o)||(r=de(\"UNSUPPORTED_CHAINS\",`${n}, chain ${o} should be a string and conform to \"namespace:chainId\" format`))}):Re(e)||(r=de(\"UNSUPPORTED_CHAINS\",`${n}, chains must be defined as \"namespace:chainId\" e.g. \"eip155:1\": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: [\"eip155:1\", \"eip155:5\"] }`)),r}function Er(e,t,n){let r=null;return Object.entries(e).forEach(([o,s])=>{if(r)return;const i=wr(o,Be(o,s),`${t} ${n}`);i&&(r=i)}),r}function vr(e,t){let n=null;return $e(e)?e.forEach(r=>{n||br(r)||(n=de(\"UNSUPPORTED_ACCOUNTS\",`${t}, account ${r} should be a string and conform to \"namespace:chainId:address\" format`))}):n=de(\"UNSUPPORTED_ACCOUNTS\",`${t}, accounts should be an array of strings conforming to \"namespace:chainId:address\" format`),n}function xr(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=vr(r?.accounts,`${t} namespace`);o&&(n=o)}),n}function Ir(e,t){let n=null;return Rt(e?.methods)?Rt(e?.events)||(n=de(\"UNSUPPORTED_EVENTS\",`${t}, events should be an array of strings or empty array for no events`)):n=de(\"UNSUPPORTED_METHODS\",`${t}, methods should be an array of strings or empty array for no methods`),n}function Pt(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=Ir(r,`${t}, namespace`);o&&(n=o)}),n}function ki(e,t,n){let r=null;if(e&&qe(e)){const o=Pt(e,t);o&&(r=o);const s=Er(e,t,n);s&&(r=s)}else r=te(\"MISSING_OR_INVALID\",`${t}, ${n} should be an object with data`);return r}function Or(e,t){let n=null;if(e&&qe(e)){const r=Pt(e,t);r&&(n=r);const o=xr(e,t);o&&(n=o)}else n=te(\"MISSING_OR_INVALID\",`${t}, namespaces should be an object with data`);return n}function Ar(e){return q(e.protocol,!0)}function Di(e,t){let n=!1;return t&&!e?n=!0:e&&$e(e)&&e.length&&e.forEach(r=>{n=Ar(r)}),n}function Mi(e){return typeof e==\"number\"}function Vi(e){return typeof e<\"u\"&&typeof e!==null}function Hi(e){return!(!e||typeof e!=\"object\"||!e.code||!Ge(e.code,!1)||!e.message||!q(e.message,!1))}function Ki(e){return!(ae(e)||!q(e.method,!1))}function Fi(e){return!(ae(e)||ae(e.result)&&ae(e.error)||!Ge(e.id,!1)||!q(e.jsonrpc,!1))}function qi(e){return!(ae(e)||!q(e.name,!1))}function Gi(e,t){return!(!Re(t)||!lr(e).includes(t))}function Wi(e,t,n){return q(n,!1)?dr(e,t).includes(n):!1}function zi(e,t,n){return q(n,!1)?hr(e,t).includes(n):!1}function Nr(e,t,n){let r=null;const o=Ji(e),s=Yi(t),i=Object.keys(o),c=Object.keys(s),u=Sr(Object.keys(e)),a=Sr(Object.keys(t)),l=u.filter(f=>!a.includes(f));return l.length&&(r=te(\"NON_CONFORMING_NAMESPACES\",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${l.toString()}\n      Received: ${Object.keys(t).toString()}`)),re(i,c)||(r=te(\"NON_CONFORMING_NAMESPACES\",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${i.toString()}\n      Approved: ${c.toString()}`)),Object.keys(t).forEach(f=>{if(!f.includes(\":\")||r)return;const d=le(t[f].accounts);d.includes(f)||(r=te(\"NON_CONFORMING_NAMESPACES\",`${n} namespaces accounts don't satisfy namespace accounts for ${f}\n        Required: ${f}\n        Approved: ${d.toString()}`))}),i.forEach(f=>{r||(re(o[f].methods,s[f].methods)?re(o[f].events,s[f].events)||(r=te(\"NON_CONFORMING_NAMESPACES\",`${n} namespaces events don't satisfy namespace events for ${f}`)):r=te(\"NON_CONFORMING_NAMESPACES\",`${n} namespaces methods don't satisfy namespace methods for ${f}`))}),r}function Ji(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(\":\")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function Sr(e){return[...new Set(e.map(t=>t.includes(\":\")?t.split(\":\")[0]:t))]}function Yi(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(\":\"))t[n]=e[n];else{const r=le(e[n].accounts);r?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(s=>s.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function Xi(e,t){return Ge(e,!1)&&e<=t.max&&e>=t.min}function Zi(){const e=ue();return new Promise(t=>{switch(e){case H.browser:t(Ur());break;case H.reactNative:t(_r());break;case H.node:t(Tr());break;default:t(!0)}})}function Ur(){return Ae()&&navigator?.onLine}async function _r(){if(ne()&&typeof global<\"u\"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Tr(){return!0}function Qi(e){switch(ue()){case H.browser:$r(e);break;case H.reactNative:Rr(e);break;case H.node:break}}function $r(e){!ne()&&Ae()&&(window.addEventListener(\"online\",()=>e(!0)),window.addEventListener(\"offline\",()=>e(!1)))}function Rr(e){ne()&&typeof global<\"u\"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}const Bt={};class ec{static get(t){return Bt[t]}static set(t,n){Bt[t]=n}static delete(t){delete Bt[t]}}export{Ot as BASE10,V as BASE16,At as BASE64,ti as BASE64URL,Gr as COLON,Qe as DEFAULT_DEPTH,Le as EMPTY_SPACE,H as ENV_MAP,mr as INTERNAL_ERRORS,ec as MemoryStore,Wr as ONE_THOUSAND,Ft as REACT_NATIVE_PRODUCT,sr as RELAYER_DEFAULT_PROTOCOL,yr as SDK_ERRORS,Gt as SDK_TYPE,qt as SLASH,Nt as TYPE_0,Oe as TYPE_1,_e as TYPE_2,Ie as UTF8,$n as addResourceToRecap,Wt as appendToQueryString,to as assertType,ft as assignAbilityToActions,_n as base64Decode,Un as base64Encode,$i as buildApprovedNamespaces,Qo as buildAuthObject,Ri as buildNamespacesFromAuth,Pn as buildRecapStatement,po as calcExpiry,co as capitalize,Qt as capitalizeWord,ao as createDelayedPromise,rs as createEncodedRecap,uo as createExpiringPromise,Tn as createRecap,oe as decodeRecap,fe as decodeTypeByte,li as decodeTypeTwoEnvelope,ui as decrypt,si as deriveSymKey,Fe as deserialize,De as encodeRecap,Ut as encodeTypeByte,fi as encodeTypeTwoEnvelope,ai as encrypt,yo as engineEvent,io as enumify,qo as extractSolanaTransactionId,Mt as formatAccountId,Vr as formatAccountWithChain,Dt as formatChainId,en as formatDeeplinkUrl,tt as formatExpirerTarget,lo as formatIdTarget,On as formatMessage,no as formatMessageContext,ar as formatRelayParams,Qr as formatRelayRpcUrl,dt as formatStatementFromRecap,fo as formatTopicTarget,Yt as formatUA,vi as formatUri,rt as fromBase64,ri as generateKeyPair,oi as generateRandomBytes32,le as getAccountsChains,Kr as getAccountsFromNamespaces,Vt as getAddressFromAccount,Hr as getAddressesFromAccounts,Yr as getAppId,Xr as getAppMetadata,Ur as getBrowserOnlineStatus,Ht as getChainFromAccount,Kt as getChainsFromAccounts,Be as getChainsFromNamespace,Fr as getChainsFromNamespaces,is as getChainsFromRecap,qr as getChainsFromRequiredNamespaces,nt as getCommonValuesInArrays,or as getCryptoKeyFromKeyData,An as getDecodedRecapFromResources,bo as getDeepLink,ut as getDidAddress,ke as getDidAddressSegments,xn as getDidChainId,ue as getEnvironment,eo as getHttpUrl,te as getInternalError,Jt as getJavascriptID,zt as getJavascriptOS,Zt as getLastItems,xi as getLinkModeURL,ss as getMethodsFromRecap,In as getNamespacedDidChainId,lr as getNamespacesChains,hr as getNamespacesEventsForChainId,gr as getNamespacesFromAccounts,dr as getNamespacesMethodsForChainId,Tr as getNodeOnlineStatus,Sn as getReCapActions,_r as getReactNativeOnlineStatus,ns as getRecapAbilitiesFromResource,Me as getRecapFromResources,Nn as getRecapResource,Zr as getRelayClientMetadata,wi as getRelayProtocolApi,bi as getRelayProtocolName,Ti as getRequiredNamespacesFromNamespaces,de as getSdkError,wo as getSearchParamFromURL,Ze as getUniqueValues,mo as handleDeeplinkRedirect,re as hasOverlap,ct as hashEthereumMessage,ii as hashKey,ci as hashMessage,zr as isAndroid,Ae as isBrowser,Tt as isCaipNamespace,Nr as isConformingNamespaces,go as isExpired,rn as isIframe,Jr as isIos,et as isNode,Zi as isOnline,Li as isProposalStruct,ne as isReactNative,lt as isRecap,Pi as isSessionCompatible,ji as isSessionStruct,nn as isTelegram,vo as isTestRun,hi as isTypeOneEnvelope,pi as isTypeTwoEnvelope,ae as isUndefined,br as isValidAccountId,vr as isValidAccounts,Ir as isValidActions,$e as isValidArray,Re as isValidChainId,wr as isValidChains,Ci as isValidController,bn as isValidEip1271Signature,mn as isValidEip191Signature,Hi as isValidErrorReason,qi as isValidEvent,Mi as isValidId,xr as isValidNamespaceAccounts,Pt as isValidNamespaceActions,Er as isValidNamespaceChains,Rt as isValidNamespaceMethodsOrEvents,Or as isValidNamespaces,Gi as isValidNamespacesChainId,zi as isValidNamespacesEvent,Wi as isValidNamespacesRequest,Ge as isValidNumber,qe as isValidObject,Vi as isValidParams,Y as isValidRecap,Ar as isValidRelay,Di as isValidRelays,Ki as isValidRequest,Xi as isValidRequestExpiry,ki as isValidRequiredNamespaces,Fi as isValidResponse,q as isValidString,Bi as isValidUrl,so as mapEntries,ro as mapToObj,Q as mergeArrays,os as mergeEncodedRecaps,Rn as mergeRecaps,$t as normalizeNamespaces,oo as objToMap,tn as openDeeplink,Xe as parseAccountId,Ye as parseChainId,Xt as parseContextNames,ho as parseExpirerTarget,pr as parseNamespaceKey,ir as parseRelayParams,cr as parseTopic,Ei as parseUri,es as populateAuthPayload,ts as recapHasResource,_t as serialize,xo as sleep,$r as subscribeToBrowserNetworkChange,Qi as subscribeToNetworkChange,Rr as subscribeToReactNativeNetworkChange,on as toBase64,Eo as uuidv4,di as validateDecoding,rr as validateEncoding,Zo as validateSignedCacao,mi as verifyP256Jwt,yn as verifySignature};\n//# sourceMappingURL=index.es.js.map\n","import Gi,{EventEmitter as ee}from\"events\";import{HEARTBEAT_EVENTS as ne,HeartBeat as Wi}from\"@walletconnect/heartbeat\";import Hi from\"@walletconnect/keyvaluestorage\";import{generateChildLogger as N,getLoggerContext as U,pino as Yi,getDefaultLoggerOptions as et,generatePlatformLogger as Ji}from\"@walletconnect/logger\";import{IMessageTracker as Xi,IPublisher as Zi,ISubscriber as Qi,IRelayer as es,IStore as ts,IJsonRpcHistory as is,IExpirer as ss,IVerify as rs,IEchoClient as ns,IEventClient as os,ICore as as}from\"@walletconnect/types\";import{ONE_DAY as te,SIX_HOURS as cs,THIRTY_DAYS as Ce,FIVE_SECONDS as Pe,THIRTY_SECONDS as Se,toMiliseconds as O,ONE_MINUTE as tt,ONE_SECOND as Z,FIVE_MINUTES as fe,fromMiliseconds as it}from\"@walletconnect/time\";import{safeJsonStringify as hs,safeJsonParse as st}from\"@walletconnect/safe-json\";import*as De from\"@walletconnect/relay-auth\";import{decodeJWT as rt}from\"@walletconnect/relay-auth\";import{mapToObj as Re,objToMap as Oe,getInternalError as m,generateRandomBytes32 as Ae,generateKeyPair as ls,deriveSymKey as us,hashKey as ds,validateEncoding as gs,isTypeTwoEnvelope as nt,encodeTypeTwoEnvelope as ps,isTypeOneEnvelope as ot,encrypt as ys,validateDecoding as bs,decodeTypeTwoEnvelope as ms,decrypt as fs,deserialize as at,decodeTypeByte as Ds,BASE64 as ct,BASE16 as vs,hashMessage as ve,getRelayProtocolApi as oe,getRelayProtocolName as we,isUndefined as xe,createExpiringPromise as X,getSdkError as ae,sleep as ws,isAndroid as _s,getAppId as ht,isIos as Es,isOnline as lt,calcExpiry as ce,isNode as ut,formatRelayRpcUrl as Is,subscribeToNetworkChange as Ts,isProposalStruct as Cs,isSessionStruct as Ps,parseExpirerTarget as Ss,TYPE_1 as Rs,formatUri as dt,parseUri as gt,createDelayedPromise as Os,engineEvent as Ne,isExpired as pt,isValidParams as $e,isValidUrl as As,isValidString as xs,formatTopicTarget as Ns,formatIdTarget as $s,isTestRun as yt,isBrowser as zs,verifyP256Jwt as Ls,uuidv4 as bt,formatUA as ks,getAppMetadata as js}from\"@walletconnect/utils\";import{toString as Us}from\"uint8arrays\";import{JsonRpcProvider as Ms}from\"@walletconnect/jsonrpc-provider\";import{getBigIntRpcId as mt,isJsonRpcRequest as ft,isJsonRpcResponse as Dt,formatJsonRpcResult as vt,formatJsonRpcRequest as wt,formatJsonRpcError as Fs,isJsonRpcResult as Ks,isJsonRpcError as _t}from\"@walletconnect/jsonrpc-utils\";import Bs from\"@walletconnect/jsonrpc-ws-connection\";import{getDocument as Vs}from\"@walletconnect/window-getters\";const ze=\"wc\",Le=2,he=\"core\",B=`${ze}@2:${he}:`,Et={name:he,logger:\"error\"},It={database:\":memory:\"},Tt=\"crypto\",ke=\"client_ed25519_seed\",Ct=te,Pt=\"keychain\",St=\"0.3\",Rt=\"messages\",Ot=\"0.3\",je=cs,At=\"publisher\",xt=\"irn\",Nt=\"error\",Ue=\"wss://relay.walletconnect.org\",$t=\"relayer\",C={message:\"relayer_message\",message_ack:\"relayer_message_ack\",connect:\"relayer_connect\",disconnect:\"relayer_disconnect\",error:\"relayer_error\",connection_stalled:\"relayer_connection_stalled\",transport_closed:\"relayer_transport_closed\",publish:\"relayer_publish\"},zt=\"_subscription\",L={payload:\"payload\",connect:\"connect\",disconnect:\"disconnect\",error:\"error\"},Lt=.1,qs={database:\":memory:\"},_e=\"2.19.1\",Gs=1e4,Q={link_mode:\"link_mode\",relay:\"relay\"},le={inbound:\"inbound\",outbound:\"outbound\"},kt=\"0.3\",jt=\"WALLETCONNECT_CLIENT_ID\",Me=\"WALLETCONNECT_LINK_MODE_APPS\",$={created:\"subscription_created\",deleted:\"subscription_deleted\",expired:\"subscription_expired\",disabled:\"subscription_disabled\",sync:\"subscription_sync\",resubscribed:\"subscription_resubscribed\"},Ws=Ce,Ut=\"subscription\",Mt=\"0.3\",Hs=Pe*1e3,Ft=\"pairing\",Kt=\"0.3\",Ys=Ce,ie={wc_pairingDelete:{req:{ttl:te,prompt:!1,tag:1e3},res:{ttl:te,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Se,prompt:!1,tag:1002},res:{ttl:Se,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:te,prompt:!1,tag:0},res:{ttl:te,prompt:!1,tag:0}}},se={create:\"pairing_create\",expire:\"pairing_expire\",delete:\"pairing_delete\",ping:\"pairing_ping\"},M={created:\"history_created\",updated:\"history_updated\",deleted:\"history_deleted\",sync:\"history_sync\"},Bt=\"history\",Vt=\"0.3\",qt=\"expirer\",F={created:\"expirer_created\",deleted:\"expirer_deleted\",expired:\"expirer_expired\",sync:\"expirer_sync\"},Gt=\"0.3\",Js=te,Wt=\"verify-api\",Xs=\"https://verify.walletconnect.com\",Ht=\"https://verify.walletconnect.org\",ue=Ht,Yt=`${ue}/v3`,Jt=[Xs,Ht],Xt=\"echo\",Zt=\"https://echo.walletconnect.com\",Zs=\"event-client\",G={pairing_started:\"pairing_started\",pairing_uri_validation_success:\"pairing_uri_validation_success\",pairing_uri_not_expired:\"pairing_uri_not_expired\",store_new_pairing:\"store_new_pairing\",subscribing_pairing_topic:\"subscribing_pairing_topic\",subscribe_pairing_topic_success:\"subscribe_pairing_topic_success\",existing_pairing:\"existing_pairing\",pairing_not_expired:\"pairing_not_expired\",emit_inactive_pairing:\"emit_inactive_pairing\",emit_session_proposal:\"emit_session_proposal\",subscribing_to_pairing_topic:\"subscribing_to_pairing_topic\"},Y={no_wss_connection:\"no_wss_connection\",no_internet_connection:\"no_internet_connection\",malformed_pairing_uri:\"malformed_pairing_uri\",active_pairing_already_exists:\"active_pairing_already_exists\",subscribe_pairing_topic_failure:\"subscribe_pairing_topic_failure\",pairing_expired:\"pairing_expired\",proposal_expired:\"proposal_expired\",proposal_listener_not_found:\"proposal_listener_not_found\"},Qs={session_approve_started:\"session_approve_started\",proposal_not_expired:\"proposal_not_expired\",session_namespaces_validation_success:\"session_namespaces_validation_success\",create_session_topic:\"create_session_topic\",subscribing_session_topic:\"subscribing_session_topic\",subscribe_session_topic_success:\"subscribe_session_topic_success\",publishing_session_approve:\"publishing_session_approve\",session_approve_publish_success:\"session_approve_publish_success\",store_session:\"store_session\",publishing_session_settle:\"publishing_session_settle\",session_settle_publish_success:\"session_settle_publish_success\"},er={no_internet_connection:\"no_internet_connection\",no_wss_connection:\"no_wss_connection\",proposal_expired:\"proposal_expired\",subscribe_session_topic_failure:\"subscribe_session_topic_failure\",session_approve_publish_failure:\"session_approve_publish_failure\",session_settle_publish_failure:\"session_settle_publish_failure\",session_approve_namespace_validation_failure:\"session_approve_namespace_validation_failure\",proposal_not_found:\"proposal_not_found\"},tr={authenticated_session_approve_started:\"authenticated_session_approve_started\",authenticated_session_not_expired:\"authenticated_session_not_expired\",chains_caip2_compliant:\"chains_caip2_compliant\",chains_evm_compliant:\"chains_evm_compliant\",create_authenticated_session_topic:\"create_authenticated_session_topic\",cacaos_verified:\"cacaos_verified\",store_authenticated_session:\"store_authenticated_session\",subscribing_authenticated_session_topic:\"subscribing_authenticated_session_topic\",subscribe_authenticated_session_topic_success:\"subscribe_authenticated_session_topic_success\",publishing_authenticated_session_approve:\"publishing_authenticated_session_approve\",authenticated_session_approve_publish_success:\"authenticated_session_approve_publish_success\"},ir={no_internet_connection:\"no_internet_connection\",no_wss_connection:\"no_wss_connection\",missing_session_authenticate_request:\"missing_session_authenticate_request\",session_authenticate_request_expired:\"session_authenticate_request_expired\",chains_caip2_compliant_failure:\"chains_caip2_compliant_failure\",chains_evm_compliant_failure:\"chains_evm_compliant_failure\",invalid_cacao:\"invalid_cacao\",subscribe_authenticated_session_topic_failure:\"subscribe_authenticated_session_topic_failure\",authenticated_session_approve_publish_failure:\"authenticated_session_approve_publish_failure\",authenticated_session_pending_request_not_found:\"authenticated_session_pending_request_not_found\"},Qt=.1,ei=\"event-client\",ti=86400,ii=\"https://pulse.walletconnect.org/batch\";function sr(r,e){if(r.length>=255)throw new TypeError(\"Alphabet too long\");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var i=0;i<r.length;i++){var n=r.charAt(i),o=n.charCodeAt(0);if(t[o]!==255)throw new TypeError(n+\" is ambiguous\");t[o]=i}var a=r.length,c=r.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError(\"Expected Uint8Array\");if(l.length===0)return\"\";for(var b=0,x=0,I=0,D=l.length;I!==D&&l[I]===0;)I++,b++;for(var j=(D-I)*u+1>>>0,T=new Uint8Array(j);I!==D;){for(var q=l[I],J=0,K=j-1;(q!==0||J<x)&&K!==-1;K--,J++)q+=256*T[K]>>>0,T[K]=q%a>>>0,q=q/a>>>0;if(q!==0)throw new Error(\"Non-zero carry\");x=J,I++}for(var H=j-x;H!==j&&T[H]===0;)H++;for(var me=c.repeat(b);H<j;++H)me+=r.charAt(T[H]);return me}function g(l){if(typeof l!=\"string\")throw new TypeError(\"Expected String\");if(l.length===0)return new Uint8Array;var b=0;if(l[b]!==\" \"){for(var x=0,I=0;l[b]===c;)x++,b++;for(var D=(l.length-b)*h+1>>>0,j=new Uint8Array(D);l[b];){var T=t[l.charCodeAt(b)];if(T===255)return;for(var q=0,J=D-1;(T!==0||q<I)&&J!==-1;J--,q++)T+=a*j[J]>>>0,j[J]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error(\"Non-zero carry\");I=q,b++}if(l[b]!==\" \"){for(var K=D-I;K!==D&&j[K]===0;)K++;for(var H=new Uint8Array(x+(D-K)),me=x;K!==D;)H[me++]=j[K++];return H}}}function _(l){var b=g(l);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:g,decode:_}}var rr=sr,nr=rr;const si=r=>{if(r instanceof Uint8Array&&r.constructor.name===\"Uint8Array\")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error(\"Unknown type, must be binary type\")},or=r=>new TextEncoder().encode(r),ar=r=>new TextDecoder().decode(r);class cr{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error(\"Unknown type, must be binary type\")}}class hr{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error(\"Invalid prefix character\");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e==\"string\"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error(\"Can only multibase decode strings\")}or(e){return ri(this,e)}}class lr{constructor(e){this.decoders=e}or(e){return ri(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ri=(r,e)=>new lr({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class ur{constructor(e,t,s,i){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=i,this.encoder=new cr(e,t,s),this.decoder=new hr(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ee=({name:r,prefix:e,encode:t,decode:s})=>new ur(r,e,t,s),de=({prefix:r,name:e,alphabet:t})=>{const{encode:s,decode:i}=nr(t,e);return Ee({prefix:r,name:e,encode:s,decode:n=>si(i(n))})},dr=(r,e,t,s)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let n=r.length;for(;r[n-1]===\"=\";)--n;const o=new Uint8Array(n*t/8|0);let a=0,c=0,h=0;for(let u=0;u<n;++u){const d=i[r[u]];if(d===void 0)throw new SyntaxError(`Non-${s} character`);c=c<<t|d,a+=t,a>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError(\"Unexpected end of data\");return o},gr=(r,e,t)=>{const s=e[e.length-1]===\"=\",i=(1<<t)-1;let n=\"\",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,n+=e[i&a>>o];if(o&&(n+=e[i&a<<t-o]),s)for(;n.length*t&7;)n+=\"=\";return n},P=({name:r,prefix:e,bitsPerChar:t,alphabet:s})=>Ee({prefix:e,name:r,encode(i){return gr(i,s,t)},decode(i){return dr(i,s,t,r)}}),pr=Ee({prefix:\"\\0\",name:\"identity\",encode:r=>ar(r),decode:r=>or(r)});var yr=Object.freeze({__proto__:null,identity:pr});const br=P({prefix:\"0\",name:\"base2\",alphabet:\"01\",bitsPerChar:1});var mr=Object.freeze({__proto__:null,base2:br});const fr=P({prefix:\"7\",name:\"base8\",alphabet:\"01234567\",bitsPerChar:3});var Dr=Object.freeze({__proto__:null,base8:fr});const vr=de({prefix:\"9\",name:\"base10\",alphabet:\"0123456789\"});var wr=Object.freeze({__proto__:null,base10:vr});const _r=P({prefix:\"f\",name:\"base16\",alphabet:\"0123456789abcdef\",bitsPerChar:4}),Er=P({prefix:\"F\",name:\"base16upper\",alphabet:\"0123456789ABCDEF\",bitsPerChar:4});var Ir=Object.freeze({__proto__:null,base16:_r,base16upper:Er});const Tr=P({prefix:\"b\",name:\"base32\",alphabet:\"abcdefghijklmnopqrstuvwxyz234567\",bitsPerChar:5}),Cr=P({prefix:\"B\",name:\"base32upper\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\",bitsPerChar:5}),Pr=P({prefix:\"c\",name:\"base32pad\",alphabet:\"abcdefghijklmnopqrstuvwxyz234567=\",bitsPerChar:5}),Sr=P({prefix:\"C\",name:\"base32padupper\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=\",bitsPerChar:5}),Rr=P({prefix:\"v\",name:\"base32hex\",alphabet:\"0123456789abcdefghijklmnopqrstuv\",bitsPerChar:5}),Or=P({prefix:\"V\",name:\"base32hexupper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUV\",bitsPerChar:5}),Ar=P({prefix:\"t\",name:\"base32hexpad\",alphabet:\"0123456789abcdefghijklmnopqrstuv=\",bitsPerChar:5}),xr=P({prefix:\"T\",name:\"base32hexpadupper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUV=\",bitsPerChar:5}),Nr=P({prefix:\"h\",name:\"base32z\",alphabet:\"ybndrfg8ejkmcpqxot1uwisza345h769\",bitsPerChar:5});var $r=Object.freeze({__proto__:null,base32:Tr,base32upper:Cr,base32pad:Pr,base32padupper:Sr,base32hex:Rr,base32hexupper:Or,base32hexpad:Ar,base32hexpadupper:xr,base32z:Nr});const zr=de({prefix:\"k\",name:\"base36\",alphabet:\"0123456789abcdefghijklmnopqrstuvwxyz\"}),Lr=de({prefix:\"K\",name:\"base36upper\",alphabet:\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"});var kr=Object.freeze({__proto__:null,base36:zr,base36upper:Lr});const jr=de({name:\"base58btc\",prefix:\"z\",alphabet:\"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\"}),Ur=de({name:\"base58flickr\",prefix:\"Z\",alphabet:\"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\"});var Mr=Object.freeze({__proto__:null,base58btc:jr,base58flickr:Ur});const Fr=P({prefix:\"m\",name:\"base64\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",bitsPerChar:6}),Kr=P({prefix:\"M\",name:\"base64pad\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",bitsPerChar:6}),Br=P({prefix:\"u\",name:\"base64url\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",bitsPerChar:6}),Vr=P({prefix:\"U\",name:\"base64urlpad\",alphabet:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\",bitsPerChar:6});var qr=Object.freeze({__proto__:null,base64:Fr,base64pad:Kr,base64url:Br,base64urlpad:Vr});const ni=Array.from(\"\\u{1F680}\\u{1FA90}\\u2604\\u{1F6F0}\\u{1F30C}\\u{1F311}\\u{1F312}\\u{1F313}\\u{1F314}\\u{1F315}\\u{1F316}\\u{1F317}\\u{1F318}\\u{1F30D}\\u{1F30F}\\u{1F30E}\\u{1F409}\\u2600\\u{1F4BB}\\u{1F5A5}\\u{1F4BE}\\u{1F4BF}\\u{1F602}\\u2764\\u{1F60D}\\u{1F923}\\u{1F60A}\\u{1F64F}\\u{1F495}\\u{1F62D}\\u{1F618}\\u{1F44D}\\u{1F605}\\u{1F44F}\\u{1F601}\\u{1F525}\\u{1F970}\\u{1F494}\\u{1F496}\\u{1F499}\\u{1F622}\\u{1F914}\\u{1F606}\\u{1F644}\\u{1F4AA}\\u{1F609}\\u263A\\u{1F44C}\\u{1F917}\\u{1F49C}\\u{1F614}\\u{1F60E}\\u{1F607}\\u{1F339}\\u{1F926}\\u{1F389}\\u{1F49E}\\u270C\\u2728\\u{1F937}\\u{1F631}\\u{1F60C}\\u{1F338}\\u{1F64C}\\u{1F60B}\\u{1F497}\\u{1F49A}\\u{1F60F}\\u{1F49B}\\u{1F642}\\u{1F493}\\u{1F929}\\u{1F604}\\u{1F600}\\u{1F5A4}\\u{1F603}\\u{1F4AF}\\u{1F648}\\u{1F447}\\u{1F3B6}\\u{1F612}\\u{1F92D}\\u2763\\u{1F61C}\\u{1F48B}\\u{1F440}\\u{1F62A}\\u{1F611}\\u{1F4A5}\\u{1F64B}\\u{1F61E}\\u{1F629}\\u{1F621}\\u{1F92A}\\u{1F44A}\\u{1F973}\\u{1F625}\\u{1F924}\\u{1F449}\\u{1F483}\\u{1F633}\\u270B\\u{1F61A}\\u{1F61D}\\u{1F634}\\u{1F31F}\\u{1F62C}\\u{1F643}\\u{1F340}\\u{1F337}\\u{1F63B}\\u{1F613}\\u2B50\\u2705\\u{1F97A}\\u{1F308}\\u{1F608}\\u{1F918}\\u{1F4A6}\\u2714\\u{1F623}\\u{1F3C3}\\u{1F490}\\u2639\\u{1F38A}\\u{1F498}\\u{1F620}\\u261D\\u{1F615}\\u{1F33A}\\u{1F382}\\u{1F33B}\\u{1F610}\\u{1F595}\\u{1F49D}\\u{1F64A}\\u{1F639}\\u{1F5E3}\\u{1F4AB}\\u{1F480}\\u{1F451}\\u{1F3B5}\\u{1F91E}\\u{1F61B}\\u{1F534}\\u{1F624}\\u{1F33C}\\u{1F62B}\\u26BD\\u{1F919}\\u2615\\u{1F3C6}\\u{1F92B}\\u{1F448}\\u{1F62E}\\u{1F646}\\u{1F37B}\\u{1F343}\\u{1F436}\\u{1F481}\\u{1F632}\\u{1F33F}\\u{1F9E1}\\u{1F381}\\u26A1\\u{1F31E}\\u{1F388}\\u274C\\u270A\\u{1F44B}\\u{1F630}\\u{1F928}\\u{1F636}\\u{1F91D}\\u{1F6B6}\\u{1F4B0}\\u{1F353}\\u{1F4A2}\\u{1F91F}\\u{1F641}\\u{1F6A8}\\u{1F4A8}\\u{1F92C}\\u2708\\u{1F380}\\u{1F37A}\\u{1F913}\\u{1F619}\\u{1F49F}\\u{1F331}\\u{1F616}\\u{1F476}\\u{1F974}\\u25B6\\u27A1\\u2753\\u{1F48E}\\u{1F4B8}\\u2B07\\u{1F628}\\u{1F31A}\\u{1F98B}\\u{1F637}\\u{1F57A}\\u26A0\\u{1F645}\\u{1F61F}\\u{1F635}\\u{1F44E}\\u{1F932}\\u{1F920}\\u{1F927}\\u{1F4CC}\\u{1F535}\\u{1F485}\\u{1F9D0}\\u{1F43E}\\u{1F352}\\u{1F617}\\u{1F911}\\u{1F30A}\\u{1F92F}\\u{1F437}\\u260E\\u{1F4A7}\\u{1F62F}\\u{1F486}\\u{1F446}\\u{1F3A4}\\u{1F647}\\u{1F351}\\u2744\\u{1F334}\\u{1F4A3}\\u{1F438}\\u{1F48C}\\u{1F4CD}\\u{1F940}\\u{1F922}\\u{1F445}\\u{1F4A1}\\u{1F4A9}\\u{1F450}\\u{1F4F8}\\u{1F47B}\\u{1F910}\\u{1F92E}\\u{1F3BC}\\u{1F975}\\u{1F6A9}\\u{1F34E}\\u{1F34A}\\u{1F47C}\\u{1F48D}\\u{1F4E3}\\u{1F942}\"),Gr=ni.reduce((r,e,t)=>(r[t]=e,r),[]),Wr=ni.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Hr(r){return r.reduce((e,t)=>(e+=Gr[t],e),\"\")}function Yr(r){const e=[];for(const t of r){const s=Wr[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Jr=Ee({prefix:\"\\u{1F680}\",name:\"base256emoji\",encode:Hr,decode:Yr});var Xr=Object.freeze({__proto__:null,base256emoji:Jr}),Zr=ai,oi=128,Qr=127,en=~Qr,tn=Math.pow(2,31);function ai(r,e,t){e=e||[],t=t||0;for(var s=t;r>=tn;)e[t++]=r&255|oi,r/=128;for(;r&en;)e[t++]=r&255|oi,r>>>=7;return e[t]=r|0,ai.bytes=t-s+1,e}var sn=Fe,rn=128,ci=127;function Fe(r,s){var t=0,s=s||0,i=0,n=s,o,a=r.length;do{if(n>=a)throw Fe.bytes=0,new RangeError(\"Could not decode varint\");o=r[n++],t+=i<28?(o&ci)<<i:(o&ci)*Math.pow(2,i),i+=7}while(o>=rn);return Fe.bytes=n-s,t}var nn=Math.pow(2,7),on=Math.pow(2,14),an=Math.pow(2,21),cn=Math.pow(2,28),hn=Math.pow(2,35),ln=Math.pow(2,42),un=Math.pow(2,49),dn=Math.pow(2,56),gn=Math.pow(2,63),pn=function(r){return r<nn?1:r<on?2:r<an?3:r<cn?4:r<hn?5:r<ln?6:r<un?7:r<dn?8:r<gn?9:10},yn={encode:Zr,decode:sn,encodingLength:pn},hi=yn;const li=(r,e,t=0)=>(hi.encode(r,e,t),e),ui=r=>hi.encodingLength(r),Ke=(r,e)=>{const t=e.byteLength,s=ui(r),i=s+ui(t),n=new Uint8Array(i+t);return li(r,n,0),li(t,n,s),n.set(e,i),new bn(r,t,e,n)};class bn{constructor(e,t,s,i){this.code=e,this.size=t,this.digest=s,this.bytes=i}}const di=({name:r,code:e,encode:t})=>new mn(r,e,t);class mn{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ke(this.code,t):t.then(s=>Ke(this.code,s))}else throw Error(\"Unknown type, must be binary type\")}}const gi=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),fn=di({name:\"sha2-256\",code:18,encode:gi(\"SHA-256\")}),Dn=di({name:\"sha2-512\",code:19,encode:gi(\"SHA-512\")});var vn=Object.freeze({__proto__:null,sha256:fn,sha512:Dn});const pi=0,wn=\"identity\",yi=si,_n=r=>Ke(pi,yi(r)),En={code:pi,name:wn,encode:yi,digest:_n};var In=Object.freeze({__proto__:null,identity:En});new TextEncoder,new TextDecoder;const bi={...yr,...mr,...Dr,...wr,...Ir,...$r,...kr,...Mr,...qr,...Xr};({...vn,...In});function Tn(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function mi(r,e,t,s){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:s}}}const fi=mi(\"utf8\",\"u\",r=>\"u\"+new TextDecoder(\"utf8\").decode(r),r=>new TextEncoder().encode(r.substring(1))),Be=mi(\"ascii\",\"a\",r=>{let e=\"a\";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Tn(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Cn={utf8:fi,\"utf-8\":fi,hex:bi.base16,latin1:Be,ascii:Be,binary:Be,...bi};function Pn(r,e=\"utf8\"){const t=Cn[e];if(!t)throw new Error(`Unsupported encoding \"${e}\"`);return(e===\"utf8\"||e===\"utf-8\")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,\"utf8\"):t.decoder.decode(`${t.prefix}${r}`)}var Sn=Object.defineProperty,Rn=(r,e,t)=>e in r?Sn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,W=(r,e,t)=>Rn(r,typeof e!=\"symbol\"?e+\"\":e,t);class Di{constructor(e,t){this.core=e,this.logger=t,W(this,\"keychain\",new Map),W(this,\"name\",Pt),W(this,\"version\",St),W(this,\"initialized\",!1),W(this,\"storagePrefix\",B),W(this,\"init\",async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<\"u\"&&(this.keychain=s),this.initialized=!0}}),W(this,\"has\",s=>(this.isInitialized(),this.keychain.has(s))),W(this,\"set\",async(s,i)=>{this.isInitialized(),this.keychain.set(s,i),await this.persist()}),W(this,\"get\",s=>{this.isInitialized();const i=this.keychain.get(s);if(typeof i>\"u\"){const{message:n}=m(\"NO_MATCHING_KEY\",`${this.name}: ${s}`);throw new Error(n)}return i}),W(this,\"del\",async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()}),this.core=e,this.logger=N(t,this.name)}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Re(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<\"u\"?Oe(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var On=Object.defineProperty,An=(r,e,t)=>e in r?On(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S=(r,e,t)=>An(r,typeof e!=\"symbol\"?e+\"\":e,t);class vi{constructor(e,t,s){this.core=e,this.logger=t,S(this,\"name\",Tt),S(this,\"keychain\"),S(this,\"randomSessionIdentifier\",Ae()),S(this,\"initialized\",!1),S(this,\"init\",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),S(this,\"hasKeys\",i=>(this.isInitialized(),this.keychain.has(i))),S(this,\"getClientId\",async()=>{this.isInitialized();const i=await this.getClientSeed(),n=De.generateKeyPair(i);return De.encodeIss(n.publicKey)}),S(this,\"generateKeyPair\",()=>{this.isInitialized();const i=ls();return this.setPrivateKey(i.publicKey,i.privateKey)}),S(this,\"signJWT\",async i=>{this.isInitialized();const n=await this.getClientSeed(),o=De.generateKeyPair(n),a=this.randomSessionIdentifier,c=Ct;return await De.signJWT(a,i,c,o)}),S(this,\"generateSharedKey\",(i,n,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=us(a,n);return this.setSymKey(c,o)}),S(this,\"setSymKey\",async(i,n)=>{this.isInitialized();const o=n||ds(i);return await this.keychain.set(o,i),o}),S(this,\"deleteKeyPair\",async i=>{this.isInitialized(),await this.keychain.del(i)}),S(this,\"deleteSymKey\",async i=>{this.isInitialized(),await this.keychain.del(i)}),S(this,\"encode\",async(i,n,o)=>{this.isInitialized();const a=gs(o),c=hs(n);if(nt(a))return ps(c,o?.encoding);if(ot(a)){const g=a.senderPublicKey,_=a.receiverPublicKey;i=await this.generateSharedKey(g,_)}const h=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return ys({type:u,symKey:h,message:c,senderPublicKey:d,encoding:o?.encoding})}),S(this,\"decode\",async(i,n,o)=>{this.isInitialized();const a=bs(n,o);if(nt(a)){const c=ms(n,o?.encoding);return st(c)}if(ot(a)){const c=a.receiverPublicKey,h=a.senderPublicKey;i=await this.generateSharedKey(c,h)}try{const c=this.getSymKey(i),h=fs({symKey:c,encoded:n,encoding:o?.encoding});return st(h)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),S(this,\"getPayloadType\",(i,n=ct)=>{const o=at({encoded:i,encoding:n});return Ds(o.type)}),S(this,\"getPayloadSenderPublicKey\",(i,n=ct)=>{const o=at({encoded:i,encoding:n});return o.senderPublicKey?Us(o.senderPublicKey,vs):void 0}),this.core=e,this.logger=N(t,this.name),this.keychain=s||new Di(this.core,this.logger)}get context(){return U(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e=\"\";try{e=this.keychain.get(ke)}catch{e=Ae(),await this.keychain.set(ke,e)}return Pn(e,\"base16\")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var xn=Object.defineProperty,Nn=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,wi=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Ln=Object.prototype.propertyIsEnumerable,Ve=(r,e,t)=>e in r?xn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kn=(r,e)=>{for(var t in e||(e={}))zn.call(e,t)&&Ve(r,t,e[t]);if(wi)for(var t of wi(e))Ln.call(e,t)&&Ve(r,t,e[t]);return r},jn=(r,e)=>Nn(r,$n(e)),k=(r,e,t)=>Ve(r,typeof e!=\"symbol\"?e+\"\":e,t);class _i extends Xi{constructor(e,t){super(e,t),this.logger=e,this.core=t,k(this,\"messages\",new Map),k(this,\"messagesWithoutClientAck\",new Map),k(this,\"name\",Rt),k(this,\"version\",Ot),k(this,\"initialized\",!1),k(this,\"storagePrefix\",B),k(this,\"init\",async()=>{if(!this.initialized){this.logger.trace(\"Initialized\");try{const s=await this.getRelayerMessages();typeof s<\"u\"&&(this.messages=s);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<\"u\"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:\"method\",method:\"restore\",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}}),k(this,\"set\",async(s,i,n)=>{this.isInitialized();const o=ve(i);let a=this.messages.get(s);if(typeof a>\"u\"&&(a={}),typeof a[o]<\"u\")return o;if(a[o]=i,this.messages.set(s,a),n===le.inbound){const c=this.messagesWithoutClientAck.get(s)||{};this.messagesWithoutClientAck.set(s,jn(kn({},c),{[o]:i}))}return await this.persist(),o}),k(this,\"get\",s=>{this.isInitialized();let i=this.messages.get(s);return typeof i>\"u\"&&(i={}),i}),k(this,\"getWithoutAck\",s=>{this.isInitialized();const i={};for(const n of s){const o=this.messagesWithoutClientAck.get(n)||{};i[n]=Object.values(o)}return i}),k(this,\"has\",(s,i)=>{this.isInitialized();const n=this.get(s),o=ve(i);return typeof n[o]<\"u\"}),k(this,\"ack\",async(s,i)=>{this.isInitialized();const n=this.messagesWithoutClientAck.get(s);if(typeof n>\"u\")return;const o=ve(i);delete n[o],Object.keys(n).length===0?this.messagesWithoutClientAck.delete(s):this.messagesWithoutClientAck.set(s,n),await this.persist()}),k(this,\"del\",async s=>{this.isInitialized(),this.messages.delete(s),this.messagesWithoutClientAck.delete(s),await this.persist()}),this.logger=N(e,this.name),this.core=t}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name+\"_withoutClientAck\"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Re(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Re(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<\"u\"?Oe(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<\"u\"?Oe(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var Un=Object.defineProperty,Mn=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,Ei=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable,qe=(r,e,t)=>e in r?Un(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ie=(r,e)=>{for(var t in e||(e={}))Kn.call(e,t)&&qe(r,t,e[t]);if(Ei)for(var t of Ei(e))Bn.call(e,t)&&qe(r,t,e[t]);return r},Ge=(r,e)=>Mn(r,Fn(e)),V=(r,e,t)=>qe(r,typeof e!=\"symbol\"?e+\"\":e,t);class Vn extends Zi{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,V(this,\"events\",new ee),V(this,\"name\",At),V(this,\"queue\",new Map),V(this,\"publishTimeout\",O(tt)),V(this,\"initialPublishTimeout\",O(Z*15)),V(this,\"needsTransportRestart\",!1),V(this,\"publish\",async(s,i,n)=>{var o;this.logger.debug(\"Publishing Payload\"),this.logger.trace({type:\"method\",method:\"publish\",params:{topic:s,message:i,opts:n}});const a=n?.ttl||je,c=we(n),h=n?.prompt||!1,u=n?.tag||0,d=n?.id||mt().toString(),g={topic:s,message:i,opts:{ttl:a,relay:c,prompt:h,tag:u,id:d,attestation:n?.attestation,tvf:n?.tvf}},_=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const l=new Promise(async b=>{const x=({id:D})=>{g.opts.id===D&&(this.removeRequestFromQueue(D),this.relayer.events.removeListener(C.publish,x),b(g))};this.relayer.events.on(C.publish,x);const I=X(new Promise((D,j)=>{this.rpcPublish({topic:s,message:i,ttl:a,prompt:h,tag:u,id:d,attestation:n?.attestation,tvf:n?.tvf}).then(D).catch(T=>{this.logger.warn(T,T?.message),j(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await I,this.events.removeListener(C.publish,x)}catch(D){this.queue.set(d,Ge(Ie({},g),{attempt:1})),this.logger.warn(D,D?.message)}});this.logger.trace({type:\"method\",method:\"publish\",params:{id:d,topic:s,message:i,opts:n}}),await X(l,this.publishTimeout,_)}catch(l){if(this.logger.debug(\"Failed to Publish Payload\"),this.logger.error(l),(o=n?.internal)!=null&&o.throwOnFailedPublish)throw l}finally{this.queue.delete(d)}}),V(this,\"on\",(s,i)=>{this.events.on(s,i)}),V(this,\"once\",(s,i)=>{this.events.once(s,i)}),V(this,\"off\",(s,i)=>{this.events.off(s,i)}),V(this,\"removeListener\",(s,i)=>{this.events.removeListener(s,i)}),this.relayer=e,this.logger=N(t,this.name),this.registerEventListeners()}get context(){return U(this.logger)}async rpcPublish(e){var t,s,i,n;const{topic:o,message:a,ttl:c=je,prompt:h,tag:u,id:d,attestation:g,tvf:_}=e,l={method:oe(we().protocol).publish,params:Ie({topic:o,message:a,ttl:c,prompt:h,tag:u,attestation:g},_),id:d};xe((t=l.params)==null?void 0:t.prompt)&&((s=l.params)==null||delete s.prompt),xe((i=l.params)==null?void 0:i.tag)&&((n=l.params)==null||delete n.tag),this.logger.debug(\"Outgoing Relay Payload\"),this.logger.trace({type:\"message\",direction:\"outgoing\",request:l});const b=await this.relayer.request(l);return this.relayer.events.emit(C.publish,e),this.logger.debug(\"Successfully Published Payload\"),b}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const s=e.attempt+1;this.queue.set(t,Ge(Ie({},e),{attempt:s}));const{topic:i,message:n,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${s}`),await this.rpcPublish(Ge(Ie({},e),{topic:i,message:n,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ne.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(C.connection_stalled);return}this.checkQueue()}),this.relayer.on(C.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var qn=Object.defineProperty,Gn=(r,e,t)=>e in r?qn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,re=(r,e,t)=>Gn(r,typeof e!=\"symbol\"?e+\"\":e,t);class Wn{constructor(){re(this,\"map\",new Map),re(this,\"set\",(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])}),re(this,\"get\",e=>this.map.get(e)||[]),re(this,\"exists\",(e,t)=>this.get(e).includes(t)),re(this,\"delete\",(e,t)=>{if(typeof t>\"u\"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const i=s.filter(n=>n!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),re(this,\"clear\",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Hn=Object.defineProperty,Yn=Object.defineProperties,Jn=Object.getOwnPropertyDescriptors,Ii=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,We=(r,e,t)=>e in r?Hn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ge=(r,e)=>{for(var t in e||(e={}))Xn.call(e,t)&&We(r,t,e[t]);if(Ii)for(var t of Ii(e))Zn.call(e,t)&&We(r,t,e[t]);return r},He=(r,e)=>Yn(r,Jn(e)),f=(r,e,t)=>We(r,typeof e!=\"symbol\"?e+\"\":e,t);class Ti extends Qi{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,f(this,\"subscriptions\",new Map),f(this,\"topicMap\",new Wn),f(this,\"events\",new ee),f(this,\"name\",Ut),f(this,\"version\",Mt),f(this,\"pending\",new Map),f(this,\"cached\",[]),f(this,\"initialized\",!1),f(this,\"storagePrefix\",B),f(this,\"subscribeTimeout\",O(tt)),f(this,\"initialSubscribeTimeout\",O(Z*15)),f(this,\"clientId\"),f(this,\"batchSubscribeTopicsLimit\",500),f(this,\"init\",async()=>{this.initialized||(this.logger.trace(\"Initialized\"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),f(this,\"subscribe\",async(s,i)=>{this.isInitialized(),this.logger.debug(\"Subscribing Topic\"),this.logger.trace({type:\"method\",method:\"subscribe\",params:{topic:s,opts:i}});try{const n=we(i),o={topic:s,relay:n,transportType:i?.transportType};this.pending.set(s,o);const a=await this.rpcSubscribe(s,n,i);return typeof a==\"string\"&&(this.onSubscribe(a,o),this.logger.debug(\"Successfully Subscribed Topic\"),this.logger.trace({type:\"method\",method:\"subscribe\",params:{topic:s,opts:i}})),a}catch(n){throw this.logger.debug(\"Failed to Subscribe Topic\"),this.logger.error(n),n}}),f(this,\"unsubscribe\",async(s,i)=>{this.isInitialized(),typeof i?.id<\"u\"?await this.unsubscribeById(s,i.id,i):await this.unsubscribeByTopic(s,i)}),f(this,\"isSubscribed\",s=>new Promise(i=>{i(this.topicMap.topics.includes(s))})),f(this,\"isKnownTopic\",s=>new Promise(i=>{i(this.topicMap.topics.includes(s)||this.pending.has(s)||this.cached.some(n=>n.topic===s))})),f(this,\"on\",(s,i)=>{this.events.on(s,i)}),f(this,\"once\",(s,i)=>{this.events.once(s,i)}),f(this,\"off\",(s,i)=>{this.events.off(s,i)}),f(this,\"removeListener\",(s,i)=>{this.events.removeListener(s,i)}),f(this,\"start\",async()=>{await this.onConnect()}),f(this,\"stop\",async()=>{await this.onDisconnect()}),f(this,\"restart\",async()=>{await this.restore(),await this.onRestart()}),f(this,\"checkPending\",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const s=[];this.pending.forEach(i=>{s.push(i)}),await this.batchSubscribe(s)}),f(this,\"registerEventListeners\",()=>{this.relayer.core.heartbeat.on(ne.pulse,async()=>{await this.checkPending()}),this.events.on($.created,async s=>{const i=$.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:\"event\",event:i,data:s}),await this.persist()}),this.events.on($.deleted,async s=>{const i=$.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:\"event\",event:i,data:s}),await this.persist()})}),this.relayer=e,this.logger=N(t,this.name),this.clientId=\"\"}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+\"//\"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,s){this.logger.debug(\"Unsubscribing Topic\"),this.logger.trace({type:\"method\",method:\"unsubscribe\",params:{topic:e,id:t,opts:s}});try{const i=we(s);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const n=ae(\"USER_DISCONNECTED\",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug(\"Successfully Unsubscribed Topic\"),this.logger.trace({type:\"method\",method:\"unsubscribe\",params:{topic:e,id:t,opts:s}})}catch(i){throw this.logger.debug(\"Failed to Unsubscribe Topic\"),this.logger.error(i),i}}async rpcSubscribe(e,t,s){var i;(!s||s?.transportType===Q.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const n={method:oe(t.protocol).subscribe,params:{topic:e}};this.logger.debug(\"Outgoing Relay Payload\"),this.logger.trace({type:\"payload\",direction:\"outgoing\",request:n});const o=(i=s?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(s?.transportType===Q.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(u=>this.logger.warn(u))},O(Z)),a;const c=new Promise(async u=>{const d=g=>{g.topic===e&&(this.events.removeListener($.created,d),u(g.id))};this.events.on($.created,d);try{const g=await X(new Promise((_,l)=>{this.relayer.request(n).catch(b=>{this.logger.warn(b,b?.message),l(b)}).then(_)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener($.created,d),u(g)}catch{}}),h=await X(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return h?a:null}catch(a){if(this.logger.debug(\"Outgoing Relay Subscribe Payload stalled\"),this.relayer.events.emit(C.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:oe(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug(\"Outgoing Relay Payload\"),this.logger.trace({type:\"payload\",direction:\"outgoing\",request:s});try{await await X(new Promise(i=>{this.relayer.request(s).catch(n=>this.logger.warn(n)).then(i)}),this.subscribeTimeout,\"rpcBatchSubscribe failed, please try again\")}catch{this.relayer.events.emit(C.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,s={method:oe(t.protocol).batchFetchMessages,params:{topics:e.map(n=>n.topic)}};this.logger.debug(\"Outgoing Relay Payload\"),this.logger.trace({type:\"payload\",direction:\"outgoing\",request:s});let i;try{i=await await X(new Promise((n,o)=>{this.relayer.request(s).catch(a=>{this.logger.warn(a),o(a)}).then(n)}),this.subscribeTimeout,\"rpcBatchFetchMessages failed, please try again\")}catch{this.relayer.events.emit(C.connection_stalled)}return i}rpcUnsubscribe(e,t,s){const i={method:oe(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug(\"Outgoing Relay Payload\"),this.logger.trace({type:\"payload\",direction:\"outgoing\",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,He(ge({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ge({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug(\"Setting subscription\"),this.logger.trace({type:\"method\",method:\"setSubscription\",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,ge({},t)),this.topicMap.set(t.topic,e),this.events.emit($.created,t)}getSubscription(e){this.logger.debug(\"Getting subscription\"),this.logger.trace({type:\"method\",method:\"getSubscription\",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=m(\"NO_MATCHING_KEY\",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug(\"Deleting subscription\"),this.logger.trace({type:\"method\",method:\"deleteSubscription\",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit($.deleted,He(ge({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let s=0;s<t;s++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit($.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>\"u\"||!e.length)return;if(this.subscriptions.size){const{message:t}=m(\"RESTORE_WILL_OVERRIDE\",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:\"method\",method:\"restore\",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>He(ge({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await ws(O(Z)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ve(e+await this.getClientId())}}var Qn=Object.defineProperty,Ci=Object.getOwnPropertySymbols,eo=Object.prototype.hasOwnProperty,to=Object.prototype.propertyIsEnumerable,Ye=(r,e,t)=>e in r?Qn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pi=(r,e)=>{for(var t in e||(e={}))eo.call(e,t)&&Ye(r,t,e[t]);if(Ci)for(var t of Ci(e))to.call(e,t)&&Ye(r,t,e[t]);return r},y=(r,e,t)=>Ye(r,typeof e!=\"symbol\"?e+\"\":e,t);class Si extends es{constructor(e){super(e),y(this,\"protocol\",\"wc\"),y(this,\"version\",2),y(this,\"core\"),y(this,\"logger\"),y(this,\"events\",new ee),y(this,\"provider\"),y(this,\"messages\"),y(this,\"subscriber\"),y(this,\"publisher\"),y(this,\"name\",$t),y(this,\"transportExplicitlyClosed\",!1),y(this,\"initialized\",!1),y(this,\"connectionAttemptInProgress\",!1),y(this,\"relayUrl\"),y(this,\"projectId\"),y(this,\"packageName\"),y(this,\"bundleId\"),y(this,\"hasExperiencedNetworkDisruption\",!1),y(this,\"pingTimeout\"),y(this,\"heartBeatTimeout\",O(Se+Pe)),y(this,\"reconnectTimeout\"),y(this,\"connectPromise\"),y(this,\"reconnectInProgress\",!1),y(this,\"requestsInFlight\",[]),y(this,\"connectTimeout\",O(Z*15)),y(this,\"request\",async t=>{var s,i;this.logger.debug(\"Publishing Request Payload\");const n=t.id||mt().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:t.method,topic:(s=t.params)==null?void 0:s.topic},\"relayer.request - publishing...\");const o=`${n}:${((i=t.params)==null?void 0:i.tag)||\"\"}`;this.requestsInFlight.push(o);const a=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${n}`),o}}),y(this,\"resetPingTimeout\",()=>{ut()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,s,i,n;try{this.logger.debug({},\"pingTimeout: Connection stalled, terminating...\"),(n=(i=(s=(t=this.provider)==null?void 0:t.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||n.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),y(this,\"onPayloadHandler\",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),y(this,\"onConnectHandler\",()=>{this.logger.warn({},\"Relayer connected \\u{1F6DC}\"),this.startPingTimeout(),this.events.emit(C.connect)}),y(this,\"onDisconnectHandler\",()=>{this.logger.warn({},\"Relayer disconnected \\u{1F6D1}\"),this.requestsInFlight=[],this.onProviderDisconnect()}),y(this,\"onProviderErrorHandler\",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(C.error,t),this.logger.fatal(\"Fatal socket error received, closing transport\"),this.transportClose()}),y(this,\"registerProviderListeners\",()=>{this.provider.on(L.payload,this.onPayloadHandler),this.provider.on(L.connect,this.onConnectHandler),this.provider.on(L.disconnect,this.onDisconnectHandler),this.provider.on(L.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<\"u\"&&typeof e.logger!=\"string\"?N(e.logger,this.name):Yi(et({level:e.logger||Nt})),this.messages=new _i(this.logger,e.core),this.subscriber=new Ti(this,this.logger),this.publisher=new Vn(this,this.logger),this.relayUrl=e?.relayUrl||Ue,this.projectId=e.projectId,_s()?this.packageName=ht():Es()&&(this.bundleId=ht()),this.provider={}}async init(){if(this.logger.trace(\"Initialized\"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return U(this.logger)}get connected(){var e,t,s;return((s=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:s.readyState)===1||!1}get connecting(){var e,t,s;return((s=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:s.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Q.relay},le.outbound)}async subscribe(e,t){var s,i,n;this.isInitialized(),(!(t!=null&&t.transportType)||t?.transportType===\"relay\")&&await this.toEstablishConnection();const o=typeof((s=t?.internal)==null?void 0:s.throwOnFailedPublish)>\"u\"?!0:(i=t?.internal)==null?void 0:i.throwOnFailedPublish;let a=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||\"\",c;const h=u=>{u.topic===e&&(this.subscriber.off($.created,h),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on($.created,h)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Pi({internal:{throwOnFailedPublish:o}},t)).catch(g=>{o&&d(g)})||a,u()})]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await X(this.provider.disconnect(),2e3,\"provider.disconnect()\").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn(\"Starting WS connection skipped because the client has no topics to work with.\");return}if(this.connectPromise?(this.logger.debug({},\"Waiting for existing connection attempt to resolve...\"),await this.connectPromise,this.logger.debug({},\"Existing connection attempt resolved\")):(this.connectPromise=new Promise(async(t,s)=>{await this.connect(e).then(t).catch(s).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},\"Restarting transport...\"),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await lt())throw new Error(\"No internet connection detected. Please restart your network and try again.\")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace(\"Batch message events is empty. Ignoring...\");return}const t=e.sort((s,i)=>s.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const s of t)try{await this.onMessageEvent(s)}catch(i){this.logger.warn(i,\"Error while processing batch message event: \"+i?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:s}=e;if(!t.sessionExists){const i=ce(fe),n={topic:s,expiry:i,relay:{protocol:\"irn\"},active:!1};await this.core.pairing.pairings.set(s,n)}this.events.emit(C.message,e),await this.recordMessageEvent(e,le.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(s,i)=>{const n=()=>{i(new Error(\"Connection interrupted while trying to subscribe\"))};this.provider.once(L.disconnect,n),await X(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(L.disconnect,n),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error(\"Connection interrupted while trying to subscribe\"))};this.provider.once(L.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(L.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,s()})}catch(s){await this.subscriber.stop();const i=s;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(s=>setTimeout(s,O(t*1))),t++}}startPingTimeout(){var e,t,s,i,n;if(ut())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((n=(i=(s=this.provider)==null?void 0:s.connection)==null?void 0:i.socket)==null||n.on(\"ping\",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ms(new Bs(Is({sdkVersion:_e,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:s,message:i}=e;await this.messages.set(s,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,s);return i&&this.logger.warn(`Ignoring duplicate message: ${s}`),i}async onProviderPayload(e){if(this.logger.debug(\"Incoming Relay Payload\"),this.logger.trace({type:\"payload\",direction:\"incoming\",payload:e}),ft(e)){if(!e.method.endsWith(zt))return;const t=e.params,{topic:s,message:i,publishedAt:n,attestation:o}=t.data,a={topic:s,message:i,publishedAt:n,transportType:Q.relay,attestation:o};this.logger.debug(\"Emitting Relayer Payload\"),this.logger.trace(Pi({type:\"event\",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Dt(e)&&this.events.emit(C.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,le.inbound),this.events.emit(C.message,e))}async acknowledgePayload(e){const t=vt(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(L.payload,this.onPayloadHandler),this.provider.off(L.connect,this.onConnectHandler),this.provider.off(L.disconnect,this.onDisconnectHandler),this.provider.off(L.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await lt();Ts(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(s=>this.logger.error(s,s?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(C.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},O(Lt)))))}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function io(){}function Ri(r){if(!r||typeof r!=\"object\")return!1;const e=Object.getPrototypeOf(r);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(r)===\"[object Object]\":!1}function Oi(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function Ai(r){return r==null?r===void 0?\"[object Undefined]\":\"[object Null]\":Object.prototype.toString.call(r)}const so=\"[object RegExp]\",ro=\"[object String]\",no=\"[object Number]\",oo=\"[object Boolean]\",xi=\"[object Arguments]\",ao=\"[object Symbol]\",co=\"[object Date]\",ho=\"[object Map]\",lo=\"[object Set]\",uo=\"[object Array]\",go=\"[object Function]\",po=\"[object ArrayBuffer]\",Je=\"[object Object]\",yo=\"[object Error]\",bo=\"[object DataView]\",mo=\"[object Uint8Array]\",fo=\"[object Uint8ClampedArray]\",Do=\"[object Uint16Array]\",vo=\"[object Uint32Array]\",wo=\"[object BigUint64Array]\",_o=\"[object Int8Array]\",Eo=\"[object Int16Array]\",Io=\"[object Int32Array]\",To=\"[object BigInt64Array]\",Co=\"[object Float32Array]\",Po=\"[object Float64Array]\";function So(r,e){return r===e||Number.isNaN(r)&&Number.isNaN(e)}function Ro(r,e,t){return pe(r,e,void 0,void 0,void 0,void 0,t)}function pe(r,e,t,s,i,n,o){const a=o(r,e,t,s,i,n);if(a!==void 0)return a;if(typeof r==typeof e)switch(typeof r){case\"bigint\":case\"string\":case\"boolean\":case\"symbol\":case\"undefined\":return r===e;case\"number\":return r===e||Object.is(r,e);case\"function\":return r===e;case\"object\":return ye(r,e,n,o)}return ye(r,e,n,o)}function ye(r,e,t,s){if(Object.is(r,e))return!0;let i=Ai(r),n=Ai(e);if(i===xi&&(i=Je),n===xi&&(n=Je),i!==n)return!1;switch(i){case ro:return r.toString()===e.toString();case no:{const c=r.valueOf(),h=e.valueOf();return So(c,h)}case oo:case co:case ao:return Object.is(r.valueOf(),e.valueOf());case so:return r.source===e.source&&r.flags===e.flags;case go:return r===e}t=t??new Map;const o=t.get(r),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(r,e),t.set(e,r);try{switch(i){case ho:{if(r.size!==e.size)return!1;for(const[c,h]of r.entries())if(!e.has(c)||!pe(h,e.get(c),c,r,e,t,s))return!1;return!0}case lo:{if(r.size!==e.size)return!1;const c=Array.from(r.values()),h=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],g=h.findIndex(_=>pe(d,_,void 0,r,e,t,s));if(g===-1)return!1;h.splice(g,1)}return!0}case uo:case mo:case fo:case Do:case vo:case wo:case _o:case Eo:case Io:case To:case Co:case Po:{if(typeof Buffer<\"u\"&&Buffer.isBuffer(r)!==Buffer.isBuffer(e)||r.length!==e.length)return!1;for(let c=0;c<r.length;c++)if(!pe(r[c],e[c],c,r,e,t,s))return!1;return!0}case po:return r.byteLength!==e.byteLength?!1:ye(new Uint8Array(r),new Uint8Array(e),t,s);case bo:return r.byteLength!==e.byteLength||r.byteOffset!==e.byteOffset?!1:ye(new Uint8Array(r),new Uint8Array(e),t,s);case yo:return r.name===e.name&&r.message===e.message;case Je:{if(!(ye(r.constructor,e.constructor,t,s)||Ri(r)&&Ri(e)))return!1;const h=[...Object.keys(r),...Oi(r)],u=[...Object.keys(e),...Oi(e)];if(h.length!==u.length)return!1;for(let d=0;d<h.length;d++){const g=h[d],_=r[g];if(!Object.hasOwn(e,g))return!1;const l=e[g];if(!pe(_,l,g,r,e,t,s))return!1}return!0}default:return!1}}finally{t.delete(r),t.delete(e)}}function Oo(r,e){return Ro(r,e,io)}var Ao=Object.defineProperty,Ni=Object.getOwnPropertySymbols,xo=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,Xe=(r,e,t)=>e in r?Ao(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$i=(r,e)=>{for(var t in e||(e={}))xo.call(e,t)&&Xe(r,t,e[t]);if(Ni)for(var t of Ni(e))No.call(e,t)&&Xe(r,t,e[t]);return r},z=(r,e,t)=>Xe(r,typeof e!=\"symbol\"?e+\"\":e,t);class zi extends ts{constructor(e,t,s,i=B,n=void 0){super(e,t,s,i),this.core=e,this.logger=t,this.name=s,z(this,\"map\",new Map),z(this,\"version\",kt),z(this,\"cached\",[]),z(this,\"initialized\",!1),z(this,\"getKey\"),z(this,\"storagePrefix\",B),z(this,\"recentlyDeleted\",[]),z(this,\"recentlyDeletedLimit\",200),z(this,\"init\",async()=>{this.initialized||(this.logger.trace(\"Initialized\"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!xe(o)?this.map.set(this.getKey(o),o):Cs(o)?this.map.set(o.id,o):Ps(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),z(this,\"set\",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug(\"Setting value\"),this.logger.trace({type:\"method\",method:\"set\",key:o,value:a}),this.map.set(o,a),await this.persist())}),z(this,\"get\",o=>(this.isInitialized(),this.logger.debug(\"Getting value\"),this.logger.trace({type:\"method\",method:\"get\",key:o}),this.getData(o))),z(this,\"getAll\",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Oo(a[c],o[c]))):this.values)),z(this,\"update\",async(o,a)=>{this.isInitialized(),this.logger.debug(\"Updating value\"),this.logger.trace({type:\"method\",method:\"update\",key:o,update:a});const c=$i($i({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),z(this,\"delete\",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug(\"Deleting value\"),this.logger.trace({type:\"method\",method:\"delete\",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=N(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:i}=m(\"MISSING_OR_INVALID\",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:s}=m(\"NO_MATCHING_KEY\",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>\"u\"||!e.length)return;if(this.map.size){const{message:t}=m(\"RESTORE_WILL_OVERRIDE\",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:\"method\",method:\"restore\",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var $o=Object.defineProperty,zo=(r,e,t)=>e in r?$o(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e,t)=>zo(r,typeof e!=\"symbol\"?e+\"\":e,t);class Li{constructor(e,t){this.core=e,this.logger=t,p(this,\"name\",Ft),p(this,\"version\",Kt),p(this,\"events\",new Gi),p(this,\"pairings\"),p(this,\"initialized\",!1),p(this,\"storagePrefix\",B),p(this,\"ignoredPayloadTypes\",[Rs]),p(this,\"registeredMethods\",[]),p(this,\"init\",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace(\"Initialized\"))}),p(this,\"register\",({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]}),p(this,\"create\",async s=>{this.isInitialized();const i=Ae(),n=await this.core.crypto.setSymKey(i),o=ce(fe),a={protocol:xt},c={topic:n,expiry:o,relay:a,active:!1,methods:s?.methods},h=dt({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:i,relay:a,expiryTimestamp:o,methods:s?.methods});return this.events.emit(se.create,c),this.core.expirer.set(n,o),await this.pairings.set(n,c),await this.core.relayer.subscribe(n,{transportType:s?.transportType}),{topic:n,uri:h}}),p(this,\"pair\",async s=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:s?.uri,trace:[G.pairing_started]}});this.isValidPair(s,i);const{topic:n,symKey:o,relay:a,expiryTimestamp:c,methods:h}=gt(s.uri);i.props.properties.topic=n,i.addTrace(G.pairing_uri_validation_success),i.addTrace(G.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(n)){if(u=this.pairings.get(n),i.addTrace(G.existing_pairing),u.active)throw i.setError(Y.active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);i.addTrace(G.pairing_not_expired)}const d=c||ce(fe),g={topic:n,relay:a,expiry:d,active:!1,methods:h};this.core.expirer.set(n,d),await this.pairings.set(n,g),i.addTrace(G.store_new_pairing),s.activatePairing&&await this.activate({topic:n}),this.events.emit(se.create,g),i.addTrace(G.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(o,n),i.addTrace(G.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Y.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:a})}catch(_){throw i.setError(Y.subscribe_pairing_topic_failure),_}return i.addTrace(G.subscribe_pairing_topic_success),g}),p(this,\"activate\",async({topic:s})=>{this.isInitialized();const i=ce(fe);this.core.expirer.set(s,i),await this.pairings.update(s,{active:!0,expiry:i})}),p(this,\"ping\",async s=>{this.isInitialized(),await this.isValidPing(s),this.logger.warn(\"ping() is deprecated and will be removed in the next major release.\");const{topic:i}=s;if(this.pairings.keys.includes(i)){const n=await this.sendRequest(i,\"wc_pairingPing\",{}),{done:o,resolve:a,reject:c}=Os();this.events.once(Ne(\"pairing_ping\",n),({error:h})=>{h?c(h):a()}),await o()}}),p(this,\"updateExpiry\",async({topic:s,expiry:i})=>{this.isInitialized(),await this.pairings.update(s,{expiry:i})}),p(this,\"updateMetadata\",async({topic:s,metadata:i})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:i})}),p(this,\"getPairings\",()=>(this.isInitialized(),this.pairings.values)),p(this,\"disconnect\",async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:i}=s;this.pairings.keys.includes(i)&&(await this.sendRequest(i,\"wc_pairingDelete\",ae(\"USER_DISCONNECTED\")),await this.deletePairing(i))}),p(this,\"formatUriFromPairing\",s=>{this.isInitialized();const{topic:i,relay:n,expiry:o,methods:a}=s,c=this.core.crypto.keychain.get(i);return dt({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:n,expiryTimestamp:o,methods:a})}),p(this,\"sendRequest\",async(s,i,n)=>{const o=wt(i,n),a=await this.core.crypto.encode(s,o),c=ie[i].req;return this.core.history.set(s,o),this.core.relayer.publish(s,a,c),o.id}),p(this,\"sendResult\",async(s,i,n)=>{const o=vt(s,n),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,s)).request.method,h=ie[c].res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)}),p(this,\"sendError\",async(s,i,n)=>{const o=Fs(s,n),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,s)).request.method,h=ie[c]?ie[c].res:ie.unregistered_method.res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)}),p(this,\"deletePairing\",async(s,i)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,ae(\"USER_DISCONNECTED\")),this.core.crypto.deleteSymKey(s),i?Promise.resolve():this.core.expirer.del(s)])}),p(this,\"cleanup\",async()=>{const s=this.pairings.getAll().filter(i=>pt(i.expiry));await Promise.all(s.map(i=>this.deletePairing(i.topic)))}),p(this,\"onRelayEventRequest\",async s=>{const{topic:i,payload:n}=s;switch(n.method){case\"wc_pairingPing\":return await this.onPairingPingRequest(i,n);case\"wc_pairingDelete\":return await this.onPairingDeleteRequest(i,n);default:return await this.onUnknownRpcMethodRequest(i,n)}}),p(this,\"onRelayEventResponse\",async s=>{const{topic:i,payload:n}=s,o=(await this.core.history.get(i,n.id)).request.method;switch(o){case\"wc_pairingPing\":return this.onPairingPingResponse(i,n);default:return this.onUnknownRpcMethodResponse(o)}}),p(this,\"onPairingPingRequest\",async(s,i)=>{const{id:n}=i;try{this.isValidPing({topic:s}),await this.sendResult(n,s,!0),this.events.emit(se.ping,{id:n,topic:s})}catch(o){await this.sendError(n,s,o),this.logger.error(o)}}),p(this,\"onPairingPingResponse\",(s,i)=>{const{id:n}=i;setTimeout(()=>{Ks(i)?this.events.emit(Ne(\"pairing_ping\",n),{}):_t(i)&&this.events.emit(Ne(\"pairing_ping\",n),{error:i.error})},500)}),p(this,\"onPairingDeleteRequest\",async(s,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(se.delete,{id:n,topic:s})}catch(o){await this.sendError(n,s,o),this.logger.error(o)}}),p(this,\"onUnknownRpcMethodRequest\",async(s,i)=>{const{id:n,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=ae(\"WC_METHOD_UNSUPPORTED\",o);await this.sendError(n,s,a),this.logger.error(a)}catch(a){await this.sendError(n,s,a),this.logger.error(a)}}),p(this,\"onUnknownRpcMethodResponse\",s=>{this.registeredMethods.includes(s)||this.logger.error(ae(\"WC_METHOD_UNSUPPORTED\",s))}),p(this,\"isValidPair\",(s,i)=>{var n;if(!$e(s)){const{message:a}=m(\"MISSING_OR_INVALID\",`pair() params: ${s}`);throw i.setError(Y.malformed_pairing_uri),new Error(a)}if(!As(s.uri)){const{message:a}=m(\"MISSING_OR_INVALID\",`pair() uri: ${s.uri}`);throw i.setError(Y.malformed_pairing_uri),new Error(a)}const o=gt(s?.uri);if(!((n=o?.relay)!=null&&n.protocol)){const{message:a}=m(\"MISSING_OR_INVALID\",\"pair() uri#relay-protocol\");throw i.setError(Y.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=m(\"MISSING_OR_INVALID\",\"pair() uri#symKey\");throw i.setError(Y.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&O(o?.expiryTimestamp)<Date.now()){i.setError(Y.pairing_expired);const{message:a}=m(\"EXPIRED\",\"pair() URI has expired. Please try again with a new connection URI.\");throw new Error(a)}}),p(this,\"isValidPing\",async s=>{if(!$e(s)){const{message:n}=m(\"MISSING_OR_INVALID\",`ping() params: ${s}`);throw new Error(n)}const{topic:i}=s;await this.isValidPairingTopic(i)}),p(this,\"isValidDisconnect\",async s=>{if(!$e(s)){const{message:n}=m(\"MISSING_OR_INVALID\",`disconnect() params: ${s}`);throw new Error(n)}const{topic:i}=s;await this.isValidPairingTopic(i)}),p(this,\"isValidPairingTopic\",async s=>{if(!xs(s,!1)){const{message:i}=m(\"MISSING_OR_INVALID\",`pairing topic should be a string: ${s}`);throw new Error(i)}if(!this.pairings.keys.includes(s)){const{message:i}=m(\"NO_MATCHING_KEY\",`pairing topic doesn't exist: ${s}`);throw new Error(i)}if(pt(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:i}=m(\"EXPIRED\",`pairing topic: ${s}`);throw new Error(i)}}),this.core=e,this.logger=N(t,this.name),this.pairings=new zi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return U(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(C.message,async e=>{const{topic:t,message:s,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==Q.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))try{const n=await this.core.crypto.decode(t,s);ft(n)?(this.core.history.set(t,n),await this.onRelayEventRequest({topic:t,payload:n})):Dt(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id)),await this.core.relayer.messages.ack(t,s)}catch(n){this.logger.error(n)}})}registerExpirerEvents(){this.core.expirer.on(F.expired,async e=>{const{topic:t}=Ss(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(se.expire,{topic:t}))})}}var Lo=Object.defineProperty,ko=(r,e,t)=>e in r?Lo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e,t)=>ko(r,typeof e!=\"symbol\"?e+\"\":e,t);class ki extends is{constructor(e,t){super(e,t),this.core=e,this.logger=t,R(this,\"records\",new Map),R(this,\"events\",new ee),R(this,\"name\",Bt),R(this,\"version\",Vt),R(this,\"cached\",[]),R(this,\"initialized\",!1),R(this,\"storagePrefix\",B),R(this,\"init\",async()=>{this.initialized||(this.logger.trace(\"Initialized\"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),R(this,\"set\",(s,i,n)=>{if(this.isInitialized(),this.logger.debug(\"Setting JSON-RPC request history record\"),this.logger.trace({type:\"method\",method:\"set\",topic:s,request:i,chainId:n}),this.records.has(i.id))return;const o={id:i.id,topic:s,request:{method:i.method,params:i.params||null},chainId:n,expiry:ce(Ce)};this.records.set(o.id,o),this.persist(),this.events.emit(M.created,o)}),R(this,\"resolve\",async s=>{if(this.isInitialized(),this.logger.debug(\"Updating JSON-RPC response history record\"),this.logger.trace({type:\"method\",method:\"update\",response:s}),!this.records.has(s.id))return;const i=await this.getRecord(s.id);typeof i.response>\"u\"&&(i.response=_t(s)?{error:s.error}:{result:s.result},this.records.set(i.id,i),this.persist(),this.events.emit(M.updated,i))}),R(this,\"get\",async(s,i)=>(this.isInitialized(),this.logger.debug(\"Getting record\"),this.logger.trace({type:\"method\",method:\"get\",topic:s,id:i}),await this.getRecord(i))),R(this,\"delete\",(s,i)=>{this.isInitialized(),this.logger.debug(\"Deleting record\"),this.logger.trace({type:\"method\",method:\"delete\",id:i}),this.values.forEach(n=>{if(n.topic===s){if(typeof i<\"u\"&&n.id!==i)return;this.records.delete(n.id),this.events.emit(M.deleted,n)}}),this.persist()}),R(this,\"exists\",async(s,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===s:!1)),R(this,\"on\",(s,i)=>{this.events.on(s,i)}),R(this,\"once\",(s,i)=>{this.events.once(s,i)}),R(this,\"off\",(s,i)=>{this.events.off(s,i)}),R(this,\"removeListener\",(s,i)=>{this.events.removeListener(s,i)}),this.logger=N(t,this.name)}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<\"u\")return;const s={topic:t.topic,request:wt(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=m(\"NO_MATCHING_KEY\",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(M.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>\"u\"||!e.length)return;if(this.records.size){const{message:t}=m(\"RESTORE_WILL_OVERRIDE\",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:\"method\",method:\"restore\",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(M.created,e=>{const t=M.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,record:e})}),this.events.on(M.updated,e=>{const t=M.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,record:e})}),this.events.on(M.deleted,e=>{const t=M.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,record:e})}),this.core.heartbeat.on(ne.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{O(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(M.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var jo=Object.defineProperty,Uo=(r,e,t)=>e in r?jo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,A=(r,e,t)=>Uo(r,typeof e!=\"symbol\"?e+\"\":e,t);class ji extends ss{constructor(e,t){super(e,t),this.core=e,this.logger=t,A(this,\"expirations\",new Map),A(this,\"events\",new ee),A(this,\"name\",qt),A(this,\"version\",Gt),A(this,\"cached\",[]),A(this,\"initialized\",!1),A(this,\"storagePrefix\",B),A(this,\"init\",async()=>{this.initialized||(this.logger.trace(\"Initialized\"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),A(this,\"has\",s=>{try{const i=this.formatTarget(s);return typeof this.getExpiration(i)<\"u\"}catch{return!1}}),A(this,\"set\",(s,i)=>{this.isInitialized();const n=this.formatTarget(s),o={target:n,expiry:i};this.expirations.set(n,o),this.checkExpiry(n,o),this.events.emit(F.created,{target:n,expiration:o})}),A(this,\"get\",s=>{this.isInitialized();const i=this.formatTarget(s);return this.getExpiration(i)}),A(this,\"del\",s=>{if(this.isInitialized(),this.has(s)){const i=this.formatTarget(s),n=this.getExpiration(i);this.expirations.delete(i),this.events.emit(F.deleted,{target:i,expiration:n})}}),A(this,\"on\",(s,i)=>{this.events.on(s,i)}),A(this,\"once\",(s,i)=>{this.events.once(s,i)}),A(this,\"off\",(s,i)=>{this.events.off(s,i)}),A(this,\"removeListener\",(s,i)=>{this.events.removeListener(s,i)}),this.logger=N(t,this.name)}get context(){return U(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//\"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e==\"string\")return Ns(e);if(typeof e==\"number\")return $s(e);const{message:t}=m(\"UNKNOWN_TYPE\",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(F.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>\"u\"||!e.length)return;if(this.expirations.size){const{message:t}=m(\"RESTORE_WILL_OVERRIDE\",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:\"method\",method:\"restore\",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=m(\"NO_MATCHING_KEY\",`${this.name}: ${e}`);throw this.logger.warn(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;O(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(F.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(ne.pulse,()=>this.checkExpirations()),this.events.on(F.created,e=>{const t=F.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,data:e}),this.persist()}),this.events.on(F.expired,e=>{const t=F.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,data:e}),this.persist()}),this.events.on(F.deleted,e=>{const t=F.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:\"event\",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=m(\"NOT_INITIALIZED\",this.name);throw new Error(e)}}}var Mo=Object.defineProperty,Fo=(r,e,t)=>e in r?Mo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e,t)=>Fo(r,typeof e!=\"symbol\"?e+\"\":e,t);class Ui extends rs{constructor(e,t,s){super(e,t,s),this.core=e,this.logger=t,this.store=s,w(this,\"name\",Wt),w(this,\"abortController\"),w(this,\"isDevEnv\"),w(this,\"verifyUrlV3\",Yt),w(this,\"storagePrefix\",B),w(this,\"version\",Le),w(this,\"publicKey\"),w(this,\"fetchPromise\"),w(this,\"init\",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&O((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug(\"verify v2 public key expired\"),await this.removePublicKey()))}),w(this,\"register\",async i=>{if(!zs()||this.isDevEnv)return;const n=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${n}&id=${o}&decryptedId=${a}`;try{const h=Vs(),u=this.startAbortTimer(Z*5),d=await new Promise((g,_)=>{const l=()=>{window.removeEventListener(\"message\",x),h.body.removeChild(b),_(\"attestation aborted\")};this.abortController.signal.addEventListener(\"abort\",l);const b=h.createElement(\"iframe\");b.src=c,b.style.display=\"none\",b.addEventListener(\"error\",l,{signal:this.abortController.signal});const x=I=>{if(I.data&&typeof I.data==\"string\")try{const D=JSON.parse(I.data);if(D.type===\"verify_attestation\"){if(rt(D.attestation).payload.id!==o)return;clearInterval(u),h.body.removeChild(b),this.abortController.signal.removeEventListener(\"abort\",l),window.removeEventListener(\"message\",x),g(D.attestation===null?\"\":D.attestation)}}catch(D){this.logger.warn(D)}};h.body.appendChild(b),window.addEventListener(\"message\",x,{signal:this.abortController.signal})});return this.logger.debug(\"jwt attestation\",d),d}catch(h){this.logger.warn(h)}return\"\"}),w(this,\"resolve\",async i=>{if(this.isDevEnv)return\"\";const{attestationId:n,hash:o,encryptedId:a}=i;if(n===\"\"){this.logger.debug(\"resolve: attestationId is empty, skipping\");return}if(n){if(rt(n).payload.id!==a)return;const h=await this.isValidJwtAttestation(n);if(h){if(!h.isVerified){this.logger.warn(\"resolve: jwt attestation: origin url not verified\");return}return h}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),w(this,\"fetchAttestation\",async(i,n)=>{this.logger.debug(`resolving attestation: ${i} from url: ${n}`);const o=this.startAbortTimer(Z*5),a=await fetch(`${n}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),w(this,\"getVerifyUrl\",i=>{let n=i||ue;return Jt.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${ue}`),n=ue),n}),w(this,\"fetchPublicKey\",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Pe),n=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await n.json()}catch(i){this.logger.warn(i)}}),w(this,\"persistPublicKey\",async i=>{this.logger.debug(\"persisting public key to local storage\",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),w(this,\"removePublicKey\",async()=>{this.logger.debug(\"removing verify v2 public key from storage\"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),w(this,\"isValidJwtAttestation\",async i=>{const n=await this.getPublicKey();try{if(n)return this.validateAttestation(i,n)}catch(a){this.logger.error(a),this.logger.warn(\"error validating attestation\")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn(\"error validating attestation\")}}),w(this,\"getPublicKey\",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),w(this,\"fetchAndPersistPublicKey\",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async n=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),n(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),w(this,\"validateAttestation\",(i,n)=>{const o=Ls(i,n.publicKey),a={hasExpired:O(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn(\"resolve: jwt attestation expired\"),new Error(\"JWT attestation expired\");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=N(t,this.name),this.abortController=new AbortController,this.isDevEnv=yt(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+\"//verify:public:key\"}get context(){return U(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),O(e))}}var Ko=Object.defineProperty,Bo=(r,e,t)=>e in r?Ko(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mi=(r,e,t)=>Bo(r,typeof e!=\"symbol\"?e+\"\":e,t);class Fi extends ns{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Mi(this,\"context\",Xt),Mi(this,\"registerDeviceToken\",async s=>{const{clientId:i,token:n,notificationType:o,enableEncrypted:a=!1}=s,c=`${Zt}/${this.projectId}/clients`;await fetch(c,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({client_id:i,type:o,token:n,always_raw:a})})}),this.logger=N(t,this.context)}}var Vo=Object.defineProperty,Ki=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,Ze=(r,e,t)=>e in r?Vo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,be=(r,e)=>{for(var t in e||(e={}))qo.call(e,t)&&Ze(r,t,e[t]);if(Ki)for(var t of Ki(e))Go.call(e,t)&&Ze(r,t,e[t]);return r},E=(r,e,t)=>Ze(r,typeof e!=\"symbol\"?e+\"\":e,t);class Bi extends os{constructor(e,t,s=!0){super(e,t,s),this.core=e,this.logger=t,E(this,\"context\",ei),E(this,\"storagePrefix\",B),E(this,\"storageVersion\",Qt),E(this,\"events\",new Map),E(this,\"shouldPersist\",!1),E(this,\"init\",async()=>{if(!yt())try{const i={eventId:bt(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:\"INIT\",type:\"\",properties:{client_id:await this.core.crypto.getClientId(),user_agent:ks(this.core.relayer.protocol,this.core.relayer.version,_e)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),E(this,\"createEvent\",i=>{const{event:n=\"ERROR\",type:o=\"\",properties:{topic:a,trace:c}}=i,h=bt(),u=this.core.projectId||\"\",d=Date.now(),g=be({eventId:h,timestamp:d,props:{event:n,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,g),this.shouldPersist=!0),g}),E(this,\"getEvent\",i=>{const{eventId:n,topic:o}=i;if(n)return this.events.get(n);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return be(be({},a),this.setMethods(a.eventId))}),E(this,\"deleteEvent\",i=>{const{eventId:n}=i;this.events.delete(n),this.shouldPersist=!0}),E(this,\"setEventListeners\",()=>{this.core.heartbeat.on(ne.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{it(Date.now())-it(i.timestamp)>ti&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),E(this,\"setMethods\",i=>({addTrace:n=>this.addTrace(i,n),setError:n=>this.setError(i,n)})),E(this,\"addTrace\",(i,n)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(n),this.events.set(i,o),this.shouldPersist=!0)}),E(this,\"setError\",(i,n)=>{const o=this.events.get(i);o&&(o.props.type=n,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),E(this,\"persist\",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),E(this,\"restore\",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(n=>{this.events.set(n.eventId,be(be({},n),this.setMethods(n.eventId)))})}catch(i){this.logger.warn(i)}}),E(this,\"submit\",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[n,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const n of i)this.events.delete(n.eventId),this.shouldPersist=!0}catch(n){this.logger.warn(n)}}),E(this,\"sendEvent\",async i=>{const n=this.getAppDomain()?\"\":\"&sp=desktop\";return await fetch(`${ii}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${_e}${n}`,{method:\"POST\",body:JSON.stringify(i)})}),E(this,\"getAppDomain\",()=>js().url),this.logger=N(t,this.context),this.telemetryEnabled=s,s?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+\"//\"+this.context}}var Wo=Object.defineProperty,Vi=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,Qe=(r,e,t)=>e in r?Wo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qi=(r,e)=>{for(var t in e||(e={}))Ho.call(e,t)&&Qe(r,t,e[t]);if(Vi)for(var t of Vi(e))Yo.call(e,t)&&Qe(r,t,e[t]);return r},v=(r,e,t)=>Qe(r,typeof e!=\"symbol\"?e+\"\":e,t);class Te extends as{constructor(e){var t;super(e),v(this,\"protocol\",ze),v(this,\"version\",Le),v(this,\"name\",he),v(this,\"relayUrl\"),v(this,\"projectId\"),v(this,\"customStoragePrefix\"),v(this,\"events\",new ee),v(this,\"logger\"),v(this,\"heartbeat\"),v(this,\"relayer\"),v(this,\"crypto\"),v(this,\"storage\"),v(this,\"history\"),v(this,\"expirer\"),v(this,\"pairing\"),v(this,\"verify\"),v(this,\"echoClient\"),v(this,\"linkModeSupportedApps\"),v(this,\"eventClient\"),v(this,\"initialized\",!1),v(this,\"logChunkController\"),v(this,\"on\",(o,a)=>this.events.on(o,a)),v(this,\"once\",(o,a)=>this.events.once(o,a)),v(this,\"off\",(o,a)=>this.events.off(o,a)),v(this,\"removeListener\",(o,a)=>this.events.removeListener(o,a)),v(this,\"dispatchEnvelope\",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const h={topic:o,message:a,publishedAt:Date.now(),transportType:Q.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:c})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ue,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:\"\";const s=et({level:typeof e?.logger==\"string\"&&e.logger?e.logger:Et.logger,name:he}),{logger:i,chunkLoggerController:n}=Ji({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=N(i,this.name),this.heartbeat=new Wi,this.crypto=new vi(this,this.logger,e?.keychain),this.history=new ki(this,this.logger),this.expirer=new ji(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Hi(qi(qi({},It),e?.storageOptions)),this.relayer=new Si({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Li(this,this.logger),this.verify=new Ui(this,this.logger,this.storage),this.echoClient=new Fi(this.projectId||\"\",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Bi(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new Te(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(jt,s),t}get context(){return U(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Me,this.linkModeSupportedApps))}async initialize(){this.logger.trace(\"Initialized\");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Me)||[],this.initialized=!0,this.logger.info(\"Core Initialization Success\")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Jo=Te;export{he as CORE_CONTEXT,Et as CORE_DEFAULT,ze as CORE_PROTOCOL,It as CORE_STORAGE_OPTIONS,B as CORE_STORAGE_PREFIX,Le as CORE_VERSION,ke as CRYPTO_CLIENT_SEED,Tt as CRYPTO_CONTEXT,Ct as CRYPTO_JWT_TTL,Jo as Core,vi as Crypto,Xt as ECHO_CONTEXT,Zt as ECHO_URL,ii as EVENTS_CLIENT_API_URL,ti as EVENTS_STORAGE_CLEANUP_INTERVAL,ei as EVENTS_STORAGE_CONTEXT,Qt as EVENTS_STORAGE_VERSION,ir as EVENT_CLIENT_AUTHENTICATE_ERRORS,tr as EVENT_CLIENT_AUTHENTICATE_TRACES,Zs as EVENT_CLIENT_CONTEXT,Y as EVENT_CLIENT_PAIRING_ERRORS,G as EVENT_CLIENT_PAIRING_TRACES,er as EVENT_CLIENT_SESSION_ERRORS,Qs as EVENT_CLIENT_SESSION_TRACES,qt as EXPIRER_CONTEXT,Js as EXPIRER_DEFAULT_TTL,F as EXPIRER_EVENTS,Gt as EXPIRER_STORAGE_VERSION,Fi as EchoClient,Bi as EventClient,ji as Expirer,Bt as HISTORY_CONTEXT,M as HISTORY_EVENTS,Vt as HISTORY_STORAGE_VERSION,ki as JsonRpcHistory,Pt as KEYCHAIN_CONTEXT,St as KEYCHAIN_STORAGE_VERSION,Di as KeyChain,Rt as MESSAGES_CONTEXT,Ot as MESSAGES_STORAGE_VERSION,le as MESSAGE_DIRECTION,_i as MessageTracker,Ft as PAIRING_CONTEXT,Ys as PAIRING_DEFAULT_TTL,se as PAIRING_EVENTS,ie as PAIRING_RPC_OPTS,Kt as PAIRING_STORAGE_VERSION,Hs as PENDING_SUB_RESOLUTION_TIMEOUT,At as PUBLISHER_CONTEXT,je as PUBLISHER_DEFAULT_TTL,Li as Pairing,$t as RELAYER_CONTEXT,Nt as RELAYER_DEFAULT_LOGGER,xt as RELAYER_DEFAULT_PROTOCOL,Ue as RELAYER_DEFAULT_RELAY_URL,C as RELAYER_EVENTS,L as RELAYER_PROVIDER_EVENTS,Lt as RELAYER_RECONNECT_TIMEOUT,_e as RELAYER_SDK_VERSION,qs as RELAYER_STORAGE_OPTIONS,zt as RELAYER_SUBSCRIBER_SUFFIX,Gs as RELAYER_TRANSPORT_CUTOFF,Si as Relayer,kt as STORE_STORAGE_VERSION,Ut as SUBSCRIBER_CONTEXT,Ws as SUBSCRIBER_DEFAULT_TTL,$ as SUBSCRIBER_EVENTS,Mt as SUBSCRIBER_STORAGE_VERSION,zi as Store,Ti as Subscriber,Q as TRANSPORT_TYPES,Jt as TRUSTED_VERIFY_URLS,Wt as VERIFY_CONTEXT,ue as VERIFY_SERVER,Yt as VERIFY_SERVER_V3,Ui as Verify,jt as WALLETCONNECT_CLIENT_ID,Me as WALLETCONNECT_LINK_MODE_APPS,Te as default};\n//# sourceMappingURL=index.es.js.map\n","import{RELAYER_EVENTS as Xe,TRANSPORT_TYPES as P,EXPIRER_EVENTS as Tt,PAIRING_EVENTS as Je,RELAYER_DEFAULT_PROTOCOL as qt,EVENT_CLIENT_SESSION_TRACES as k,EVENT_CLIENT_SESSION_ERRORS as H,EVENT_CLIENT_AUTHENTICATE_TRACES as z,EVENT_CLIENT_AUTHENTICATE_ERRORS as re,EVENT_CLIENT_PAIRING_ERRORS as Pt,EVENT_CLIENT_PAIRING_TRACES as Nt,VERIFY_SERVER as Ot,Store as B,Core as bt}from\"@walletconnect/core\";import{pino as At,getDefaultLoggerOptions as xt,generateChildLogger as Ct,getLoggerContext as Vt}from\"@walletconnect/logger\";import{IEngine as Dt,ISignClient as Lt}from\"@walletconnect/types\";import{THIRTY_DAYS as kt,SEVEN_DAYS as Be,FIVE_MINUTES as C,ONE_DAY as K,ONE_HOUR as We,ONE_SECOND as Ze,toMiliseconds as Oe}from\"@walletconnect/time\";import{getInternalError as y,BASE64URL as ne,BASE64 as de,hashMessage as W,parseExpirerTarget as Mt,isValidString as Y,isExpired as Z,isValidId as $t,calcExpiry as V,engineEvent as R,createDelayedPromise as ee,getSdkError as O,getDeepLink as Ut,handleDeeplinkRedirect as Kt,isSessionCompatible as Gt,hashKey as be,parseChainId as Ae,createEncodedRecap as jt,getRecapFromResources as xe,mergeEncodedRecaps as Ft,TYPE_2 as Qt,getLinkModeURL as ue,validateSignedCacao as et,getNamespacedDidChainId as tt,getDidAddress as st,getMethodsFromRecap as it,getChainsFromRecap as rt,buildNamespacesFromAuth as nt,formatMessage as Ht,MemoryStore as oe,isValidParams as M,isUndefined as X,isValidRelays as zt,isValidObject as ot,isValidRequiredNamespaces as Yt,isValidNamespaces as Ce,isConformingNamespaces as at,isValidErrorReason as Xt,isValidRelay as Jt,isValidController as Bt,isValidNamespacesChainId as ct,isValidRequest as Wt,isValidNamespacesRequest as Zt,isValidRequestExpiry as es,isValidResponse as ts,isValidEvent as ss,isValidNamespacesEvent as is,getSearchParamFromURL as lt,isTestRun as rs,isReactNative as ns,isValidArray as os,extractSolanaTransactionId as as,TYPE_1 as Ve,getAppMetadata as cs}from\"@walletconnect/utils\";import ls,{EventEmitter as ps}from\"events\";import{isJsonRpcRequest as hs,isJsonRpcResponse as ds,payloadId as G,getBigIntRpcId as ge,isJsonRpcResult as j,isJsonRpcError as F,formatJsonRpcRequest as ye,formatJsonRpcResult as us,formatJsonRpcError as gs}from\"@walletconnect/jsonrpc-utils\";const De=\"wc\",Le=2,ke=\"client\",we=`${De}@${Le}:${ke}:`,me={name:ke,logger:\"error\",controller:!1,relayUrl:\"wss://relay.walletconnect.org\"},ys={session_proposal:\"session_proposal\",session_update:\"session_update\",session_extend:\"session_extend\",session_ping:\"session_ping\",session_delete:\"session_delete\",session_expire:\"session_expire\",session_request:\"session_request\",session_request_sent:\"session_request_sent\",session_event:\"session_event\",proposal_expire:\"proposal_expire\",session_authenticate:\"session_authenticate\",session_request_expire:\"session_request_expire\",session_connect:\"session_connect\"},ws={database:\":memory:\"},Me=\"WALLETCONNECT_DEEPLINK_CHOICE\",ms={created:\"history_created\",updated:\"history_updated\",deleted:\"history_deleted\",sync:\"history_sync\"},_s=\"history\",Es=\"0.3\",pt=\"proposal\",fs=kt,$e=\"Proposal expired\",ht=\"session\",J=Be,dt=\"engine\",N={wc_sessionPropose:{req:{ttl:C,prompt:!0,tag:1100},res:{ttl:C,prompt:!1,tag:1101},reject:{ttl:C,prompt:!1,tag:1120},autoReject:{ttl:C,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:C,prompt:!1,tag:1102},res:{ttl:C,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:K,prompt:!1,tag:1104},res:{ttl:K,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:K,prompt:!1,tag:1106},res:{ttl:K,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:C,prompt:!0,tag:1108},res:{ttl:C,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:C,prompt:!0,tag:1110},res:{ttl:C,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:K,prompt:!1,tag:1112},res:{ttl:K,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:K,prompt:!1,tag:1114},res:{ttl:K,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:We,prompt:!0,tag:1116},res:{ttl:We,prompt:!1,tag:1117},reject:{ttl:C,prompt:!1,tag:1118},autoReject:{ttl:C,prompt:!1,tag:1119}}},_e={min:C,max:Be},$={idle:\"IDLE\",active:\"ACTIVE\"},Ue={eth_sendTransaction:{key:\"\"},eth_sendRawTransaction:{key:\"\"},wallet_sendCalls:{key:\"\"},solana_signTransaction:{key:\"signature\"},solana_signAllTransactions:{key:\"transactions\"},solana_signAndSendTransaction:{key:\"signature\"}},ut=\"request\",gt=[\"wc_sessionPropose\",\"wc_sessionRequest\",\"wc_authRequest\",\"wc_sessionAuthenticate\"],yt=\"wc\",Ss=1.5,wt=\"auth\",mt=\"authKeys\",_t=\"pairingTopics\",Et=\"requests\",ae=`${yt}@${1.5}:${wt}:`,ce=`${ae}:PUB_KEY`;var Rs=Object.defineProperty,vs=Object.defineProperties,Is=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Ke=(S,n,e)=>n in S?Rs(S,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):S[n]=e,v=(S,n)=>{for(var e in n||(n={}))Ts.call(n,e)&&Ke(S,e,n[e]);if(ft)for(var e of ft(n))qs.call(n,e)&&Ke(S,e,n[e]);return S},b=(S,n)=>vs(S,Is(n)),c=(S,n,e)=>Ke(S,typeof n!=\"symbol\"?n+\"\":n,e);class Ps extends Dt{constructor(n){super(n),c(this,\"name\",dt),c(this,\"events\",new ls),c(this,\"initialized\",!1),c(this,\"requestQueue\",{state:$.idle,queue:[]}),c(this,\"sessionRequestQueue\",{state:$.idle,queue:[]}),c(this,\"requestQueueDelay\",Ze),c(this,\"expectedPairingMethodMap\",new Map),c(this,\"recentlyDeletedMap\",new Map),c(this,\"recentlyDeletedLimit\",200),c(this,\"relayMessageCache\",[]),c(this,\"pendingSessions\",new Map),c(this,\"init\",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(N)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Oe(this.requestQueueDelay)))}),c(this,\"connect\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=b(v({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:o,scopedProperties:a,relays:l}=t;let p=s,h,u=!1;try{if(p){const T=this.client.core.pairing.pairings.get(p);this.client.logger.warn(\"connect() with existing pairing topic is deprecated and will be removed in the next major release.\"),u=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),T}if(!p||!u){const{topic:T,uri:U}=await this.client.core.pairing.create();p=T,h=U}if(!p){const{message:T}=y(\"NO_MATCHING_KEY\",`connect() pairing topic: ${p}`);throw new Error(T)}const d=await this.client.core.crypto.generateKeyPair(),w=N.wc_sessionPropose.req.ttl||C,m=V(w),f=b(v(v({requiredNamespaces:i,optionalNamespaces:r,relays:l??[{protocol:qt}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:p},o&&{sessionProperties:o}),a&&{scopedProperties:a}),{id:G()}),_=R(\"session_connect\",f.id),{reject:g,resolve:A,done:D}=ee(w,$e),I=({id:T})=>{T===f.id&&(this.client.events.off(\"proposal_expire\",I),this.pendingSessions.delete(f.id),this.events.emit(_,{error:{message:$e,code:0}}))};return this.client.events.on(\"proposal_expire\",I),this.events.once(_,({error:T,session:U})=>{this.client.events.off(\"proposal_expire\",I),T?g(T):U&&A(U)}),await this.sendRequest({topic:p,method:\"wc_sessionPropose\",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:h,approval:D}}),c(this,\"pair\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(t){throw this.client.logger.error(\"pair() failed\"),t}}),c(this,\"approve\",async e=>{var t,s,i;const r=this.client.core.eventClient.createEvent({properties:{topic:(t=e?.id)==null?void 0:t.toString(),trace:[k.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(q){throw r.setError(H.no_internet_connection),q}try{await this.isValidProposalId(e?.id)}catch(q){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),r.setError(H.proposal_not_found),q}try{await this.isValidApprove(e)}catch(q){throw this.client.logger.error(\"approve() -> isValidApprove() failed\"),r.setError(H.session_approve_namespace_validation_failure),q}const{id:o,relayProtocol:a,namespaces:l,sessionProperties:p,scopedProperties:h,sessionConfig:u}=e,d=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:r.eventId});const{pairingTopic:w,proposer:m,requiredNamespaces:f,optionalNamespaces:_}=d;let g=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:w});g||(g=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:k.session_approve_started,properties:{topic:w,trace:[k.session_approve_started,k.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),D=m.publicKey,I=await this.client.core.crypto.generateSharedKey(A,D),T=v(v(v({relay:{protocol:a??\"irn\"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:V(J)},p&&{sessionProperties:p}),h&&{scopedProperties:h}),u&&{sessionConfig:u}),U=P.relay;g.addTrace(k.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:U})}catch(q){throw g.setError(H.subscribe_session_topic_failure),q}g.addTrace(k.subscribe_session_topic_success);const fe=b(v({},T),{topic:I,requiredNamespaces:f,optionalNamespaces:_,pairingTopic:w,acknowledged:!1,self:T.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:A,transportType:P.relay});await this.client.session.set(I,fe),g.addTrace(k.store_session);try{g.addTrace(k.publishing_session_settle),await this.sendRequest({topic:I,method:\"wc_sessionSettle\",params:T,throwOnFailedPublish:!0}).catch(q=>{throw g?.setError(H.session_settle_publish_failure),q}),g.addTrace(k.session_settle_publish_success),g.addTrace(k.publishing_session_approve),await this.sendResult({id:o,topic:w,result:{relay:{protocol:a??\"irn\"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(q=>{throw g?.setError(H.session_approve_publish_failure),q}),g.addTrace(k.session_approve_publish_success)}catch(q){throw this.client.logger.error(q),this.client.session.delete(I,O(\"USER_DISCONNECTED\")),await this.client.core.relayer.unsubscribe(I),q}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:w,metadata:m.metadata}),await this.client.proposal.delete(o,O(\"USER_DISCONNECTED\")),await this.client.core.pairing.activate({topic:w}),await this.setExpiry(I,V(J)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),c(this,\"reject\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(r){throw this.client.logger.error(\"reject() -> isValidReject() failed\"),r}const{id:t,reason:s}=e;let i;try{i=this.client.proposal.get(t).pairingTopic}catch(r){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),r}i&&(await this.sendError({id:t,topic:i,error:s,rpcOpts:N.wc_sessionPropose.reject}),await this.client.proposal.delete(t,O(\"USER_DISCONNECTED\")))}),c(this,\"update\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(h){throw this.client.logger.error(\"update() -> isValidUpdate() failed\"),h}const{topic:t,namespaces:s}=e,{done:i,resolve:r,reject:o}=ee(),a=G(),l=ge().toString(),p=this.client.session.get(t).namespaces;return this.events.once(R(\"session_update\",a),({error:h})=>{h?o(h):r()}),await this.client.session.update(t,{namespaces:s}),await this.sendRequest({topic:t,method:\"wc_sessionUpdate\",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(t,{namespaces:p}),o(h)}),{acknowledged:i}}),c(this,\"extend\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(a){throw this.client.logger.error(\"extend() -> isValidExtend() failed\"),a}const{topic:t}=e,s=G(),{done:i,resolve:r,reject:o}=ee();return this.events.once(R(\"session_extend\",s),({error:a})=>{a?o(a):r()}),await this.setExpiry(t,V(J)),this.sendRequest({topic:t,method:\"wc_sessionExtend\",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(a=>{o(a)}),{acknowledged:i}}),c(this,\"request\",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(_){throw this.client.logger.error(\"request() -> isValidRequest() failed\"),_}const{chainId:t,request:s,topic:i,expiry:r=N.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(i);o?.transportType===P.relay&&await this.confirmOnlineStateOrThrow();const a=G(),l=ge().toString(),{done:p,resolve:h,reject:u}=ee(r,\"Request expired. Please try again.\");this.events.once(R(\"session_request\",a),({error:_,result:g})=>{_?u(_):h(g)});const d=\"wc_sessionRequest\",w=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(w)return await this.sendRequest({clientRpcId:a,relayRpcId:l,topic:i,method:d,params:{request:b(v({},s),{expiryTimestamp:V(r)}),chainId:t},expiry:r,throwOnFailedPublish:!0,appLink:w}).catch(_=>u(_)),this.client.events.emit(\"session_request_sent\",{topic:i,request:s,chainId:t,id:a}),await p();const m={request:b(v({},s),{expiryTimestamp:V(r)}),chainId:t},f=this.shouldSetTVF(d,m);return await Promise.all([new Promise(async _=>{await this.sendRequest(v({clientRpcId:a,relayRpcId:l,topic:i,method:d,params:m,expiry:r,throwOnFailedPublish:!0},f&&{tvf:this.getTVFParams(a,m)})).catch(g=>u(g)),this.client.events.emit(\"session_request_sent\",{topic:i,request:s,chainId:t,id:a}),_()}),new Promise(async _=>{var g;if(!((g=o.sessionConfig)!=null&&g.disableDeepLink)){const A=await Ut(this.client.core.storage,Me);await Kt({id:a,topic:i,wcDeepLink:A})}_()}),p()]).then(_=>_[2])}),c(this,\"respond\",async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:s}=e,{id:i}=s,r=this.client.session.get(t);r.transportType===P.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(r.peer.metadata,r.transportType);j(s)?await this.sendResult({id:i,topic:t,result:s.result,throwOnFailedPublish:!0,appLink:o}):F(s)&&await this.sendError({id:i,topic:t,error:s.error,appLink:o}),this.cleanupAfterResponse(e)}),c(this,\"ping\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(s){throw this.client.logger.error(\"ping() -> isValidPing() failed\"),s}const{topic:t}=e;if(this.client.session.keys.includes(t)){const s=G(),i=ge().toString(),{done:r,resolve:o,reject:a}=ee();this.events.once(R(\"session_ping\",s),({error:l})=>{l?a(l):o()}),await Promise.all([this.sendRequest({topic:t,method:\"wc_sessionPing\",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn(\"ping() on pairing topic is deprecated and will be removed in the next major release.\"),await this.client.core.pairing.ping({topic:t}))}),c(this,\"emit\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:s,chainId:i}=e,r=ge().toString(),o=G();await this.sendRequest({topic:t,method:\"wc_sessionEvent\",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:r,clientRpcId:o})}),c(this,\"disconnect\",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:\"wc_sessionDelete\",params:O(\"USER_DISCONNECTED\"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{const{message:s}=y(\"MISMATCHED_TOPIC\",`Session or pairing topic not found: ${t}`);throw new Error(s)}}),c(this,\"find\",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>Gt(t,e)))),c(this,\"getPendingSessionRequests\",()=>this.client.pendingRequest.getAll()),c(this,\"authenticate\",async(e,t)=>{var s;this.isInitialized(),this.isValidAuthenticate(e);const i=t&&this.client.core.linkModeSupportedApps.includes(t)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),r=i?P.link_mode:P.relay;r===P.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:a=\"\",uri:l,domain:p,nonce:h,type:u,exp:d,nbf:w,methods:m=[],expiry:f}=e,_=[...e.resources||[]],{topic:g,uri:A}=await this.client.core.pairing.create({methods:[\"wc_sessionAuthenticate\"],transportType:r});this.client.logger.info({message:\"Generated new pairing\",pairing:{topic:g,uri:A}});const D=await this.client.core.crypto.generateKeyPair(),I=be(D);if(await Promise.all([this.client.auth.authKeys.set(ce,{responseTopic:I,publicKey:D}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:g})]),await this.client.core.relayer.subscribe(I,{transportType:r}),this.client.logger.info(`sending request to new pairing topic: ${g}`),m.length>0){const{namespace:x}=Ae(o[0]);let L=jt(x,\"request\",m);xe(_)&&(L=Ft(L,_.pop())),_.push(L)}const T=f&&f>N.wc_sessionAuthenticate.req.ttl?f:N.wc_sessionAuthenticate.req.ttl,U={authPayload:{type:u??\"caip122\",chains:o,statement:a,aud:l,domain:p,version:\"1\",nonce:h,iat:new Date().toISOString(),exp:d,nbf:w,resources:_},requester:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:V(T)},fe={eip155:{chains:o,methods:[...new Set([\"personal_sign\",...m])],events:[\"chainChanged\",\"accountsChanged\"]}},q={requiredNamespaces:{},optionalNamespaces:fe,relays:[{protocol:\"irn\"}],pairingTopic:g,proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:V(N.wc_sessionPropose.req.ttl),id:G()},{done:Rt,resolve:je,reject:Se}=ee(T,\"Request expired\"),te=G(),le=R(\"session_connect\",q.id),Re=R(\"session_request\",te),pe=async({error:x,session:L})=>{this.events.off(Re,ve),x?Se(x):L&&je({session:L})},ve=async x=>{var L,Fe,Qe;if(await this.deletePendingAuthRequest(te,{message:\"fulfilled\",code:0}),x.error){const ie=O(\"WC_METHOD_UNSUPPORTED\",\"wc_sessionAuthenticate\");return x.error.code===ie.code?void 0:(this.events.off(le,pe),Se(x.error.message))}await this.deleteProposal(q.id),this.events.off(le,pe);const{cacaos:He,responder:Q}=x.result,Te=[],ze=[];for(const ie of He){await et({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,\"Signature verification failed\"),Se(O(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\")));const{p:qe}=ie,Pe=xe(qe.resources),Ye=[tt(qe.iss)],vt=st(qe.iss);if(Pe){const Ne=it(Pe),It=rt(Pe);Te.push(...Ne),Ye.push(...It)}for(const Ne of Ye)ze.push(`${Ne}:${vt}`)}const se=await this.client.core.crypto.generateSharedKey(D,Q.publicKey);let he;Te.length>0&&(he={topic:se,acknowledged:!0,self:{publicKey:D,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:V(J),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:g,namespaces:nt([...new Set(Te)],[...new Set(ze)]),transportType:r},await this.client.core.relayer.subscribe(se,{transportType:r}),await this.client.session.set(se,he),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:Q.metadata}),he=this.client.session.get(se)),(L=this.client.metadata.redirect)!=null&&L.linkMode&&(Fe=Q.metadata.redirect)!=null&&Fe.linkMode&&(Qe=Q.metadata.redirect)!=null&&Qe.universal&&t&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(se,{transportType:P.link_mode})),je({auths:He,session:he})};this.events.once(le,pe),this.events.once(Re,ve);let Ie;try{if(i){const x=ye(\"wc_sessionAuthenticate\",U,te);this.client.core.history.set(g,x);const L=await this.client.core.crypto.encode(\"\",x,{type:Qt,encoding:ne});Ie=ue(t,g,L)}else await Promise.all([this.sendRequest({topic:g,method:\"wc_sessionAuthenticate\",params:U,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:te}),this.sendRequest({topic:g,method:\"wc_sessionPropose\",params:q,expiry:N.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:q.id})])}catch(x){throw this.events.off(le,pe),this.events.off(Re,ve),x}return await this.setProposal(q.id,q),await this.setAuthRequest(te,{request:b(v({},U),{verifyContext:{}}),pairingTopic:g,transportType:r}),{uri:Ie??A,response:Rt}}),c(this,\"approveSessionAuthenticate\",async e=>{const{id:t,auths:s}=e,i=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:[z.authenticated_session_approve_started]}});try{this.isInitialized()}catch(f){throw i.setError(re.no_internet_connection),f}const r=this.getPendingAuthRequest(t);if(!r)throw i.setError(re.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${t}`);const o=r.transportType||P.relay;o===P.relay&&await this.confirmOnlineStateOrThrow();const a=r.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),p=be(a),h={type:Ve,receiverPublicKey:a,senderPublicKey:l},u=[],d=[];for(const f of s){if(!await et({cacao:f,projectId:this.client.core.projectId})){i.setError(re.invalid_cacao);const I=O(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\");throw await this.sendError({id:t,topic:p,error:I,encodeOpts:h}),new Error(I.message)}i.addTrace(z.cacaos_verified);const{p:_}=f,g=xe(_.resources),A=[tt(_.iss)],D=st(_.iss);if(g){const I=it(g),T=rt(g);u.push(...I),A.push(...T)}for(const I of A)d.push(`${I}:${D}`)}const w=await this.client.core.crypto.generateSharedKey(l,a);i.addTrace(z.create_authenticated_session_topic);let m;if(u?.length>0){m={topic:w,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:a,metadata:r.requester.metadata},controller:a,expiry:V(J),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:r.pairingTopic,namespaces:nt([...new Set(u)],[...new Set(d)]),transportType:o},i.addTrace(z.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:o})}catch(f){throw i.setError(re.subscribe_authenticated_session_topic_failure),f}i.addTrace(z.subscribe_authenticated_session_topic_success),await this.client.session.set(w,m),i.addTrace(z.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:r.pairingTopic,metadata:r.requester.metadata})}i.addTrace(z.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:t,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(r.requester.metadata,o)})}catch(f){throw i.setError(re.authenticated_session_approve_publish_failure),f}return await this.client.auth.requests.delete(t,{message:\"fulfilled\",code:0}),await this.client.core.pairing.activate({topic:r.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),c(this,\"rejectSessionAuthenticate\",async e=>{this.isInitialized();const{id:t,reason:s}=e,i=this.getPendingAuthRequest(t);if(!i)throw new Error(`Could not find pending auth request with id ${t}`);i.transportType===P.relay&&await this.confirmOnlineStateOrThrow();const r=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),a=be(r),l={type:Ve,receiverPublicKey:r,senderPublicKey:o};await this.sendError({id:t,topic:a,error:s,encodeOpts:l,rpcOpts:N.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:\"rejected\",code:0}),await this.client.proposal.delete(t,O(\"USER_DISCONNECTED\"))}),c(this,\"formatAuthMessage\",e=>{this.isInitialized();const{request:t,iss:s}=e;return Ht(t,s)}),c(this,\"processRelayMessageCache\",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),c(this,\"cleanupDuplicatePairings\",async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var r,o;return((r=i.peerMetadata)==null?void 0:r.url)&&((o=i.peerMetadata)==null?void 0:o.url)===e.peer.metadata.url&&i.topic&&i.topic!==t.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info(\"Duplicate pairings clean up finished\")}catch(t){this.client.logger.error(t)}}),c(this,\"deleteSession\",async e=>{var t;const{topic:s,expirerHasDeleted:i=!1,emitEvent:r=!0,id:o=0}=e,{self:a}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,O(\"USER_DISCONNECTED\")),this.addToRecentlyDeleted(s,\"session\"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Me).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,O(\"USER_DISCONNECTED\"))}),s===((t=this.sessionRequestQueue.queue[0])==null?void 0:t.topic)&&(this.sessionRequestQueue.state=$.idle),r&&this.client.events.emit(\"session_delete\",{id:o,topic:s})}),c(this,\"deleteProposal\",async(e,t)=>{if(t)try{const s=this.client.proposal.get(e),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i?.setError(H.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,O(\"USER_DISCONNECTED\")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,\"proposal\")}),c(this,\"deletePendingSessionRequest\",async(e,t,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),s?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,\"request\"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==e),s&&(this.sessionRequestQueue.state=$.idle,this.client.events.emit(\"session_request_expire\",{id:e}))}),c(this,\"deletePendingAuthRequest\",async(e,t,s=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),s?Promise.resolve():this.client.core.expirer.del(e)])}),c(this,\"setExpiry\",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),c(this,\"setProposal\",async(e,t)=>{this.client.core.expirer.set(e,V(N.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),c(this,\"setAuthRequest\",async(e,t)=>{const{request:s,pairingTopic:i,transportType:r=P.relay}=t;this.client.core.expirer.set(e,s.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:e,pairingTopic:i,verifyContext:s.verifyContext,transportType:r})}),c(this,\"setPendingSessionRequest\",async e=>{const{id:t,topic:s,params:i,verifyContext:r}=e,o=i.request.expiryTimestamp||V(N.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,o),await this.client.pendingRequest.set(t,{id:t,topic:s,params:i,verifyContext:r})}),c(this,\"sendRequest\",async e=>{const{topic:t,method:s,params:i,expiry:r,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:l,appLink:p,tvf:h}=e,u=ye(s,i,a);let d;const w=!!p;try{const _=w?ne:de;d=await this.client.core.crypto.encode(t,u,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),_}let m;if(gt.includes(s)){const _=W(JSON.stringify(u)),g=W(d);m=await this.client.core.verify.register({id:g,decryptedId:_})}const f=N[s].req;if(f.attestation=m,r&&(f.ttl=r),o&&(f.id=o),this.client.core.history.set(t,u),w){const _=ue(p,t,d);await global.Linking.openURL(_,this.client.name)}else{const _=N[s].req;r&&(_.ttl=r),o&&(_.id=o),_.tvf=b(v({},h),{correlationId:u.id}),l?(_.internal=b(v({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,d,_)):this.client.core.relayer.publish(t,d,_).catch(g=>this.client.logger.error(g))}return u.id}),c(this,\"sendResult\",async e=>{const{id:t,topic:s,result:i,throwOnFailedPublish:r,encodeOpts:o,appLink:a}=e,l=us(t,i);let p;const h=a&&typeof(global==null?void 0:global.Linking)<\"u\";try{const w=h?ne:de;p=await this.client.core.crypto.encode(s,l,b(v({},o||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),w}let u,d;try{u=await this.client.core.history.get(s,t);const w=u.request;try{this.shouldSetTVF(w.method,w.params)&&(d=this.getTVFParams(t,w.params,i))}catch(m){this.client.logger.warn(\"sendResult() -> getTVFParams() failed\",m)}}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${t}) failed`),w}if(h){const w=ue(a,s,p);await global.Linking.openURL(w,this.client.name)}else{const w=u.request.method,m=N[w].res;m.tvf=b(v({},d),{correlationId:t}),r?(m.internal=b(v({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,m)):this.client.core.relayer.publish(s,p,m).catch(f=>this.client.logger.error(f))}await this.client.core.history.resolve(l)}),c(this,\"sendError\",async e=>{const{id:t,topic:s,error:i,encodeOpts:r,rpcOpts:o,appLink:a}=e,l=gs(t,i);let p;const h=a&&typeof(global==null?void 0:global.Linking)<\"u\";try{const d=h?ne:de;p=await this.client.core.crypto.encode(s,l,b(v({},r||{}),{encoding:d}))}catch(d){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),d}let u;try{u=await this.client.core.history.get(s,t)}catch(d){throw this.client.logger.error(`sendError() -> history.get(${s}, ${t}) failed`),d}if(h){const d=ue(a,s,p);await global.Linking.openURL(d,this.client.name)}else{const d=u.request.method,w=o||N[d].res;this.client.core.relayer.publish(s,p,w)}await this.client.core.history.resolve(l)}),c(this,\"cleanup\",async()=>{const e=[],t=[];this.client.session.getAll().forEach(s=>{let i=!1;Z(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&e.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Z(s.expiryTimestamp)&&t.push(s.id)}),await Promise.all([...e.map(s=>this.deleteSession({topic:s})),...t.map(s=>this.deleteProposal(s))])}),c(this,\"onProviderMessageEvent\",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),c(this,\"onRelayEventRequest\",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),c(this,\"processRequestsQueue\",async()=>{if(this.requestQueue.state===$.active){this.client.logger.info(\"Request queue already active, skipping...\");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=$.active;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=$.idle}),c(this,\"processRequest\",async e=>{const{topic:t,payload:s,attestation:i,transportType:r,encryptedId:o}=e,a=s.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:a}))switch(a){case\"wc_sessionPropose\":return await this.onSessionProposeRequest({topic:t,payload:s,attestation:i,encryptedId:o});case\"wc_sessionSettle\":return await this.onSessionSettleRequest(t,s);case\"wc_sessionUpdate\":return await this.onSessionUpdateRequest(t,s);case\"wc_sessionExtend\":return await this.onSessionExtendRequest(t,s);case\"wc_sessionPing\":return await this.onSessionPingRequest(t,s);case\"wc_sessionDelete\":return await this.onSessionDeleteRequest(t,s);case\"wc_sessionRequest\":return await this.onSessionRequest({topic:t,payload:s,attestation:i,encryptedId:o,transportType:r});case\"wc_sessionEvent\":return await this.onSessionEventRequest(t,s);case\"wc_sessionAuthenticate\":return await this.onSessionAuthenticateRequest({topic:t,payload:s,attestation:i,encryptedId:o,transportType:r});default:return this.client.logger.info(`Unsupported request method ${a}`)}}),c(this,\"onRelayEventResponse\",async e=>{const{topic:t,payload:s,transportType:i}=e,r=(await this.client.core.history.get(t,s.id)).request.method;switch(r){case\"wc_sessionPropose\":return this.onSessionProposeResponse(t,s,i);case\"wc_sessionSettle\":return this.onSessionSettleResponse(t,s);case\"wc_sessionUpdate\":return this.onSessionUpdateResponse(t,s);case\"wc_sessionExtend\":return this.onSessionExtendResponse(t,s);case\"wc_sessionPing\":return this.onSessionPingResponse(t,s);case\"wc_sessionRequest\":return this.onSessionRequestResponse(t,s);case\"wc_sessionAuthenticate\":return this.onSessionAuthenticateResponse(t,s);default:return this.client.logger.info(`Unsupported response method ${r}`)}}),c(this,\"onRelayEventUnknownPayload\",e=>{const{topic:t}=e,{message:s}=y(\"MISSING_OR_INVALID\",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),c(this,\"shouldIgnorePairingRequest\",e=>{const{topic:t,requestMethod:s}=e,i=this.expectedPairingMethodMap.get(t);return!i||i.includes(s)?!1:!!(i.includes(\"wc_sessionAuthenticate\")&&this.client.events.listenerCount(\"session_authenticate\")>0)}),c(this,\"onSessionProposeRequest\",async e=>{const{topic:t,payload:s,attestation:i,encryptedId:r}=e,{params:o,id:a}=s;try{const l=this.client.core.eventClient.getEvent({topic:t});this.client.events.listenerCount(\"session_proposal\")===0&&(console.warn(\"No listener for session_proposal event\"),l?.setError(Pt.proposal_listener_not_found)),this.isValidConnect(v({},s.params));const p=o.expiryTimestamp||V(N.wc_sessionPropose.req.ttl),h=v({id:a,pairingTopic:t,expiryTimestamp:p},o);await this.setProposal(a,h);const u=await this.getVerifyContext({attestationId:i,hash:W(JSON.stringify(s)),encryptedId:r,metadata:h.proposer.metadata});l?.addTrace(Nt.emit_session_proposal),this.client.events.emit(\"session_proposal\",{id:a,params:h,verifyContext:u})}catch(l){await this.sendError({id:a,topic:t,error:l,rpcOpts:N.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),c(this,\"onSessionProposeResponse\",async(e,t,s)=>{const{id:i}=t;if(j(t)){const{result:r}=t;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",result:r});const o=this.client.proposal.get(i);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",selfPublicKey:a});const l=r.responderPublicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",peerPublicKey:l});const p=await this.client.core.crypto.generateSharedKey(a,l);this.pendingSessions.set(i,{sessionTopic:p,pairingTopic:e,proposalId:i,publicKey:a});const h=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",subscriptionId:h}),await this.client.core.pairing.activate({topic:e})}else if(F(t)){await this.client.proposal.delete(i,O(\"USER_DISCONNECTED\"));const r=R(\"session_connect\",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners, 954`);this.events.emit(r,{error:t.error})}}),c(this,\"onSessionSettleRequest\",async(e,t)=>{const{id:s,params:i}=t;try{this.isValidSessionSettleRequest(i);const{relay:r,controller:o,expiry:a,namespaces:l,sessionProperties:p,scopedProperties:h,sessionConfig:u}=t.params,d=[...this.pendingSessions.values()].find(f=>f.sessionTopic===e);if(!d)return this.client.logger.error(`Pending session not found for topic ${e}`);const w=this.client.proposal.get(d.proposalId),m=b(v(v(v({topic:e,relay:r,expiry:a,namespaces:l,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces,controller:o.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},p&&{sessionProperties:p}),h&&{scopedProperties:h}),u&&{sessionConfig:u}),{transportType:P.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit(\"session_connect\",{session:m}),this.events.emit(R(\"session_connect\",d.proposalId),{session:m}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(r){await this.sendError({id:s,topic:e,error:r}),this.client.logger.error(r)}}),c(this,\"onSessionSettleResponse\",async(e,t)=>{const{id:s}=t;j(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(R(\"session_approve\",s),{})):F(t)&&(await this.client.session.delete(e,O(\"USER_DISCONNECTED\")),this.events.emit(R(\"session_approve\",s),{error:t.error}))}),c(this,\"onSessionUpdateRequest\",async(e,t)=>{const{params:s,id:i}=t;try{const r=`${e}_session_update`,o=oe.get(r);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:O(\"INVALID_UPDATE_REQUEST\")});return}this.isValidUpdate(v({topic:e},s));try{oe.set(r,i),await this.client.session.update(e,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(a){throw oe.delete(r),a}this.client.events.emit(\"session_update\",{id:i,topic:e,params:s})}catch(r){await this.sendError({id:i,topic:e,error:r}),this.client.logger.error(r)}}),c(this,\"isRequestOutOfSync\",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),c(this,\"onSessionUpdateResponse\",(e,t)=>{const{id:s}=t,i=R(\"session_update\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);j(t)?this.events.emit(R(\"session_update\",s),{}):F(t)&&this.events.emit(R(\"session_update\",s),{error:t.error})}),c(this,\"onSessionExtendRequest\",async(e,t)=>{const{id:s}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,V(J)),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_extend\",{id:s,topic:e})}catch(i){await this.sendError({id:s,topic:e,error:i}),this.client.logger.error(i)}}),c(this,\"onSessionExtendResponse\",(e,t)=>{const{id:s}=t,i=R(\"session_extend\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);j(t)?this.events.emit(R(\"session_extend\",s),{}):F(t)&&this.events.emit(R(\"session_extend\",s),{error:t.error})}),c(this,\"onSessionPingRequest\",async(e,t)=>{const{id:s}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_ping\",{id:s,topic:e})}catch(i){await this.sendError({id:s,topic:e,error:i}),this.client.logger.error(i)}}),c(this,\"onSessionPingResponse\",(e,t)=>{const{id:s}=t,i=R(\"session_ping\",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);j(t)?this.events.emit(R(\"session_ping\",s),{}):F(t)&&this.events.emit(R(\"session_ping\",s),{error:t.error})},500)}),c(this,\"onSessionDeleteRequest\",async(e,t)=>{const{id:s}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Xe.publish,async()=>{i(await this.deleteSession({topic:e,id:s}))})}),this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:O(\"USER_DISCONNECTED\")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),c(this,\"onSessionRequest\",async e=>{var t,s,i;const{topic:r,payload:o,attestation:a,encryptedId:l,transportType:p}=e,{id:h,params:u}=o;try{await this.isValidRequest(v({topic:r},u));const d=this.client.session.get(r),w=await this.getVerifyContext({attestationId:a,hash:W(JSON.stringify(ye(\"wc_sessionRequest\",u,h))),encryptedId:l,metadata:d.peer.metadata,transportType:p}),m={id:h,topic:r,params:u,verifyContext:w};await this.setPendingSessionRequest(m),p===P.link_mode&&(t=d.peer.metadata.redirect)!=null&&t.universal&&this.client.core.addLinkModeSupportedApp((s=d.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(d){await this.sendError({id:h,topic:r,error:d}),this.client.logger.error(d)}}),c(this,\"onSessionRequestResponse\",(e,t)=>{const{id:s}=t,i=R(\"session_request\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);j(t)?this.events.emit(R(\"session_request\",s),{result:t.result}):F(t)&&this.events.emit(R(\"session_request\",s),{error:t.error})}),c(this,\"onSessionEventRequest\",async(e,t)=>{const{id:s,params:i}=t;try{const r=`${e}_session_event_${i.event.name}`,o=oe.get(r);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(v({topic:e},i)),this.client.events.emit(\"session_event\",{id:s,topic:e,params:i}),oe.set(r,s)}catch(r){await this.sendError({id:s,topic:e,error:r}),this.client.logger.error(r)}}),c(this,\"onSessionAuthenticateResponse\",(e,t)=>{const{id:s}=t;this.client.logger.trace({type:\"method\",method:\"onSessionAuthenticateResponse\",topic:e,payload:t}),j(t)?this.events.emit(R(\"session_request\",s),{result:t.result}):F(t)&&this.events.emit(R(\"session_request\",s),{error:t.error})}),c(this,\"onSessionAuthenticateRequest\",async e=>{var t;const{topic:s,payload:i,attestation:r,encryptedId:o,transportType:a}=e;try{const{requester:l,authPayload:p,expiryTimestamp:h}=i.params,u=await this.getVerifyContext({attestationId:r,hash:W(JSON.stringify(i)),encryptedId:o,metadata:l.metadata,transportType:a}),d={requester:l,pairingTopic:s,id:i.id,authPayload:p,verifyContext:u,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:d,pairingTopic:s,transportType:a}),a===P.link_mode&&(t=l.metadata.redirect)!=null&&t.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit(\"session_authenticate\",{topic:s,params:i.params,id:i.id,verifyContext:u})}catch(l){this.client.logger.error(l);const p=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),u=this.getAppLinkIfEnabled(i.params.requester.metadata,a),d={type:Ve,receiverPublicKey:p,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:d,rpcOpts:N.wc_sessionAuthenticate.autoReject,appLink:u})}}),c(this,\"addSessionRequestToSessionRequestQueue\",e=>{this.sessionRequestQueue.queue.push(e)}),c(this,\"cleanupAfterResponse\",e=>{this.deletePendingSessionRequest(e.response.id,{message:\"fulfilled\",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=$.idle,this.processSessionRequestQueue()},Oe(this.requestQueueDelay))}),c(this,\"cleanupPendingSentRequestsForTopic\",({topic:e,error:t})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===e&&i.request.method===\"wc_sessionRequest\").forEach(i=>{const r=i.request.id,o=R(\"session_request\",r);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(R(\"session_request\",i.request.id),{error:t})})}),c(this,\"processSessionRequestQueue\",()=>{if(this.sessionRequestQueue.state===$.active){this.client.logger.info(\"session request queue is already active.\");return}const e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info(\"session request queue is empty.\");return}try{this.sessionRequestQueue.state=$.active,this.emitSessionRequest(e)}catch(t){this.client.logger.error(t)}}),c(this,\"emitSessionRequest\",e=>{this.client.events.emit(\"session_request\",e)}),c(this,\"onPairingCreated\",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find(s=>s.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:ye(\"wc_sessionPropose\",b(v({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}),c(this,\"isValidConnect\",async e=>{if(!M(e)){const{message:l}=y(\"MISSING_OR_INVALID\",`connect() params: ${JSON.stringify(e)}`);throw new Error(l)}const{pairingTopic:t,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:r,scopedProperties:o,relays:a}=e;if(X(t)||await this.isValidPairingTopic(t),!zt(a,!0)){const{message:l}=y(\"MISSING_OR_INVALID\",`connect() relays: ${a}`);throw new Error(l)}if(!X(s)&&ot(s)!==0&&this.validateNamespaces(s,\"requiredNamespaces\"),!X(i)&&ot(i)!==0&&this.validateNamespaces(i,\"optionalNamespaces\"),X(r)||this.validateSessionProps(r,\"sessionProperties\"),!X(o)){this.validateSessionProps(o,\"scopedProperties\");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(o).every(p=>l.includes(p)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),c(this,\"validateNamespaces\",(e,t)=>{const s=Yt(e,\"connect()\",t);if(s)throw new Error(s.message)}),c(this,\"isValidApprove\",async e=>{if(!M(e))throw new Error(y(\"MISSING_OR_INVALID\",`approve() params: ${e}`).message);const{id:t,namespaces:s,relayProtocol:i,sessionProperties:r,scopedProperties:o}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const a=this.client.proposal.get(t),l=Ce(s,\"approve()\");if(l)throw new Error(l.message);const p=at(a.requiredNamespaces,s,\"approve()\");if(p)throw new Error(p.message);if(!Y(i,!0)){const{message:h}=y(\"MISSING_OR_INVALID\",`approve() relayProtocol: ${i}`);throw new Error(h)}if(X(r)||this.validateSessionProps(r,\"sessionProperties\"),!X(o)){this.validateSessionProps(o,\"scopedProperties\");const h=new Set(Object.keys(s));if(!Object.keys(o).every(u=>h.has(u)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(h).join(\", \")}`)}}),c(this,\"isValidReject\",async e=>{if(!M(e)){const{message:i}=y(\"MISSING_OR_INVALID\",`reject() params: ${e}`);throw new Error(i)}const{id:t,reason:s}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!Xt(s)){const{message:i}=y(\"MISSING_OR_INVALID\",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),c(this,\"isValidSessionSettleRequest\",e=>{if(!M(e)){const{message:l}=y(\"MISSING_OR_INVALID\",`onSessionSettleRequest() params: ${e}`);throw new Error(l)}const{relay:t,controller:s,namespaces:i,expiry:r}=e;if(!Jt(t)){const{message:l}=y(\"MISSING_OR_INVALID\",\"onSessionSettleRequest() relay protocol should be a string\");throw new Error(l)}const o=Bt(s,\"onSessionSettleRequest()\");if(o)throw new Error(o.message);const a=Ce(i,\"onSessionSettleRequest()\");if(a)throw new Error(a.message);if(Z(r)){const{message:l}=y(\"EXPIRED\",\"onSessionSettleRequest()\");throw new Error(l)}}),c(this,\"isValidUpdate\",async e=>{if(!M(e)){const{message:a}=y(\"MISSING_OR_INVALID\",`update() params: ${e}`);throw new Error(a)}const{topic:t,namespaces:s}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const i=this.client.session.get(t),r=Ce(s,\"update()\");if(r)throw new Error(r.message);const o=at(i.requiredNamespaces,s,\"update()\");if(o)throw new Error(o.message)}),c(this,\"isValidExtend\",async e=>{if(!M(e)){const{message:s}=y(\"MISSING_OR_INVALID\",`extend() params: ${e}`);throw new Error(s)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),c(this,\"isValidRequest\",async e=>{if(!M(e)){const{message:a}=y(\"MISSING_OR_INVALID\",`request() params: ${e}`);throw new Error(a)}const{topic:t,request:s,chainId:i,expiry:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:o}=this.client.session.get(t);if(!ct(o,i)){const{message:a}=y(\"MISSING_OR_INVALID\",`request() chainId: ${i}`);throw new Error(a)}if(!Wt(s)){const{message:a}=y(\"MISSING_OR_INVALID\",`request() ${JSON.stringify(s)}`);throw new Error(a)}if(!Zt(o,i,s.method)){const{message:a}=y(\"MISSING_OR_INVALID\",`request() method: ${s.method}`);throw new Error(a)}if(r&&!es(r,_e)){const{message:a}=y(\"MISSING_OR_INVALID\",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${_e.min} and ${_e.max}`);throw new Error(a)}}),c(this,\"isValidRespond\",async e=>{var t;if(!M(e)){const{message:r}=y(\"MISSING_OR_INVALID\",`respond() params: ${e}`);throw new Error(r)}const{topic:s,response:i}=e;try{await this.isValidSessionTopic(s)}catch(r){throw(t=e?.response)!=null&&t.id&&this.cleanupAfterResponse(e),r}if(!ts(i)){const{message:r}=y(\"MISSING_OR_INVALID\",`respond() response: ${JSON.stringify(i)}`);throw new Error(r)}}),c(this,\"isValidPing\",async e=>{if(!M(e)){const{message:s}=y(\"MISSING_OR_INVALID\",`ping() params: ${e}`);throw new Error(s)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),c(this,\"isValidEmit\",async e=>{if(!M(e)){const{message:o}=y(\"MISSING_OR_INVALID\",`emit() params: ${e}`);throw new Error(o)}const{topic:t,event:s,chainId:i}=e;await this.isValidSessionTopic(t);const{namespaces:r}=this.client.session.get(t);if(!ct(r,i)){const{message:o}=y(\"MISSING_OR_INVALID\",`emit() chainId: ${i}`);throw new Error(o)}if(!ss(s)){const{message:o}=y(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!is(r,i,s.name)){const{message:o}=y(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}}),c(this,\"isValidDisconnect\",async e=>{if(!M(e)){const{message:s}=y(\"MISSING_OR_INVALID\",`disconnect() params: ${e}`);throw new Error(s)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),c(this,\"isValidAuthenticate\",e=>{const{chains:t,uri:s,domain:i,nonce:r}=e;if(!Array.isArray(t)||t.length===0)throw new Error(\"chains is required and must be a non-empty array\");if(!Y(s,!1))throw new Error(\"uri is required parameter\");if(!Y(i,!1))throw new Error(\"domain is required parameter\");if(!Y(r,!1))throw new Error(\"nonce is required parameter\");if([...new Set(t.map(a=>Ae(a).namespace))].length>1)throw new Error(\"Multi-namespace requests are not supported. Please request single namespace only.\");const{namespace:o}=Ae(t[0]);if(o!==\"eip155\")throw new Error(\"Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.\")}),c(this,\"getVerifyContext\",async e=>{const{attestationId:t,hash:s,encryptedId:i,metadata:r,transportType:o}=e,a={verified:{verifyUrl:r.verifyUrl||Ot,validation:\"UNKNOWN\",origin:r.url||\"\"}};try{if(o===P.link_mode){const p=this.getAppLinkIfEnabled(r,o);return a.verified.validation=p&&new URL(p).origin===new URL(r.url).origin?\"VALID\":\"INVALID\",a}const l=await this.client.core.verify.resolve({attestationId:t,hash:s,encryptedId:i,verifyUrl:r.verifyUrl});l&&(a.verified.origin=l.origin,a.verified.isScam=l.isScam,a.verified.validation=l.origin===new URL(r.url).origin?\"VALID\":\"INVALID\")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(a)}`),a}),c(this,\"validateSessionProps\",(e,t)=>{Object.values(e).forEach((s,i)=>{if(s==null){const{message:r}=y(\"MISSING_OR_INVALID\",`${t} must contain an existing value for each key. Received: ${s} for key ${Object.keys(e)[i]}`);throw new Error(r)}})}),c(this,\"getPendingAuthRequest\",e=>{const t=this.client.auth.requests.get(e);return typeof t==\"object\"?t:void 0}),c(this,\"addToRecentlyDeleted\",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(r)}}}),c(this,\"checkRecentlyDeleted\",e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:s}=y(\"MISSING_OR_INVALID\",`Record was recently deleted - ${t}: ${e}`);throw new Error(s)}}),c(this,\"isLinkModeEnabled\",(e,t)=>{var s,i,r,o,a,l,p,h,u;return!e||t!==P.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((o=(r=this.client.metadata)==null?void 0:r.redirect)==null?void 0:o.universal)!==void 0&&((l=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:l.universal)!==\"\"&&((p=e?.redirect)==null?void 0:p.universal)!==void 0&&((h=e?.redirect)==null?void 0:h.universal)!==\"\"&&((u=e?.redirect)==null?void 0:u.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(global==null?void 0:global.Linking)<\"u\"}),c(this,\"getAppLinkIfEnabled\",(e,t)=>{var s;return this.isLinkModeEnabled(e,t)?(s=e?.redirect)==null?void 0:s.universal:void 0}),c(this,\"handleLinkModeMessage\",({url:e})=>{if(!e||!e.includes(\"wc_ev\")||!e.includes(\"topic\"))return;const t=lt(e,\"topic\")||\"\",s=decodeURIComponent(lt(e,\"wc_ev\")||\"\"),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:P.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:s,sessionExists:i})}),c(this,\"registerLinkModeListeners\",async()=>{var e;if(rs()||ns()&&(e=this.client.metadata.redirect)!=null&&e.linkMode){const t=global==null?void 0:global.Linking;if(typeof t<\"u\"){t.addEventListener(\"url\",this.handleLinkModeMessage,this.client.name);const s=await t.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),c(this,\"shouldSetTVF\",(e,t)=>{if(!t||e!==\"wc_sessionRequest\")return!1;const{request:s}=t;return Object.keys(Ue).includes(s.method)}),c(this,\"getTVFParams\",(e,t,s)=>{var i,r;try{const o=t.request.method,a=this.extractTxHashesFromResult(o,s);return b(v({correlationId:e,rpcMethods:[o],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[(r=(i=t.request.params)==null?void 0:i[0])==null?void 0:r.to]}),{txHashes:a})}catch(o){this.client.logger.warn(\"Error getting TVF params\",o)}return{}}),c(this,\"isValidContractData\",e=>{var t;if(!e)return!1;try{const s=e?.data||((t=e?.[0])==null?void 0:t.data);if(!s.startsWith(\"0x\"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),c(this,\"extractTxHashesFromResult\",(e,t)=>{try{const s=Ue[e];if(typeof t==\"string\")return[t];const i=t[s.key];if(os(i))return e===\"solana_signAllTransactions\"?i.map(r=>as(r)):i;if(typeof i==\"string\")return[i]}catch(s){this.client.logger.warn(\"Error extracting tx hashes from result\",s)}return[]})}async processPendingMessageEvents(){try{const n=this.client.session.keys,e=this.client.core.relayer.messages.getWithoutAck(n);for(const[t,s]of Object.entries(e))for(const i of s)try{await this.onProviderMessageEvent({topic:t,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${t}, message: ${i}`)}}catch(n){this.client.logger.warn(\"processPendingMessageEvents failed\",n)}}isInitialized(){if(!this.initialized){const{message:n}=y(\"NOT_INITIALIZED\",this.name);throw new Error(n)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Xe.message,n=>{this.onProviderMessageEvent(n)})}async onRelayMessage(n){const{topic:e,message:t,attestation:s,transportType:i}=n,{publicKey:r}=this.client.auth.authKeys.keys.includes(ce)?this.client.auth.authKeys.get(ce):{responseTopic:void 0,publicKey:void 0};try{const o=await this.client.core.crypto.decode(e,t,{receiverPublicKey:r,encoding:i===P.link_mode?ne:de});hs(o)?(this.client.core.history.set(e,o),await this.onRelayEventRequest({topic:e,payload:o,attestation:s,transportType:i,encryptedId:W(t)})):ds(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:e,payload:o,transportType:i}),this.client.core.history.delete(e,o.id)):await this.onRelayEventUnknownPayload({topic:e,payload:o,transportType:i}),await this.client.core.relayer.messages.ack(e,t)}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(Tt.expired,async n=>{const{topic:e,id:t}=Mt(n.target);if(t&&this.client.pendingRequest.keys.includes(t))return await this.deletePendingSessionRequest(t,y(\"EXPIRED\"),!0);if(t&&this.client.auth.requests.keys.includes(t))return await this.deletePendingAuthRequest(t,y(\"EXPIRED\"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession({topic:e,expirerHasDeleted:!0}),this.client.events.emit(\"session_expire\",{topic:e})):t&&(await this.deleteProposal(t,!0),this.client.events.emit(\"proposal_expire\",{id:t}))})}registerPairingEvents(){this.client.core.pairing.events.on(Je.create,n=>this.onPairingCreated(n)),this.client.core.pairing.events.on(Je.delete,n=>{this.addToRecentlyDeleted(n.topic,\"pairing\")})}isValidPairingTopic(n){if(!Y(n,!1)){const{message:e}=y(\"MISSING_OR_INVALID\",`pairing topic should be a string: ${n}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:e}=y(\"NO_MATCHING_KEY\",`pairing topic doesn't exist: ${n}`);throw new Error(e)}if(Z(this.client.core.pairing.pairings.get(n).expiry)){const{message:e}=y(\"EXPIRED\",`pairing topic: ${n}`);throw new Error(e)}}async isValidSessionTopic(n){if(!Y(n,!1)){const{message:e}=y(\"MISSING_OR_INVALID\",`session topic should be a string: ${n}`);throw new Error(e)}if(this.checkRecentlyDeleted(n),!this.client.session.keys.includes(n)){const{message:e}=y(\"NO_MATCHING_KEY\",`session topic doesn't exist: ${n}`);throw new Error(e)}if(Z(this.client.session.get(n).expiry)){await this.deleteSession({topic:n});const{message:e}=y(\"EXPIRED\",`session topic: ${n}`);throw new Error(e)}if(!this.client.core.crypto.keychain.has(n)){const{message:e}=y(\"MISSING_OR_INVALID\",`session topic does not exist in keychain: ${n}`);throw await this.deleteSession({topic:n}),new Error(e)}}async isValidSessionOrPairingTopic(n){if(this.checkRecentlyDeleted(n),this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if(Y(n,!1)){const{message:e}=y(\"NO_MATCHING_KEY\",`session or pairing topic doesn't exist: ${n}`);throw new Error(e)}else{const{message:e}=y(\"MISSING_OR_INVALID\",`session or pairing topic should be a string: ${n}`);throw new Error(e)}}async isValidProposalId(n){if(!$t(n)){const{message:e}=y(\"MISSING_OR_INVALID\",`proposal id should be a number: ${n}`);throw new Error(e)}if(!this.client.proposal.keys.includes(n)){const{message:e}=y(\"NO_MATCHING_KEY\",`proposal id doesn't exist: ${n}`);throw new Error(e)}if(Z(this.client.proposal.get(n).expiryTimestamp)){await this.deleteProposal(n);const{message:e}=y(\"EXPIRED\",`proposal id: ${n}`);throw new Error(e)}}}class Ns extends B{constructor(n,e){super(n,e,pt,we),this.core=n,this.logger=e}}class St extends B{constructor(n,e){super(n,e,ht,we),this.core=n,this.logger=e}}class Os extends B{constructor(n,e){super(n,e,ut,we,t=>t.id),this.core=n,this.logger=e}}class bs extends B{constructor(n,e){super(n,e,mt,ae,()=>ce),this.core=n,this.logger=e}}class As extends B{constructor(n,e){super(n,e,_t,ae),this.core=n,this.logger=e}}class xs extends B{constructor(n,e){super(n,e,Et,ae,t=>t.id),this.core=n,this.logger=e}}var Cs=Object.defineProperty,Vs=(S,n,e)=>n in S?Cs(S,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):S[n]=e,Ge=(S,n,e)=>Vs(S,typeof n!=\"symbol\"?n+\"\":n,e);class Ds{constructor(n,e){this.core=n,this.logger=e,Ge(this,\"authKeys\"),Ge(this,\"pairingTopics\"),Ge(this,\"requests\"),this.authKeys=new bs(this.core,this.logger),this.pairingTopics=new As(this.core,this.logger),this.requests=new xs(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Ls=Object.defineProperty,ks=(S,n,e)=>n in S?Ls(S,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):S[n]=e,E=(S,n,e)=>ks(S,typeof n!=\"symbol\"?n+\"\":n,e);class Ee extends Lt{constructor(n){super(n),E(this,\"protocol\",De),E(this,\"version\",Le),E(this,\"name\",me.name),E(this,\"metadata\"),E(this,\"core\"),E(this,\"logger\"),E(this,\"events\",new ps),E(this,\"engine\"),E(this,\"session\"),E(this,\"proposal\"),E(this,\"pendingRequest\"),E(this,\"auth\"),E(this,\"signConfig\"),E(this,\"on\",(t,s)=>this.events.on(t,s)),E(this,\"once\",(t,s)=>this.events.once(t,s)),E(this,\"off\",(t,s)=>this.events.off(t,s)),E(this,\"removeListener\",(t,s)=>this.events.removeListener(t,s)),E(this,\"removeAllListeners\",t=>this.events.removeAllListeners(t)),E(this,\"connect\",async t=>{try{return await this.engine.connect(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"pair\",async t=>{try{return await this.engine.pair(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"approve\",async t=>{try{return await this.engine.approve(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"reject\",async t=>{try{return await this.engine.reject(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"update\",async t=>{try{return await this.engine.update(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"extend\",async t=>{try{return await this.engine.extend(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"request\",async t=>{try{return await this.engine.request(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"respond\",async t=>{try{return await this.engine.respond(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"ping\",async t=>{try{return await this.engine.ping(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"emit\",async t=>{try{return await this.engine.emit(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"disconnect\",async t=>{try{return await this.engine.disconnect(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"find\",t=>{try{return this.engine.find(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"getPendingSessionRequests\",()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}}),E(this,\"authenticate\",async(t,s)=>{try{return await this.engine.authenticate(t,s)}catch(i){throw this.logger.error(i.message),i}}),E(this,\"formatAuthMessage\",t=>{try{return this.engine.formatAuthMessage(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"approveSessionAuthenticate\",async t=>{try{return await this.engine.approveSessionAuthenticate(t)}catch(s){throw this.logger.error(s.message),s}}),E(this,\"rejectSessionAuthenticate\",async t=>{try{return await this.engine.rejectSessionAuthenticate(t)}catch(s){throw this.logger.error(s.message),s}}),this.name=n?.name||me.name,this.metadata=n?.metadata||cs(),this.signConfig=n?.signConfig;const e=typeof n?.logger<\"u\"&&typeof n?.logger!=\"string\"?n.logger:At(xt({level:n?.logger||me.logger}));this.core=n?.core||new bt(n),this.logger=Ct(e,this.name),this.session=new St(this.core,this.logger),this.proposal=new Ns(this.core,this.logger),this.pendingRequest=new Os(this.core,this.logger),this.engine=new Ps(this),this.auth=new Ds(this.core,this.logger)}static async init(n){const e=new Ee(n);return await e.initialize(),e}get context(){return Vt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace(\"Initialized\");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info(\"SignClient Initialization Success\"),setTimeout(()=>{this.engine.processRelayMessageCache()},Oe(Ze))}catch(n){throw this.logger.info(\"SignClient Initialization Failure\"),this.logger.error(n.message),n}}}const Ms=St,$s=Ee;export{wt as AUTH_CONTEXT,mt as AUTH_KEYS_CONTEXT,_t as AUTH_PAIRING_TOPIC_CONTEXT,yt as AUTH_PROTOCOL,ce as AUTH_PUBLIC_KEY_NAME,Et as AUTH_REQUEST_CONTEXT,ae as AUTH_STORAGE_PREFIX,Ss as AUTH_VERSION,dt as ENGINE_CONTEXT,$ as ENGINE_QUEUE_STATES,N as ENGINE_RPC_OPTS,_s as HISTORY_CONTEXT,ms as HISTORY_EVENTS,Es as HISTORY_STORAGE_VERSION,gt as METHODS_TO_VERIFY,pt as PROPOSAL_CONTEXT,fs as PROPOSAL_EXPIRY,$e as PROPOSAL_EXPIRY_MESSAGE,ut as REQUEST_CONTEXT,ht as SESSION_CONTEXT,J as SESSION_EXPIRY,_e as SESSION_REQUEST_EXPIRY_BOUNDARIES,ke as SIGN_CLIENT_CONTEXT,me as SIGN_CLIENT_DEFAULT,ys as SIGN_CLIENT_EVENTS,De as SIGN_CLIENT_PROTOCOL,ws as SIGN_CLIENT_STORAGE_OPTIONS,we as SIGN_CLIENT_STORAGE_PREFIX,Le as SIGN_CLIENT_VERSION,Ms as SessionStore,$s as SignClient,Ue as TVF_METHODS,Me as WALLETCONNECT_DEEPLINK_CHOICE,Ee as default};\n//# sourceMappingURL=index.es.js.map\n","import bt from\"@walletconnect/sign-client\";import{isValidObject as It,isCaipNamespace as Y,parseNamespaceKey as q,mergeArrays as M,parseChainId as Q,getSdkError as Z,isValidArray as T}from\"@walletconnect/utils\";import{pino as $t,getDefaultLoggerOptions as Ot}from\"@walletconnect/logger\";import m,{HttpConnection as At}from\"@walletconnect/jsonrpc-http-connection\";import{JsonRpcProvider as l}from\"@walletconnect/jsonrpc-provider\";import{formatJsonRpcRequest as Ht,formatJsonRpcResult as Et}from\"@walletconnect/jsonrpc-utils\";import Ct from\"events\";const tt=\"error\",Nt=\"wss://relay.walletconnect.org\",St=\"wc\",Dt=\"universal_provider\",_=`${St}@2:${Dt}:`,et=\"https://rpc.walletconnect.org/v1/\",w=\"generic\",qt=`${et}bundler`,d={DEFAULT_CHAIN_CHANGED:\"default_chain_changed\"};function jt(){}function B(s){return s==null||typeof s!=\"object\"&&typeof s!=\"function\"}function G(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function Rt(s){if(B(s))return s;if(Array.isArray(s)||G(s)||s instanceof ArrayBuffer||typeof SharedArrayBuffer<\"u\"&&s instanceof SharedArrayBuffer)return s.slice(0);const t=Object.getPrototypeOf(s),e=t.constructor;if(s instanceof Date||s instanceof Map||s instanceof Set)return new e(s);if(s instanceof RegExp){const i=new e(s);return i.lastIndex=s.lastIndex,i}if(s instanceof DataView)return new e(s.buffer.slice(0));if(s instanceof Error){const i=new e(s.message);return i.stack=s.stack,i.name=s.name,i.cause=s.cause,i}if(typeof File<\"u\"&&s instanceof File)return new e([s],s.name,{type:s.type,lastModified:s.lastModified});if(typeof s==\"object\"){const i=Object.create(t);return Object.assign(i,s)}return s}function st(s){return typeof s==\"object\"&&s!==null}function it(s){return Object.getOwnPropertySymbols(s).filter(t=>Object.prototype.propertyIsEnumerable.call(s,t))}function rt(s){return s==null?s===void 0?\"[object Undefined]\":\"[object Null]\":Object.prototype.toString.call(s)}const _t=\"[object RegExp]\",nt=\"[object String]\",at=\"[object Number]\",ct=\"[object Boolean]\",ot=\"[object Arguments]\",Ut=\"[object Symbol]\",Ft=\"[object Date]\",Lt=\"[object Map]\",xt=\"[object Set]\",Mt=\"[object Array]\",Bt=\"[object ArrayBuffer]\",Gt=\"[object Object]\",Jt=\"[object DataView]\",zt=\"[object Uint8Array]\",kt=\"[object Uint8ClampedArray]\",Wt=\"[object Uint16Array]\",Kt=\"[object Uint32Array]\",Vt=\"[object Int8Array]\",Xt=\"[object Int16Array]\",Yt=\"[object Int32Array]\",Qt=\"[object Float32Array]\",Zt=\"[object Float64Array]\";function Tt(s,t){return y(s,void 0,s,new Map,t)}function y(s,t,e,i=new Map,r=void 0){const a=r?.(s,t,e,i);if(a!=null)return a;if(B(s))return s;if(i.has(s))return i.get(s);if(Array.isArray(s)){const n=new Array(s.length);i.set(s,n);for(let c=0;c<s.length;c++)n[c]=y(s[c],c,e,i,r);return Object.hasOwn(s,\"index\")&&(n.index=s.index),Object.hasOwn(s,\"input\")&&(n.input=s.input),n}if(s instanceof Date)return new Date(s.getTime());if(s instanceof RegExp){const n=new RegExp(s.source,s.flags);return n.lastIndex=s.lastIndex,n}if(s instanceof Map){const n=new Map;i.set(s,n);for(const[c,h]of s)n.set(c,y(h,c,e,i,r));return n}if(s instanceof Set){const n=new Set;i.set(s,n);for(const c of s)n.add(y(c,void 0,e,i,r));return n}if(typeof Buffer<\"u\"&&Buffer.isBuffer(s))return s.subarray();if(G(s)){const n=new(Object.getPrototypeOf(s)).constructor(s.length);i.set(s,n);for(let c=0;c<s.length;c++)n[c]=y(s[c],c,e,i,r);return n}if(s instanceof ArrayBuffer||typeof SharedArrayBuffer<\"u\"&&s instanceof SharedArrayBuffer)return s.slice(0);if(s instanceof DataView){const n=new DataView(s.buffer.slice(0),s.byteOffset,s.byteLength);return i.set(s,n),g(n,s,e,i,r),n}if(typeof File<\"u\"&&s instanceof File){const n=new File([s],s.name,{type:s.type});return i.set(s,n),g(n,s,e,i,r),n}if(s instanceof Blob){const n=new Blob([s],{type:s.type});return i.set(s,n),g(n,s,e,i,r),n}if(s instanceof Error){const n=new s.constructor;return i.set(s,n),n.message=s.message,n.name=s.name,n.stack=s.stack,n.cause=s.cause,g(n,s,e,i,r),n}if(typeof s==\"object\"&&te(s)){const n=Object.create(Object.getPrototypeOf(s));return i.set(s,n),g(n,s,e,i,r),n}return s}function g(s,t,e=s,i,r){const a=[...Object.keys(t),...it(t)];for(let n=0;n<a.length;n++){const c=a[n],h=Object.getOwnPropertyDescriptor(s,c);(h==null||h.writable)&&(s[c]=y(t[c],c,e,i,r))}}function te(s){switch(rt(s)){case ot:case Mt:case Bt:case Jt:case ct:case Ft:case Qt:case Zt:case Vt:case Xt:case Yt:case Lt:case at:case Gt:case _t:case xt:case nt:case Ut:case zt:case kt:case Wt:case Kt:return!0;default:return!1}}function ee(s,t){return Tt(s,(e,i,r,a)=>{const n=t?.(e,i,r,a);if(n!=null)return n;if(typeof s==\"object\")switch(Object.prototype.toString.call(s)){case at:case nt:case ct:{const c=new s.constructor(s?.valueOf());return g(c,s),c}case ot:{const c={};return g(c,s),c.length=s.length,c[Symbol.iterator]=s[Symbol.iterator],c}default:return}})}function ht(s){return ee(s)}function pt(s){return s!==null&&typeof s==\"object\"&&rt(s)===\"[object Arguments]\"}function se(s){return G(s)}function ie(s){if(typeof s!=\"object\"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!==\"[object Object]\"){const e=s[Symbol.toStringTag];return e==null||!Object.getOwnPropertyDescriptor(s,Symbol.toStringTag)?.writable?!1:s.toString()===`[object ${e}]`}let t=s;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t}function re(s,...t){const e=t.slice(0,-1),i=t[t.length-1];let r=s;for(let a=0;a<e.length;a++){const n=e[a];r=U(r,n,i,new Map)}return r}function U(s,t,e,i){if(B(s)&&(s=Object(s)),t==null||typeof t!=\"object\")return s;if(i.has(t))return Rt(i.get(t));if(i.set(t,s),Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]=t[a]??void 0}const r=[...Object.keys(t),...it(t)];for(let a=0;a<r.length;a++){const n=r[a];let c=t[n],h=s[n];if(pt(c)&&(c={...c}),pt(h)&&(h={...h}),typeof Buffer<\"u\"&&Buffer.isBuffer(c)&&(c=ht(c)),Array.isArray(c))if(typeof h==\"object\"&&h!=null){const j=[],R=Reflect.ownKeys(h);for(let f=0;f<R.length;f++){const X=R[f];j[X]=h[X]}h=j}else h=[];const v=e(h,c,n,s,t,i);v!=null?s[n]=v:Array.isArray(c)||st(h)&&st(c)?s[n]=U(h,c,e,i):h==null&&ie(c)?s[n]=U({},c,e,i):h==null&&se(c)?s[n]=ht(c):(h===void 0||c!==void 0)&&(s[n]=c)}return s}function ne(s,...t){return re(s,...t,jt)}var ae=Object.defineProperty,ce=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ut=(s,t,e)=>t in s?ae(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,F=(s,t)=>{for(var e in t||(t={}))he.call(t,e)&&ut(s,e,t[e]);if(dt)for(var e of dt(t))pe.call(t,e)&&ut(s,e,t[e]);return s},de=(s,t)=>ce(s,oe(t));function p(s,t,e){var i;const r=Q(s);return((i=t.rpcMap)==null?void 0:i[r.reference])||`${et}?chainId=${r.namespace}:${r.reference}&projectId=${e}`}function P(s){return s.includes(\":\")?s.split(\":\")[1]:s}function lt(s){return s.map(t=>`${t.split(\":\")[0]}:${t.split(\":\")[1]}`)}function ue(s,t){const e=Object.keys(t.namespaces).filter(r=>r.includes(s));if(!e.length)return[];const i=[];return e.forEach(r=>{const a=t.namespaces[r].accounts;i.push(...a)}),i}function J(s={},t={}){const e=ft(s),i=ft(t);return ne(e,i)}function ft(s){var t,e,i,r;const a={};if(!It(s))return a;for(const[n,c]of Object.entries(s)){const h=Y(n)?[n]:c.chains,v=c.methods||[],j=c.events||[],R=c.rpcMap||{},f=q(n);a[f]=de(F(F({},a[f]),c),{chains:M(h,(t=a[f])==null?void 0:t.chains),methods:M(v,(e=a[f])==null?void 0:e.methods),events:M(j,(i=a[f])==null?void 0:i.events),rpcMap:F(F({},R),(r=a[f])==null?void 0:r.rpcMap)})}return a}function le(s){return s.includes(\":\")?s.split(\":\")[2]:s}function mt(s){const t={};for(const[e,i]of Object.entries(s)){const r=i.methods||[],a=i.events||[],n=i.accounts||[],c=Y(e)?[e]:i.chains?i.chains:lt(i.accounts);t[e]={chains:c,methods:r,events:a,accounts:n}}return t}function z(s){return typeof s==\"number\"?s:s.includes(\"0x\")?parseInt(s,16):(s=s.includes(\":\")?s.split(\":\")[1]:s,isNaN(Number(s))?s:Number(s))}const vt={},o=s=>vt[s],k=(s,t)=>{vt[s]=t};var fe=Object.defineProperty,me=(s,t,e)=>t in s?fe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,b=(s,t,e)=>me(s,typeof t!=\"symbol\"?t+\"\":t,e);class ve{constructor(t){b(this,\"name\",\"polkadot\"),b(this,\"client\"),b(this,\"httpProviders\"),b(this,\"events\"),b(this,\"namespace\"),b(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=P(e);t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var ge=Object.defineProperty,Pe=Object.defineProperties,we=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,W=(s,t,e)=>t in s?ge(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,Pt=(s,t)=>{for(var e in t||(t={}))ye.call(t,e)&&W(s,e,t[e]);if(gt)for(var e of gt(t))be.call(t,e)&&W(s,e,t[e]);return s},wt=(s,t)=>Pe(s,we(t)),I=(s,t,e)=>W(s,typeof t!=\"symbol\"?t+\"\":t,e);class Ie{constructor(t){I(this,\"name\",\"eip155\"),I(this,\"client\"),I(this,\"chainId\"),I(this,\"namespace\"),I(this,\"httpProviders\"),I(this,\"events\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case\"eth_requestAccounts\":return this.getAccounts();case\"eth_accounts\":return this.getAccounts();case\"wallet_switchEthereumChain\":return await this.handleSwitchChain(t);case\"eth_chainId\":return parseInt(this.getDefaultChain());case\"wallet_getCapabilities\":return await this.getCapabilities(t);case\"wallet_getCallsStatus\":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(parseInt(t),e),this.chainId=parseInt(t),this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}createHttpProvider(t,e){const i=e||p(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new At(i,o(\"disableProviderPing\")))}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=parseInt(P(e));t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}getHttpProvider(){const t=this.chainId,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}async handleSwitchChain(t){var e,i;let r=t.request.params?(e=t.request.params[0])==null?void 0:e.chainId:\"0x0\";r=r.startsWith(\"0x\")?r:`0x${r}`;const a=parseInt(r,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes(\"wallet_switchEthereumChain\"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:r}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var e,i,r;const a=(i=(e=t.request)==null?void 0:e.params)==null?void 0:i[0];if(!a)throw new Error(\"Missing address parameter in `wallet_getCapabilities` request\");const n=this.client.session.get(t.topic),c=((r=n?.sessionProperties)==null?void 0:r.capabilities)||{};if(c!=null&&c[a])return c?.[a];const h=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:wt(Pt({},n.sessionProperties||{}),{capabilities:wt(Pt({},c||{}),{[a]:h})})})}catch(v){console.warn(\"Failed to update session with capabilities\",v)}return h}async getCallStatus(t){var e,i;const r=this.client.session.get(t.topic),a=(e=r.sessionProperties)==null?void 0:e.bundler_name;if(a){const c=this.getBundlerUrl(t.chainId,a);try{return await this.getUserOperationReceipt(c,t)}catch(h){console.warn(\"Failed to fetch call status from bundler\",h,c)}}const n=(i=r.sessionProperties)==null?void 0:i.bundler_url;if(n)try{return await this.getUserOperationReceipt(n,t)}catch(c){console.warn(\"Failed to fetch call status from custom bundler\",c,n)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error(\"Fetching call status not approved by the wallet.\")}async getUserOperationReceipt(t,e){var i;const r=new URL(t),a=await fetch(r,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Ht(\"eth_getUserOperationReceipt\",[(i=e.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(t,e){return`${qt}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${e}`}}var $e=Object.defineProperty,Oe=(s,t,e)=>t in s?$e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,$=(s,t,e)=>Oe(s,typeof t!=\"symbol\"?t+\"\":t,e);class Ae{constructor(t){$(this,\"name\",\"solana\"),$(this,\"client\"),$(this,\"httpProviders\"),$(this,\"events\"),$(this,\"namespace\"),$(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=P(e);t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var He=Object.defineProperty,Ee=(s,t,e)=>t in s?He(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,O=(s,t,e)=>Ee(s,typeof t!=\"symbol\"?t+\"\":t,e);class Ce{constructor(t){O(this,\"name\",\"cosmos\"),O(this,\"client\"),O(this,\"httpProviders\"),O(this,\"events\"),O(this,\"namespace\"),O(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=P(e);t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var Ne=Object.defineProperty,Se=(s,t,e)=>t in s?Ne(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,A=(s,t,e)=>Se(s,typeof t!=\"symbol\"?t+\"\":t,e);class De{constructor(t){A(this,\"name\",\"algorand\"),A(this,\"client\"),A(this,\"httpProviders\"),A(this,\"events\"),A(this,\"namespace\"),A(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){const i=e||p(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;t[e]=this.createHttpProvider(e,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);return typeof i>\"u\"?void 0:new l(new m(i,o(\"disableProviderPing\")))}}var qe=Object.defineProperty,je=(s,t,e)=>t in s?qe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,H=(s,t,e)=>je(s,typeof t!=\"symbol\"?t+\"\":t,e);class Re{constructor(t){H(this,\"name\",\"cip34\"),H(this,\"client\"),H(this,\"httpProviders\"),H(this,\"events\"),H(this,\"namespace\"),H(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{const i=this.getCardanoRPCUrl(e),r=P(e);t[r]=this.createHttpProvider(r,i)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}getCardanoRPCUrl(t){const e=this.namespace.rpcMap;if(e)return e[t]}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||this.getCardanoRPCUrl(t);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var _e=Object.defineProperty,Ue=(s,t,e)=>t in s?_e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,E=(s,t,e)=>Ue(s,typeof t!=\"symbol\"?t+\"\":t,e);class Fe{constructor(t){E(this,\"name\",\"elrond\"),E(this,\"client\"),E(this,\"httpProviders\"),E(this,\"events\"),E(this,\"namespace\"),E(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=P(e);t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var Le=Object.defineProperty,xe=(s,t,e)=>t in s?Le(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,C=(s,t,e)=>xe(s,typeof t!=\"symbol\"?t+\"\":t,e);class Me{constructor(t){C(this,\"name\",\"multiversx\"),C(this,\"client\"),C(this,\"httpProviders\"),C(this,\"events\"),C(this,\"namespace\"),C(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const r=P(e);t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var Be=Object.defineProperty,Ge=(s,t,e)=>t in s?Be(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,N=(s,t,e)=>Ge(s,typeof t!=\"symbol\"?t+\"\":t,e);class Je{constructor(t){N(this,\"name\",\"near\"),N(this,\"client\"),N(this,\"httpProviders\"),N(this,\"events\"),N(this,\"namespace\"),N(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const i=e||p(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;t[e]=this.createHttpProvider(e,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace);return typeof i>\"u\"?void 0:new l(new m(i,o(\"disableProviderPing\")))}}var ze=Object.defineProperty,ke=(s,t,e)=>t in s?ze(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,S=(s,t,e)=>ke(s,typeof t!=\"symbol\"?t+\"\":t,e);class We{constructor(t){S(this,\"name\",\"tezos\"),S(this,\"client\"),S(this,\"httpProviders\"),S(this,\"events\"),S(this,\"namespace\"),S(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const i=e||p(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace);return typeof i>\"u\"?void 0:new l(new m(i))}}var Ke=Object.defineProperty,Ve=(s,t,e)=>t in s?Ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,D=(s,t,e)=>Ve(s,typeof t!=\"symbol\"?t+\"\":t,e);class Xe{constructor(t){D(this,\"name\",w),D(this,\"client\"),D(this,\"httpProviders\"),D(this,\"events\"),D(this,\"namespace\"),D(this,\"chainId\"),this.namespace=t.namespace,this.events=o(\"events\"),this.client=o(\"client\"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(d.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error(\"ChainId not found\");return t.split(\":\")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(\":\")[1]===this.chainId.toString()).map(e=>e.split(\":\")[2]))]:[]}createHttpProviders(){var t,e;const i={};return(e=(t=this.namespace)==null?void 0:t.accounts)==null||e.forEach(r=>{const a=Q(r);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(r)}),i}getHttpProvider(t){const e=this.httpProviders[t];if(typeof e>\"u\")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||p(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new l(new m(i,o(\"disableProviderPing\")))}}var Ye=Object.defineProperty,Qe=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,K=(s,t,e)=>t in s?Ye(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,L=(s,t)=>{for(var e in t||(t={}))Te.call(t,e)&&K(s,e,t[e]);if(yt)for(var e of yt(t))ts.call(t,e)&&K(s,e,t[e]);return s},V=(s,t)=>Qe(s,Ze(t)),u=(s,t,e)=>K(s,typeof t!=\"symbol\"?t+\"\":t,e);class x{constructor(t){u(this,\"client\"),u(this,\"namespaces\"),u(this,\"optionalNamespaces\"),u(this,\"sessionProperties\"),u(this,\"scopedProperties\"),u(this,\"events\",new Ct),u(this,\"rpcProviders\",{}),u(this,\"session\"),u(this,\"providerOpts\"),u(this,\"logger\"),u(this,\"uri\"),u(this,\"disableProviderPing\",!1),this.providerOpts=t,this.logger=typeof t?.logger<\"u\"&&typeof t?.logger!=\"string\"?t.logger:$t(Ot({level:t?.logger||tt})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const e=new x(t);return await e.initialize(),e}async request(t,e,i){const[r,a]=this.validateChain(e);if(!this.session)throw new Error(\"Please call connect() before request()\");return await this.getProvider(r).request({request:L({},t),chainId:`${r}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(t,e,i,r){const a=new Date().getTime();this.request(t,i,r).then(n=>e(null,Et(a,n))).catch(n=>e(n,void 0))}async enable(){if(!this.client)throw new Error(\"Sign Client not initialized\");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error(\"Please call connect() before enable()\");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Z(\"USER_DISCONNECTED\")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error(\"Sign Client not initialized\");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,e){if(!this.client)throw new Error(\"Sign Client not initialized\");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:i,response:r}=await this.client.authenticate(t,e);i&&(this.uri=i,this.events.emit(\"display_uri\",i));const a=await r();if(this.session=a.session,this.session){const n=mt(this.session.namespaces);this.namespaces=J(this.namespaces,n),await this.persist(\"namespaces\",this.namespaces),this.onConnect()}return a}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){const{uri:e,approval:i}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});e&&(this.uri=e,this.events.emit(\"display_uri\",e));const r=await i();this.session=r;const a=mt(r.namespaces);return this.namespaces=J(this.namespaces,a),await this.persist(\"namespaces\",this.namespaces),await this.persist(\"optionalNamespaces\",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,e){try{if(!this.session)return;const[i,r]=this.validateChain(t),a=this.getProvider(i);a.name===w?a.setDefaultChain(`${i}:${r}`,e):a.setDefaultChain(r,e)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(t={}){this.logger.info(\"Cleaning up inactive pairings...\");const e=this.client.pairing.getAll();if(T(e)){for(const i of e)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}abortPairingAttempt(){this.logger.warn(\"abortPairingAttempt is deprecated. This is now a no-op.\")}async checkStorage(){this.namespaces=await this.getFromStore(\"namespaces\")||{},this.optionalNamespaces=await this.getFromStore(\"optionalNamespaces\")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace(\"Initialized\"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,e;if(this.client=this.providerOpts.client||await bt.init({core:this.providerOpts.core,logger:this.providerOpts.logger||tt,relayUrl:this.providerOpts.relayUrl||Nt,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(i){throw this.logger.error(\"Failed to get session\",i),new Error(`The provided session: ${(e=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:e.topic} doesn't exist in the Sign client`)}else{const i=this.client.session.getAll();this.session=i[0]}this.logger.trace(\"SignClient Initialized\")}createProviders(){if(!this.client)throw new Error(\"Sign Client not initialized\");if(!this.session)throw new Error(\"Session not initialized. Please call connect() before enable()\");const t=[...new Set(Object.keys(this.session.namespaces).map(e=>q(e)))];k(\"client\",this.client),k(\"events\",this.events),k(\"disableProviderPing\",this.disableProviderPing),t.forEach(e=>{if(!this.session)return;const i=ue(e,this.session),r=lt(i),a=J(this.namespaces,this.optionalNamespaces),n=V(L({},a[e]),{accounts:i,chains:r});switch(e){case\"eip155\":this.rpcProviders[e]=new Ie({namespace:n});break;case\"algorand\":this.rpcProviders[e]=new De({namespace:n});break;case\"solana\":this.rpcProviders[e]=new Ae({namespace:n});break;case\"cosmos\":this.rpcProviders[e]=new Ce({namespace:n});break;case\"polkadot\":this.rpcProviders[e]=new ve({namespace:n});break;case\"cip34\":this.rpcProviders[e]=new Re({namespace:n});break;case\"elrond\":this.rpcProviders[e]=new Fe({namespace:n});break;case\"multiversx\":this.rpcProviders[e]=new Me({namespace:n});break;case\"near\":this.rpcProviders[e]=new Je({namespace:n});break;case\"tezos\":this.rpcProviders[e]=new We({namespace:n});break;default:this.rpcProviders[w]?this.rpcProviders[w].updateNamespace(n):this.rpcProviders[w]=new Xe({namespace:n})}})}registerEventListeners(){if(typeof this.client>\"u\")throw new Error(\"Sign Client is not initialized\");this.client.on(\"session_ping\",t=>{var e;const{topic:i}=t;i===((e=this.session)==null?void 0:e.topic)&&this.events.emit(\"session_ping\",t)}),this.client.on(\"session_event\",t=>{var e;const{params:i,topic:r}=t;if(r!==((e=this.session)==null?void 0:e.topic))return;const{event:a}=i;if(a.name===\"accountsChanged\"){const n=a.data;n&&T(n)&&this.events.emit(\"accountsChanged\",n.map(le))}else if(a.name===\"chainChanged\"){const n=i.chainId,c=i.event.data,h=q(n),v=z(n)!==z(c)?`${h}:${z(c)}`:n;this.onChainChanged(v)}else this.events.emit(a.name,a.data);this.events.emit(\"session_event\",t)}),this.client.on(\"session_update\",({topic:t,params:e})=>{var i,r;if(t!==((i=this.session)==null?void 0:i.topic))return;const{namespaces:a}=e,n=(r=this.client)==null?void 0:r.session.get(t);this.session=V(L({},n),{namespaces:a}),this.onSessionUpdate(),this.events.emit(\"session_update\",{topic:t,params:e})}),this.client.on(\"session_delete\",async t=>{var e;t.topic===((e=this.session)==null?void 0:e.topic)&&(await this.cleanup(),this.events.emit(\"session_delete\",t),this.events.emit(\"disconnect\",V(L({},Z(\"USER_DISCONNECTED\")),{data:t.topic})))}),this.on(d.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[w]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var e;this.getProvider(t).updateNamespace((e=this.session)==null?void 0:e.namespaces[t])})}setNamespaces(t){const{namespaces:e,optionalNamespaces:i,sessionProperties:r,scopedProperties:a}=t;e&&Object.keys(e).length&&(this.namespaces=e),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=r,this.scopedProperties=a}validateChain(t){const[e,i]=t?.split(\":\")||[\"\",\"\"];if(!this.namespaces||!Object.keys(this.namespaces).length)return[e,i];if(e&&!Object.keys(this.namespaces||{}).map(n=>q(n)).includes(e))throw new Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);if(e&&i)return[e,i];const r=q(Object.keys(this.namespaces)[0]),a=this.rpcProviders[r].getDefaultChain();return[r,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,e=!1){if(!this.namespaces)return;const[i,r]=this.validateChain(t);r&&(e||this.getProvider(i).setDefaultChain(r),this.namespaces[i]?this.namespaces[i].defaultChain=r:this.namespaces[`${i}:${r}`]?this.namespaces[`${i}:${r}`].defaultChain=r:this.namespaces[`${i}:${r}`]={defaultChain:r},this.events.emit(\"chainChanged\",r),await this.persist(\"namespaces\",this.namespaces))}onConnect(){this.createProviders(),this.events.emit(\"connect\",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore(\"namespaces\"),await this.deleteFromStore(\"optionalNamespaces\"),await this.deleteFromStore(\"sessionProperties\"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,e){var i;const r=((i=this.session)==null?void 0:i.topic)||\"\";await this.client.core.storage.setItem(`${_}/${t}${r}`,e)}async getFromStore(t){var e;const i=((e=this.session)==null?void 0:e.topic)||\"\";return await this.client.core.storage.getItem(`${_}/${t}${i}`)}async deleteFromStore(t){var e;const i=((e=this.session)==null?void 0:e.topic)||\"\";await this.client.core.storage.removeItem(`${_}/${t}${i}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const e=await this.client.core.storage.getKeys();for(const i of e)i.startsWith(_)&&await this.client.core.storage.removeItem(i)}catch(e){this.logger.warn(\"Failed to cleanup storage\",e)}}}const es=x;export{es as UniversalProvider,x as default};\n//# sourceMappingURL=index.es.js.map\n","const DEFAULT_SDK_URL = 'https://secure.walletconnect.org/sdk';\nexport const SECURE_SITE_SDK = (typeof process !== 'undefined' && typeof process.env !== 'undefined'\n    ? process.env['NEXT_PUBLIC_SECURE_SITE_SDK_URL']\n    : undefined) || DEFAULT_SDK_URL;\nexport const DEFAULT_LOG_LEVEL = (typeof process !== 'undefined' && typeof process.env !== 'undefined'\n    ? process.env['NEXT_PUBLIC_DEFAULT_LOG_LEVEL']\n    : undefined) || 'error';\nexport const SECURE_SITE_SDK_VERSION = (typeof process !== 'undefined' && typeof process.env !== 'undefined'\n    ? process.env['NEXT_PUBLIC_SECURE_SITE_SDK_VERSION']\n    : undefined) || '4';\nexport const W3mFrameConstants = {\n    APP_EVENT_KEY: '@w3m-app/',\n    FRAME_EVENT_KEY: '@w3m-frame/',\n    RPC_METHOD_KEY: 'RPC_',\n    STORAGE_KEY: '@appkit-wallet/',\n    SESSION_TOKEN_KEY: 'SESSION_TOKEN_KEY',\n    EMAIL_LOGIN_USED_KEY: 'EMAIL_LOGIN_USED_KEY',\n    LAST_USED_CHAIN_KEY: 'LAST_USED_CHAIN_KEY',\n    LAST_EMAIL_LOGIN_TIME: 'LAST_EMAIL_LOGIN_TIME',\n    EMAIL: 'EMAIL',\n    PREFERRED_ACCOUNT_TYPE: 'PREFERRED_ACCOUNT_TYPE',\n    SMART_ACCOUNT_ENABLED: 'SMART_ACCOUNT_ENABLED',\n    SMART_ACCOUNT_ENABLED_NETWORKS: 'SMART_ACCOUNT_ENABLED_NETWORKS',\n    SOCIAL_USERNAME: 'SOCIAL_USERNAME',\n    APP_SWITCH_NETWORK: '@w3m-app/SWITCH_NETWORK',\n    APP_CONNECT_EMAIL: '@w3m-app/CONNECT_EMAIL',\n    APP_CONNECT_DEVICE: '@w3m-app/CONNECT_DEVICE',\n    APP_CONNECT_OTP: '@w3m-app/CONNECT_OTP',\n    APP_CONNECT_SOCIAL: '@w3m-app/CONNECT_SOCIAL',\n    APP_GET_SOCIAL_REDIRECT_URI: '@w3m-app/GET_SOCIAL_REDIRECT_URI',\n    APP_GET_USER: '@w3m-app/GET_USER',\n    APP_SIGN_OUT: '@w3m-app/SIGN_OUT',\n    APP_IS_CONNECTED: '@w3m-app/IS_CONNECTED',\n    APP_GET_CHAIN_ID: '@w3m-app/GET_CHAIN_ID',\n    APP_RPC_REQUEST: '@w3m-app/RPC_REQUEST',\n    APP_UPDATE_EMAIL: '@w3m-app/UPDATE_EMAIL',\n    APP_UPDATE_EMAIL_PRIMARY_OTP: '@w3m-app/UPDATE_EMAIL_PRIMARY_OTP',\n    APP_UPDATE_EMAIL_SECONDARY_OTP: '@w3m-app/UPDATE_EMAIL_SECONDARY_OTP',\n    APP_AWAIT_UPDATE_EMAIL: '@w3m-app/AWAIT_UPDATE_EMAIL',\n    APP_SYNC_THEME: '@w3m-app/SYNC_THEME',\n    APP_SYNC_DAPP_DATA: '@w3m-app/SYNC_DAPP_DATA',\n    APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS: '@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS',\n    APP_INIT_SMART_ACCOUNT: '@w3m-app/INIT_SMART_ACCOUNT',\n    APP_SET_PREFERRED_ACCOUNT: '@w3m-app/SET_PREFERRED_ACCOUNT',\n    APP_CONNECT_FARCASTER: '@w3m-app/CONNECT_FARCASTER',\n    APP_GET_FARCASTER_URI: '@w3m-app/GET_FARCASTER_URI',\n    APP_RELOAD: '@w3m-app/RELOAD',\n    FRAME_SWITCH_NETWORK_ERROR: '@w3m-frame/SWITCH_NETWORK_ERROR',\n    FRAME_SWITCH_NETWORK_SUCCESS: '@w3m-frame/SWITCH_NETWORK_SUCCESS',\n    FRAME_CONNECT_EMAIL_ERROR: '@w3m-frame/CONNECT_EMAIL_ERROR',\n    FRAME_CONNECT_EMAIL_SUCCESS: '@w3m-frame/CONNECT_EMAIL_SUCCESS',\n    FRAME_CONNECT_DEVICE_ERROR: '@w3m-frame/CONNECT_DEVICE_ERROR',\n    FRAME_CONNECT_DEVICE_SUCCESS: '@w3m-frame/CONNECT_DEVICE_SUCCESS',\n    FRAME_CONNECT_OTP_SUCCESS: '@w3m-frame/CONNECT_OTP_SUCCESS',\n    FRAME_CONNECT_OTP_ERROR: '@w3m-frame/CONNECT_OTP_ERROR',\n    FRAME_CONNECT_SOCIAL_SUCCESS: '@w3m-frame/CONNECT_SOCIAL_SUCCESS',\n    FRAME_CONNECT_SOCIAL_ERROR: '@w3m-frame/CONNECT_SOCIAL_ERROR',\n    FRAME_CONNECT_FARCASTER_SUCCESS: '@w3m-frame/CONNECT_FARCASTER_SUCCESS',\n    FRAME_CONNECT_FARCASTER_ERROR: '@w3m-frame/CONNECT_FARCASTER_ERROR',\n    FRAME_GET_FARCASTER_URI_SUCCESS: '@w3m-frame/GET_FARCASTER_URI_SUCCESS',\n    FRAME_GET_FARCASTER_URI_ERROR: '@w3m-frame/GET_FARCASTER_URI_ERROR',\n    FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS: '@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS',\n    FRAME_GET_SOCIAL_REDIRECT_URI_ERROR: '@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR',\n    FRAME_GET_USER_SUCCESS: '@w3m-frame/GET_USER_SUCCESS',\n    FRAME_GET_USER_ERROR: '@w3m-frame/GET_USER_ERROR',\n    FRAME_SIGN_OUT_SUCCESS: '@w3m-frame/SIGN_OUT_SUCCESS',\n    FRAME_SIGN_OUT_ERROR: '@w3m-frame/SIGN_OUT_ERROR',\n    FRAME_IS_CONNECTED_SUCCESS: '@w3m-frame/IS_CONNECTED_SUCCESS',\n    FRAME_IS_CONNECTED_ERROR: '@w3m-frame/IS_CONNECTED_ERROR',\n    FRAME_GET_CHAIN_ID_SUCCESS: '@w3m-frame/GET_CHAIN_ID_SUCCESS',\n    FRAME_GET_CHAIN_ID_ERROR: '@w3m-frame/GET_CHAIN_ID_ERROR',\n    FRAME_RPC_REQUEST_SUCCESS: '@w3m-frame/RPC_REQUEST_SUCCESS',\n    FRAME_RPC_REQUEST_ERROR: '@w3m-frame/RPC_REQUEST_ERROR',\n    FRAME_SESSION_UPDATE: '@w3m-frame/SESSION_UPDATE',\n    FRAME_UPDATE_EMAIL_SUCCESS: '@w3m-frame/UPDATE_EMAIL_SUCCESS',\n    FRAME_UPDATE_EMAIL_ERROR: '@w3m-frame/UPDATE_EMAIL_ERROR',\n    FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS: '@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS',\n    FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR: '@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR',\n    FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS: '@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS',\n    FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR: '@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR',\n    FRAME_SYNC_THEME_SUCCESS: '@w3m-frame/SYNC_THEME_SUCCESS',\n    FRAME_SYNC_THEME_ERROR: '@w3m-frame/SYNC_THEME_ERROR',\n    FRAME_SYNC_DAPP_DATA_SUCCESS: '@w3m-frame/SYNC_DAPP_DATA_SUCCESS',\n    FRAME_SYNC_DAPP_DATA_ERROR: '@w3m-frame/SYNC_DAPP_DATA_ERROR',\n    FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS: '@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS',\n    FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR: '@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR',\n    FRAME_INIT_SMART_ACCOUNT_SUCCESS: '@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS',\n    FRAME_INIT_SMART_ACCOUNT_ERROR: '@w3m-frame/INIT_SMART_ACCOUNT_ERROR',\n    FRAME_SET_PREFERRED_ACCOUNT_SUCCESS: '@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS',\n    FRAME_SET_PREFERRED_ACCOUNT_ERROR: '@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR',\n    FRAME_READY: '@w3m-frame/READY',\n    FRAME_RELOAD_SUCCESS: '@w3m-frame/RELOAD_SUCCESS',\n    FRAME_RELOAD_ERROR: '@w3m-frame/RELOAD_ERROR',\n    RPC_RESPONSE_TYPE_ERROR: 'RPC_RESPONSE_ERROR',\n    RPC_RESPONSE_TYPE_TX: 'RPC_RESPONSE_TRANSACTION_HASH',\n    RPC_RESPONSE_TYPE_OBJECT: 'RPC_RESPONSE_OBJECT'\n};\nexport const W3mFrameRpcConstants = {\n    SAFE_RPC_METHODS: [\n        'eth_accounts',\n        'eth_blockNumber',\n        'eth_call',\n        'eth_chainId',\n        'eth_estimateGas',\n        'eth_feeHistory',\n        'eth_gasPrice',\n        'eth_getAccount',\n        'eth_getBalance',\n        'eth_getBlockByHash',\n        'eth_getBlockByNumber',\n        'eth_getBlockReceipts',\n        'eth_getBlockTransactionCountByHash',\n        'eth_getBlockTransactionCountByNumber',\n        'eth_getCode',\n        'eth_getFilterChanges',\n        'eth_getFilterLogs',\n        'eth_getLogs',\n        'eth_getProof',\n        'eth_getStorageAt',\n        'eth_getTransactionByBlockHashAndIndex',\n        'eth_getTransactionByBlockNumberAndIndex',\n        'eth_getTransactionByHash',\n        'eth_getTransactionCount',\n        'eth_getTransactionReceipt',\n        'eth_getUncleCountByBlockHash',\n        'eth_getUncleCountByBlockNumber',\n        'eth_maxPriorityFeePerGas',\n        'eth_newBlockFilter',\n        'eth_newFilter',\n        'eth_newPendingTransactionFilter',\n        'eth_sendRawTransaction',\n        'eth_syncing',\n        'eth_uninstallFilter',\n        'wallet_getCapabilities',\n        'wallet_getCallsStatus',\n        'eth_getUserOperationReceipt',\n        'eth_estimateUserOperationGas',\n        'eth_getUserOperationByHash',\n        'eth_supportedEntryPoints',\n        'wallet_getAssets'\n    ],\n    NOT_SAFE_RPC_METHODS: [\n        'personal_sign',\n        'eth_signTypedData_v4',\n        'eth_sendTransaction',\n        'solana_signMessage',\n        'solana_signTransaction',\n        'solana_signAllTransactions',\n        'solana_signAndSendTransaction',\n        'wallet_sendCalls',\n        'wallet_grantPermissions',\n        'wallet_revokePermissions',\n        'eth_sendUserOperation'\n    ],\n    GET_CHAIN_ID: 'eth_chainId',\n    RPC_METHOD_NOT_ALLOWED_MESSAGE: 'Requested RPC call is not allowed',\n    RPC_METHOD_NOT_ALLOWED_UI_MESSAGE: 'Action not allowed',\n    ACCOUNT_TYPES: {\n        EOA: 'eoa',\n        SMART_ACCOUNT: 'smartAccount'\n    }\n};\n//# sourceMappingURL=W3mFrameConstants.js.map","import { proxy } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\n// -- Constants ----------------------------------------- //\nconst DEFAULT_STATE = Object.freeze({\n    message: '',\n    variant: 'success',\n    svg: undefined,\n    open: false,\n    autoClose: true\n});\n// -- State --------------------------------------------- //\nconst state = proxy({\n    ...DEFAULT_STATE\n});\n// -- Controller ---------------------------------------- //\nexport const SnackController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    showLoading(message, options = {}) {\n        this._showMessage({ message, variant: 'loading', ...options });\n    },\n    showSuccess(message) {\n        this._showMessage({ message, variant: 'success' });\n    },\n    showSvg(message, svg) {\n        this._showMessage({ message, svg });\n    },\n    showError(message) {\n        const errorMessage = CoreHelperUtil.parseError(message);\n        this._showMessage({ message: errorMessage, variant: 'error' });\n    },\n    hide() {\n        state.message = DEFAULT_STATE.message;\n        state.variant = DEFAULT_STATE.variant;\n        state.svg = DEFAULT_STATE.svg;\n        state.open = DEFAULT_STATE.open;\n        state.autoClose = DEFAULT_STATE.autoClose;\n    },\n    _showMessage({ message, svg, variant = 'success', autoClose = DEFAULT_STATE.autoClose }) {\n        if (state.open) {\n            state.open = false;\n            setTimeout(() => {\n                state.message = message;\n                state.variant = variant;\n                state.svg = svg;\n                state.open = true;\n                state.autoClose = autoClose;\n            }, 150);\n        }\n        else {\n            state.message = message;\n            state.variant = variant;\n            state.svg = svg;\n            state.open = true;\n            state.autoClose = autoClose;\n        }\n    }\n};\n//# sourceMappingURL=SnackController.js.map","import UniversalProvider from '@walletconnect/universal-provider';\nimport { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { AccountController } from '../controllers/AccountController.js';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { ConnectionController } from '../controllers/ConnectionController.js';\nimport { ConnectorController } from '../controllers/ConnectorController.js';\nimport { EventsController } from '../controllers/EventsController.js';\nimport { ModalController } from '../controllers/ModalController.js';\nimport { OptionsController } from '../controllers/OptionsController.js';\nimport { RouterController } from '../controllers/RouterController.js';\nimport { SnackController } from '../controllers/SnackController.js';\nimport { CoreHelperUtil } from './CoreHelperUtil.js';\n/**\n * SIWXUtil holds the methods to interact with the SIWX plugin and must be called internally on AppKit.\n */\nexport const SIWXUtil = {\n    getSIWX() {\n        return OptionsController.state.siwx;\n    },\n    async initializeIfEnabled() {\n        const siwx = OptionsController.state.siwx;\n        const caipAddress = ChainController.getActiveCaipAddress();\n        if (!(siwx && caipAddress)) {\n            return;\n        }\n        const [namespace, chainId, address] = caipAddress.split(':');\n        if (!ChainController.checkIfSupportedNetwork(namespace)) {\n            return;\n        }\n        try {\n            const sessions = await siwx.getSessions(`${namespace}:${chainId}`, address);\n            if (sessions.length) {\n                return;\n            }\n            await ModalController.open({\n                view: 'SIWXSignMessage'\n            });\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('SIWXUtil:initializeIfEnabled', error);\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SIWX_AUTH_ERROR',\n                properties: this.getSIWXEventProperties()\n            });\n            // eslint-disable-next-line no-console\n            await ConnectionController._getClient()?.disconnect().catch(console.error);\n            RouterController.reset('Connect');\n            SnackController.showError('A problem occurred while trying initialize authentication');\n        }\n    },\n    async requestSignMessage() {\n        const siwx = OptionsController.state.siwx;\n        const address = CoreHelperUtil.getPlainAddress(ChainController.getActiveCaipAddress());\n        const network = ChainController.getActiveCaipNetwork();\n        const client = ConnectionController._getClient();\n        if (!siwx) {\n            throw new Error('SIWX is not enabled');\n        }\n        if (!address) {\n            throw new Error('No ActiveCaipAddress found');\n        }\n        if (!network) {\n            throw new Error('No ActiveCaipNetwork or client found');\n        }\n        if (!client) {\n            throw new Error('No ConnectionController client found');\n        }\n        try {\n            const siwxMessage = await siwx.createMessage({\n                chainId: network.caipNetworkId,\n                accountAddress: address\n            });\n            const message = siwxMessage.toString();\n            const connectorId = ConnectorController.getConnectorId(network.chainNamespace);\n            if (connectorId === CommonConstantsUtil.CONNECTOR_ID.AUTH) {\n                RouterController.pushTransactionStack({\n                    view: null,\n                    goBack: false,\n                    replace: true\n                });\n            }\n            const signature = await client.signMessage(message);\n            await siwx.addSession({\n                data: siwxMessage,\n                message,\n                signature: signature\n            });\n            ModalController.close();\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SIWX_AUTH_SUCCESS',\n                properties: this.getSIWXEventProperties()\n            });\n        }\n        catch (error) {\n            const properties = this.getSIWXEventProperties();\n            if (!ModalController.state.open || RouterController.state.view === 'ApproveTransaction') {\n                await ModalController.open({\n                    view: 'SIWXSignMessage'\n                });\n            }\n            if (properties.isSmartAccount) {\n                SnackController.showError('This application might not support Smart Accounts');\n            }\n            else {\n                SnackController.showError('Signature declined');\n            }\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SIWX_AUTH_ERROR',\n                properties\n            });\n            // eslint-disable-next-line no-console\n            console.error('SWIXUtil:requestSignMessage', error);\n        }\n    },\n    async cancelSignMessage() {\n        try {\n            const siwx = this.getSIWX();\n            const isRequired = siwx?.getRequired?.();\n            if (isRequired) {\n                await ConnectionController.disconnect();\n            }\n            else {\n                ModalController.close();\n            }\n            RouterController.reset('Connect');\n            EventsController.sendEvent({\n                event: 'CLICK_CANCEL_SIWX',\n                type: 'track',\n                properties: this.getSIWXEventProperties()\n            });\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('SIWXUtil:cancelSignMessage', error);\n        }\n    },\n    async getSessions() {\n        const siwx = OptionsController.state.siwx;\n        const address = CoreHelperUtil.getPlainAddress(ChainController.getActiveCaipAddress());\n        const network = ChainController.getActiveCaipNetwork();\n        if (!(siwx && address && network)) {\n            return [];\n        }\n        return siwx.getSessions(network.caipNetworkId, address);\n    },\n    async isSIWXCloseDisabled() {\n        const siwx = this.getSIWX();\n        if (siwx) {\n            const isApproveSignScreen = RouterController.state.view === 'ApproveTransaction';\n            const isSiwxSignMessage = RouterController.state.view === 'SIWXSignMessage';\n            if (isApproveSignScreen || isSiwxSignMessage) {\n                return siwx.getRequired?.() && (await this.getSessions()).length === 0;\n            }\n        }\n        return false;\n    },\n    async universalProviderAuthenticate({ universalProvider, chains, methods }) {\n        const siwx = SIWXUtil.getSIWX();\n        const namespaces = new Set(chains.map(chain => chain.split(':')[0]));\n        if (!siwx || namespaces.size !== 1 || !namespaces.has('eip155')) {\n            return false;\n        }\n        // Ignores chainId and account address to get other message data\n        const siwxMessage = await siwx.createMessage({\n            chainId: ChainController.getActiveCaipNetwork()?.caipNetworkId || '',\n            accountAddress: ''\n        });\n        const result = await universalProvider.authenticate({\n            nonce: siwxMessage.nonce,\n            domain: siwxMessage.domain,\n            uri: siwxMessage.uri,\n            exp: siwxMessage.expirationTime,\n            iat: siwxMessage.issuedAt,\n            nbf: siwxMessage.notBefore,\n            requestId: siwxMessage.requestId,\n            version: siwxMessage.version,\n            resources: siwxMessage.resources,\n            statement: siwxMessage.statement,\n            chainId: siwxMessage.chainId,\n            methods,\n            // The first chainId is what is used for universal provider to build the message\n            chains: [siwxMessage.chainId, ...chains.filter(chain => chain !== siwxMessage.chainId)]\n        });\n        SnackController.showLoading('Authenticating...', { autoClose: false });\n        AccountController.setConnectedWalletInfo({\n            ...result.session.peer.metadata,\n            name: result.session.peer.metadata.name,\n            icon: result.session.peer.metadata.icons?.[0],\n            type: 'WALLET_CONNECT'\n        }, Array.from(namespaces)[0]);\n        if (result?.auths?.length) {\n            const sessions = result.auths.map(cacao => {\n                const message = universalProvider.client.formatAuthMessage({\n                    request: cacao.p,\n                    iss: cacao.p.iss\n                });\n                return {\n                    data: {\n                        ...cacao.p,\n                        accountAddress: cacao.p.iss.split(':').slice(-1).join(''),\n                        chainId: cacao.p.iss.split(':').slice(2, 4).join(':'),\n                        uri: cacao.p.aud,\n                        version: cacao.p.version || siwxMessage.version,\n                        expirationTime: cacao.p.exp,\n                        issuedAt: cacao.p.iat,\n                        notBefore: cacao.p.nbf\n                    },\n                    message,\n                    signature: cacao.s.s,\n                    cacao\n                };\n            });\n            try {\n                await siwx.setSessions(sessions);\n                EventsController.sendEvent({\n                    type: 'track',\n                    event: 'SIWX_AUTH_SUCCESS',\n                    properties: SIWXUtil.getSIWXEventProperties()\n                });\n            }\n            catch (error) {\n                // eslint-disable-next-line no-console\n                console.error('SIWX:universalProviderAuth - failed to set sessions', error);\n                EventsController.sendEvent({\n                    type: 'track',\n                    event: 'SIWX_AUTH_ERROR',\n                    properties: SIWXUtil.getSIWXEventProperties()\n                });\n                // eslint-disable-next-line no-console\n                await universalProvider.disconnect().catch(console.error);\n                throw error;\n            }\n            finally {\n                SnackController.hide();\n            }\n        }\n        return true;\n    },\n    getSIWXEventProperties() {\n        return {\n            network: ChainController.state.activeCaipNetwork?.caipNetworkId || '',\n            isSmartAccount: AccountController.state.preferredAccountType ===\n                W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT\n        };\n    },\n    async clearSessions() {\n        const siwx = this.getSIWX();\n        if (siwx) {\n            await siwx.setSessions([]);\n        }\n    }\n};\n//# sourceMappingURL=SIWXUtil.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { AccountController } from './AccountController.js';\nimport { BlockchainApiController } from './BlockchainApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { EventsController } from './EventsController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { SnackController } from './SnackController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    transactions: [],\n    coinbaseTransactions: {},\n    transactionsByYear: {},\n    lastNetworkInView: undefined,\n    loading: false,\n    empty: false,\n    next: undefined\n});\n// -- Controller ---------------------------------------- //\nexport const TransactionsController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    setLastNetworkInView(lastNetworkInView) {\n        state.lastNetworkInView = lastNetworkInView;\n    },\n    async fetchTransactions(accountAddress, onramp) {\n        if (!accountAddress) {\n            throw new Error(\"Transactions can't be fetched without an accountAddress\");\n        }\n        state.loading = true;\n        try {\n            const response = await BlockchainApiController.fetchTransactions({\n                account: accountAddress,\n                cursor: state.next,\n                onramp,\n                // Coinbase transaction history state updates require the latest data\n                cache: onramp === 'coinbase' ? 'no-cache' : undefined,\n                chainId: ChainController.state.activeCaipNetwork?.caipNetworkId\n            });\n            const nonSpamTransactions = this.filterSpamTransactions(response.data);\n            const sameChainTransactions = this.filterByConnectedChain(nonSpamTransactions);\n            const filteredTransactions = [...state.transactions, ...sameChainTransactions];\n            state.loading = false;\n            if (onramp === 'coinbase') {\n                state.coinbaseTransactions = this.groupTransactionsByYearAndMonth(state.coinbaseTransactions, response.data);\n            }\n            else {\n                state.transactions = filteredTransactions;\n                state.transactionsByYear = this.groupTransactionsByYearAndMonth(state.transactionsByYear, sameChainTransactions);\n            }\n            state.empty = filteredTransactions.length === 0;\n            state.next = response.next ? response.next : undefined;\n        }\n        catch (error) {\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'ERROR_FETCH_TRANSACTIONS',\n                properties: {\n                    address: accountAddress,\n                    projectId: OptionsController.state.projectId,\n                    cursor: state.next,\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT\n                }\n            });\n            SnackController.showError('Failed to fetch transactions');\n            state.loading = false;\n            state.empty = true;\n            state.next = undefined;\n        }\n    },\n    groupTransactionsByYearAndMonth(transactionsMap = {}, transactions = []) {\n        const grouped = transactionsMap;\n        transactions.forEach(transaction => {\n            const year = new Date(transaction.metadata.minedAt).getFullYear();\n            const month = new Date(transaction.metadata.minedAt).getMonth();\n            const yearTransactions = grouped[year] ?? {};\n            const monthTransactions = yearTransactions[month] ?? [];\n            // If there's a transaction with the same id, remove the old one\n            const newMonthTransactions = monthTransactions.filter(tx => tx.id !== transaction.id);\n            grouped[year] = {\n                ...yearTransactions,\n                [month]: [...newMonthTransactions, transaction].sort((a, b) => new Date(b.metadata.minedAt).getTime() - new Date(a.metadata.minedAt).getTime())\n            };\n        });\n        return grouped;\n    },\n    filterSpamTransactions(transactions) {\n        return transactions.filter(transaction => {\n            const isAllSpam = transaction.transfers.every(transfer => transfer.nft_info?.flags.is_spam === true);\n            return !isAllSpam;\n        });\n    },\n    filterByConnectedChain(transactions) {\n        const chainId = ChainController.state.activeCaipNetwork?.caipNetworkId;\n        const filteredTransactions = transactions.filter(transaction => transaction.metadata.chain === chainId);\n        return filteredTransactions;\n    },\n    clearCursor() {\n        state.next = undefined;\n    },\n    resetTransactions() {\n        state.transactions = [];\n        state.transactionsByYear = {};\n        state.lastNetworkInView = undefined;\n        state.loading = false;\n        state.empty = false;\n        state.next = undefined;\n    }\n};\n//# sourceMappingURL=TransactionsController.js.map","import { proxy, ref } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport {} from '@reown/appkit-common';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { SIWXUtil } from '../utils/SIWXUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { ModalController } from './ModalController.js';\nimport { RouterController } from './RouterController.js';\nimport { TransactionsController } from './TransactionsController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    wcError: false,\n    buffering: false,\n    status: 'disconnected'\n});\n// eslint-disable-next-line init-declarations\nlet wcConnectionPromise;\n// -- Controller ---------------------------------------- //\nexport const ConnectionController = {\n    state,\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    _getClient() {\n        return state._client;\n    },\n    setClient(client) {\n        state._client = ref(client);\n    },\n    async connectWalletConnect() {\n        if (CoreHelperUtil.isTelegram() || (CoreHelperUtil.isSafari() && CoreHelperUtil.isIos())) {\n            if (wcConnectionPromise) {\n                await wcConnectionPromise;\n                wcConnectionPromise = undefined;\n                return;\n            }\n            if (!CoreHelperUtil.isPairingExpired(state?.wcPairingExpiry)) {\n                const link = state.wcUri;\n                state.wcUri = link;\n                return;\n            }\n            wcConnectionPromise = this._getClient()\n                ?.connectWalletConnect?.()\n                .catch(() => undefined);\n            this.state.status = 'connecting';\n            await wcConnectionPromise;\n            wcConnectionPromise = undefined;\n            state.wcPairingExpiry = undefined;\n            this.state.status = 'connected';\n        }\n        else {\n            await this._getClient()?.connectWalletConnect?.();\n        }\n    },\n    async connectExternal(options, chain, setChain = true) {\n        await this._getClient()?.connectExternal?.(options);\n        if (setChain) {\n            ChainController.setActiveNamespace(chain);\n        }\n    },\n    async reconnectExternal(options) {\n        await this._getClient()?.reconnectExternal?.(options);\n        const namespace = options.chain || ChainController.state.activeChain;\n        if (namespace) {\n            ConnectorController.setConnectorId(options.id, namespace);\n        }\n    },\n    async setPreferredAccountType(accountType) {\n        ModalController.setLoading(true, ChainController.state.activeChain);\n        const authConnector = ConnectorController.getAuthConnector();\n        if (!authConnector) {\n            return;\n        }\n        await authConnector?.provider.setPreferredAccount(accountType);\n        await this.reconnectExternal(authConnector);\n        ModalController.setLoading(false, ChainController.state.activeChain);\n        EventsController.sendEvent({\n            type: 'track',\n            event: 'SET_PREFERRED_ACCOUNT_TYPE',\n            properties: {\n                accountType,\n                network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n            }\n        });\n    },\n    async signMessage(message) {\n        return this._getClient()?.signMessage(message);\n    },\n    parseUnits(value, decimals) {\n        return this._getClient()?.parseUnits(value, decimals);\n    },\n    formatUnits(value, decimals) {\n        return this._getClient()?.formatUnits(value, decimals);\n    },\n    async sendTransaction(args) {\n        return this._getClient()?.sendTransaction(args);\n    },\n    async getCapabilities(params) {\n        return this._getClient()?.getCapabilities(params);\n    },\n    async grantPermissions(params) {\n        return this._getClient()?.grantPermissions(params);\n    },\n    async walletGetAssets(params) {\n        return this._getClient()?.walletGetAssets(params) ?? {};\n    },\n    async estimateGas(args) {\n        return this._getClient()?.estimateGas(args);\n    },\n    async writeContract(args) {\n        return this._getClient()?.writeContract(args);\n    },\n    async getEnsAddress(value) {\n        return this._getClient()?.getEnsAddress(value);\n    },\n    async getEnsAvatar(value) {\n        return this._getClient()?.getEnsAvatar(value);\n    },\n    checkInstalled(ids) {\n        return this._getClient()?.checkInstalled?.(ids) || false;\n    },\n    resetWcConnection() {\n        state.wcUri = undefined;\n        state.wcPairingExpiry = undefined;\n        state.wcLinking = undefined;\n        state.recentWallet = undefined;\n        state.status = 'disconnected';\n        TransactionsController.resetTransactions();\n        StorageUtil.deleteWalletConnectDeepLink();\n    },\n    resetUri() {\n        state.wcUri = undefined;\n        state.wcPairingExpiry = undefined;\n    },\n    finalizeWcConnection() {\n        const { wcLinking, recentWallet } = ConnectionController.state;\n        if (wcLinking) {\n            StorageUtil.setWalletConnectDeepLink(wcLinking);\n        }\n        if (recentWallet) {\n            StorageUtil.setAppKitRecent(recentWallet);\n        }\n        EventsController.sendEvent({\n            type: 'track',\n            event: 'CONNECT_SUCCESS',\n            properties: {\n                method: wcLinking ? 'mobile' : 'qrcode',\n                name: RouterController.state.data?.wallet?.name || 'Unknown'\n            }\n        });\n    },\n    setWcBasic(wcBasic) {\n        state.wcBasic = wcBasic;\n    },\n    setUri(uri) {\n        state.wcUri = uri;\n        state.wcPairingExpiry = CoreHelperUtil.getPairingExpiry();\n    },\n    setWcLinking(wcLinking) {\n        state.wcLinking = wcLinking;\n    },\n    setWcError(wcError) {\n        state.wcError = wcError;\n        state.buffering = false;\n    },\n    setRecentWallet(wallet) {\n        state.recentWallet = wallet;\n    },\n    setBuffering(buffering) {\n        state.buffering = buffering;\n    },\n    setStatus(status) {\n        state.status = status;\n    },\n    async disconnect(namespace) {\n        try {\n            ModalController.setLoading(true, namespace);\n            await SIWXUtil.clearSessions();\n            await ChainController.disconnect(namespace);\n            ModalController.setLoading(false, namespace);\n            ConnectorController.setFilterByNamespace(undefined);\n        }\n        catch (error) {\n            throw new Error('Failed to disconnect');\n        }\n    }\n};\n//# sourceMappingURL=ConnectionController.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    loading: false,\n    open: false,\n    selectedNetworkId: undefined,\n    activeChain: undefined,\n    initialized: false\n});\n// -- Controller ---------------------------------------- //\nexport const PublicStateController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    set(newState) {\n        Object.assign(state, { ...state, ...newState });\n    }\n};\n//# sourceMappingURL=PublicStateController.js.map","/**\n *  Divides a number by a given exponent of base 10 (10exponent), and formats it into a string representation of the number..\n *\n * - Docs: https://viem.sh/docs/utilities/formatUnits\n *\n * @example\n * import { formatUnits } from 'viem'\n *\n * formatUnits(420000000000n, 9)\n * // '420'\n */\nexport function formatUnits(value, decimals) {\n    let display = value.toString();\n    const negative = display.startsWith('-');\n    if (negative)\n        display = display.slice(1);\n    display = display.padStart(decimals, '0');\n    let [integer, fraction] = [\n        display.slice(0, display.length - decimals),\n        display.slice(display.length - decimals),\n    ];\n    fraction = fraction.replace(/(0+)$/, '');\n    return `${negative ? '-' : ''}${integer || '0'}${fraction ? `.${fraction}` : ''}`;\n}\n//# sourceMappingURL=formatUnits.js.map","import { formatUnits } from 'viem';\nexport const ERC7811Utils = {\n    /**\n     * Creates a Balance object from an ERC7811 Asset object\n     * @param asset - Asset object to convert\n     * @param chainId - Chain ID in CAIP-2 format\n     * @returns Balance object\n     */\n    createBalance(asset, chainId) {\n        const metadata = {\n            name: (asset.metadata['name'] || ''),\n            symbol: (asset.metadata['symbol'] || ''),\n            decimals: (asset.metadata['decimals'] || 0),\n            value: (asset.metadata['value'] || 0),\n            price: (asset.metadata['price'] || 0),\n            iconUrl: (asset.metadata['iconUrl'] || '')\n        };\n        return {\n            name: metadata.name,\n            symbol: metadata.symbol,\n            chainId,\n            address: asset.address === 'native'\n                ? undefined\n                : this.convertAddressToCAIP10Address(asset.address, chainId),\n            value: metadata.value,\n            price: metadata.price,\n            quantity: {\n                decimals: metadata.decimals.toString(),\n                numeric: this.convertHexToBalance({\n                    hex: asset.balance,\n                    decimals: metadata.decimals\n                })\n            },\n            iconUrl: metadata.iconUrl\n        };\n    },\n    /**\n     * Converts a hex string to a Balance object\n     * @param hex - Hex string to convert\n     * @param decimals - Number of decimals to use\n     * @returns Balance object\n     */\n    convertHexToBalance({ hex, decimals }) {\n        return formatUnits(BigInt(hex), decimals);\n    },\n    /**\n     * Converts an address to a CAIP-10 address\n     * @param address - Address to convert\n     * @param chainId - Chain ID in CAIP-2 format\n     * @returns CAIP-10 address\n     */\n    convertAddressToCAIP10Address(address, chainId) {\n        return `${chainId}:${address}`;\n    },\n    /**\n     *  Creates a CAIP-2 Chain ID from a chain ID and namespace\n     * @param chainId  - Chain ID in hex format\n     * @param namespace  - Chain namespace\n     * @returns\n     */\n    createCAIP2ChainId(chainId, namespace) {\n        return `${namespace}:${parseInt(chainId, 16)}`;\n    },\n    /**\n     * Gets the chain ID in hex format from a CAIP-2 Chain ID\n     * @param caip2ChainId - CAIP-2 Chain ID\n     * @returns Chain ID in hex format\n     */\n    getChainIdHexFromCAIP2ChainId(caip2ChainId) {\n        const parts = caip2ChainId.split(':');\n        if (parts.length < 2 || !parts[1]) {\n            return '0x0';\n        }\n        const chainPart = parts[1];\n        const parsed = parseInt(chainPart, 10);\n        return isNaN(parsed) ? '0x0' : `0x${parsed.toString(16)}`;\n    },\n    /**\n     * Checks if a response is a valid WalletGetAssetsResponse\n     * @param response - The response to check\n     * @returns True if the response is a valid WalletGetAssetsResponse, false otherwise\n     */\n    isWalletGetAssetsResponse(response) {\n        // Check if response is an object and has the expected structure\n        if (typeof response !== 'object' || response === null) {\n            return false;\n        }\n        // Check if all values are arrays and conform to the expected asset structure\n        return Object.values(response).every(value => Array.isArray(value) && value.every(asset => this.isValidAsset(asset)));\n    },\n    /**\n     * Checks if an asset object is valid.\n     * @param asset - The asset object to check.\n     * @returns True if the asset is valid, false otherwise.\n     */\n    isValidAsset(asset) {\n        return (typeof asset === 'object' &&\n            asset !== null &&\n            typeof asset.address === 'string' &&\n            typeof asset.balance === 'string' &&\n            (asset.type === 'ERC20' || asset.type === 'NATIVE') &&\n            typeof asset.metadata === 'object' &&\n            asset.metadata !== null &&\n            typeof asset.metadata['name'] === 'string' &&\n            typeof asset.metadata['symbol'] === 'string' &&\n            typeof asset.metadata['decimals'] === 'number' &&\n            typeof asset.metadata['price'] === 'number' &&\n            typeof asset.metadata['iconUrl'] === 'string');\n    }\n};\n//# sourceMappingURL=ERC7811Util.js.map","import { AccountController } from '../controllers/AccountController.js';\nimport { BlockchainApiController } from '../controllers/BlockchainApiController.js';\nimport { ChainController } from '../controllers/ChainController.js';\nimport { ConnectionController } from '../controllers/ConnectionController.js';\nimport { ERC7811Utils } from './ERC7811Util.js';\n// -- Controller ---------------------------------------- //\nexport const SendApiUtil = {\n    async getMyTokensWithBalance(forceUpdate) {\n        const address = AccountController.state.address;\n        const caipNetwork = ChainController.state.activeCaipNetwork;\n        if (!address || !caipNetwork) {\n            return [];\n        }\n        // Extract EIP-155 specific logic\n        if (caipNetwork.chainNamespace === 'eip155') {\n            const eip155Balances = await this.getEIP155Balances(address, caipNetwork);\n            if (eip155Balances) {\n                return this.filterLowQualityTokens(eip155Balances);\n            }\n        }\n        // Fallback to 1Inch API\n        const response = await BlockchainApiController.getBalance(address, caipNetwork.caipNetworkId, forceUpdate);\n        return this.filterLowQualityTokens(response.balances);\n    },\n    async getEIP155Balances(address, caipNetwork) {\n        try {\n            const chainIdHex = ERC7811Utils.getChainIdHexFromCAIP2ChainId(caipNetwork.caipNetworkId);\n            const walletCapabilities = (await ConnectionController.getCapabilities(address));\n            if (!walletCapabilities?.[chainIdHex]?.['assetDiscovery']?.supported) {\n                return null;\n            }\n            const walletGetAssetsResponse = await ConnectionController.walletGetAssets({\n                account: address,\n                chainFilter: [chainIdHex]\n            });\n            if (!ERC7811Utils.isWalletGetAssetsResponse(walletGetAssetsResponse)) {\n                return null;\n            }\n            const assets = walletGetAssetsResponse[chainIdHex] || [];\n            return assets.map(asset => ERC7811Utils.createBalance(asset, caipNetwork.caipNetworkId));\n        }\n        catch (error) {\n            return null;\n        }\n    },\n    /**\n     * The 1Inch API includes many low-quality tokens in the balance response,\n     * which appear inconsistently. This filter prevents them from being displayed.\n     */\n    filterLowQualityTokens(balances) {\n        return balances.filter(balance => balance.quantity.decimals !== '0');\n    },\n    mapBalancesToSwapTokens(balances) {\n        return (balances?.map(token => ({\n            ...token,\n            address: token?.address\n                ? token.address\n                : ChainController.getActiveNetworkTokenAddress(),\n            decimals: parseInt(token.quantity.decimals, 10),\n            logoUri: token.iconUrl,\n            eip2612: false\n        })) || []);\n    }\n};\n//# sourceMappingURL=SendApiUtil.js.map","import { proxy, ref, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { NumberUtil } from '@reown/appkit-common';\nimport { ContractUtil } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { SendApiUtil } from '../utils/SendApiUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { EventsController } from './EventsController.js';\nimport { RouterController } from './RouterController.js';\nimport { SnackController } from './SnackController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    tokenBalances: [],\n    loading: false\n});\n// -- Controller ---------------------------------------- //\nexport const SendController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    setToken(token) {\n        if (token) {\n            state.token = ref(token);\n        }\n    },\n    setTokenAmount(sendTokenAmount) {\n        state.sendTokenAmount = sendTokenAmount;\n    },\n    setReceiverAddress(receiverAddress) {\n        state.receiverAddress = receiverAddress;\n    },\n    setReceiverProfileImageUrl(receiverProfileImageUrl) {\n        state.receiverProfileImageUrl = receiverProfileImageUrl;\n    },\n    setReceiverProfileName(receiverProfileName) {\n        state.receiverProfileName = receiverProfileName;\n    },\n    setGasPrice(gasPrice) {\n        state.gasPrice = gasPrice;\n    },\n    setGasPriceInUsd(gasPriceInUSD) {\n        state.gasPriceInUSD = gasPriceInUSD;\n    },\n    setNetworkBalanceInUsd(networkBalanceInUSD) {\n        state.networkBalanceInUSD = networkBalanceInUSD;\n    },\n    setLoading(loading) {\n        state.loading = loading;\n    },\n    sendToken() {\n        switch (ChainController.state.activeCaipNetwork?.chainNamespace) {\n            case 'eip155':\n                this.sendEvmToken();\n                return;\n            case 'solana':\n                this.sendSolanaToken();\n                return;\n            default:\n                throw new Error('Unsupported chain');\n        }\n    },\n    sendEvmToken() {\n        if (this.state.token?.address && this.state.sendTokenAmount && this.state.receiverAddress) {\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SEND_INITIATED',\n                properties: {\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n                    token: this.state.token.address,\n                    amount: this.state.sendTokenAmount,\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n                }\n            });\n            this.sendERC20Token({\n                receiverAddress: this.state.receiverAddress,\n                tokenAddress: this.state.token.address,\n                sendTokenAmount: this.state.sendTokenAmount,\n                decimals: this.state.token.quantity.decimals\n            });\n        }\n        else if (this.state.receiverAddress &&\n            this.state.sendTokenAmount &&\n            this.state.gasPrice &&\n            this.state.token?.quantity.decimals) {\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SEND_INITIATED',\n                properties: {\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n                    token: this.state.token?.symbol,\n                    amount: this.state.sendTokenAmount,\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n                }\n            });\n            this.sendNativeToken({\n                receiverAddress: this.state.receiverAddress,\n                sendTokenAmount: this.state.sendTokenAmount,\n                gasPrice: this.state.gasPrice,\n                decimals: this.state.token.quantity.decimals\n            });\n        }\n    },\n    async fetchTokenBalance(onError) {\n        state.loading = true;\n        const chainId = ChainController.state.activeCaipNetwork?.caipNetworkId;\n        const chain = ChainController.state.activeCaipNetwork?.chainNamespace;\n        const caipAddress = ChainController.state.activeCaipAddress;\n        const address = caipAddress ? CoreHelperUtil.getPlainAddress(caipAddress) : undefined;\n        if (state.lastRetry &&\n            !CoreHelperUtil.isAllowedRetry(state.lastRetry, 30 * ConstantsUtil.ONE_SEC_MS)) {\n            state.loading = false;\n            return [];\n        }\n        try {\n            if (address && chainId && chain) {\n                const balances = await SendApiUtil.getMyTokensWithBalance();\n                state.tokenBalances = balances;\n                state.lastRetry = undefined;\n                return balances;\n            }\n        }\n        catch (error) {\n            state.lastRetry = Date.now();\n            onError?.(error);\n            SnackController.showError('Token Balance Unavailable');\n        }\n        finally {\n            state.loading = false;\n        }\n        return [];\n    },\n    fetchNetworkBalance() {\n        if (state.tokenBalances.length === 0) {\n            return;\n        }\n        const networkTokenBalances = SendApiUtil.mapBalancesToSwapTokens(state.tokenBalances);\n        if (!networkTokenBalances) {\n            return;\n        }\n        const networkToken = networkTokenBalances.find(token => token.address === ChainController.getActiveNetworkTokenAddress());\n        if (!networkToken) {\n            return;\n        }\n        state.networkBalanceInUSD = networkToken\n            ? NumberUtil.multiply(networkToken.quantity.numeric, networkToken.price).toString()\n            : '0';\n    },\n    isInsufficientNetworkTokenForGas(networkBalanceInUSD, gasPriceInUSD) {\n        const gasPrice = gasPriceInUSD || '0';\n        if (NumberUtil.bigNumber(networkBalanceInUSD).eq(0)) {\n            return true;\n        }\n        return NumberUtil.bigNumber(NumberUtil.bigNumber(gasPrice)).gt(networkBalanceInUSD);\n    },\n    hasInsufficientGasFunds() {\n        let isInsufficientNetworkTokenForGas = true;\n        if (AccountController.state.preferredAccountType ===\n            W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT) {\n            // Smart Accounts may pay gas in any ERC20 token\n            isInsufficientNetworkTokenForGas = false;\n        }\n        else if (state.networkBalanceInUSD) {\n            isInsufficientNetworkTokenForGas = this.isInsufficientNetworkTokenForGas(state.networkBalanceInUSD, state.gasPriceInUSD);\n        }\n        return isInsufficientNetworkTokenForGas;\n    },\n    async sendNativeToken(params) {\n        RouterController.pushTransactionStack({\n            view: 'Account',\n            goBack: false\n        });\n        const to = params.receiverAddress;\n        const address = AccountController.state.address;\n        const value = ConnectionController.parseUnits(params.sendTokenAmount.toString(), Number(params.decimals));\n        const data = '0x';\n        try {\n            await ConnectionController.sendTransaction({\n                chainNamespace: 'eip155',\n                to,\n                address,\n                data,\n                value: value ?? BigInt(0),\n                gasPrice: params.gasPrice\n            });\n            SnackController.showSuccess('Transaction started');\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SEND_SUCCESS',\n                properties: {\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n                    token: this.state.token?.symbol || '',\n                    amount: params.sendTokenAmount,\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n                }\n            });\n            this.resetSend();\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('SendController:sendERC20Token - failed to send native token', error);\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SEND_ERROR',\n                properties: {\n                    message: errorMessage,\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n                    token: this.state.token?.symbol || '',\n                    amount: params.sendTokenAmount,\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n                }\n            });\n            SnackController.showError('Something went wrong');\n        }\n    },\n    async sendERC20Token(params) {\n        RouterController.pushTransactionStack({\n            view: 'Account',\n            goBack: false\n        });\n        const amount = ConnectionController.parseUnits(params.sendTokenAmount.toString(), Number(params.decimals));\n        try {\n            if (AccountController.state.address &&\n                params.sendTokenAmount &&\n                params.receiverAddress &&\n                params.tokenAddress) {\n                const tokenAddress = CoreHelperUtil.getPlainAddress(params.tokenAddress);\n                await ConnectionController.writeContract({\n                    fromAddress: AccountController.state.address,\n                    tokenAddress,\n                    args: [params.receiverAddress, amount ?? BigInt(0)],\n                    method: 'transfer',\n                    abi: ContractUtil.getERC20Abi(tokenAddress),\n                    chainNamespace: 'eip155'\n                });\n                SnackController.showSuccess('Transaction started');\n                this.resetSend();\n            }\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('SendController:sendERC20Token - failed to send erc20 token', error);\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SEND_ERROR',\n                properties: {\n                    message: errorMessage,\n                    isSmartAccount: AccountController.state.preferredAccountType ===\n                        W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,\n                    token: this.state.token?.symbol || '',\n                    amount: params.sendTokenAmount,\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || ''\n                }\n            });\n            SnackController.showError('Something went wrong');\n        }\n    },\n    sendSolanaToken() {\n        if (!this.state.sendTokenAmount || !this.state.receiverAddress) {\n            SnackController.showError('Please enter a valid amount and receiver address');\n            return;\n        }\n        RouterController.pushTransactionStack({\n            view: 'Account',\n            goBack: false\n        });\n        ConnectionController.sendTransaction({\n            chainNamespace: 'solana',\n            to: this.state.receiverAddress,\n            value: this.state.sendTokenAmount\n        })\n            .then(() => {\n            this.resetSend();\n            AccountController.fetchTokenBalance();\n        })\n            .catch(error => {\n            SnackController.showError('Failed to send transaction. Please try again.');\n            // eslint-disable-next-line no-console\n            console.error('SendController:sendToken - failed to send solana transaction', error);\n        });\n    },\n    resetSend() {\n        state.token = undefined;\n        state.sendTokenAmount = undefined;\n        state.receiverAddress = undefined;\n        state.receiverProfileImageUrl = undefined;\n        state.receiverProfileName = undefined;\n        state.loading = false;\n        state.tokenBalances = [];\n    }\n};\n//# sourceMappingURL=SendController.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { proxyMap, subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { ConstantsUtil as CommonConstantsUtil, NetworkUtil } from '@reown/appkit-common';\nimport { getChainsToDisconnect } from '../utils/ChainControllerUtil.js';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { ModalController } from './ModalController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { PublicStateController } from './PublicStateController.js';\nimport { RouterController } from './RouterController.js';\nimport { SendController } from './SendController.js';\n// -- Constants ----------------------------------------- //\nconst accountState = {\n    currentTab: 0,\n    tokenBalance: [],\n    smartAccountDeployed: false,\n    addressLabels: new Map(),\n    allAccounts: [],\n    user: undefined\n};\nconst networkState = {\n    caipNetwork: undefined,\n    supportsAllNetworks: true,\n    smartAccountEnabledNetworks: []\n};\n// -- State --------------------------------------------- //\nconst state = proxy({\n    chains: proxyMap(),\n    activeCaipAddress: undefined,\n    activeChain: undefined,\n    activeCaipNetwork: undefined,\n    noAdapters: false,\n    universalAdapter: {\n        networkControllerClient: undefined,\n        connectionControllerClient: undefined\n    },\n    isSwitchingNamespace: false\n});\n// -- Controller ---------------------------------------- //\nexport const ChainController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => {\n            callback(state);\n        });\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    subscribeChainProp(property, callback, chain) {\n        let prev = undefined;\n        return sub(state.chains, () => {\n            const activeChain = chain || state.activeChain;\n            if (activeChain) {\n                const nextValue = state.chains.get(activeChain)?.[property];\n                if (prev !== nextValue) {\n                    prev = nextValue;\n                    callback(nextValue);\n                }\n            }\n        });\n    },\n    initialize(adapters, caipNetworks, clients) {\n        const { chainId: activeChainId, namespace: activeNamespace } = StorageUtil.getActiveNetworkProps();\n        const activeCaipNetwork = caipNetworks?.find(network => network.id.toString() === activeChainId?.toString());\n        const defaultAdapter = adapters.find(adapter => adapter?.namespace === activeNamespace);\n        const adapterToActivate = defaultAdapter || adapters?.[0];\n        const namespaces = new Set([...(caipNetworks?.map(network => network.chainNamespace) ?? [])]);\n        if (adapters?.length === 0 || !adapterToActivate) {\n            state.noAdapters = true;\n        }\n        if (!state.noAdapters) {\n            state.activeChain = adapterToActivate?.namespace;\n            state.activeCaipNetwork = activeCaipNetwork;\n            this.setChainNetworkData(adapterToActivate?.namespace, { caipNetwork: activeCaipNetwork });\n            if (state.activeChain) {\n                PublicStateController.set({ activeChain: adapterToActivate?.namespace });\n            }\n        }\n        namespaces.forEach(namespace => {\n            const namespaceNetworks = caipNetworks?.filter(network => network.chainNamespace === namespace);\n            ChainController.state.chains.set(namespace, {\n                namespace,\n                networkState: proxy({\n                    ...networkState,\n                    caipNetwork: namespaceNetworks?.[0]\n                }),\n                accountState: proxy(accountState),\n                caipNetworks: namespaceNetworks ?? [],\n                ...clients\n            });\n            this.setRequestedCaipNetworks(namespaceNetworks ?? [], namespace);\n        });\n    },\n    removeAdapter(namespace) {\n        if (state.activeChain === namespace) {\n            const nextAdapter = Array.from(state.chains.entries()).find(([chainNamespace]) => chainNamespace !== namespace);\n            if (nextAdapter) {\n                const caipNetwork = nextAdapter[1]?.caipNetworks?.[0];\n                if (caipNetwork) {\n                    this.setActiveCaipNetwork(caipNetwork);\n                }\n            }\n        }\n        state.chains.delete(namespace);\n    },\n    addAdapter(adapter, { networkControllerClient, connectionControllerClient }, caipNetworks) {\n        state.chains.set(adapter.namespace, {\n            namespace: adapter.namespace,\n            networkState: {\n                ...networkState,\n                caipNetwork: caipNetworks[0]\n            },\n            accountState,\n            caipNetworks,\n            connectionControllerClient,\n            networkControllerClient\n        });\n        this.setRequestedCaipNetworks(caipNetworks?.filter(caipNetwork => caipNetwork.chainNamespace === adapter.namespace) ?? [], adapter.namespace);\n    },\n    addNetwork(network) {\n        const chainAdapter = state.chains.get(network.chainNamespace);\n        if (chainAdapter) {\n            const newNetworks = [...(chainAdapter.caipNetworks || [])];\n            if (!chainAdapter.caipNetworks?.find(caipNetwork => caipNetwork.id === network.id)) {\n                newNetworks.push(network);\n            }\n            state.chains.set(network.chainNamespace, { ...chainAdapter, caipNetworks: newNetworks });\n            this.setRequestedCaipNetworks(newNetworks, network.chainNamespace);\n        }\n    },\n    removeNetwork(namespace, networkId) {\n        const chainAdapter = state.chains.get(namespace);\n        if (chainAdapter) {\n            // Check if network being removed is active network\n            const isActiveNetwork = state.activeCaipNetwork?.id === networkId;\n            // Filter out the network being removed\n            const newCaipNetworksOfAdapter = [\n                ...(chainAdapter.caipNetworks?.filter(network => network.id !== networkId) || [])\n            ];\n            // If active network was removed and there are other networks available, switch to first one\n            if (isActiveNetwork && chainAdapter?.caipNetworks?.[0]) {\n                this.setActiveCaipNetwork(chainAdapter.caipNetworks[0]);\n            }\n            state.chains.set(namespace, { ...chainAdapter, caipNetworks: newCaipNetworksOfAdapter });\n            this.setRequestedCaipNetworks(newCaipNetworksOfAdapter || [], namespace);\n        }\n    },\n    setAdapterNetworkState(chain, props) {\n        const chainAdapter = state.chains.get(chain);\n        if (chainAdapter) {\n            chainAdapter.networkState = {\n                ...(chainAdapter.networkState || networkState),\n                ...props\n            };\n            state.chains.set(chain, chainAdapter);\n        }\n    },\n    setChainAccountData(chain, accountProps, _unknown = true) {\n        if (!chain) {\n            throw new Error('Chain is required to update chain account data');\n        }\n        const chainAdapter = state.chains.get(chain);\n        if (chainAdapter) {\n            const newAccountState = { ...(chainAdapter.accountState || accountState), ...accountProps };\n            state.chains.set(chain, { ...chainAdapter, accountState: newAccountState });\n            if (state.chains.size === 1 || state.activeChain === chain) {\n                if (accountProps.caipAddress) {\n                    state.activeCaipAddress = accountProps.caipAddress;\n                }\n                AccountController.replaceState(newAccountState);\n            }\n        }\n    },\n    setChainNetworkData(chain, networkProps) {\n        if (!chain) {\n            return;\n        }\n        const chainAdapter = state.chains.get(chain);\n        if (chainAdapter) {\n            const newNetworkState = { ...(chainAdapter.networkState || networkState), ...networkProps };\n            state.chains.set(chain, { ...chainAdapter, networkState: newNetworkState });\n        }\n    },\n    // eslint-disable-next-line max-params\n    setAccountProp(prop, value, chain, replaceState = true) {\n        this.setChainAccountData(chain, { [prop]: value }, replaceState);\n        if (prop === 'status' && value === 'disconnected' && chain) {\n            ConnectorController.removeConnectorId(chain);\n        }\n    },\n    setActiveNamespace(chain) {\n        state.activeChain = chain;\n        const newAdapter = chain ? state.chains.get(chain) : undefined;\n        const caipNetwork = newAdapter?.networkState?.caipNetwork;\n        if (caipNetwork?.id && chain) {\n            state.activeCaipAddress = newAdapter?.accountState?.caipAddress;\n            state.activeCaipNetwork = caipNetwork;\n            this.setChainNetworkData(chain, { caipNetwork });\n            StorageUtil.setActiveCaipNetworkId(caipNetwork?.caipNetworkId);\n            PublicStateController.set({\n                activeChain: chain,\n                selectedNetworkId: caipNetwork?.caipNetworkId\n            });\n        }\n    },\n    setActiveCaipNetwork(caipNetwork) {\n        if (!caipNetwork) {\n            return;\n        }\n        if (state.activeChain !== caipNetwork.chainNamespace) {\n            this.setIsSwitchingNamespace(true);\n        }\n        const newAdapter = state.chains.get(caipNetwork.chainNamespace);\n        state.activeChain = caipNetwork.chainNamespace;\n        state.activeCaipNetwork = caipNetwork;\n        this.setChainNetworkData(caipNetwork.chainNamespace, { caipNetwork });\n        if (newAdapter?.accountState?.address) {\n            state.activeCaipAddress = `${caipNetwork.chainNamespace}:${caipNetwork.id}:${newAdapter?.accountState?.address}`;\n        }\n        else {\n            state.activeCaipAddress = undefined;\n        }\n        // Update the chain's account state with the new caip address value\n        this.setAccountProp('caipAddress', state.activeCaipAddress, caipNetwork.chainNamespace);\n        if (newAdapter) {\n            AccountController.replaceState(newAdapter.accountState);\n        }\n        // Reset send state when switching networks\n        SendController.resetSend();\n        PublicStateController.set({\n            activeChain: state.activeChain,\n            selectedNetworkId: state.activeCaipNetwork?.caipNetworkId\n        });\n        StorageUtil.setActiveCaipNetworkId(caipNetwork.caipNetworkId);\n        const isSupported = this.checkIfSupportedNetwork(caipNetwork.chainNamespace);\n        if (!isSupported &&\n            OptionsController.state.enableNetworkSwitch &&\n            !OptionsController.state.allowUnsupportedChain &&\n            !ConnectionController.state.wcBasic) {\n            this.showUnsupportedChainUI();\n        }\n    },\n    addCaipNetwork(caipNetwork) {\n        if (!caipNetwork) {\n            return;\n        }\n        const chain = state.chains.get(caipNetwork.chainNamespace);\n        if (chain) {\n            chain?.caipNetworks?.push(caipNetwork);\n        }\n    },\n    async switchActiveNamespace(namespace) {\n        if (!namespace) {\n            return;\n        }\n        const isDifferentChain = namespace !== ChainController.state.activeChain;\n        const caipNetworkOfNamespace = ChainController.getNetworkData(namespace)?.caipNetwork;\n        const firstNetworkWithChain = ChainController.getCaipNetworkByNamespace(namespace, caipNetworkOfNamespace?.id);\n        if (isDifferentChain && firstNetworkWithChain) {\n            await ChainController.switchActiveNetwork(firstNetworkWithChain);\n        }\n    },\n    async switchActiveNetwork(network) {\n        const activeAdapter = ChainController.state.chains.get(ChainController.state.activeChain);\n        const unsupportedNetwork = !activeAdapter?.caipNetworks?.some(caipNetwork => caipNetwork.id === state.activeCaipNetwork?.id);\n        if (unsupportedNetwork) {\n            RouterController.goBack();\n        }\n        const networkControllerClient = this.getNetworkControllerClient(network.chainNamespace);\n        if (networkControllerClient) {\n            await networkControllerClient.switchCaipNetwork(network);\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SWITCH_NETWORK',\n                properties: { network: network.caipNetworkId }\n            });\n        }\n    },\n    getNetworkControllerClient(chainNamespace) {\n        const chain = chainNamespace || state.activeChain;\n        const chainAdapter = state.chains.get(chain);\n        if (!chainAdapter) {\n            throw new Error('Chain adapter not found');\n        }\n        if (!chainAdapter.networkControllerClient) {\n            throw new Error('NetworkController client not set');\n        }\n        return chainAdapter.networkControllerClient;\n    },\n    getConnectionControllerClient(_chain) {\n        const chain = _chain || state.activeChain;\n        if (!chain) {\n            throw new Error('Chain is required to get connection controller client');\n        }\n        const chainAdapter = state.chains.get(chain);\n        if (!chainAdapter?.connectionControllerClient) {\n            throw new Error('ConnectionController client not set');\n        }\n        return chainAdapter.connectionControllerClient;\n    },\n    getAccountProp(key, _chain) {\n        let chain = state.activeChain;\n        if (_chain) {\n            chain = _chain;\n        }\n        if (!chain) {\n            return undefined;\n        }\n        const chainAccountState = state.chains.get(chain)?.accountState;\n        if (!chainAccountState) {\n            return undefined;\n        }\n        return chainAccountState[key];\n    },\n    getNetworkProp(key, namespace) {\n        const chainNetworkState = state.chains.get(namespace)?.networkState;\n        if (!chainNetworkState) {\n            return undefined;\n        }\n        return chainNetworkState[key];\n    },\n    getRequestedCaipNetworks(chainToFilter) {\n        const adapter = state.chains.get(chainToFilter);\n        const { approvedCaipNetworkIds = [], requestedCaipNetworks = [] } = adapter?.networkState || {};\n        const sortedNetworks = CoreHelperUtil.sortRequestedNetworks(approvedCaipNetworkIds, requestedCaipNetworks);\n        return sortedNetworks;\n    },\n    getAllRequestedCaipNetworks() {\n        const requestedCaipNetworks = [];\n        state.chains.forEach(chainAdapter => {\n            const caipNetworks = this.getRequestedCaipNetworks(chainAdapter.namespace);\n            requestedCaipNetworks.push(...caipNetworks);\n        });\n        return requestedCaipNetworks;\n    },\n    setRequestedCaipNetworks(requestedCaipNetworks, chain) {\n        this.setAdapterNetworkState(chain, { requestedCaipNetworks });\n    },\n    getAllApprovedCaipNetworkIds() {\n        const approvedCaipNetworkIds = [];\n        state.chains.forEach(chainAdapter => {\n            const approvedIds = this.getApprovedCaipNetworkIds(chainAdapter.namespace);\n            approvedCaipNetworkIds.push(...approvedIds);\n        });\n        return approvedCaipNetworkIds;\n    },\n    getActiveCaipNetwork() {\n        return state.activeCaipNetwork;\n    },\n    getActiveCaipAddress() {\n        return state.activeCaipAddress;\n    },\n    getApprovedCaipNetworkIds(namespace) {\n        const adapter = state.chains.get(namespace);\n        const approvedCaipNetworkIds = adapter?.networkState?.approvedCaipNetworkIds || [];\n        return approvedCaipNetworkIds;\n    },\n    async setApprovedCaipNetworksData(namespace) {\n        const networkControllerClient = this.getNetworkControllerClient();\n        const data = await networkControllerClient?.getApprovedCaipNetworksData();\n        this.setAdapterNetworkState(namespace, {\n            approvedCaipNetworkIds: data?.approvedCaipNetworkIds,\n            supportsAllNetworks: data?.supportsAllNetworks\n        });\n    },\n    checkIfSupportedNetwork(namespace, caipNetwork) {\n        const activeCaipNetwork = caipNetwork || state.activeCaipNetwork;\n        const requestedCaipNetworks = this.getRequestedCaipNetworks(namespace);\n        if (!requestedCaipNetworks.length) {\n            return true;\n        }\n        return requestedCaipNetworks?.some(network => network.id === activeCaipNetwork?.id);\n    },\n    checkIfSupportedChainId(chainId) {\n        if (!state.activeChain) {\n            return true;\n        }\n        const requestedCaipNetworks = this.getRequestedCaipNetworks(state.activeChain);\n        return requestedCaipNetworks?.some(network => network.id === chainId);\n    },\n    // Smart Account Network Handlers\n    setSmartAccountEnabledNetworks(smartAccountEnabledNetworks, chain) {\n        this.setAdapterNetworkState(chain, { smartAccountEnabledNetworks });\n    },\n    checkIfSmartAccountEnabled() {\n        const networkId = NetworkUtil.caipNetworkIdToNumber(state.activeCaipNetwork?.caipNetworkId);\n        const activeChain = state.activeChain;\n        if (!activeChain || !networkId) {\n            return false;\n        }\n        const smartAccountEnabledNetworks = this.getNetworkProp('smartAccountEnabledNetworks', activeChain);\n        return Boolean(smartAccountEnabledNetworks?.includes(Number(networkId)));\n    },\n    getActiveNetworkTokenAddress() {\n        const namespace = state.activeCaipNetwork?.chainNamespace || 'eip155';\n        const chainId = state.activeCaipNetwork?.id || 1;\n        const address = ConstantsUtil.NATIVE_TOKEN_ADDRESS[namespace];\n        return `${namespace}:${chainId}:${address}`;\n    },\n    showUnsupportedChainUI() {\n        ModalController.open({ view: 'UnsupportedChain' });\n    },\n    checkIfNamesSupported() {\n        const activeCaipNetwork = state.activeCaipNetwork;\n        return Boolean(activeCaipNetwork?.chainNamespace &&\n            ConstantsUtil.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(activeCaipNetwork.chainNamespace));\n    },\n    resetNetwork(namespace) {\n        this.setAdapterNetworkState(namespace, {\n            approvedCaipNetworkIds: undefined,\n            supportsAllNetworks: true,\n            smartAccountEnabledNetworks: []\n        });\n    },\n    resetAccount(chain) {\n        const chainToWrite = chain;\n        if (!chainToWrite) {\n            throw new Error('Chain is required to set account prop');\n        }\n        state.activeCaipAddress = undefined;\n        this.setChainAccountData(chainToWrite, {\n            smartAccountDeployed: false,\n            currentTab: 0,\n            caipAddress: undefined,\n            address: undefined,\n            balance: undefined,\n            balanceSymbol: undefined,\n            profileName: undefined,\n            profileImage: undefined,\n            addressExplorerUrl: undefined,\n            tokenBalance: [],\n            connectedWalletInfo: undefined,\n            preferredAccountType: undefined,\n            socialProvider: undefined,\n            socialWindow: undefined,\n            farcasterUrl: undefined,\n            allAccounts: [],\n            user: undefined,\n            status: 'disconnected'\n        });\n        ConnectorController.removeConnectorId(chainToWrite);\n    },\n    async disconnect(namespace) {\n        const chainsToDisconnect = getChainsToDisconnect(namespace);\n        try {\n            // Reset send state when disconnecting\n            SendController.resetSend();\n            const disconnectResults = await Promise.allSettled(chainsToDisconnect.map(async ([ns, adapter]) => {\n                try {\n                    const { caipAddress } = this.getAccountData(ns) || {};\n                    if (caipAddress && adapter.connectionControllerClient?.disconnect) {\n                        await adapter.connectionControllerClient.disconnect(ns);\n                    }\n                    this.resetAccount(ns);\n                    this.resetNetwork(ns);\n                }\n                catch (error) {\n                    throw new Error(`Failed to disconnect chain ${ns}: ${error.message}`);\n                }\n            }));\n            ConnectionController.resetWcConnection();\n            const failures = disconnectResults.filter((result) => result.status === 'rejected');\n            if (failures.length > 0) {\n                throw new Error(failures.map(f => f.reason.message).join(', '));\n            }\n            StorageUtil.deleteConnectedSocialProvider();\n            if (namespace) {\n                ConnectorController.removeConnectorId(namespace);\n            }\n            else {\n                ConnectorController.resetConnectorIds();\n            }\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'DISCONNECT_SUCCESS',\n                properties: {\n                    namespace: namespace || 'all'\n                }\n            });\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error(error.message || 'Failed to disconnect chains');\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'DISCONNECT_ERROR',\n                properties: {\n                    message: error.message || 'Failed to disconnect chains'\n                }\n            });\n        }\n    },\n    setIsSwitchingNamespace(isSwitchingNamespace) {\n        state.isSwitchingNamespace = isSwitchingNamespace;\n    },\n    getFirstCaipNetworkSupportsAuthConnector() {\n        const availableChains = [];\n        let firstCaipNetwork = undefined;\n        state.chains.forEach(chain => {\n            if (CommonConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(ns => ns === chain.namespace)) {\n                if (chain.namespace) {\n                    availableChains.push(chain.namespace);\n                }\n            }\n        });\n        if (availableChains.length > 0) {\n            const firstAvailableChain = availableChains[0];\n            firstCaipNetwork = firstAvailableChain\n                ? state.chains.get(firstAvailableChain)?.caipNetworks?.[0]\n                : undefined;\n            return firstCaipNetwork;\n        }\n        return undefined;\n    },\n    getAccountData(chainNamespace) {\n        if (!chainNamespace) {\n            return AccountController.state;\n        }\n        return ChainController.state.chains.get(chainNamespace)?.accountState;\n    },\n    getNetworkData(chainNamespace) {\n        const namespace = chainNamespace || state.activeChain;\n        if (!namespace) {\n            return undefined;\n        }\n        return ChainController.state.chains.get(namespace)?.networkState;\n    },\n    getCaipNetworkByNamespace(chainNamespace, chainId) {\n        if (!chainNamespace) {\n            return undefined;\n        }\n        const chain = ChainController.state.chains.get(chainNamespace);\n        const byChainId = chain?.caipNetworks?.find(network => network.id === chainId);\n        if (byChainId) {\n            return byChainId;\n        }\n        return chain?.networkState?.caipNetwork || chain?.caipNetworks?.[0];\n    },\n    /**\n     * Get the requested CaipNetwork IDs for a given namespace. If namespace is not provided, all requested CaipNetwork IDs will be returned\n     * @param namespace - The namespace to get the requested CaipNetwork IDs for\n     * @returns The requested CaipNetwork IDs\n     */\n    getRequestedCaipNetworkIds() {\n        const namespace = ConnectorController.state.filterByNamespace;\n        const chains = namespace ? [state.chains.get(namespace)] : Array.from(state.chains.values());\n        return chains\n            .flatMap(chain => chain?.caipNetworks || [])\n            .map(caipNetwork => caipNetwork.caipNetworkId);\n    }\n};\n//# sourceMappingURL=ChainController.js.map","import { proxy } from 'valtio/vanilla';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { SnackController } from './SnackController.js';\nconst DEFAULT_OPTIONS = {\n    purchaseCurrencies: [\n        {\n            id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n            name: 'USD Coin',\n            symbol: 'USDC',\n            networks: [\n                {\n                    name: 'ethereum-mainnet',\n                    display_name: 'Ethereum',\n                    chain_id: '1',\n                    contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n                },\n                {\n                    name: 'polygon-mainnet',\n                    display_name: 'Polygon',\n                    chain_id: '137',\n                    contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n                }\n            ]\n        },\n        {\n            id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n            name: 'Ether',\n            symbol: 'ETH',\n            networks: [\n                {\n                    name: 'ethereum-mainnet',\n                    display_name: 'Ethereum',\n                    chain_id: '1',\n                    contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n                },\n                {\n                    name: 'polygon-mainnet',\n                    display_name: 'Polygon',\n                    chain_id: '137',\n                    contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n                }\n            ]\n        }\n    ],\n    paymentCurrencies: [\n        {\n            id: 'USD',\n            payment_method_limits: [\n                {\n                    id: 'card',\n                    min: '10.00',\n                    max: '7500.00'\n                },\n                {\n                    id: 'ach_bank_account',\n                    min: '10.00',\n                    max: '25000.00'\n                }\n            ]\n        },\n        {\n            id: 'EUR',\n            payment_method_limits: [\n                {\n                    id: 'card',\n                    min: '10.00',\n                    max: '7500.00'\n                },\n                {\n                    id: 'ach_bank_account',\n                    min: '10.00',\n                    max: '25000.00'\n                }\n            ]\n        }\n    ]\n};\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getBlockchainApiUrl();\n// -- State --------------------------------------------- //\nconst state = proxy({\n    clientId: null,\n    api: new FetchUtil({ baseUrl, clientId: null }),\n    supportedChains: { http: [], ws: [] }\n});\n// -- Controller ---------------------------------------- //\nexport const BlockchainApiController = {\n    state,\n    async get(request) {\n        const { st, sv } = BlockchainApiController.getSdkProperties();\n        const projectId = OptionsController.state.projectId;\n        const params = {\n            ...(request.params || {}),\n            st,\n            sv,\n            projectId\n        };\n        return state.api.get({\n            ...request,\n            params\n        });\n    },\n    getSdkProperties() {\n        const { sdkType, sdkVersion } = OptionsController.state;\n        return {\n            st: sdkType || 'unknown',\n            sv: sdkVersion || 'unknown'\n        };\n    },\n    async isNetworkSupported(networkId) {\n        if (!networkId) {\n            return false;\n        }\n        try {\n            if (!state.supportedChains.http.length) {\n                await BlockchainApiController.getSupportedNetworks();\n            }\n        }\n        catch (e) {\n            return false;\n        }\n        return state.supportedChains.http.includes(networkId);\n    },\n    async getSupportedNetworks() {\n        const supportedChains = await BlockchainApiController.get({\n            path: 'v1/supported-chains'\n        });\n        state.supportedChains = supportedChains;\n        return supportedChains;\n    },\n    async fetchIdentity({ address, caipNetworkId }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(caipNetworkId);\n        if (!isSupported) {\n            return { avatar: '', name: '' };\n        }\n        const identityCache = StorageUtil.getIdentityFromCacheForAddress(address);\n        if (identityCache) {\n            return identityCache;\n        }\n        const result = await BlockchainApiController.get({\n            path: `/v1/identity/${address}`,\n            params: {\n                sender: ChainController.state.activeCaipAddress\n                    ? CoreHelperUtil.getPlainAddress(ChainController.state.activeCaipAddress)\n                    : undefined\n            }\n        });\n        StorageUtil.updateIdentityCache({\n            address,\n            identity: result,\n            timestamp: Date.now()\n        });\n        return result;\n    },\n    async fetchTransactions({ account, cursor, onramp, signal, cache, chainId }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { data: [], next: undefined };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/account/${account}/history`,\n            params: {\n                cursor,\n                onramp,\n                chainId\n            },\n            signal,\n            cache\n        });\n    },\n    async fetchSwapQuote({ amount, userAddress, from, to, gasPrice }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { quotes: [] };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/convert/quotes`,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            params: {\n                amount,\n                userAddress,\n                from,\n                to,\n                gasPrice\n            }\n        });\n    },\n    async fetchSwapTokens({ chainId }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { tokens: [] };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/convert/tokens`,\n            params: { chainId }\n        });\n    },\n    async fetchTokenPrice({ addresses }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { fungibles: [] };\n        }\n        return state.api.post({\n            path: '/v1/fungible/price',\n            body: {\n                currency: 'usd',\n                addresses,\n                projectId: OptionsController.state.projectId\n            },\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n    },\n    async fetchSwapAllowance({ tokenAddress, userAddress }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { allowance: '0' };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/convert/allowance`,\n            params: {\n                tokenAddress,\n                userAddress\n            },\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n    },\n    async fetchGasPrice({ chainId }) {\n        const { st, sv } = BlockchainApiController.getSdkProperties();\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            throw new Error('Network not supported for Gas Price');\n        }\n        return BlockchainApiController.get({\n            path: `/v1/convert/gas-price`,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            params: {\n                chainId,\n                st,\n                sv\n            }\n        });\n    },\n    async generateSwapCalldata({ amount, from, to, userAddress, disableEstimate }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            throw new Error('Network not supported for Swaps');\n        }\n        return state.api.post({\n            path: '/v1/convert/build-transaction',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: {\n                amount,\n                eip155: {\n                    slippage: ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE\n                },\n                projectId: OptionsController.state.projectId,\n                from,\n                to,\n                userAddress,\n                disableEstimate\n            }\n        });\n    },\n    async generateApproveCalldata({ from, to, userAddress }) {\n        const { st, sv } = BlockchainApiController.getSdkProperties();\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            throw new Error('Network not supported for Swaps');\n        }\n        return BlockchainApiController.get({\n            path: `/v1/convert/build-approve`,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            params: {\n                userAddress,\n                from,\n                to,\n                st,\n                sv\n            }\n        });\n    },\n    async getBalance(address, chainId, forceUpdate) {\n        const { st, sv } = BlockchainApiController.getSdkProperties();\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            SnackController.showError('Token Balance Unavailable');\n            return { balances: [] };\n        }\n        const caipAddress = `${chainId}:${address}`;\n        const cachedBalance = StorageUtil.getBalanceCacheForCaipAddress(caipAddress);\n        if (cachedBalance) {\n            return cachedBalance;\n        }\n        const balance = await BlockchainApiController.get({\n            path: `/v1/account/${address}/balance`,\n            params: {\n                currency: 'usd',\n                chainId,\n                forceUpdate,\n                st,\n                sv\n            }\n        });\n        StorageUtil.updateBalanceCache({\n            caipAddress,\n            balance,\n            timestamp: Date.now()\n        });\n        return balance;\n    },\n    async lookupEnsName(name) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { addresses: {}, attributes: [] };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/profile/account/${name}`,\n            params: { apiVersion: '2' }\n        });\n    },\n    async reverseLookupEnsName({ address }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return [];\n        }\n        return BlockchainApiController.get({\n            path: `/v1/profile/reverse/${address}`,\n            params: {\n                sender: AccountController.state.address,\n                apiVersion: '2'\n            }\n        });\n    },\n    async getEnsNameSuggestions(name) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { suggestions: [] };\n        }\n        return BlockchainApiController.get({\n            path: `/v1/profile/suggestions/${name}`,\n            params: { zone: 'reown.id' }\n        });\n    },\n    async registerEnsName({ coinType, address, message, signature }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { success: false };\n        }\n        return state.api.post({\n            path: `/v1/profile/account`,\n            body: { coin_type: coinType, address, message, signature },\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n    },\n    async generateOnRampURL({ destinationWallets, partnerUserId, defaultNetwork, purchaseAmount, paymentAmount }) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return '';\n        }\n        const response = await state.api.post({\n            path: `/v1/generators/onrampurl`,\n            params: {\n                projectId: OptionsController.state.projectId\n            },\n            body: {\n                destinationWallets,\n                defaultNetwork,\n                partnerUserId,\n                defaultExperience: 'buy',\n                presetCryptoAmount: purchaseAmount,\n                presetFiatAmount: paymentAmount\n            }\n        });\n        return response.url;\n    },\n    async getOnrampOptions() {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { paymentCurrencies: [], purchaseCurrencies: [] };\n        }\n        try {\n            const response = await BlockchainApiController.get({\n                path: `/v1/onramp/options`\n            });\n            return response;\n        }\n        catch (e) {\n            return DEFAULT_OPTIONS;\n        }\n    },\n    async getOnrampQuote({ purchaseCurrency, paymentCurrency, amount, network }) {\n        try {\n            const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n            if (!isSupported) {\n                return null;\n            }\n            const response = await state.api.post({\n                path: `/v1/onramp/quote`,\n                params: {\n                    projectId: OptionsController.state.projectId\n                },\n                body: {\n                    purchaseCurrency,\n                    paymentCurrency,\n                    amount,\n                    network\n                }\n            });\n            return response;\n        }\n        catch (e) {\n            // Mocking response as 1:1 until endpoint is ready\n            return {\n                coinbaseFee: { amount, currency: paymentCurrency.id },\n                networkFee: { amount, currency: paymentCurrency.id },\n                paymentSubtotal: { amount, currency: paymentCurrency.id },\n                paymentTotal: { amount, currency: paymentCurrency.id },\n                purchaseAmount: { amount, currency: paymentCurrency.id },\n                quoteId: 'mocked-quote-id'\n            };\n        }\n    },\n    async getSmartSessions(caipAddress) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return [];\n        }\n        return BlockchainApiController.get({\n            path: `/v1/sessions/${caipAddress}`\n        });\n    },\n    async revokeSmartSession(address, pci, signature) {\n        const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n        if (!isSupported) {\n            return { success: false };\n        }\n        return state.api.post({\n            path: `/v1/sessions/${address}/revoke`,\n            params: {\n                projectId: OptionsController.state.projectId\n            },\n            body: {\n                pci,\n                signature\n            }\n        });\n    },\n    setClientId(clientId) {\n        state.clientId = clientId;\n        state.api = new FetchUtil({ baseUrl, clientId });\n    }\n};\n//# sourceMappingURL=BlockchainApiController.js.map","import { proxy, ref } from 'valtio/vanilla';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { BlockchainApiController } from './BlockchainApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { SnackController } from './SnackController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    currentTab: 0,\n    tokenBalance: [],\n    smartAccountDeployed: false,\n    addressLabels: new Map(),\n    allAccounts: []\n});\n// -- Controller ---------------------------------------- //\nexport const AccountController = {\n    state,\n    replaceState(newState) {\n        if (!newState) {\n            return;\n        }\n        Object.assign(state, ref(newState));\n    },\n    subscribe(callback) {\n        return ChainController.subscribeChainProp('accountState', accountState => {\n            if (accountState) {\n                return callback(accountState);\n            }\n            return undefined;\n        });\n    },\n    subscribeKey(property, callback, chain) {\n        let prev = undefined;\n        return ChainController.subscribeChainProp('accountState', accountState => {\n            if (accountState) {\n                const nextValue = accountState[property];\n                if (prev !== nextValue) {\n                    prev = nextValue;\n                    callback(nextValue);\n                }\n            }\n        }, chain);\n    },\n    setStatus(status, chain) {\n        ChainController.setAccountProp('status', status, chain);\n    },\n    getCaipAddress(chain) {\n        return ChainController.getAccountProp('caipAddress', chain);\n    },\n    setCaipAddress(caipAddress, chain) {\n        const newAddress = caipAddress ? CoreHelperUtil.getPlainAddress(caipAddress) : undefined;\n        if (chain === ChainController.state.activeChain) {\n            ChainController.state.activeCaipAddress = caipAddress;\n        }\n        ChainController.setAccountProp('caipAddress', caipAddress, chain);\n        ChainController.setAccountProp('address', newAddress, chain);\n    },\n    setBalance(balance, balanceSymbol, chain) {\n        ChainController.setAccountProp('balance', balance, chain);\n        ChainController.setAccountProp('balanceSymbol', balanceSymbol, chain);\n    },\n    setProfileName(profileName, chain) {\n        ChainController.setAccountProp('profileName', profileName, chain);\n    },\n    setProfileImage(profileImage, chain) {\n        ChainController.setAccountProp('profileImage', profileImage, chain);\n    },\n    setUser(user, chain) {\n        ChainController.setAccountProp('user', user, chain);\n    },\n    setAddressExplorerUrl(explorerUrl, chain) {\n        ChainController.setAccountProp('addressExplorerUrl', explorerUrl, chain);\n    },\n    setSmartAccountDeployed(isDeployed, chain) {\n        ChainController.setAccountProp('smartAccountDeployed', isDeployed, chain);\n    },\n    setCurrentTab(currentTab) {\n        ChainController.setAccountProp('currentTab', currentTab, ChainController.state.activeChain);\n    },\n    setTokenBalance(tokenBalance, chain) {\n        if (tokenBalance) {\n            ChainController.setAccountProp('tokenBalance', tokenBalance, chain);\n        }\n    },\n    setShouldUpdateToAddress(address, chain) {\n        ChainController.setAccountProp('shouldUpdateToAddress', address, chain);\n    },\n    setAllAccounts(accounts, namespace) {\n        ChainController.setAccountProp('allAccounts', accounts, namespace);\n    },\n    addAddressLabel(address, label, chain) {\n        const map = ChainController.getAccountProp('addressLabels', chain) || new Map();\n        map.set(address, label);\n        ChainController.setAccountProp('addressLabels', map, chain);\n    },\n    removeAddressLabel(address, chain) {\n        const map = ChainController.getAccountProp('addressLabels', chain) || new Map();\n        map.delete(address);\n        ChainController.setAccountProp('addressLabels', map, chain);\n    },\n    setConnectedWalletInfo(connectedWalletInfo, chain) {\n        ChainController.setAccountProp('connectedWalletInfo', connectedWalletInfo, chain, false);\n    },\n    setPreferredAccountType(preferredAccountType, chain) {\n        ChainController.setAccountProp('preferredAccountType', preferredAccountType, chain);\n    },\n    setSocialProvider(socialProvider, chain) {\n        if (socialProvider) {\n            ChainController.setAccountProp('socialProvider', socialProvider, chain);\n        }\n    },\n    setSocialWindow(socialWindow, chain) {\n        ChainController.setAccountProp('socialWindow', socialWindow ? ref(socialWindow) : undefined, chain);\n    },\n    setFarcasterUrl(farcasterUrl, chain) {\n        ChainController.setAccountProp('farcasterUrl', farcasterUrl, chain);\n    },\n    async fetchTokenBalance(onError) {\n        state.balanceLoading = true;\n        const chainId = ChainController.state.activeCaipNetwork?.caipNetworkId;\n        const chain = ChainController.state.activeCaipNetwork?.chainNamespace;\n        const caipAddress = ChainController.state.activeCaipAddress;\n        const address = caipAddress ? CoreHelperUtil.getPlainAddress(caipAddress) : undefined;\n        if (state.lastRetry &&\n            !CoreHelperUtil.isAllowedRetry(state.lastRetry, 30 * ConstantsUtil.ONE_SEC_MS)) {\n            state.balanceLoading = false;\n            return [];\n        }\n        try {\n            if (address && chainId && chain) {\n                const response = await BlockchainApiController.getBalance(address, chainId);\n                /*\n                 * The 1Inch API includes many low-quality tokens in the balance response,\n                 * which appear inconsistently. This filter prevents them from being displayed.\n                 */\n                const filteredBalances = response.balances.filter(balance => balance.quantity.decimals !== '0');\n                this.setTokenBalance(filteredBalances, chain);\n                state.lastRetry = undefined;\n                state.balanceLoading = false;\n                return filteredBalances;\n            }\n        }\n        catch (error) {\n            state.lastRetry = Date.now();\n            onError?.(error);\n            SnackController.showError('Token Balance Unavailable');\n        }\n        finally {\n            state.balanceLoading = false;\n        }\n        return [];\n    },\n    resetAccount(chain) {\n        ChainController.resetAccount(chain);\n    }\n};\n//# sourceMappingURL=AccountController.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ApiController } from './ApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { PublicStateController } from './PublicStateController.js';\nimport { RouterController } from './RouterController.js';\n// -- State --------------------------------------------- //\nconst state = proxy({\n    loading: false,\n    loadingNamespaceMap: new Map(),\n    open: false,\n    shake: false,\n    namespace: undefined\n});\n// -- Controller ---------------------------------------- //\nexport const ModalController = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    async open(options) {\n        const isConnected = AccountController.state.status === 'connected';\n        if (ConnectionController.state.wcBasic) {\n            // No need to add an await here if we are use basic\n            ApiController.prefetch({ fetchNetworkImages: false, fetchConnectorImages: false });\n        }\n        else {\n            await ApiController.prefetch({\n                fetchConnectorImages: !isConnected,\n                fetchFeaturedWallets: !isConnected,\n                fetchRecommendedWallets: !isConnected\n            });\n        }\n        if (options?.namespace) {\n            await ChainController.switchActiveNamespace(options.namespace);\n            ModalController.setLoading(true, options.namespace);\n        }\n        else {\n            ModalController.setLoading(true);\n        }\n        ConnectorController.setFilterByNamespace(options?.namespace);\n        const caipAddress = ChainController.getAccountData(options?.namespace)?.caipAddress;\n        const hasNoAdapters = ChainController.state.noAdapters;\n        if (hasNoAdapters && !caipAddress) {\n            if (CoreHelperUtil.isMobile()) {\n                RouterController.reset('AllWallets');\n            }\n            else {\n                RouterController.reset('ConnectingWalletConnectBasic');\n            }\n        }\n        else if (options?.view) {\n            RouterController.reset(options.view);\n        }\n        else if (caipAddress) {\n            RouterController.reset('Account');\n        }\n        else {\n            RouterController.reset('Connect');\n        }\n        state.open = true;\n        PublicStateController.set({ open: true });\n        EventsController.sendEvent({\n            type: 'track',\n            event: 'MODAL_OPEN',\n            properties: { connected: Boolean(caipAddress) }\n        });\n    },\n    close() {\n        const isEmbeddedEnabled = OptionsController.state.enableEmbedded;\n        const isConnected = Boolean(ChainController.state.activeCaipAddress);\n        // Only send the event if the modal is open and is about to be closed\n        if (state.open) {\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'MODAL_CLOSE',\n                properties: { connected: isConnected }\n            });\n        }\n        state.open = false;\n        ModalController.clearLoading();\n        if (isEmbeddedEnabled) {\n            if (isConnected) {\n                RouterController.replace('Account');\n            }\n            else {\n                RouterController.push('Connect');\n            }\n        }\n        else {\n            PublicStateController.set({ open: false });\n        }\n        ConnectionController.resetUri();\n    },\n    setLoading(loading, namespace) {\n        if (namespace) {\n            state.loadingNamespaceMap.set(namespace, loading);\n        }\n        state.loading = loading;\n        PublicStateController.set({ loading });\n    },\n    clearLoading() {\n        state.loadingNamespaceMap.clear();\n        state.loading = false;\n    },\n    shake() {\n        if (state.shake) {\n            return;\n        }\n        state.shake = true;\n        setTimeout(() => {\n            state.shake = false;\n        }, 500);\n    }\n};\n//# sourceMappingURL=ModalController.js.map","export const ConstantsUtil = {\n    ACCOUNT_TABS: [{ label: 'Tokens' }, { label: 'NFTs' }, { label: 'Activity' }],\n    SECURE_SITE_ORIGIN: (typeof process !== 'undefined' && typeof process.env !== 'undefined'\n        ? process.env['NEXT_PUBLIC_SECURE_SITE_ORIGIN']\n        : undefined) || 'https://secure.walletconnect.org',\n    VIEW_DIRECTION: {\n        Next: 'next',\n        Prev: 'prev'\n    },\n    DEFAULT_CONNECT_METHOD_ORDER: ['email', 'social', 'wallet'],\n    ANIMATION_DURATIONS: {\n        HeaderText: 120,\n        ModalHeight: 150,\n        ViewTransition: 150\n    }\n};\n//# sourceMappingURL=ConstantsUtil.js.map","import { css, unsafeCSS } from 'lit';\nimport { getW3mThemeVariables } from '@reown/appkit-common';\nlet themeTag = undefined;\nlet darkModeTag = undefined;\nlet lightModeTag = undefined;\nexport function initializeTheming(themeVariables, themeMode) {\n    themeTag = document.createElement('style');\n    darkModeTag = document.createElement('style');\n    lightModeTag = document.createElement('style');\n    themeTag.textContent = createRootStyles(themeVariables).core.cssText;\n    darkModeTag.textContent = createRootStyles(themeVariables).dark.cssText;\n    lightModeTag.textContent = createRootStyles(themeVariables).light.cssText;\n    document.head.appendChild(themeTag);\n    document.head.appendChild(darkModeTag);\n    document.head.appendChild(lightModeTag);\n    setColorTheme(themeMode);\n}\nexport function setColorTheme(themeMode) {\n    if (darkModeTag && lightModeTag) {\n        if (themeMode === 'light') {\n            darkModeTag.removeAttribute('media');\n            lightModeTag.media = 'enabled';\n        }\n        else {\n            lightModeTag.removeAttribute('media');\n            darkModeTag.media = 'enabled';\n        }\n    }\n}\nexport function setThemeVariables(themeVariables) {\n    if (themeTag && darkModeTag && lightModeTag) {\n        themeTag.textContent = createRootStyles(themeVariables).core.cssText;\n        darkModeTag.textContent = createRootStyles(themeVariables).dark.cssText;\n        lightModeTag.textContent = createRootStyles(themeVariables).light.cssText;\n    }\n}\nfunction createRootStyles(themeVariables) {\n    return {\n        core: css `\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n      @keyframes w3m-shake {\n        0% {\n          transform: scale(1) rotate(0deg);\n        }\n        20% {\n          transform: scale(1) rotate(-1deg);\n        }\n        40% {\n          transform: scale(1) rotate(1.5deg);\n        }\n        60% {\n          transform: scale(1) rotate(-1.5deg);\n        }\n        80% {\n          transform: scale(1) rotate(1deg);\n        }\n        100% {\n          transform: scale(1) rotate(0deg);\n        }\n      }\n      @keyframes w3m-iframe-fade-out {\n        0% {\n          opacity: 1;\n        }\n        100% {\n          opacity: 0;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in {\n        0% {\n          transform: translateY(50px);\n          opacity: 0;\n        }\n        100% {\n          transform: translateY(0px);\n          opacity: 1;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in-mobile {\n        0% {\n          transform: scale(0.95);\n          opacity: 0;\n        }\n        100% {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n      :root {\n        --w3m-modal-width: 360px;\n        --w3m-color-mix-strength: ${unsafeCSS(themeVariables?.['--w3m-color-mix-strength']\n            ? `${themeVariables['--w3m-color-mix-strength']}%`\n            : '0%')};\n        --w3m-font-family: ${unsafeCSS(themeVariables?.['--w3m-font-family'] ||\n            'Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;')};\n        --w3m-font-size-master: ${unsafeCSS(themeVariables?.['--w3m-font-size-master'] || '10px')};\n        --w3m-border-radius-master: ${unsafeCSS(themeVariables?.['--w3m-border-radius-master'] || '4px')};\n        --w3m-z-index: ${unsafeCSS(themeVariables?.['--w3m-z-index'] || 999)};\n\n        --wui-font-family: var(--w3m-font-family);\n\n        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);\n        --wui-font-size-micro: var(--w3m-font-size-master);\n        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);\n        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);\n        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);\n        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);\n        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);\n        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);\n        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);\n        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);\n\n        --wui-border-radius-5xs: var(--w3m-border-radius-master);\n        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);\n        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);\n        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);\n        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);\n        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);\n        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);\n        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);\n        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);\n\n        --wui-font-weight-light: 400;\n        --wui-font-weight-regular: 500;\n        --wui-font-weight-medium: 600;\n        --wui-font-weight-bold: 700;\n\n        --wui-letter-spacing-2xl: -1.6px;\n        --wui-letter-spacing-medium-title: -0.96px;\n        --wui-letter-spacing-title-6: -0.88px;\n        --wui-letter-spacing-large: -0.8px;\n        --wui-letter-spacing-medium: -0.72px;\n        --wui-letter-spacing-paragraph: -0.64px;\n        --wui-letter-spacing-small: -0.56px;\n        --wui-letter-spacing-tiny: -0.48px;\n        --wui-letter-spacing-micro: -0.2px;\n        --wui-letter-spacing-mini: -0.16px;\n\n        --wui-spacing-0: 0px;\n        --wui-spacing-4xs: 2px;\n        --wui-spacing-3xs: 4px;\n        --wui-spacing-xxs: 6px;\n        --wui-spacing-2xs: 7px;\n        --wui-spacing-xs: 8px;\n        --wui-spacing-1xs: 10px;\n        --wui-spacing-s: 12px;\n        --wui-spacing-m: 14px;\n        --wui-spacing-l: 16px;\n        --wui-spacing-2l: 18px;\n        --wui-spacing-xl: 20px;\n        --wui-spacing-xxl: 24px;\n        --wui-spacing-2xl: 32px;\n        --wui-spacing-3xl: 40px;\n        --wui-spacing-4xl: 90px;\n        --wui-spacing-5xl: 95px;\n\n        --wui-icon-box-size-xxs: 14px;\n        --wui-icon-box-size-xs: 20px;\n        --wui-icon-box-size-sm: 24px;\n        --wui-icon-box-size-md: 32px;\n        --wui-icon-box-size-mdl: 36px;\n        --wui-icon-box-size-lg: 40px;\n        --wui-icon-box-size-2lg: 48px;\n        --wui-icon-box-size-xl: 64px;\n\n        --wui-icon-size-inherit: inherit;\n        --wui-icon-size-xxs: 10px;\n        --wui-icon-size-xs: 12px;\n        --wui-icon-size-sm: 14px;\n        --wui-icon-size-md: 16px;\n        --wui-icon-size-mdl: 18px;\n        --wui-icon-size-lg: 20px;\n        --wui-icon-size-xl: 24px;\n        --wui-icon-size-xxl: 28px;\n\n        --wui-wallet-image-size-inherit: inherit;\n        --wui-wallet-image-size-sm: 40px;\n        --wui-wallet-image-size-md: 56px;\n        --wui-wallet-image-size-lg: 80px;\n\n        --wui-visual-size-size-inherit: inherit;\n        --wui-visual-size-sm: 40px;\n        --wui-visual-size-md: 55px;\n        --wui-visual-size-lg: 80px;\n\n        --wui-box-size-md: 100px;\n        --wui-box-size-lg: 120px;\n\n        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);\n        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);\n\n        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);\n        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);\n        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);\n\n        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);\n\n        --wui-duration-lg: 200ms;\n        --wui-duration-md: 125ms;\n        --wui-duration-sm: 75ms;\n\n        --wui-path-network-sm: path(\n          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'\n        );\n\n        --wui-path-network-md: path(\n          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'\n        );\n\n        --wui-path-network-lg: path(\n          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'\n        );\n\n        --wui-width-network-sm: 36px;\n        --wui-width-network-md: 48px;\n        --wui-width-network-lg: 86px;\n\n        --wui-height-network-sm: 40px;\n        --wui-height-network-md: 54px;\n        --wui-height-network-lg: 96px;\n\n        --wui-icon-size-network-xs: 12px;\n        --wui-icon-size-network-sm: 16px;\n        --wui-icon-size-network-md: 24px;\n        --wui-icon-size-network-lg: 42px;\n\n        --wui-color-inherit: inherit;\n\n        --wui-color-inverse-100: #fff;\n        --wui-color-inverse-000: #000;\n\n        --wui-cover: rgba(20, 20, 20, 0.8);\n\n        --wui-color-modal-bg: var(--wui-color-modal-bg-base);\n\n        --wui-color-accent-100: var(--wui-color-accent-base-100);\n        --wui-color-accent-090: var(--wui-color-accent-base-090);\n        --wui-color-accent-080: var(--wui-color-accent-base-080);\n\n        --wui-color-success-100: var(--wui-color-success-base-100);\n        --wui-color-success-125: var(--wui-color-success-base-125);\n\n        --wui-color-warning-100: var(--wui-color-warning-base-100);\n\n        --wui-color-error-100: var(--wui-color-error-base-100);\n        --wui-color-error-125: var(--wui-color-error-base-125);\n\n        --wui-color-blue-100: var(--wui-color-blue-base-100);\n        --wui-color-blue-90: var(--wui-color-blue-base-90);\n\n        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);\n        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);\n        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);\n        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);\n\n        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);\n\n        --wui-avatar-border: var(--wui-avatar-border-base);\n\n        --wui-thumbnail-border: var(--wui-thumbnail-border-base);\n\n        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);\n\n        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);\n      }\n\n      @supports (background: color-mix(in srgb, white 50%, black)) {\n        :root {\n          --wui-color-modal-bg: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-modal-bg-base)\n          );\n\n          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);\n\n          --wui-color-accent-100: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 100%,\n            transparent\n          );\n          --wui-color-accent-090: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 90%,\n            transparent\n          );\n          --wui-color-accent-080: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 80%,\n            transparent\n          );\n          --wui-color-accent-glass-090: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 90%,\n            transparent\n          );\n          --wui-color-accent-glass-080: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 80%,\n            transparent\n          );\n          --wui-color-accent-glass-020: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 20%,\n            transparent\n          );\n          --wui-color-accent-glass-015: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 15%,\n            transparent\n          );\n          --wui-color-accent-glass-010: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 10%,\n            transparent\n          );\n          --wui-color-accent-glass-005: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 5%,\n            transparent\n          );\n          --wui-color-accent-002: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 2%,\n            transparent\n          );\n\n          --wui-color-fg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-100)\n          );\n          --wui-color-fg-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-125)\n          );\n          --wui-color-fg-150: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-150)\n          );\n          --wui-color-fg-175: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-175)\n          );\n          --wui-color-fg-200: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-200)\n          );\n          --wui-color-fg-225: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-225)\n          );\n          --wui-color-fg-250: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-250)\n          );\n          --wui-color-fg-275: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-275)\n          );\n          --wui-color-fg-300: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-300)\n          );\n          --wui-color-fg-325: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-325)\n          );\n          --wui-color-fg-350: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-350)\n          );\n\n          --wui-color-bg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-100)\n          );\n          --wui-color-bg-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-125)\n          );\n          --wui-color-bg-150: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-150)\n          );\n          --wui-color-bg-175: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-175)\n          );\n          --wui-color-bg-200: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-200)\n          );\n          --wui-color-bg-225: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-225)\n          );\n          --wui-color-bg-250: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-250)\n          );\n          --wui-color-bg-275: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-275)\n          );\n          --wui-color-bg-300: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-300)\n          );\n          --wui-color-bg-325: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-325)\n          );\n          --wui-color-bg-350: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-350)\n          );\n\n          --wui-color-success-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-success-base-100)\n          );\n          --wui-color-success-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-success-base-125)\n          );\n\n          --wui-color-warning-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-warning-base-100)\n          );\n\n          --wui-color-error-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-error-base-100)\n          );\n          --wui-color-blue-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-blue-base-100)\n          );\n          --wui-color-blue-90: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-blue-base-90)\n          );\n          --wui-color-error-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-error-base-125)\n          );\n\n          --wui-icon-box-bg-error-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-error-base-100)\n          );\n          --wui-icon-box-bg-accent-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-blue-base-100)\n          );\n          --wui-icon-box-bg-success-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-success-base-100)\n          );\n          --wui-icon-box-bg-inverse-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-inverse-base-100)\n          );\n\n          --wui-all-wallets-bg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-all-wallets-bg-100)\n          );\n\n          --wui-avatar-border: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-avatar-border-base)\n          );\n\n          --wui-thumbnail-border: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-thumbnail-border-base)\n          );\n\n          --wui-wallet-button-bg: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-wallet-button-bg-base)\n          );\n        }\n      }\n    `,\n        light: css `\n      :root {\n        --w3m-color-mix: ${unsafeCSS(themeVariables?.['--w3m-color-mix'] || '#fff')};\n        --w3m-accent: ${unsafeCSS(getW3mThemeVariables(themeVariables, 'dark')['--w3m-accent'])};\n        --w3m-default: #fff;\n\n        --wui-color-modal-bg-base: ${unsafeCSS(getW3mThemeVariables(themeVariables, 'dark')['--w3m-background'])};\n        --wui-color-accent-base-100: var(--w3m-accent);\n\n        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);\n        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);\n        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);\n        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);\n\n        --wui-color-fg-100: #e4e7e7;\n        --wui-color-fg-125: #d0d5d5;\n        --wui-color-fg-150: #a8b1b1;\n        --wui-color-fg-175: #a8b0b0;\n        --wui-color-fg-200: #949e9e;\n        --wui-color-fg-225: #868f8f;\n        --wui-color-fg-250: #788080;\n        --wui-color-fg-275: #788181;\n        --wui-color-fg-300: #6e7777;\n        --wui-color-fg-325: #9a9a9a;\n        --wui-color-fg-350: #363636;\n\n        --wui-color-bg-100: #141414;\n        --wui-color-bg-125: #191a1a;\n        --wui-color-bg-150: #1e1f1f;\n        --wui-color-bg-175: #222525;\n        --wui-color-bg-200: #272a2a;\n        --wui-color-bg-225: #2c3030;\n        --wui-color-bg-250: #313535;\n        --wui-color-bg-275: #363b3b;\n        --wui-color-bg-300: #3b4040;\n        --wui-color-bg-325: #252525;\n        --wui-color-bg-350: #ffffff;\n\n        --wui-color-success-base-100: #26d962;\n        --wui-color-success-base-125: #30a46b;\n\n        --wui-color-warning-base-100: #f3a13f;\n\n        --wui-color-error-base-100: #f25a67;\n        --wui-color-error-base-125: #df4a34;\n\n        --wui-color-blue-base-100: rgba(102, 125, 255, 1);\n        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);\n\n        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);\n        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);\n        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);\n        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);\n        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);\n        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);\n        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);\n        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);\n        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);\n        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);\n\n        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);\n\n        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);\n\n        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);\n        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);\n        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);\n        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);\n        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);\n        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);\n        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);\n        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);\n        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);\n        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);\n\n        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);\n\n        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);\n        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);\n        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);\n        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);\n        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);\n        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);\n        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);\n        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);\n        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);\n        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);\n        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);\n\n        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);\n\n        --wui-icon-box-bg-error-base-100: #3c2426;\n        --wui-icon-box-bg-blue-base-100: #20303f;\n        --wui-icon-box-bg-success-base-100: #1f3a28;\n        --wui-icon-box-bg-inverse-base-100: #243240;\n\n        --wui-all-wallets-bg-100: #222b35;\n\n        --wui-avatar-border-base: #252525;\n\n        --wui-thumbnail-border-base: #252525;\n\n        --wui-wallet-button-bg-base: var(--wui-color-bg-125);\n\n        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);\n      }\n    `,\n        dark: css `\n      :root {\n        --w3m-color-mix: ${unsafeCSS(themeVariables?.['--w3m-color-mix'] || '#000')};\n        --w3m-accent: ${unsafeCSS(getW3mThemeVariables(themeVariables, 'light')['--w3m-accent'])};\n        --w3m-default: #000;\n\n        --wui-color-modal-bg-base: ${unsafeCSS(getW3mThemeVariables(themeVariables, 'light')['--w3m-background'])};\n        --wui-color-accent-base-100: var(--w3m-accent);\n\n        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);\n        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);\n        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);\n\n        --wui-color-fg-100: #141414;\n        --wui-color-fg-125: #2d3131;\n        --wui-color-fg-150: #474d4d;\n        --wui-color-fg-175: #636d6d;\n        --wui-color-fg-200: #798686;\n        --wui-color-fg-225: #828f8f;\n        --wui-color-fg-250: #8b9797;\n        --wui-color-fg-275: #95a0a0;\n        --wui-color-fg-300: #9ea9a9;\n        --wui-color-fg-325: #9a9a9a;\n        --wui-color-fg-350: #d0d0d0;\n\n        --wui-color-bg-100: #ffffff;\n        --wui-color-bg-125: #f5fafa;\n        --wui-color-bg-150: #f3f8f8;\n        --wui-color-bg-175: #eef4f4;\n        --wui-color-bg-200: #eaf1f1;\n        --wui-color-bg-225: #e5eded;\n        --wui-color-bg-250: #e1e9e9;\n        --wui-color-bg-275: #dce7e7;\n        --wui-color-bg-300: #d8e3e3;\n        --wui-color-bg-325: #f3f3f3;\n        --wui-color-bg-350: #202020;\n\n        --wui-color-success-base-100: #26b562;\n        --wui-color-success-base-125: #30a46b;\n\n        --wui-color-warning-base-100: #f3a13f;\n\n        --wui-color-error-base-100: #f05142;\n        --wui-color-error-base-125: #df4a34;\n\n        --wui-color-blue-base-100: rgba(102, 125, 255, 1);\n        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);\n\n        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);\n        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);\n        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);\n        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);\n        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);\n        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);\n        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);\n        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);\n        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);\n        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);\n\n        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);\n\n        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);\n\n        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);\n        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);\n        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);\n        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);\n        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);\n        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);\n        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);\n        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);\n        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);\n        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);\n\n        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);\n\n        --wui-icon-box-bg-error-base-100: #f4dfdd;\n        --wui-icon-box-bg-blue-base-100: #d9ecfb;\n        --wui-icon-box-bg-success-base-100: #daf0e4;\n        --wui-icon-box-bg-inverse-base-100: #dcecfc;\n\n        --wui-all-wallets-bg-100: #e8f1fa;\n\n        --wui-avatar-border-base: #f3f4f4;\n\n        --wui-thumbnail-border-base: #eaefef;\n\n        --wui-wallet-button-bg-base: var(--wui-color-bg-125);\n\n        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);\n        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);\n        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);\n        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);\n        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);\n        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);\n        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);\n        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);\n        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);\n        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);\n        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);\n\n        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);\n\n        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);\n      }\n    `\n    };\n}\nexport const resetStyles = css `\n  *,\n  *::after,\n  *::before,\n  :host {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-style: normal;\n    text-rendering: optimizeSpeed;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-tap-highlight-color: transparent;\n    font-family: var(--wui-font-family);\n    backface-visibility: hidden;\n  }\n`;\nexport const elementStyles = css `\n  button,\n  a {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    transition:\n      color var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      border var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);\n    will-change: background-color, color, border, box-shadow, border-radius;\n    outline: none;\n    border: none;\n    column-gap: var(--wui-spacing-3xs);\n    background-color: transparent;\n    text-decoration: none;\n  }\n\n  wui-flex {\n    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);\n    will-change: border-radius;\n  }\n\n  button:disabled > wui-wallet-image,\n  button:disabled > wui-all-wallets-image,\n  button:disabled > wui-network-image,\n  button:disabled > wui-image,\n  button:disabled > wui-transaction-visual,\n  button:disabled > wui-logo {\n    filter: grayscale(1);\n  }\n\n  @media (hover: hover) and (pointer: fine) {\n    button:hover:enabled {\n      background-color: var(--wui-color-gray-glass-005);\n    }\n\n    button:active:enabled {\n      background-color: var(--wui-color-gray-glass-010);\n    }\n  }\n\n  button:disabled > wui-icon-box {\n    opacity: 0.5;\n  }\n\n  input {\n    border: none;\n    outline: none;\n    appearance: none;\n  }\n`;\nexport const colorStyles = css `\n  .wui-color-inherit {\n    color: var(--wui-color-inherit);\n  }\n\n  .wui-color-accent-100 {\n    color: var(--wui-color-accent-100);\n  }\n\n  .wui-color-error-100 {\n    color: var(--wui-color-error-100);\n  }\n\n  .wui-color-blue-100 {\n    color: var(--wui-color-blue-100);\n  }\n\n  .wui-color-blue-90 {\n    color: var(--wui-color-blue-90);\n  }\n\n  .wui-color-error-125 {\n    color: var(--wui-color-error-125);\n  }\n\n  .wui-color-success-100 {\n    color: var(--wui-color-success-100);\n  }\n\n  .wui-color-success-125 {\n    color: var(--wui-color-success-125);\n  }\n\n  .wui-color-inverse-100 {\n    color: var(--wui-color-inverse-100);\n  }\n\n  .wui-color-inverse-000 {\n    color: var(--wui-color-inverse-000);\n  }\n\n  .wui-color-fg-100 {\n    color: var(--wui-color-fg-100);\n  }\n\n  .wui-color-fg-200 {\n    color: var(--wui-color-fg-200);\n  }\n\n  .wui-color-fg-300 {\n    color: var(--wui-color-fg-300);\n  }\n\n  .wui-color-fg-325 {\n    color: var(--wui-color-fg-325);\n  }\n\n  .wui-color-fg-350 {\n    color: var(--wui-color-fg-350);\n  }\n\n  .wui-bg-color-inherit {\n    background-color: var(--wui-color-inherit);\n  }\n\n  .wui-bg-color-blue-100 {\n    background-color: var(--wui-color-accent-100);\n  }\n\n  .wui-bg-color-error-100 {\n    background-color: var(--wui-color-error-100);\n  }\n\n  .wui-bg-color-error-125 {\n    background-color: var(--wui-color-error-125);\n  }\n\n  .wui-bg-color-success-100 {\n    background-color: var(--wui-color-success-100);\n  }\n\n  .wui-bg-color-success-125 {\n    background-color: var(--wui-color-success-100);\n  }\n\n  .wui-bg-color-inverse-100 {\n    background-color: var(--wui-color-inverse-100);\n  }\n\n  .wui-bg-color-inverse-000 {\n    background-color: var(--wui-color-inverse-000);\n  }\n\n  .wui-bg-color-fg-100 {\n    background-color: var(--wui-color-fg-100);\n  }\n\n  .wui-bg-color-fg-200 {\n    background-color: var(--wui-color-fg-200);\n  }\n\n  .wui-bg-color-fg-300 {\n    background-color: var(--wui-color-fg-300);\n  }\n\n  .wui-color-fg-325 {\n    background-color: var(--wui-color-fg-325);\n  }\n\n  .wui-color-fg-350 {\n    background-color: var(--wui-color-fg-350);\n  }\n`;\n//# sourceMappingURL=ThemeUtil.js.map","export const UiHelperUtil = {\n    getSpacingStyles(spacing, index) {\n        if (Array.isArray(spacing)) {\n            return spacing[index] ? `var(--wui-spacing-${spacing[index]})` : undefined;\n        }\n        else if (typeof spacing === 'string') {\n            return `var(--wui-spacing-${spacing})`;\n        }\n        return undefined;\n    },\n    getFormattedDate(date) {\n        return new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric' }).format(date);\n    },\n    getHostName(url) {\n        try {\n            const newUrl = new URL(url);\n            return newUrl.hostname;\n        }\n        catch (error) {\n            return '';\n        }\n    },\n    getTruncateString({ string, charsStart, charsEnd, truncate }) {\n        if (string.length <= charsStart + charsEnd) {\n            return string;\n        }\n        if (truncate === 'end') {\n            return `${string.substring(0, charsStart)}...`;\n        }\n        else if (truncate === 'start') {\n            return `...${string.substring(string.length - charsEnd)}`;\n        }\n        return `${string.substring(0, Math.floor(charsStart))}...${string.substring(string.length - Math.floor(charsEnd))}`;\n    },\n    generateAvatarColors(address) {\n        const hash = address\n            .toLowerCase()\n            .replace(/^0x/iu, '')\n            .replace(/[^a-f0-9]/gu, '');\n        const baseColor = hash.substring(0, 6).padEnd(6, '0');\n        const rgbColor = this.hexToRgb(baseColor);\n        const masterBorderRadius = getComputedStyle(document.documentElement).getPropertyValue('--w3m-border-radius-master');\n        const radius = Number(masterBorderRadius?.replace('px', ''));\n        const edge = 100 - 3 * radius;\n        const gradientCircle = `${edge}% ${edge}% at 65% 40%`;\n        const colors = [];\n        for (let i = 0; i < 5; i += 1) {\n            const tintedColor = this.tintColor(rgbColor, 0.15 * i);\n            colors.push(`rgb(${tintedColor[0]}, ${tintedColor[1]}, ${tintedColor[2]})`);\n        }\n        return `\n    --local-color-1: ${colors[0]};\n    --local-color-2: ${colors[1]};\n    --local-color-3: ${colors[2]};\n    --local-color-4: ${colors[3]};\n    --local-color-5: ${colors[4]};\n    --local-radial-circle: ${gradientCircle}\n   `;\n    },\n    hexToRgb(hex) {\n        const bigint = parseInt(hex, 16);\n        const r = (bigint >> 16) & 255;\n        const g = (bigint >> 8) & 255;\n        const b = bigint & 255;\n        return [r, g, b];\n    },\n    tintColor(rgb, tint) {\n        const [r, g, b] = rgb;\n        const tintedR = Math.round(r + (255 - r) * tint);\n        const tintedG = Math.round(g + (255 - g) * tint);\n        const tintedB = Math.round(b + (255 - b) * tint);\n        return [tintedR, tintedG, tintedB];\n    },\n    isNumber(character) {\n        const regex = {\n            number: /^[0-9]+$/u\n        };\n        return regex.number.test(character);\n    },\n    getColorTheme(theme) {\n        if (theme) {\n            return theme;\n        }\n        else if (typeof window !== 'undefined' && window.matchMedia) {\n            if (window.matchMedia('(prefers-color-scheme: dark)')?.matches) {\n                return 'dark';\n            }\n            return 'light';\n        }\n        return 'dark';\n    },\n    splitBalance(input) {\n        const parts = input.split('.');\n        if (parts.length === 2) {\n            return [parts[0], parts[1]];\n        }\n        return ['0', '00'];\n    },\n    roundNumber(number, threshold, fixed) {\n        const roundedNumber = number.toString().length >= threshold ? Number(number).toFixed(fixed) : number;\n        return roundedNumber;\n    },\n    formatNumberToLocalString(value, decimals = 2) {\n        if (value === undefined) {\n            return '0.00';\n        }\n        if (typeof value === 'number') {\n            return value.toLocaleString('en-US', {\n                maximumFractionDigits: decimals,\n                minimumFractionDigits: decimals\n            });\n        }\n        return parseFloat(value).toLocaleString('en-US', {\n            maximumFractionDigits: decimals,\n            minimumFractionDigits: decimals\n        });\n    }\n};\n//# sourceMappingURL=UiHelperUtil.js.map","function standardCustomElement(tagName, descriptor) {\n    const { kind, elements } = descriptor;\n    return {\n        kind,\n        elements,\n        finisher(clazz) {\n            if (!customElements.get(tagName)) {\n                customElements.define(tagName, clazz);\n            }\n        }\n    };\n}\nfunction legacyCustomElement(tagName, clazz) {\n    if (!customElements.get(tagName)) {\n        customElements.define(tagName, clazz);\n    }\n    return clazz;\n}\nexport function customElement(tagName) {\n    return function create(classOrDescriptor) {\n        return typeof classOrDescriptor === 'function'\n            ? legacyCustomElement(tagName, classOrDescriptor)\n            : standardCustomElement(tagName, classOrDescriptor);\n    };\n}\n//# sourceMappingURL=WebComponentsUtil.js.map"],"x_google_ignoreList":[0,56,68,70,103,104,105,106,107,108],"mappings":"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;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACH;CACD,0BAA0B,CAAC,UAAU,SAAS;CAC9C,yBAAyB;EAErB;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EAEA;EACH;CACD,kCAAkC,CAAC,SAAS;CAC5C,mCAAmC,CAAC,UAAU,SAAS;CACvD,mCAAmC,CAAC,UAAU,SAAS;CACvD,sBAAsB;EAClB,QAAQ;EACR,QAAQ;EACR,UAAU;EACV,QAAQ;EACX;CACD,4BAA4B;CAC5B,gBAAgB,EACZ,QAAQ,0CACX;CACD,kBAAkB;EACd,OAAO;EACP,QAAQ;EACR,SAAS;EACT,MAAM;EACN,OAAO;EACP,kBAAkB;EAClB,SAAS;GACL;GACA;GACA;GACA;GACA;GACA;GACA;GACH;EACD,oBAAoB;GAChB;GACA;GACA;GACA;GACA;GACA;GACA;GACH;EACD,SAAS;EACT,WAAW;EACX,YAAY;EACZ,eAAe;EACf,eAAe;EACf,iBAAiB;EACjB,qBAAqB;GAAC;GAAU;GAAS;GAAW;GAAO;EAC3D,qBAAqB;EACxB;CACD,uBAAuB;EACnB,QAAQ;EACR,QAAQ;EACR,UAAU;EACV,QAAQ;EACX;CACD,eAAe;EACX,WAAW;EACX,QAAQ;EACR,OAAO;EACP,QAAQ;EACR,SAAS;EACT,SAAS;EACZ;CACJ;;;;ACnPD,MAAa,cAAc;CAEvB,aAAa;EACT,WAAW;EACX,eAAe;EACf,KAAK;EACL,UAAU;EACb;CACD,eAAe,WAAW,aAAa;AACnC,SAAO,KAAK,KAAK,GAAG,YAAY;;CAEpC,wBAAwB;EACpB,MAAM,YAAY,YAAY,oBAAoB;EAClD,MAAM,gBAAgB,YAAY,wBAAwB;EAC1D,M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"}