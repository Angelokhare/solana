{"version":3,"file":"ConnectorUtil-DWi4HGTv.js","names":["ConstantsUtil","ConstantsUtil","ConstantsUtil"],"sources":["../../@reown/appkit-utils/dist/esm/src/ConstantsUtil.js","../../@reown/appkit-utils/dist/esm/src/HelpersUtil.js","../../@reown/appkit-scaffold-ui/dist/esm/src/utils/WalletUtil.js","../../@reown/appkit-scaffold-ui/dist/esm/src/utils/ConnectorUtil.js"],"sourcesContent":["export const ConstantsUtil = {\n    METMASK_CONNECTOR_NAME: 'MetaMask',\n    TRUST_CONNECTOR_NAME: 'Trust Wallet',\n    SOLFLARE_CONNECTOR_NAME: 'Solflare',\n    PHANTOM_CONNECTOR_NAME: 'Phantom',\n    COIN98_CONNECTOR_NAME: 'Coin98',\n    MAGIC_EDEN_CONNECTOR_NAME: 'Magic Eden',\n    BACKPACK_CONNECTOR_NAME: 'Backpack',\n    BITGET_CONNECTOR_NAME: 'Bitget Wallet',\n    FRONTIER_CONNECTOR_NAME: 'Frontier',\n    XVERSE_CONNECTOR_NAME: 'Xverse Wallet',\n    LEATHER_CONNECTOR_NAME: 'Leather',\n    EIP155: 'eip155',\n    ADD_CHAIN_METHOD: 'wallet_addEthereumChain',\n    EIP6963_ANNOUNCE_EVENT: 'eip6963:announceProvider',\n    EIP6963_REQUEST_EVENT: 'eip6963:requestProvider',\n    CONNECTOR_RDNS_MAP: {\n        coinbaseWallet: 'com.coinbase.wallet',\n        coinbaseWalletSDK: 'com.coinbase.wallet'\n    },\n    CONNECTOR_TYPE_EXTERNAL: 'EXTERNAL',\n    CONNECTOR_TYPE_WALLET_CONNECT: 'WALLET_CONNECT',\n    CONNECTOR_TYPE_INJECTED: 'INJECTED',\n    CONNECTOR_TYPE_ANNOUNCED: 'ANNOUNCED',\n    CONNECTOR_TYPE_AUTH: 'AUTH',\n    CONNECTOR_TYPE_MULTI_CHAIN: 'MULTI_CHAIN',\n    CONNECTOR_TYPE_W3M_AUTH: 'ID_AUTH'\n};\n//# sourceMappingURL=ConstantsUtil.js.map","import { ConstantsUtil } from './ConstantsUtil.js';\nexport const HelpersUtil = {\n    getCaipTokens(tokens) {\n        if (!tokens) {\n            return undefined;\n        }\n        const caipTokens = {};\n        Object.entries(tokens).forEach(([id, token]) => {\n            caipTokens[`${ConstantsUtil.EIP155}:${id}`] = token;\n        });\n        return caipTokens;\n    },\n    isLowerCaseMatch(str1, str2) {\n        return str1?.toLowerCase() === str2?.toLowerCase();\n    }\n};\n//# sourceMappingURL=HelpersUtil.js.map","import { ApiController, ConnectorController, CoreHelperUtil, OptionsController, StorageUtil } from '@reown/appkit-controllers';\nimport { ConnectorUtil } from './ConnectorUtil.js';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nexport const WalletUtil = {\n    filterOutDuplicatesByRDNS(wallets) {\n        const connectors = OptionsController.state.enableEIP6963\n            ? ConnectorController.state.connectors\n            : [];\n        const recent = StorageUtil.getRecentWallets();\n        const connectorRDNSs = connectors\n            .map(connector => connector.info?.rdns)\n            .filter(Boolean);\n        const recentRDNSs = recent.map(wallet => wallet.rdns).filter(Boolean);\n        const allRDNSs = connectorRDNSs.concat(recentRDNSs);\n        if (allRDNSs.includes('io.metamask.mobile') && CoreHelperUtil.isMobile()) {\n            const index = allRDNSs.indexOf('io.metamask.mobile');\n            allRDNSs[index] = 'io.metamask';\n        }\n        const filtered = wallets.filter(wallet => !allRDNSs.includes(String(wallet?.rdns)));\n        return filtered;\n    },\n    filterOutDuplicatesByIds(wallets) {\n        const connectors = ConnectorController.state.connectors.filter(connector => connector.type === 'ANNOUNCED' || connector.type === 'INJECTED');\n        const recent = StorageUtil.getRecentWallets();\n        const connectorIds = connectors.map(connector => connector.explorerId);\n        const recentIds = recent.map(wallet => wallet.id);\n        const allIds = connectorIds.concat(recentIds);\n        const filtered = wallets.filter(wallet => !allIds.includes(wallet?.id));\n        return filtered;\n    },\n    filterOutDuplicateWallets(wallets) {\n        const uniqueByRDNS = this.filterOutDuplicatesByRDNS(wallets);\n        const uniqueWallets = this.filterOutDuplicatesByIds(uniqueByRDNS);\n        return uniqueWallets;\n    },\n    markWalletsAsInstalled(wallets) {\n        const { connectors } = ConnectorController.state;\n        const installedConnectors = connectors\n            .filter(c => c.type === 'ANNOUNCED')\n            .reduce((acum, val) => {\n            if (!val.info?.rdns) {\n                return acum;\n            }\n            acum[val.info.rdns] = true;\n            return acum;\n        }, {});\n        const walletsWithInstalled = wallets.map(wallet => ({\n            ...wallet,\n            installed: Boolean(wallet.rdns) && Boolean(installedConnectors[wallet.rdns ?? ''])\n        }));\n        const sortedWallets = walletsWithInstalled.sort((a, b) => Number(b.installed) - Number(a.installed));\n        return sortedWallets;\n    },\n    getConnectOrderMethod(_features, _connectors) {\n        const connectMethodOrder = _features?.connectMethodsOrder || OptionsController.state.features?.connectMethodsOrder;\n        const connectors = _connectors || ConnectorController.state.connectors;\n        if (connectMethodOrder) {\n            return connectMethodOrder;\n        }\n        const { injected, announced } = ConnectorUtil.getConnectorsByType(connectors, ApiController.state.recommended, ApiController.state.featured);\n        const shownInjected = injected.filter(ConnectorUtil.showConnector);\n        const shownAnnounced = announced.filter(ConnectorUtil.showConnector);\n        if (shownInjected.length || shownAnnounced.length) {\n            return ['wallet', 'email', 'social'];\n        }\n        return ConstantsUtil.DEFAULT_CONNECT_METHOD_ORDER;\n    }\n};\n//# sourceMappingURL=WalletUtil.js.map","import { ConstantsUtil } from '@reown/appkit-common';\nimport { ApiController, ChainController, ConnectionController, ConnectorController, CoreHelperUtil, OptionsController, StorageUtil } from '@reown/appkit-controllers';\nimport { HelpersUtil } from '@reown/appkit-utils';\nimport { WalletUtil } from './WalletUtil.js';\nexport const ConnectorUtil = {\n    getConnectorsByType(connectors, recommended, featured) {\n        const { customWallets } = OptionsController.state;\n        const recent = StorageUtil.getRecentWallets();\n        const filteredRecommended = WalletUtil.filterOutDuplicateWallets(recommended);\n        const filteredFeatured = WalletUtil.filterOutDuplicateWallets(featured);\n        const multiChain = connectors.filter(connector => connector.type === 'MULTI_CHAIN');\n        const announced = connectors.filter(connector => connector.type === 'ANNOUNCED');\n        const injected = connectors.filter(connector => connector.type === 'INJECTED');\n        const external = connectors.filter(connector => connector.type === 'EXTERNAL');\n        return {\n            custom: customWallets,\n            recent,\n            external,\n            multiChain,\n            announced,\n            injected,\n            recommended: filteredRecommended,\n            featured: filteredFeatured\n        };\n    },\n    showConnector(connector) {\n        const rdns = connector.info?.rdns;\n        const isRDNSExcluded = Boolean(rdns) && ApiController.state.excludedWallets.some(wallet => wallet.rdns === rdns);\n        const isNameExcluded = Boolean(connector.name) &&\n            ApiController.state.excludedWallets.some(wallet => HelpersUtil.isLowerCaseMatch(wallet.name, connector.name));\n        if (connector.type === 'INJECTED') {\n            if (!CoreHelperUtil.isMobile() && connector.name === 'Browser Wallet') {\n                return false;\n            }\n            if (!rdns && !ConnectionController.checkInstalled()) {\n                return false;\n            }\n            if (isRDNSExcluded || isNameExcluded) {\n                return false;\n            }\n        }\n        if (connector.type === 'ANNOUNCED' && (isRDNSExcluded || isNameExcluded)) {\n            return false;\n        }\n        return true;\n    },\n    getIsConnectedWithWC() {\n        const chains = Array.from(ChainController.state.chains.values());\n        const isConnectedWithWC = chains.some(chain => {\n            const connectorId = ConnectorController.getConnectorId(chain.namespace);\n            return connectorId === ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n        });\n        return isConnectedWithWC;\n    },\n    getConnectorTypeOrder({ recommended, featured, custom, recent, announced, injected, multiChain, external, overriddenConnectors = OptionsController.state.features?.connectorTypeOrder ?? [] }) {\n        const isConnectedWithWC = ConnectorUtil.getIsConnectedWithWC();\n        const isWCEnabled = OptionsController.state.enableWalletConnect;\n        const allConnectors = [\n            { type: 'walletConnect', isEnabled: isWCEnabled && !isConnectedWithWC },\n            { type: 'recent', isEnabled: recent.length > 0 },\n            { type: 'injected', isEnabled: [...injected, ...announced, ...multiChain].length > 0 },\n            { type: 'featured', isEnabled: featured.length > 0 },\n            { type: 'custom', isEnabled: custom && custom.length > 0 },\n            { type: 'external', isEnabled: external.length > 0 },\n            { type: 'recommended', isEnabled: recommended.length > 0 }\n        ];\n        const enabledConnectors = allConnectors.filter(option => option.isEnabled);\n        const enabledConnectorTypes = new Set(enabledConnectors.map(option => option.type));\n        const prioritizedConnectors = overriddenConnectors\n            .filter(type => enabledConnectorTypes.has(type))\n            .map(type => ({ type, isEnabled: true }));\n        const remainingConnectors = enabledConnectors.filter(({ type: enabledConnectorType }) => {\n            const hasPrioritizedConnector = prioritizedConnectors.some(({ type: prioritizedConnectorType }) => prioritizedConnectorType === enabledConnectorType);\n            return !hasPrioritizedConnector;\n        });\n        return Array.from(new Set([...prioritizedConnectors, ...remainingConnectors].map(({ type }) => type)));\n    }\n};\n//# sourceMappingURL=ConnectorUtil.js.map"],"mappings":"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"}